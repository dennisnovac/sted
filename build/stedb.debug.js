(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.stedb = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
function log(){}function info(){console.log.apply(console,arguments)}function warn(){console.log.apply(console,arguments)}function error(){console.warn.apply(console,arguments)}function time(e){times[e]=Date.now()}function timeEnd(e){var t=times[e];if(!t)throw new Error("No such label: "+e);var a=Date.now()-t;console.log(e+": "+a+"ms")}function trace(){var e=new Error;e.name="Trace",e.message=util.format.apply(null,arguments),console.error(e.stack)}function dir(e){console.log(util.inspect(e)+"\n")}function assert(e){if(!e){var t=slice.call(arguments,1);assert.ok(!1,util.format.apply(null,t))}}var util=require("util"),assert=require("assert"),slice=Array.prototype.slice,console,times={};console="undefined"!=typeof global&&global.console?global.console:"undefined"!=typeof window&&window.console?window.console:{};for(var functions=[[log,"log"],[info,"info"],[warn,"warn"],[error,"error"],[time,"time"],[timeEnd,"timeEnd"],[trace,"trace"],[dir,"dir"],[assert,"assert"]],i=0;i<functions.length;i++){var tuple=functions[i],f=tuple[0],name=tuple[1];console[name]||(console[name]=f)}module.exports=console;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"assert":21,"util":26}],2:[function(require,module,exports){
!function(e){var t=0,o=window.navigator.userAgent,i=o.indexOf("MSIE ")>0,a=i?"-ie":"",n=i?!1:/mozilla/.test(o.toLowerCase())&&!/webkit/.test(o.toLowerCase()),r=[],l=["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],s=["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"],d=["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],c=[["003366","336699","3366cc","003399","000099","0000cc","000066"],["006666","006699","0099cc","0066cc","0033cc","0000ff","3333ff","333399"],["669999","009999","33cccc","00ccff","0099ff","0066ff","3366ff","3333cc","666699"],["339966","00cc99","00ffcc","00ffff","33ccff","3399ff","6699ff","6666ff","6600ff","6600cc"],["339933","00cc66","00ff99","66ffcc","66ffff","66ccff","99ccff","9999ff","9966ff","9933ff","9900ff"],["006600","00cc00","00ff00","66ff99","99ffcc","ccffff","ccccff","cc99ff","cc66ff","cc33ff","cc00ff","9900cc"],["003300","009933","33cc33","66ff66","99ff99","ccffcc","ffffff","ffccff","ff99ff","ff66ff","ff00ff","cc00cc","660066"],["333300","009900","66ff33","99ff66","ccff99","ffffcc","ffcccc","ff99cc","ff66cc","ff33cc","cc0099","993399"],["336600","669900","99ff33","ccff66","ffff99","ffcc99","ff9999","ff6699","ff3399","cc3399","990099"],["666633","99cc00","ccff33","ffff66","ffcc66","ff9966","ff6666","ff0066","d60094","993366"],["a58800","cccc00","ffff00","ffcc00","ff9933","ff6600","ff0033","cc0066","660033"],["996633","cc9900","ff9900","cc6600","ff3300","ff0000","cc0000","990033"],["663300","996600","cc3300","993300","990000","800000","993333"]],u="#0000ffff",f=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},p=function(e){return f(Number(e))},m=function(e){var t=f(e);return t+t+t},g=function(e){if(e.length>10){var t=1+e.indexOf("("),o=e.indexOf(")"),i=e.substring(t,o).split(",");return["#",p(i[0]),p(i[1]),p(i[2])].join("")}return e};e.widget("evol.colorpicker",{version:"3.2.1",options:{color:null,showOn:"both",hideButton:!1,displayIndicator:!0,transparentColor:!1,history:!0,defaultPalette:"theme",strings:"Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet."},_active:!1,_create:function(){var o=this;switch(this._paletteIdx="theme"==this.options.defaultPalette?1:2,this._id="evo-cp"+t++,this._enabled=!0,this.options.showOn=this.options.hideButton?"focus":this.options.showOn,this.element.get(0).tagName){case"INPUT":var r=this.options.color,l=this.element,s=("focus"===this.options.showOn?"":"evo-pointer ")+"evo-colorind"+(n?"-ff":a)+(this.options.hideButton?" evo-hidden-button":""),d="";if(this._isPopup=!0,this._palette=null,null!==r)l.val(r);else{var c=l.val();""!==c&&(r=this.options.color=c)}r===u?s+=" evo-transparent":d=null!==r?"background-color:"+r:"",l.addClass("colorPicker "+this._id).wrap('<div style="width:'+(this.options.hideButton?this.element.width():this.element.width()+32)+"px;"+(i?"margin-bottom:-21px;":"")+(n?"padding:1px 0;":"")+'"></div>').after('<div class="'+s+'" style="'+d+'"></div>').on("keyup onpaste",function(){var t=e(this).val();t!=o.options.color&&o._setValue(t,!0)});var f=this.options.showOn;("both"===f||"focus"===f)&&l.on("focus",function(){o.showPalette()}),("both"===f||"button"===f)&&l.next().on("click",function(e){return e.stopPropagation(),o.showPalette(),!1});break;default:this._isPopup=!1,this._palette=this.element.html(this._paletteHTML()).attr("aria-haspopup","true"),this._bindColors()}if(this.options.history&&(r&&this._add2History(r),this.options.initialHistory)){var p=this.options.initialHistory;for(var m in p)this._add2History(p[m])}},_paletteHTML:function(){var e=this._paletteIdx=Math.abs(this._paletteIdx),t=this.options,o=t.strings.split(","),i='<div class="evo-pop'+a+' ui-widget ui-widget-content ui-corner-all"'+(this._isPopup?' style="position:absolute"':"")+"><span>"+this["_paletteHTML"+e]()+'</span><div class="evo-more"><a href="javascript:void(0)">'+o[1+e]+"</a>";return t.history&&(i+='<a href="javascript:void(0)" class="evo-hist">'+o[5]+"</a>"),i+="</div>",t.displayIndicator&&(i+=this._colorIndHTML(this.options.color)+this._colorIndHTML("")),i+="</div>"},_colorIndHTML:function(e){var t=i?"evo-colorbox-ie ":"",o="";return e?e===u?t+="evo-transparent":o="background-color:"+e:o="display:none",'<div class="evo-color" style="float:left"><div style="'+o+'" class="'+t+'"></div><span>'+(e?e:"")+"</span></div>"},_paletteHTML1:function(){for(var e=this.options,t=e.strings.split(","),o='<td style="background-color:#',n=i?'"><div style="width:2px;"></div></td>':'"><span/></td>',r='<tr><th colspan="10" class="ui-widget-content">',c='<table class="evo-palette'+a+'">'+r+t[0]+"</th></tr><tr>",u=0;10>u;u++)c+=o+l[u]+n;for(c+="</tr>",i||(c+='<tr><th colspan="10"></th></tr>'),c+='<tr class="top">',u=0;10>u;u++)c+=o+s[u]+n;for(var f=1;4>f;f++)for(c+='</tr><tr class="in">',u=0;10>u;u++)c+=o+s[10*f+u]+n;for(c+='</tr><tr class="bottom">',u=40;50>u;u++)c+=o+s[u]+n;for(c+="</tr>"+r,e.transparentColor&&(c+='<div class="evo-transparent evo-tr-box"></div>'),c+=t[1]+"</th></tr><tr>",u=0;10>u;u++)c+=o+d[u]+n;return c+="</tr></table>"},_paletteHTML2:function(){for(var e,t,o='<td style="background-color:#',n=i?'"><div style="width:5px;"></div></td>':'"><span/></td>',r='<table class="evo-palette2'+a+'"><tr>',l="</tr></table>",s='<div class="evo-palcenter">',d=0,u=c.length;u>d;d++){s+=r;var f=c[d];for(e=0,t=f.length;t>e;e++)s+=o+f[e]+n;s+=l}s+='<div class="evo-sep"/>';var p="";for(s+=r,e=255;e>10;e-=10)s+=o+m(e)+n,e-=10,p+=o+m(e)+n;return s+=l+r+p+l+"</div>"},_switchPalette:function(t){if(this._enabled){var o,i,a,n=this.options.strings.split(",");if(e(t).hasClass("evo-hist")){var l=['<table class="evo-palette"><tr><th class="ui-widget-content">',n[5],"</th></tr></tr></table>",'<div class="evo-cHist">'];if(0===r.length)l.push("<p>&nbsp;",n[6],"</p>");else for(var s=r.length-1;s>-1;s--)9===r[s].length?l.push('<div class="evo-transparent"></div>'):l.push('<div style="background-color:',r[s],'"></div>');l.push("</div>"),o=-this._paletteIdx,i=l.join(""),a=n[4]}else this._paletteIdx<0?(o=-this._paletteIdx,this._palette.find(".evo-hist").show()):o=2==this._paletteIdx?1:2,i=this["_paletteHTML"+o](),a=n[o+1],this._paletteIdx=o;this._paletteIdx=o;var d=this._palette.find(".evo-more").prev().html(i).end().children().eq(0).html(a);0>o&&d.next().hide()}},_downOrUpPositioning:function(){for(var e=this.element,t=0;null!==e&&100>t;){if("visible"!=e.css("overflow")){var o=this._palette.offset().top+this._palette.height(),i=e.offset().top+e.height(),a=this._palette.offset().top-this._palette.height()-this.element.outerHeight(),n=e.offset().top,r=o>i&&a>n;r?this._palette.css({bottom:this.element.outerHeight()+"px"}):this._palette.css({bottom:"auto"});break}if("HTML"==e[0].tagName)break;e=e.offsetParent(),t++}},showPalette:function(){if(this._enabled&&(this._active=!0,e(".colorPicker").not("."+this._id).colorpicker("hidePalette"),null===this._palette)){this._palette=this.element.next().after(this._paletteHTML()).next().on("click",function(e){return e.stopPropagation(),!1}),this._bindColors();var t=this;this._isPopup&&(this._downOrUpPositioning(),e(document.body).on("click."+t._id,function(e){e.target!=t.element.get(0)&&t.hidePalette()}).on("keyup."+t._id,function(e){27===e.keyCode&&t.hidePalette()}))}return this},hidePalette:function(){if(this._isPopup&&this._palette){e(document.body).off("click."+this._id);var t=this;this._palette.off("mouseover click","td,.evo-transparent").fadeOut(function(){t._palette.remove(),t._palette=t._cTxt=null}).find(".evo-more a").off("click")}return this},_bindColors:function(){var t=this,o=this.options,i=this._palette.find("div.evo-color"),a=o.history?"td,.evo-cHist>div":"td";o.transparentColor&&(a+=",.evo-transparent"),this._cTxt1=i.eq(0).children().eq(0),this._cTxt2=i.eq(1).children().eq(0),this._palette.on("click",a,function(){if(t._enabled){var o=e(this);t._setValue(o.hasClass("evo-transparent")?u:g(o.attr("style").substring(17))),t._active=!1}}).on("mouseover",a,function(){if(t._enabled){var o=e(this),i=o.hasClass("evo-transparent")?u:g(o.attr("style").substring(17));t.options.displayIndicator&&t._setColorInd(i,2),t._active&&t.element.trigger("mouseover.color",i)}}).find(".evo-more a").on("click",function(){t._switchPalette(this)})},val:function(e){return"undefined"==typeof e?this.options.color:(this._setValue(e),this)},_setValue:function(e,t){e=e.replace(/ /g,""),this.options.color=e,this._isPopup?(t||this.hidePalette(),this._setBoxColor(this.element.val(e).next(),e)):this._setColorInd(e,1),this.options.history&&this._paletteIdx>0&&this._add2History(e),this.element.trigger("change.color",e)},_setColorInd:function(e,t){var o=this["_cTxt"+t];this._setBoxColor(o,e),o.next().html(e)},_setBoxColor:function(e,t){t===u?e.addClass("evo-transparent").removeAttr("style"):e.removeClass("evo-transparent").attr("style","background-color:"+t)},_setOption:function(e,t){"color"==e?this._setValue(t,!0):this.options[e]=t},_add2History:function(e){for(var t=r.length,o=0;t>o;o++)if(e==r[o])return;t>27&&r.shift(),r.push(e)},clear:function(){this.hidePalette().val("")},enable:function(){var e=this.element;return this._isPopup?e.removeAttr("disabled"):e.css({opacity:"1","pointer-events":"auto"}),"focus"!==this.options.showOn&&this.element.next().addClass("evo-pointer"),e.removeAttr("aria-disabled"),this._enabled=!0,this},disable:function(){var e=this.element;return this._isPopup?e.attr("disabled","disabled"):(this.hidePalette(),e.css({opacity:"0.3","pointer-events":"none"})),"focus"!==this.options.showOn&&this.element.next().removeClass("evo-pointer"),e.attr("aria-disabled","true"),this._enabled=!1,this},isDisabled:function(){return!this._enabled},destroy:function(){e(document.body).off("click."+this._id),this._palette&&(this._palette.off("mouseover click","td,.evo-cHist>div,.evo-transparent").find(".evo-more a").off("click"),this._isPopup&&this._palette.remove(),this._palette=this._cTxt=null),this._isPopup&&this.element.next().off("click").remove().end().off("focus").unwrap(),this.element.removeClass("colorPicker "+this.id).empty(),e.Widget.prototype.destroy.call(this)}})}(jQuery);

},{}],3:[function(require,module,exports){
!function(e){"use strict";var t="Compound",o="Identifier",n="MemberExpression",r="Literal",i="ThisExpression",a="CallExpression",l="UnaryExpression",s="BinaryExpression",d="LogicalExpression",c="ConditionalExpression",u="ArrayExpression",f=46,p=44,m=39,g=34,b=40,h=41,v=91,y=93,k=63,w=59,x=58,_=function(e,t){var o=new Error(e+" at character "+t);throw o.index=t,o.description=e,o},$=!0,C={"-":$,"!":$,"~":$,"+":$},S={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},O=function(e){var t,o=0;for(var n in e)(t=n.length)>o&&e.hasOwnProperty(n)&&(o=t);return o},T=O(C),E=O(S),A={"true":!0,"false":!1,"null":null},I="this",D=function(e){return S[e]||0},M=function(e,t,o){var n="||"===e||"&&"===e?d:s;return{type:n,operator:e,left:t,right:o}},P=function(e){return e>=48&&57>=e},j=function(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=128&&!S[String.fromCharCode(e)]},B=function(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||e>=128&&!S[String.fromCharCode(e)]},H=function(e){for(var s,d,$=0,O=e.charAt,H=e.charCodeAt,q=function(t){return O.call(e,t)},N=function(t){return H.call(e,t)},R=e.length,F=function(){for(var e=N($);32===e||9===e||10===e||13===e;)e=N(++$)},L=function(){var e,t,o=V();return F(),N($)!==k?o:($++,e=L(),e||_("Expected expression",$),F(),N($)===x?($++,t=L(),t||_("Expected expression",$),{type:c,test:o,consequent:e,alternate:t}):(_("Expected :",$),void 0))},U=function(){F();for(var t=e.substr($,E),o=t.length;o>0;){if(S.hasOwnProperty(t))return $+=o,t;t=t.substr(0,--o)}return!1},V=function(){var e,t,o,n,r,i,a,l;if(i=z(),t=U(),!t)return i;for(r={value:t,prec:D(t)},a=z(),a||_("Expected expression after "+t,$),n=[i,r,a];(t=U())&&(o=D(t),0!==o);){for(r={value:t,prec:o};n.length>2&&o<=n[n.length-2].prec;)a=n.pop(),t=n.pop().value,i=n.pop(),e=M(t,i,a),n.push(e);e=z(),e||_("Expected expression after "+t,$),n.push(r,e)}for(l=n.length-1,e=n[l];l>1;)e=M(n[l-1].value,n[l-2],e),l-=2;return e},z=function(){var t,o,n;if(F(),t=N($),P(t)||t===f)return J();if(t===m||t===g)return G();if(j(t)||t===b)return Z();if(t===v)return K();for(o=e.substr($,T),n=o.length;n>0;){if(C.hasOwnProperty(o))return $+=n,{type:l,operator:o,argument:z(),prefix:!0};o=o.substr(0,--n)}return!1},J=function(){for(var e,t,o="";P(N($));)o+=q($++);if(N($)===f)for(o+=q($++);P(N($));)o+=q($++);if(e=q($),"e"===e||"E"===e){for(o+=q($++),e=q($),("+"===e||"-"===e)&&(o+=q($++));P(N($));)o+=q($++);P(N($-1))||_("Expected exponent ("+o+q($)+")",$)}return t=N($),j(t)?_("Variable names cannot start with a number ("+o+q($)+")",$):t===f&&_("Unexpected period",$),{type:r,value:parseFloat(o),raw:o}},G=function(){for(var e,t="",o=q($++),n=!1;R>$;){if(e=q($++),e===o){n=!0;break}if("\\"===e)switch(e=q($++)){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="";break;default:t+="\\"+e}else t+=e}return n||_('Unclosed quote after "'+t+'"',$),{type:r,value:t,raw:o+t+o}},W=function(){var t,n=N($),a=$;for(j(n)?$++:_("Unexpected "+q($),$);R>$&&(n=N($),B(n));)$++;return t=e.slice(a,$),A.hasOwnProperty(t)?{type:r,value:A[t],raw:t}:t===I?{type:i}:{type:o,name:t}},Y=function(e){for(var o,n,r=[],i=!1;R>$;){if(F(),o=N($),o===e){i=!0,$++;break}o===p?$++:(n=L(),n&&n.type!==t||_("Expected comma",$),r.push(n))}return i||_("Expected "+String.fromCharCode(e),$),r},Z=function(){var e,t;for(e=N($),t=e===b?Q():W(),F(),e=N($);e===f||e===v||e===b;)$++,e===f?(F(),t={type:n,computed:!1,object:t,property:W()}):e===v?(t={type:n,computed:!0,object:t,property:L()},F(),e=N($),e!==y&&_("Unclosed [",$),$++):e===b&&(t={type:a,arguments:Y(h),callee:t}),F(),e=N($);return t},Q=function(){$++;var e=L();return F(),N($)===h?($++,e):(_("Unclosed (",$),void 0)},K=function(){return $++,{type:u,elements:Y(y)}},X=[];R>$;)s=N($),s===w||s===p?$++:(d=L())?X.push(d):R>$&&_('Unexpected "'+q($)+'"',$);return 1===X.length?X[0]:{type:t,body:X}};if(H.version="<%= version %>",H.toString=function(){return"JavaScript Expression Parser (JSEP) v"+H.version},H.addUnaryOp=function(e){return T=Math.max(e.length,T),C[e]=$,this},H.addBinaryOp=function(e,t){return E=Math.max(e.length,E),S[e]=t,this},H.addLiteral=function(e,t){return A[e]=t,this},H.removeUnaryOp=function(e){return delete C[e],e.length===T&&(T=O(C)),this},H.removeAllUnaryOps=function(){return C={},T=0,this},H.removeBinaryOp=function(e){return delete S[e],e.length===E&&(E=O(S)),this},H.removeAllBinaryOps=function(){return S={},E=0,this},H.removeLiteral=function(e){return delete A[e],this},H.removeAllLiterals=function(){return A={},this},"undefined"==typeof exports){var q=e.jsep;e.jsep=H,H.noConflict=function(){return e.jsep===H&&(e.jsep=q),H}}else"undefined"!=typeof module&&module.exports?exports=module.exports=H:exports.parse=H}(this);

},{}],4:[function(require,module,exports){
"use strict";var utils=require("./utils");module.exports=function(e){function t(t,i,r){function l(o){for(var i=o[0],l=o[1],s=new utils.Selector(i),d=s.parsed(),c=a(d),u=0;u<d.length;++u){var p=d[u];if(p.pseudos)for(var g=0;g<p.pseudos.length;++g){var b=p.pseudos[g];if(e.ignoredPseudos.indexOf(b.name)>=0)return}}if(c){var h=d[d.length-1],v=h.pseudos;h.pseudos=n(h.pseudos),i=d.toString(),h.pseudos=v}var y;try{y=t(i)}catch(k){return}y.each(function(){function o(t,o){for(var i=0,n=t.length;n>i;i++)if("property"==t[i].type){var l=t[i].name,s=t[i].value,d=null!==t[i].value.match(/!important$/);d&&!r.preserveImportant&&(s=s.replace(/\s*!important$/,""));var c=[t[i].position.start.line,t[i].position.start.col],u=new utils.Property(l,s,o,d?2:0,c),p=a.styleProps[l];e.excludedProperties.indexOf(l)<0&&(p&&p.compare(u)===u||!p)&&(p&&p.selector!==o?delete a.styleProps[l]:p&&(u.nextProp=p),a.styleProps[l]=u)}}var a=this;if(!(a.name&&e.nonVisualElements.indexOf(a.name.toUpperCase())>=0)){if(c){var i="pseudo"+c,n=a[i];n||(n=a[i]=t("<span />").get(0),n.pseudoElementType=c,n.pseudoElementParent=a,a[i]=n),a=n}if(!a.styleProps){if(a.styleProps={},t(a).attr(m)){var d="* { "+t(a).attr(m)+" } ";o(utils.parseCSS(d)[0][1],new utils.Selector("<style>",!0))}f.push(a)}o(l,s)}})}function s(e){Object.keys(e.styleProps).length;var o=[];Object.keys(e.styleProps).forEach(function(t){for(var a=e.styleProps[t];"undefined"!=typeof a;)o.push(a),a=a.nextProp}),o.sort(function(e,t){return e.compareFunc(t)});var a=o.filter(function(e){return"content"!==e.prop}).map(function(e){return e.prop+": "+e.value.replace(/["]/g,"'")+";"}).join(" ");a&&t(e).attr(m,a)}function d(e){if(e.pseudoElementType&&e.styleProps.content){var a=o(e.styleProps.content.value);a.img?(e.name="img",t(e).attr("src",a.img)):t(e).text(a);var i=e.pseudoElementParent;"before"===e.pseudoElementType?t(i).prepend(e):t(i).append(e)}}function c(o,a){if(o.name){var i=o.name.toUpperCase();if(e[a+"Elements"].indexOf(i)>-1)for(var n in o.styleProps)if(o.styleProps[n].prop===a){if(o.styleProps[n].value.match(/px/)){var r=o.styleProps[n].value.replace("px","");return t(o).attr(a,r),void 0}if(e.tableElements.indexOf(i)>-1&&o.styleProps[n].value.match(/\%/))return t(o).attr(a,o.styleProps[n].value),void 0}}}function u(o){if(o.name){var a=o.name.toUpperCase(),i=Object.keys(e.styleToAttribute);if(e.tableElements.indexOf(a)>-1)for(var n in o.styleProps)i.indexOf(o.styleProps[n].prop)>-1&&t(o).attr(e.styleToAttribute[o.styleProps[n].prop],o.styleProps[n].value)}}r=r||{};var p=utils.parseCSS(i),f=[],m="style";if(r.styleAttributeName&&(m=r.styleAttributeName),p.forEach(l),f.forEach(s),r.inlinePseudoElements&&f.forEach(d),r.applyWidthAttributes&&f.forEach(function(e){c(e,"width")}),r.applyHeightAttributes&&f.forEach(function(e){c(e,"height")}),r.applyAttributesTableElements&&f.forEach(u),r.insertPreservedExtraCss&&r.extraCss){var g=utils.getPreservedText(r.extraCss,{mediaQueries:r.preserveMediaQueries,fontFaces:r.preserveFontFaces});if(g){var b=null;r.insertPreservedExtraCss!==!0?b=t(r.insertPreservedExtraCss):(b=t("head"),b.length||(b=t("body")),b.length||(b=t.root())),b.first().append("<style>"+g+"</style>")}}}function o(e){if("none"===e||"normal"===e)return"";var t=e.match(/^\s*url\s*\(\s*(.*?)\s*\)\s*$/i);if(t){var o=t[1].replace(/^['"]|['"]$/g,"");return{img:o}}return e=e.slice(1,e.length-1),e=e.replace(/\\/g,"")}function a(e){if(0!==e.length){var t=e[e.length-1].pseudos;if(t)for(var o=0;o<t.length;o++)if(i(t[o]))return t[o].name}}function i(e){return"before"===e.name||"after"===e.name}function n(e){return e.filter(function(e){return!i(e)})}function r(e,o){o=utils.getDefaultOptions(o);var a=s(e,o);return a+="\n"+o.extraCss,t(e,a,o),e}function l(e,t){var o,a,i,n=[],r=e("style");return r.each(function(){if(i=this,o=i.childNodes,1===o.length){if(a=o[0].data,t.applyStyleTags&&void 0===e(i).attr("data-embed")&&n.push(a),t.removeStyleTags&&void 0===e(i).attr("data-embed")){var r=utils.getPreservedText(i.childNodes[0].nodeValue,{mediaQueries:t.preserveMediaQueries,fontFaces:t.preserveFontFaces});r?i.childNodes[0].nodeValue=r:e(i).remove()}e(i).removeAttr("data-embed")}}),n}function s(e,t){var o=l(e,t),a=o.join("\n");return a}return e.ignoredPseudos=["hover","active","focus","visited","link"],e.widthElements=["TABLE","TD","IMG"],e.heightElements=["TABLE","TD","IMG"],e.tableElements=["TABLE","TD","TH","TR","TD","CAPTION","COLGROUP","COL","THEAD","TBODY","TFOOT"],e.nonVisualElements=["HEAD","TITLE","BASE","LINK","STYLE","META","SCRIPT","NOSCRIPT"],e.styleToAttribute={"background-color":"bgcolor","background-image":"background","text-align":"align","vertical-align":"valign"},e.excludedProperties=[],e.juiceDocument=r,e.inlineDocument=t,e};

},{"./utils":7}],5:[function(require,module,exports){
"use strict";function Property(e,t,o,n,i){this.prop=e,this.value=t,this.selector=o,this.priority=n||0,this.additionalPriority=i||[]}module.exports=exports=Property;var utils=require("./utils");Property.prototype.compareFunc=function(e){var t=[];t.push.apply(t,this.selector.specificity()),t.push.apply(t,this.additionalPriority),t[0]+=this.priority;var o=[];return o.push.apply(o,e.selector.specificity()),o.push.apply(o,e.additionalPriority),o[0]+=e.priority,utils.compareFunc(t,o)},Property.prototype.compare=function(e){var t=this.compareFunc(e);return 1===t?this:e},Property.prototype.toString=function(){return this.prop+": "+this.value.replace(/['"]+/g,"")+";"};

},{"./utils":7}],6:[function(require,module,exports){
"use strict";function Selector(e,t){this.text=e,this.spec=void 0,this.styleAttribute=t||!1}function parse(e){try{return parser(e)[0]}catch(t){return[]}}var parser=require("./../../slick/parser");module.exports=exports=Selector,Selector.prototype.parsed=function(){return this.tokens||(this.tokens=parse(this.text)),this.tokens},Selector.prototype.specificity=function(){function e(o,n){for(var i=n||parse(o),a=[t?1:0,0,0,0],r=[],l=0;l<i.length;l++){var s=i[l],d=s.pseudos;if(s.id&&a[1]++,s.attributes&&(a[2]+=s.attributes.length),s.classList&&(a[2]+=s.classList.length),s.tag&&"*"!==s.tag&&a[3]++,d){a[3]+=d.length;for(var c=0;c<d.length;c++)"not"===d[c].name&&(r.push(d[c].value),a[3]--)}}for(var u=r.length;u--;)for(var f=e(r[u]),p=4;p--;)a[p]+=f[p];return a}var t=this.styleAttribute;return this.spec||(this.spec=e(this.text,this.parsed())),this.spec};

},{"./../../slick/parser":17}],7:[function(require,module,exports){
"use strict";var mensch=require("./../../mensch/index.js"),own={}.hasOwnProperty,os=require("os"),Selector=require("./selector"),Property=require("./property");exports.Selector=Selector,exports.Property=Property,exports.extract=function(e){for(var t=0,o=[],n="",i=0,a=e.length;a>i;i++){var r=e.charAt(i);t?(("]"===r||")"===r)&&t--,n+=r):","===r?(o.push(n),n=""):(("["===r||"("===r)&&t++,(n.length||","!==r&&"\n"!==r&&" "!==r)&&(n+=r))}return n.length&&o.push(n),o},exports.parseCSS=function(e){for(var t=mensch.parse(e,{position:!0,comments:!0}),o="undefined"!=typeof t.stylesheet&&t.stylesheet.rules?t.stylesheet.rules:[],n=[],i=0,a=o.length;a>i;i++)if("rule"==o[i].type)for(var r=o[i],l=r.selectors,s=0,d=l.length;d>s;s++)n.push([l[s],r.declarations]);return n},exports.getPreservedText=function(e,t){for(var o=mensch.parse(e,{position:!0,comments:!0}),n="undefined"!=typeof o.stylesheet&&o.stylesheet.rules?o.stylesheet.rules:[],i=[],a=null,r=n.length-1;r>=0;r--)(t.fontFaces&&"font-face"===n[r].type||t.mediaQueries&&"media"===n[r].type)&&i.push(mensch.stringify({stylesheet:{rules:[n[r]]}},{comments:!1,indentation:"  "})),a=n[r].position.start;return 0===i.length?!1:os.EOL+i.join(os.EOL)+os.EOL},exports.normalizeLineEndings=function(e){return e.replace(/\r\n/g,"\n").replace(/\n/g,"\r\n")},exports.compareFunc=function(e,t){for(var o=Math.min(e.length,t.length),n=0;o>n;n++)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return e.length-t.length},exports.compare=function(e,t){return 1==exports.compareFunc(e,t)?e:t},exports.extend=function(e,t){for(var o in t)own.call(t,o)&&(e[o]=t[o]);return e},exports.getDefaultOptions=function(e){var t=exports.extend({extraCss:"",insertPreservedExtraCss:!0,applyStyleTags:!0,removeStyleTags:!0,preserveMediaQueries:!0,preserveFontFaces:!0,applyWidthAttributes:!0,applyHeightAttributes:!0,applyAttributesTableElements:!0,url:""},e);return t.webResources=t.webResources||{},t};

},{"./../../mensch/index.js":12,"./property":5,"./selector":6,"os":22}],8:[function(require,module,exports){
(function (global){
!function(e){if("function"==typeof define&&define.amd)define(["knockout","jquery","jquery-ui/sortable","jquery-ui/draggable"],e);else if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var t=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),o=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null);(typeof window !== "undefined" ? window['jQuery']['ui']['sortable'] : typeof global !== "undefined" ? global['jQuery']['ui']['sortable'] : null),(typeof window !== "undefined" ? window['jQuery']['ui']['draggable'] : typeof global !== "undefined" ? global['jQuery']['ui']['draggable'] : null),e(t,o)}else e(window.ko,window.jQuery)}(function(e,t){var o="ko_sortItem",a="ko_sourceIndex",l="ko_sortList",i="ko_parentList",r="ko_dragItem",n=e.utils.unwrapObservable,s=e.utils.domData.get,d=e.utils.domData.set,c=t.ui&&t.ui.version,m=c&&c.indexOf("1.6.")&&c.indexOf("1.7.")&&(c.indexOf("1.8.")||"1.8.24"===c),u=function(t,a){e.utils.arrayForEach(t,function(e){1===e.nodeType&&(d(e,o,a),d(e,i,s(e.parentNode,l)))})},p=function(t,o){var a,l={},i=n(t())||{};return i.data?(l[o]=i.data,l.name=i.template):l[o]=t(),e.utils.arrayForEach(["afterAdd","afterRender","as","beforeRemove","includeDestroyed","templateEngine","templateOptions","nodes"],function(t){i.hasOwnProperty(t)?l[t]=i[t]:e.bindingHandlers.sortable.hasOwnProperty(t)&&(l[t]=e.bindingHandlers.sortable[t])}),"foreach"===o&&(l.afterRender?(a=l.afterRender,l.afterRender=function(e,t){u.call(t,e,t),a.call(t,e,t)}):l.afterRender=u),l},g=function(e,t){var o=n(t);if(o)for(var a=0;e>a;a++)o[a]&&n(o[a]._destroy)&&e++;return e},f=function(o,a){var l,i;a?(i=document.getElementById(a),i&&(l=new e.templateSources.domElement(i),l.text(t.trim(l.text())))):t(o).contents().each(function(){this&&1!==this.nodeType&&o.removeChild(this)})};e.bindingHandlers.sortable={init:function(c,u,b,h,v){var y,k,$=t(c),w=n(u())||{},x=p(u,"foreach"),C={};f(c,x.name),t.extend(!0,C,e.bindingHandlers.sortable),w.options&&C.options&&(e.utils.extend(C.options,w.options),delete w.options),e.utils.extend(C,w),C.connectClass&&(e.isObservable(C.allowDrop)||"function"==typeof C.allowDrop)?e.computed({read:function(){var t=n(C.allowDrop),o="function"==typeof t?t.call(this,x.foreach):t;e.utils.toggleDomNodeCssClass(c,C.connectClass,o)},disposeWhenNodeIsRemoved:c},this):e.utils.toggleDomNodeCssClass(c,C.connectClass,C.allowDrop),e.bindingHandlers.template.init(c,function(){return x},b,h,v),y=C.options.start,k=C.options.update,C.options.helper||(C.options.helper=function(e,o){return o.is("tr")&&o.children().each(function(){t(this).width(t(this).width())}),o});var S=setTimeout(function(){var u,p=C.options.receive;$.sortable(e.utils.extend(C.options,{start:function(t,o){var l=o.item[0];d(l,a,e.utils.arrayIndexOf(o.item.parent().children(),l)),o.item.find("input:focus").change(),y&&y.apply(this,arguments)},receive:function(e,t){"function"==typeof p&&p.call(this,e,t),u=s(t.item[0],r),u&&(u.clone&&(u=u.clone()),C.dragged&&(u=C.dragged.call(this,u,e,t)||u))},update:function(r,c){var p,f,b,h,v,y=c.item[0],$=c.item.parent()[0],w=s(y,o)||u;if(w||t(y).remove(),u=null,w&&this===$||!m&&t.contains(this,$)){if(p=s(y,i),b=s(y,a),f=s(y.parentNode,l),h=e.utils.arrayIndexOf(c.item.parent().children(),y),x.includeDestroyed||(b=g(b,p),h=g(h,f)),(C.beforeMove||C.afterMove)&&(v={item:w,sourceParent:p,sourceParentNode:p&&c.sender||y.parentNode,sourceIndex:b,targetParent:f,targetIndex:h,cancelDrop:!1},C.beforeMove&&C.beforeMove.call(this,v,r,c)),p?t(p===f?this:c.sender||this).sortable("cancel"):t(y).remove(),v&&v.cancelDrop)return;if(C.hasOwnProperty("strategyMove")&&C.strategyMove!==!1){if(h>=0)if(p)if(p!==f)p.splice(b,1),f.splice(h,0,w),d(y,o,null),c.item.remove();else{var S=n(p);p.valueWillMutate&&p.valueWillMutate(),S.splice(b,1),S.splice(h,0,w),p.valueHasMutated&&p.valueHasMutated()}else f.splice(h,0,w),d(y,o,null),c.item.remove()}else h>=0&&(p&&(p.splice(b,1),e.processAllDeferredBindingUpdates&&e.processAllDeferredBindingUpdates(),e.options&&e.options.deferUpdates&&e.tasks.runEarly()),f.splice(h,0,w)),d(y,o,null);e.processAllDeferredBindingUpdates&&e.processAllDeferredBindingUpdates(),C.afterMove&&C.afterMove.call(this,v,r,c)}k&&k.apply(this,arguments)},connectWith:C.connectClass?"."+C.connectClass:!1})),void 0!==C.isEnabled&&e.computed({read:function(){$.sortable(n(C.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:c})},0);return e.utils.domNodeDisposal.addDisposeCallback(c,function(){($.data("ui-sortable")||$.data("sortable"))&&$.sortable("destroy"),e.utils.toggleDomNodeCssClass(c,C.connectClass,!1),clearTimeout(S)}),{controlsDescendantBindings:!0}},update:function(t,o,a,i,r){var n=p(o,"foreach");d(t,l,n.foreach),e.bindingHandlers.template.update(t,function(){return n},a,i,r)},connectClass:"ko_container",allowDrop:!0,afterMove:null,beforeMove:null,options:{}},e.bindingHandlers.draggable={init:function(o,a,l,i,s){var c=n(a())||{},m=c.options||{},u=e.utils.extend({},e.bindingHandlers.draggable.options),g=p(a,"data"),f=c.connectClass||e.bindingHandlers.draggable.connectClass,b=void 0!==c.isEnabled?c.isEnabled:e.bindingHandlers.draggable.isEnabled;return c="data"in c?c.data:c,d(o,r,c),e.utils.extend(u,m),u.connectToSortable=f?"."+f:!1,t(o).draggable(u),void 0!==b&&e.computed({read:function(){t(o).draggable(n(b)?"enable":"disable")},disposeWhenNodeIsRemoved:o}),e.utils.domNodeDisposal.addDisposeCallback(o,function(){t(o).draggable("destroy")}),e.bindingHandlers.template.init(o,function(){return g},l,i,s)},update:function(t,o,a,l,i){var r=p(o,"data");return e.bindingHandlers.template.update(t,function(){return r},a,l,i)},connectClass:e.bindingHandlers.sortable.connectClass,options:{helper:"clone"}}});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],9:[function(require,module,exports){
(function (global){
!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=e((typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),require("./../knockoutjs-reactor/src/knockout.reactor.js")):"function"==typeof define&&define.amd?define(["knockout","knockoutjs-reactor","exports"],e):e(ko,ko.watch)}(function(e,t){var o=function(o,a){var i,n=e.observableArray(),l=e.observableArray(),r=0,s=1,d=2,c=r,u=0,p=1,m=2,f=3,g=u,b={levels:100,undoLabel:"undo (#COUNT#)",redoLabel:"redo (#COUNT#)"};a="object"==typeof a?e.utils.extend(b,a):b;var v=function(e){c==s?y(e,l):c==d?y(e,n):c==r&&(y(e,n),l.removeAll())},h=function(e,t){return"undefined"!=typeof e.mergedAction?e.mergedAction(t):null},y=function(e,t){if(t().length>0){var o=h(t()[t().length-1],e);if(null!==o)return t()[t().length-1]=o,void 0}t().length>=a.levels&&t.shift(),i=t,t.push(e)},k=function(t,o,a){return{name:e.computed(function(){return e.utils.unwrapObservable(t).replace(/#COUNT#/,a().length)}),enabled:e.computed(function(){return 0!==a().length}),execute:function(){var e=a.pop();if(e){var t=c;c=o;var n=g;g=f,e(),w(i),g=n,c=t}return!0}}},w=function(e){if("undefined"==typeof e)throw"Unexpected operation: stack cleaner called with undefined stack";e().length>0&&"undefined"!=typeof e()[e().length-1].mergedAction&&delete e()[e().length-1].mergedAction},$=function(e,t){var o=function(e,t){e(),t()}.bind(void 0,e,t);return"undefined"!=typeof e.mergedAction&&(o.mergedAction=e.mergedAction),o},x=function(e,t,o){if("undefined"!=typeof t)e(t);else{if(!o)throw"Unexpected condition: no item and no child.oldValues!";if("deleted"==o.status)e.splice(o.index,0,o.value);else{if("added"!=o.status)throw"Unsupproted item.status: "+o.status;e.splice(o.index,1)}}},C=function(e,t,o,a,i){return e.bind(void 0,o,a,i)},S=C,I=function(e,t,o){var a="undefined"!=typeof t.oldValues?t.oldValues[0]:void 0,i=S(x,e,t,a,o);g!=p&&(g==f?"undefined"!=typeof i&&(i.mergedAction=function(e){return"undefined"!=typeof e.mergeMe&&e.mergeMe?$(e,this):null},i.mergeMe=!0):"undefined"!=typeof i&&(t.oldValues&&g==m&&(i.mergedAction=function(e,t,o){return"object"==typeof o.mergeableAction&&e==o.mergeableAction.child?this:null}.bind(i,t,o),i.mergeableAction={child:t,item:o}),o&&"deleted"==o.status&&(i.mergedAction=function(e,t,o){return"object"==typeof o.mergeableMove&&t.value==o.mergeableMove.item.value?$(o,this):(console.log("UR","not mergeable",typeof o.mergeableMove),null)}.bind(i,t,o)),o&&"added"==o.status&&(i.mergeableMove={child:t,item:o})),"undefined"!=typeof i&&v(i))},O={depth:-1,oldValues:1,mutable:!0,tagFields:!0},T={},M="function"==typeof t?t:e.watch,E=M(o,O,I,T);return{push:v,undoCommand:k(a.undoLabel,s,n),redoCommand:k(a.redoLabel,d,l),reset:function(){n.removeAll(),l.removeAll()},setModeOnce:function(){g=m,w(n)},setModeMerge:function(){g=f,w(n)},setModeNormal:function(){g=u,w(n)},setModeIgnore:function(){g=p,w(n)},setUndoActionMaker:function(e){S=e},dispose:function(){E.dispose()}}};return o});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../knockoutjs-reactor/src/knockout.reactor.js":11}],10:[function(require,module,exports){
(function (global){
!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e((typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],e):e(ko,ko.wrap={})}(function(e,t){function o(e){var t=typeof e;return"object"===t&&(e?e.constructor==Date?t="date":"[object Array]"==Object.prototype.toString.call(e)&&(t="array"):t="null"),t}function n(t){var o={};for(var n in t){var i=t[n];e.isComputed(i)||(o[n]=a(i))}return o}function i(e){var t=[];if(!e||0==e.length)return t;for(var o=0,n=e.length;n>o;++o)t.push(a(e[o]));return t}function a(t){var r=e.isObservable(t);if(r){var l=t();return a(l)}return"array"==o(t)?i(t):"object"==o(t)?n(t):t}function r(){f=[{obj:null,wrapped:null,lvl:""}]}function l(t,o,n){for(var i=0;i<f.length;++i)if(f[i].obj===t)return f[i].wrapped;var a={};for(var r in t){var l=t[r];f.push({obj:t,wrapped:a,lvl:d()+"/"+r}),a[r]=c(l,o,n),f.pop()}return o&&o[d()]&&(a=o[d()](a)),u()&&e.track(a),n?e.observable(a):a}function s(t,o,n){var i=e.observableArray();if(!t||0==t.length)return i;for(var a=0,r=t.length;r>a;++a)i.push(c(t[a],o,n));return i}function d(){return f[f.length-1].lvl}function c(t,n,i){if("array"==o(t))return s(t,n,i);if("object"==o(t))return l(t,n,i);if(u()||"function"==typeof t)return t;var a=e.observable();return a(t),a}function u(){return null!=e.track}t.fromJS=function(e,t,o){return r(),c(e,t,o)},t.updateFromJS=function(t,o,n,i){return r(),t(e.utils.unwrapObservable(c(o,n,i)))},t.fromJSON=function(o,n,i){var a=e.utils.parseJson(o);return arguments[0]=a,t.fromJS.apply(this,n,i)},t.toJS=function(e){return a(e)},t.toJSON=function(o){var n=t.toJS(o);return e.utils.stringifyJson(n)};var f});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],11:[function(require,module,exports){
(function (global){
!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e((typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null)):"function"==typeof define&&define.amd?define(["knockout"],e):e(window.ko)}(function(e){e.subscribable.fn.watch=function(t,o,i,n){var a=typeof t;return"boolean"===a||"undefined"===a?e.watch(this,{enabled:t!==!1}):"function"!==a||e.isSubscribable(t)?e.watch(t,o,i,n||this):e.watch(this,o||{},t,n||this),this},e.watch=function(t,o,i,n){function a(s,d,c,u,f,p){if(s&&0!==o.depth&&(-1===o.depth||c.length<(o.depth||1))){if(o.watchedOnly&&!s.watchable&&s!=t)return;if((o.enabled===!1||o.enabled===!0)&&(s.watchable=o.enabled),s.watchable===!1)return;o.seal===!0&&(s.watchable=!1);var m=typeof s;if("object"===m||"function"===m){if(s._watcher===n)return;if(o.hide&&e.utils.arrayIndexOf(o.hide,s)>-1)return;var g=[].concat(c,d&&d!==t?d:[]);if("function"!==m){if("[object Object]"===Object.prototype.toString.call(s))e.utils.objectForEach(s,function(t,i){if(i=o.getter?o.getter.call(n,g,s,t):i){if(o.wrap){var r=Object.prototype.toString.call(i);"[object Function]"!==r&&"[object Object]"!==r&&(o.beforeWrap&&o.beforeWrap.call(n,g,s,i)===!1||(i=s[t]="[object Array]"===r?e.observableArray(i):e.observable(i)))}o.unloop&&(i._watcher=u?void 0:n);var l=a(i,f?null:s,g,u,null,t);o.tagFields&&void 0===i._fieldName&&(l||"parentsOnly"!==o.tagFields&&"function"==typeof i||"object"==typeof i)&&(i._fieldName=t)}});else if(o.hideArrays!==!0)for(var b=0;b<s.length;b++)a(s[b],f?null:s,g,u);return!0}if("function"==typeof s.notifySubscribers&&i){if(o.enabled===!0&&s.watchable===!1)return;if(u||!o.beforeWatch||o.beforeWatch.call(n,g,s,p)!==!1){var h="function"==typeof s.pop;if(u?r(s):l(s,h,g,f),h)return a(s(),f?null:s,g,u,!0),!0;if(o.hideWrappedValues!==!0)return a(s(),f?null:s,g,u,!0)}}}}}function r(e){var t=e[s];if(!t)throw"Subscriptions field (."+s+") not defined for observable child "+(e._fieldName||"");if(t.change)for(var i=t.change.length-1;i>=0;i--)t.change[i]._watcher===n&&t.change[i].dispose();if(t.beforeChange&&(o.mutable||o.oldValues>0))for(var i=t.beforeChange.length-1;i>=0;i--)t.beforeChange[i]._watcher===n&&t.beforeChange[i].dispose();if(t.arrayChange)for(var i=t.arrayChange.length-1;i>=0;i--)t.arrayChange[i]._watcher===n&&t.arrayChange[i].dispose()}function l(t,r,l,s){r?t.subscribe(function(o){e.utils.arrayForEach(o,function(e){var o=i.call(n,l,t,e);void 0!==o&&n(o),e.moved||setTimeout(function(){a(e.value,s?null:t,l,"deleted"===e.status)},0)})},void 0,"arrayChange")._watcher=n:(t.subscribe(function(){if(t.watchable!==!1){var e=i.call(n,l,t);void 0!==e&&n(e),o.mutable&&"object"==typeof t()&&a(t(),s?null:t,l)}},null,"change")._watcher=n,(o.oldValues>0||o.mutable)&&(t.subscribe(function(e){if(o.oldValues>0){var i=t.oldValues?t.oldValues:t.oldValues=[];for(i.unshift(e);i.length>o.oldValues;)i.pop()}o.mutable&&"object"==typeof e&&a(e,s?null:t,l,!1,!0)},null,"beforeChange")._watcher=n))}"function"==typeof o&&(n=n||i,i=o,o={}),n=n||this;var s;switch("function"==typeof e.subscription||e.version){case!0:s="_subscriptions";break;case"3.0.0":s="F";break;case"3.1.0":s="H";break;case"3.2.0":s="M";break;case"3.3.0":s="G";break;case"3.4.0":s="K";break;case"3.4.1":s="K";break;default:throw"Unsupported Knockout version. Only v3.0.0 to v3.4.1 are supported when minified. Current version is "+e.version}return"function"!=typeof t||e.isSubscribable(t)?(a(t,null,[]),{dispose:function(){a(t,null,[],!0)}}):e.computed(t,i,o)}});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],12:[function(require,module,exports){
module.exports={lex:require("./lib/lexer"),parse:require("./lib/parser"),stringify:require("./lib/stringify")};

},{"./lib/lexer":14,"./lib/parser":15,"./lib/stringify":16}],13:[function(require,module,exports){
(function (process){
function debug(e){return _debug.bind(null,e)}function _debug(e){var t=[].slice.call(arguments,1);t.unshift("["+e+"]"),process.stderr.write(t.join(" ")+"\n")}exports=module.exports=debug;

}).call(this,require('_process'))

},{"_process":23}],14:[function(require,module,exports){
function lex(e){function t(){return c(),e[h]}function o(e){return e?w[w.length-1-e]:k}function n(t){var o=h+1;return t===e.slice(o,o+t.length)}function i(t){var o=e.slice(h).indexOf(t);return o>0?o:!1}function a(e){return e===r(1)}function r(t){return e[h+(t||1)]}function l(){var e=w.pop();return k=w[w.length-1],e}function s(e){return k=e,w.push(k),w.length}function d(e){var t=k;return w[w.length-1]=k=e,t}function c(t){if(1==(t||1))"\n"==e[h]?(y++,b=1):b++,h++;else{var o=e.slice(h,h+t).split("\n");o.length>1&&(y+=o.length-1,b=1),b+=o[o.length-1].length,h+=t}}function u(){x.end={line:y,col:b},DEBUG&&debug("addToken:",JSON.stringify(x,null,2)),_.push(x),g="",x={}}function f(e){x={type:e,start:{line:y,col:b}}}var p,m,g="",b=0,h=-1,v=0,y=1,k="before-selector",w=[k],x={},_=[],$=["media","keyframes",{name:"-webkit-keyframes",type:"keyframes",prefix:"-webkit-"},{name:"-moz-keyframes",type:"keyframes",prefix:"-moz-"},{name:"-ms-keyframes",type:"keyframes",prefix:"-ms-"},{name:"-o-keyframes",type:"keyframes",prefix:"-o-"},"font-face",{name:"import",state:"before-at-value"},{name:"charset",state:"before-at-value"},"supports","viewport",{name:"namespace",state:"before-at-value"},"document",{name:"-moz-document",type:"document",prefix:"-moz-"},"page"];for(TIMER&&(p=Date.now());m=t();)switch(DEBUG&&debug(m,o()),m){case" ":switch(o()){case"selector":case"value":case"value-paren":case"at-group":case"at-value":case"comment":case"double-string":case"single-string":g+=m}break;case"\n":case"	":case"\r":case"\f":switch(o()){case"value":case"value-paren":case"at-group":case"comment":case"single-string":case"double-string":case"selector":g+=m;break;case"at-value":"\n"===m&&(x.value=g.trim(),u(),l())}break;case":":switch(o()){case"name":x.name=g.trim(),g="",d("before-value");break;case"before-selector":g+=m,f("selector"),s("selector");break;case"before-value":d("value"),g+=m;break;default:g+=m}break;case";":switch(o()){case"name":case"before-value":case"value":g.trim().length>0&&(x.value=g.trim(),u()),d("before-name");break;case"value-paren":g+=m;break;case"at-value":x.value=g.trim(),u(),l();break;case"before-name":break;default:g+=m}break;case"{":switch(o()){case"selector":if("\\"===r(-1)){g+=m;break}x.text=g.trim(),u(),d("before-name"),v+=1;break;case"at-group":switch(x.name=g.trim(),x.type){case"font-face":case"viewport":case"page":s("before-name");break;default:s("before-selector")}u(),v+=1;break;case"name":case"at-rule":x.name=g.trim(),u(),s("before-name"),v+=1;break;case"comment":case"double-string":case"single-string":g+=m;break;case"before-value":d("value"),g+=m}break;case"}":switch(o()){case"before-name":case"name":case"before-value":case"value":g&&(x.value=g.trim()),x.name&&x.value&&u(),f("end"),u(),l(),"at-group"===o()&&(f("at-group-end"),u(),l()),v>0&&(v-=1);break;case"at-group":case"before-selector":case"selector":if("\\"===r(-1)){g+=m;break}v>0&&"at-group"===o(1)&&(f("at-group-end"),u()),v>1&&l(),v>0&&(v-=1);break;case"double-string":case"single-string":case"comment":g+=m}break;case'"':case"'":switch(o()){case"double-string":'"'===m&&"\\"!==r(-1)&&l();break;case"single-string":"'"===m&&"\\"!==r(-1)&&l();break;case"before-at-value":d("at-value"),s('"'===m?"double-string":"single-string");break;case"before-value":d("value"),s('"'===m?"double-string":"single-string");break;case"comment":break;default:"\\"!==r(-1)&&s('"'===m?"double-string":"single-string")}g+=m;break;case"/":switch(o()){case"comment":case"double-string":case"single-string":g+=m;break;case"before-value":case"selector":case"name":case"value":if(a("*")){var C=i("*/");C&&c(C+1)}else"before-value"==o()&&d("value"),g+=m;break;default:a("*")?(f("comment"),s("comment"),c()):g+=m}break;case"*":switch(o()){case"comment":a("/")?(x.text=g,c(),u(),l()):g+=m;break;case"before-selector":g+=m,f("selector"),s("selector");break;case"before-value":d("value"),g+=m;break;default:g+=m}break;case"@":switch(o()){case"comment":case"double-string":case"single-string":g+=m;break;case"before-value":d("value"),g+=m;break;default:for(var S,O,T=!1,E=0,A=$.length;!T&&A>E;++E)O=$[E],S=O.name||O,n(S)&&(T=!0,f(S),s(O.state||"at-group"),c(S.length),O.prefix&&(x.prefix=O.prefix),O.type&&(x.type=O.type));T||(g+=m)}break;case"(":switch(o()){case"value":s("value-paren");break;case"before-value":d("value")}g+=m;break;case")":switch(o()){case"value-paren":l();break;case"before-value":d("value")}g+=m;break;default:switch(o()){case"before-selector":f("selector"),s("selector");break;case"before-name":f("property"),d("name");break;case"before-value":d("value");break;case"before-at-value":d("at-value")}g+=m}return TIMER&&debug("ran in",Date.now()-p+"ms"),_}var DEBUG=!1,TIMER=!1,debug=require("./debug")("lex");exports=module.exports=lex;

},{"./debug":13}],15:[function(require,module,exports){
function parse(e,t){var o;t||(t={}),_comments=!!t.comments,_position=!!t.position,_depth=0,_tokens=Array.isArray(e)?e.slice():lex(e);var n,i,a=[];for(TIMER&&(o=Date.now());i=next();)n=parseToken(i),n&&a.push(n);return TIMER&&debug("ran in",Date.now()-o+"ms"),{type:"stylesheet",stylesheet:{rules:a}}}function astNode(e,t){t||(t={});for(var o,n=["type","name","value"],i={},a=0;a<n.length;++a)o=n[a],e[o]&&(i[o]=t[o]||e[o]);for(n=Object.keys(t),a=0;a<n.length;++a)o=n[a],i[o]||(i[o]=t[o]);return _position&&(i.position={start:e.start,end:e.end}),DEBUG&&debug("astNode:",JSON.stringify(i,null,2)),i}function next(){var e=_tokens.shift();return DEBUG&&debug("next:",JSON.stringify(e,null,2)),e}function parseAtGroup(e){_depth+=1;var t={};switch(e.type){case"font-face":case"viewport":t.declarations=parseDeclarations();break;case"page":t.prefix=e.prefix,t.declarations=parseDeclarations();break;default:t.prefix=e.prefix,t.rules=parseRules()}return astNode(e,t)}function parseAtImport(e){return astNode(e)}function parseCharset(e){return astNode(e)}function parseComment(e){return astNode(e,{text:e.text})}function parseNamespace(e){return astNode(e)}function parseProperty(e){return astNode(e)}function parseSelector(e){function t(e){return e.trim()}return astNode(e,{type:"rule",selectors:e.text.split(",").map(t),declarations:parseDeclarations(e)})}function parseToken(e){switch(e.type){case"property":return parseProperty(e);case"selector":return parseSelector(e);case"at-group-end":return _depth-=1,void 0;case"media":case"keyframes":return parseAtGroup(e);case"comment":if(_comments)return parseComment(e);break;case"charset":return parseCharset(e);case"import":return parseAtImport(e);case"namespace":return parseNamespace(e);case"font-face":case"supports":case"viewport":case"document":case"page":return parseAtGroup(e)}DEBUG&&debug("parseToken: unexpected token:",JSON.stringify(e))}function parseTokensWhile(e){for(var t,o,n=[];(o=next())&&e&&e(o);)t=parseToken(o),t&&n.push(t);return o&&"end"!==o.type&&_tokens.unshift(o),n}function parseDeclarations(){return parseTokensWhile(function(e){return"property"===e.type||"comment"===e.type})}function parseRules(){return parseTokensWhile(function(){return _depth})}var DEBUG=!1,TIMER=!1,debug=require("./debug")("parse"),lex=require("./lexer");exports=module.exports=parse;var _comments,_depth,_position,_tokens;

},{"./debug":13,"./lexer":14}],16:[function(require,module,exports){
function stringify(e,t){var o;t||(t={}),_indentation=t.indentation||"",_compress=!!t.compress,_comments=!!t.comments,_compress?_n=_s="":(_n="\n",_s=" "),TIMER&&(o=Date.now());var n=reduce(e.stylesheet.rules,stringifyNode).join("\n").trim();return TIMER&&debug("ran in",Date.now()-o+"ms"),n}function indent(e){return this.level||(this.level=1),e?(this.level+=e,void 0):_compress?"":Array(this.level).join(_indentation||"")}function stringifyAtRule(e){return"@"+e.type+" "+e.value+";"+_n}function stringifyAtGroup(e){var t="",o=e.prefix||"";e.name&&(t=" "+e.name);var n="page"!==e.type;return"@"+o+e.type+t+_s+stringifyBlock(e,n)+_n}function stringifyComment(e){return _comments?"/*"+(e.text||"")+"*/"+_n:""}function stringifyRule(e){var t;return e.selectors?t=e.selectors.join(","+_n):(t="@"+e.type,t+=e.name?" "+e.name:""),indent()+t+_s+stringifyBlock(e)+_n}function reduce(e,t){return e.reduce(function(e,o){var n="comment"===o.type?stringifyComment(o):t(o);return n&&e.push(n),e},[])}function stringifyBlock(e,t){var o=e.declarations,n=stringifyDeclaration;return e.rules&&(o=e.rules,n=stringifyRule),o=stringifyChildren(o,n),o&&(o=_n+o+(t?"":_n)),"{"+o+indent()+"}"}function stringifyChildren(e,t){if(!e)return"";indent(1);var o=reduce(e,t);return indent(-1),o.length?o.join(_n):""}function stringifyDeclaration(e){return"property"===e.type?stringifyProperty(e):(DEBUG&&debug("stringifyDeclaration: unexpected node:",JSON.stringify(e)),void 0)}function stringifyNode(e){switch(e.type){case"rule":return stringifyRule(e);case"media":case"keyframes":return stringifyAtGroup(e);case"comment":return stringifyComment(e);case"import":case"charset":case"namespace":return stringifyAtRule(e);case"font-face":case"supports":case"viewport":case"document":case"page":return stringifyAtGroup(e)}DEBUG&&debug("stringifyNode: unexpected node: "+JSON.stringify(e))}function stringifyProperty(e){var t=e.name?e.name+":"+_s:"";return indent()+t+e.value+";"}var DEBUG=!1,TIMER=!1,debug=require("./debug")("stringify"),_comments,_compress,_indentation,_n,_s;exports=module.exports=stringify;

},{"./debug":13}],17:[function(require,module,exports){
"use strict";var escapeRe=/([-.*+?^${}()|[\]\/\\])/g,unescapeRe=/\\/g,escape=function(e){return(e+"").replace(escapeRe,"\\$1")},unescape=function(e){return(e+"").replace(unescapeRe,"")},slickRe=RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+escape(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),Part=function(e){this.combinator=e||" ",this.tag="*"};Part.prototype.toString=function(){if(!this.raw){var e,t,o="";if(o+=this.tag||"*",this.id&&(o+="#"+this.id),this.classes&&(o+="."+this.classList.join(".")),this.attributes)for(e=0;t=this.attributes[e++];)o+="["+t.name+(t.operator?t.operator+'"'+t.value+'"':"")+"]";if(this.pseudos)for(e=0;t=this.pseudos[e++];)o+=":"+t.name,t.value&&(o+="("+t.value+")");this.raw=o}return this.raw};var Expression=function(){this.length=0};Expression.prototype.toString=function(){if(!this.raw){for(var e,t="",o=0;e=this[o++];)1!==o&&(t+=" ")," "!==e.combinator&&(t+=e.combinator+" "),t+=e;this.raw=t}return this.raw};var replacer=function(e,t,o,n,r,i,a,l,s,d,c,u,f,p,m,g){var b,h;if((t||!this.length)&&(b=this[this.length++]=new Expression,t))return"";if(b||(b=this[this.length-1]),(o||n||!b.length)&&(h=b[b.length++]=new Part(o)),h||(h=b[b.length-1]),r)h.tag=unescape(r);else if(i)h.id=unescape(i);else if(a){var v=unescape(a),y=h.classes||(h.classes={});if(!y[v]){y[v]=escape(a);var k=h.classList||(h.classList=[]);k.push(v),k.sort()}}else f?(g=g||m,(h.pseudos||(h.pseudos=[])).push({type:1==u.length?"class":"element",name:unescape(f),escapedName:escape(f),value:g?unescape(g):null,escapedValue:g?escape(g):null})):l&&(c=c?escape(c):null,(h.attributes||(h.attributes=[])).push({operator:s,name:unescape(l),escapedName:escape(l),value:c?unescape(c):null,escapedValue:c?escape(c):null}));return""},Expressions=function(e){this.length=0;for(var t,o=this,n=e;e;){if(t=e.replace(slickRe,function(){return replacer.apply(o,arguments)}),t===e)throw new Error(n+" is an invalid expression");e=t}};Expressions.prototype.toString=function(){if(!this.raw){for(var e,t=[],o=0;e=this[o++];)t.push(e);this.raw=t.join(", ")}return this.raw};var cache={},parse=function(e){return null==e?null:(e=(""+e).replace(/^\s+|\s+$/g,""),cache[e]||(cache[e]=new Expressions(e)))};module.exports=parse;

},{}],18:[function(require,module,exports){
!function(e){function t(e,a){if(e=e?e:"",a=a||{},e instanceof t)return e;if(!(this instanceof t))return new t(e,a);var i=o(e);this._originalInput=e,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=L(100*this._a)/100,this._format=a.format||i.format,this._gradientType=a.gradientType,this._r<1&&(this._r=L(this._r)),this._g<1&&(this._g=L(this._g)),this._b<1&&(this._b=L(this._b)),this._ok=i.ok,this._tc_id=N++}function o(e){var t={r:0,g:0,b:0},o=1,i=null,r=null,s=null,d=!1,c=!1;return"string"==typeof e&&(e=P(e)),"object"==typeof e&&(D(e.r)&&D(e.g)&&D(e.b)?(t=a(e.r,e.g,e.b),d=!0,c="%"===String(e.r).substr(-1)?"prgb":"rgb"):D(e.h)&&D(e.s)&&D(e.v)?(i=E(e.s),r=E(e.v),t=l(e.h,i,r),d=!0,c="hsv"):D(e.h)&&D(e.s)&&D(e.l)&&(i=E(e.s),s=E(e.l),t=n(e.h,i,s),d=!0,c="hsl"),e.hasOwnProperty("a")&&(o=e.a)),o=S(o),{ok:d,format:e.format||c,r:R(255,U(t.r,0)),g:R(255,U(t.g,0)),b:R(255,U(t.b,0)),a:o}}function a(e,t,o){return{r:255*_(e,255),g:255*_(t,255),b:255*_(o,255)}}function i(e,t,o){e=_(e,255),t=_(t,255),o=_(o,255);var a,i,n=U(e,t,o),r=R(e,t,o),l=(n+r)/2;if(n==r)a=i=0;else{var s=n-r;switch(i=l>.5?s/(2-n-r):s/(n+r),n){case e:a=(t-o)/s+(o>t?6:0);break;case t:a=(o-e)/s+2;break;case o:a=(e-t)/s+4}a/=6}return{h:a,s:i,l:l}}function n(e,t,o){function a(e,t,o){return 0>o&&(o+=1),o>1&&(o-=1),1/6>o?e+6*(t-e)*o:.5>o?t:2/3>o?e+6*(t-e)*(2/3-o):e}var i,n,r;if(e=_(e,360),t=_(t,100),o=_(o,100),0===t)i=n=r=o;else{var l=.5>o?o*(1+t):o+t-o*t,s=2*o-l;i=a(s,l,e+1/3),n=a(s,l,e),r=a(s,l,e-1/3)}return{r:255*i,g:255*n,b:255*r}}function r(e,t,o){e=_(e,255),t=_(t,255),o=_(o,255);var a,i,n=U(e,t,o),r=R(e,t,o),l=n,s=n-r;if(i=0===n?0:s/n,n==r)a=0;else{switch(n){case e:a=(t-o)/s+(o>t?6:0);break;case t:a=(o-e)/s+2;break;case o:a=(e-t)/s+4}a/=6}return{h:a,s:i,v:l}}function l(t,o,a){t=6*_(t,360),o=_(o,100),a=_(a,100);var i=e.floor(t),n=t-i,r=a*(1-o),l=a*(1-n*o),s=a*(1-(1-n)*o),d=i%6,c=[a,l,r,r,s,a][d],u=[s,a,a,l,r,r][d],p=[r,r,s,a,a,l][d];return{r:255*c,g:255*u,b:255*p}}function s(e,t,o,a){var i=[H(L(e).toString(16)),H(L(t).toString(16)),H(L(o).toString(16))];return a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function d(e,t,o,a,i){var n=[H(L(e).toString(16)),H(L(t).toString(16)),H(L(o).toString(16)),H(A(a))];return i&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)&&n[3].charAt(0)==n[3].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0):n.join("")}function c(e,t,o,a){var i=[H(A(a)),H(L(e).toString(16)),H(L(t).toString(16)),H(L(o).toString(16))];return i.join("")}function u(e,o){o=0===o?0:o||10;var a=t(e).toHsl();return a.s-=o/100,a.s=I(a.s),t(a)}function p(e,o){o=0===o?0:o||10;var a=t(e).toHsl();return a.s+=o/100,a.s=I(a.s),t(a)}function f(e){return t(e).desaturate(100)}function m(e,o){o=0===o?0:o||10;var a=t(e).toHsl();return a.l+=o/100,a.l=I(a.l),t(a)}function g(e,o){o=0===o?0:o||10;var a=t(e).toRgb();return a.r=U(0,R(255,a.r-L(255*-(o/100)))),a.g=U(0,R(255,a.g-L(255*-(o/100)))),a.b=U(0,R(255,a.b-L(255*-(o/100)))),t(a)}function b(e,o){o=0===o?0:o||10;var a=t(e).toHsl();return a.l-=o/100,a.l=I(a.l),t(a)}function h(e,o){var a=t(e).toHsl(),i=(a.h+o)%360;return a.h=0>i?360+i:i,t(a)}function v(e){var o=t(e).toHsl();return o.h=(o.h+180)%360,t(o)}function y(e){var o=t(e).toHsl(),a=o.h;return[t(e),t({h:(a+120)%360,s:o.s,l:o.l}),t({h:(a+240)%360,s:o.s,l:o.l})]}function k(e){var o=t(e).toHsl(),a=o.h;return[t(e),t({h:(a+90)%360,s:o.s,l:o.l}),t({h:(a+180)%360,s:o.s,l:o.l}),t({h:(a+270)%360,s:o.s,l:o.l})]}function w(e){var o=t(e).toHsl(),a=o.h;return[t(e),t({h:(a+72)%360,s:o.s,l:o.l}),t({h:(a+216)%360,s:o.s,l:o.l})]}function $(e,o,a){o=o||6,a=a||30;var i=t(e).toHsl(),n=360/a,r=[t(e)];for(i.h=(i.h-(n*o>>1)+720)%360;--o;)i.h=(i.h+n)%360,r.push(t(i));return r}function x(e,o){o=o||6;for(var a=t(e).toHsv(),i=a.h,n=a.s,r=a.v,l=[],s=1/o;o--;)l.push(t({h:i,s:n,v:r})),r=(r+s)%1;return l}function C(e){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[e[o]]=o);return t}function S(e){return e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=1),e}function _(t,o){T(t)&&(t="100%");var a=M(t);return t=R(o,U(0,parseFloat(t))),a&&(t=parseInt(t*o,10)/100),e.abs(t-o)<1e-6?1:t%o/parseFloat(o)}function I(e){return R(1,U(0,e))}function O(e){return parseInt(e,16)}function T(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function M(e){return"string"==typeof e&&-1!=e.indexOf("%")}function H(e){return 1==e.length?"0"+e:""+e}function E(e){return 1>=e&&(e=100*e+"%"),e}function A(t){return e.round(255*parseFloat(t)).toString(16)}function q(e){return O(e)/255}function D(e){return!!W.CSS_UNIT.exec(e)}function P(e){e=e.replace(F,"").replace(B,"").toLowerCase();var t=!1;if(J[e])e=J[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var o;return(o=W.rgb.exec(e))?{r:o[1],g:o[2],b:o[3]}:(o=W.rgba.exec(e))?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=W.hsl.exec(e))?{h:o[1],s:o[2],l:o[3]}:(o=W.hsla.exec(e))?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=W.hsv.exec(e))?{h:o[1],s:o[2],v:o[3]}:(o=W.hsva.exec(e))?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=W.hex8.exec(e))?{r:O(o[1]),g:O(o[2]),b:O(o[3]),a:q(o[4]),format:t?"name":"hex8"}:(o=W.hex6.exec(e))?{r:O(o[1]),g:O(o[2]),b:O(o[3]),format:t?"name":"hex"}:(o=W.hex4.exec(e))?{r:O(o[1]+""+o[1]),g:O(o[2]+""+o[2]),b:O(o[3]+""+o[3]),a:q(o[4]+""+o[4]),format:t?"name":"hex8"}:(o=W.hex3.exec(e))?{r:O(o[1]+""+o[1]),g:O(o[2]+""+o[2]),b:O(o[3]+""+o[3]),format:t?"name":"hex"}:!1}function j(e){var t,o;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),o=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==o&&"large"!==o&&(o="small"),{level:t,size:o}}var F=/^\s+/,B=/\s+$/,N=0,L=e.round,R=e.min,U=e.max,z=e.random;t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,o,a,i,n,r,l=this.toRgb();return t=l.r/255,o=l.g/255,a=l.b/255,i=.03928>=t?t/12.92:e.pow((t+.055)/1.055,2.4),n=.03928>=o?o/12.92:e.pow((o+.055)/1.055,2.4),r=.03928>=a?a/12.92:e.pow((a+.055)/1.055,2.4),.2126*i+.7152*n+.0722*r},setAlpha:function(e){return this._a=S(e),this._roundA=L(100*this._a)/100,this},toHsv:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=r(this._r,this._g,this._b),t=L(360*e.h),o=L(100*e.s),a=L(100*e.v);return 1==this._a?"hsv("+t+", "+o+"%, "+a+"%)":"hsva("+t+", "+o+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var e=i(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=i(this._r,this._g,this._b),t=L(360*e.h),o=L(100*e.s),a=L(100*e.l);return 1==this._a?"hsl("+t+", "+o+"%, "+a+"%)":"hsla("+t+", "+o+"%, "+a+"%, "+this._roundA+")"},toHex:function(e){return s(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return d(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:L(this._r),g:L(this._g),b:L(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+L(this._r)+", "+L(this._g)+", "+L(this._b)+")":"rgba("+L(this._r)+", "+L(this._g)+", "+L(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:L(100*_(this._r,255))+"%",g:L(100*_(this._g,255))+"%",b:L(100*_(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+L(100*_(this._r,255))+"%, "+L(100*_(this._g,255))+"%, "+L(100*_(this._b,255))+"%)":"rgba("+L(100*_(this._r,255))+"%, "+L(100*_(this._g,255))+"%, "+L(100*_(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:V[s(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var o="#"+c(this._r,this._g,this._b,this._a),a=o,i=this._gradientType?"GradientType = 1, ":"";if(e){var n=t(e);a="#"+c(n._r,n._g,n._b,n._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+o+",endColorstr="+a+")"},toString:function(e){var t=!!e;e=e||this._format;var o=!1,a=this._a<1&&this._a>=0,i=!t&&a&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);return i?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(o=this.toRgbString()),"prgb"===e&&(o=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(o=this.toHexString()),"hex3"===e&&(o=this.toHexString(!0)),"hex4"===e&&(o=this.toHex8String(!0)),"hex8"===e&&(o=this.toHex8String()),"name"===e&&(o=this.toName()),"hsl"===e&&(o=this.toHslString()),"hsv"===e&&(o=this.toHsvString()),o||this.toHexString())},clone:function(){return t(this.toString())},_applyModification:function(e,t){var o=e.apply(null,[this].concat([].slice.call(t)));return this._r=o._r,this._g=o._g,this._b=o._b,this.setAlpha(o._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(u,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(f,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination($,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(y,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},t.fromRatio=function(e,o){if("object"==typeof e){var a={};for(var i in e)e.hasOwnProperty(i)&&(a[i]="a"===i?e[i]:E(e[i]));e=a}return t(e,o)},t.equals=function(e,o){return e&&o?t(e).toRgbString()==t(o).toRgbString():!1},t.random=function(){return t.fromRatio({r:z(),g:z(),b:z()})},t.mix=function(e,o,a){a=0===a?0:a||50;var i=t(e).toRgb(),n=t(o).toRgb(),r=a/100,l={r:(n.r-i.r)*r+i.r,g:(n.g-i.g)*r+i.g,b:(n.b-i.b)*r+i.b,a:(n.a-i.a)*r+i.a};return t(l)},t.readability=function(o,a){var i=t(o),n=t(a);return(e.max(i.getLuminance(),n.getLuminance())+.05)/(e.min(i.getLuminance(),n.getLuminance())+.05)},t.isReadable=function(e,o,a){var i,n,r=t.readability(e,o);switch(n=!1,i=j(a),i.level+i.size){case"AAsmall":case"AAAlarge":n=r>=4.5;break;case"AAlarge":n=r>=3;break;case"AAAsmall":n=r>=7}return n},t.mostReadable=function(e,o,a){var i,n,r,l,s=null,d=0;a=a||{},n=a.includeFallbackColors,r=a.level,l=a.size;for(var c=0;c<o.length;c++)i=t.readability(e,o[c]),i>d&&(d=i,s=t(o[c]));return t.isReadable(e,s,{level:r,size:l})||!n?s:(a.includeFallbackColors=!1,t.mostReadable(e,["#fff","#000"],a))};var J=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},V=t.hexNames=C(J),W=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",o="(?:"+t+")|(?:"+e+")",a="[\\s|\\(]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")\\s*\\)?",i="[\\s|\\(]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")[,|\\s]+("+o+")\\s*\\)?";return{CSS_UNIT:new RegExp(o),rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+a),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):window.tinycolor=t}(Math);

},{}],19:[function(require,module,exports){
(function (global){
!function(e){e(["jquery"],function(e){return function(){function t(e,t,o){return m({type:w.error,iconClass:g().iconClasses.error,message:e,optionsOverride:o,title:t})}function o(t,o){return t||(t=g()),h=e("#"+t.containerId),h.length?h:(o&&(h=u(t)),h)}function a(e,t,o){return m({type:w.info,iconClass:g().iconClasses.info,message:e,optionsOverride:o,title:t})}function i(e){v=e}function n(e,t,o){return m({type:w.success,iconClass:g().iconClasses.success,message:e,optionsOverride:o,title:t})}function r(e,t,o){return m({type:w.warning,iconClass:g().iconClasses.warning,message:e,optionsOverride:o,title:t})}function l(e,t){var a=g();h||o(a),c(e,a,t)||d(a)}function s(t){var a=g();return h||o(a),t&&0===e(":focus",t).length?(b(t),void 0):(h.children().length&&h.remove(),void 0)}function d(t){for(var o=h.children(),a=o.length-1;a>=0;a--)c(e(o[a]),t)}function c(t,o,a){var i=a&&a.force?a.force:!1;return t&&(i||0===e(":focus",t).length)?(t[o.hideMethod]({duration:o.hideDuration,easing:o.hideEasing,complete:function(){b(t)}}),!0):!1}function u(t){return h=e("<div/>").attr("id",t.containerId).addClass(t.positionClass),h.appendTo(e(t.target)),h}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function f(e){v&&v(e)}function m(t){function a(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(){s(),c(),u(),p(),m(),v(),d(),n()}function n(){var e="";switch(t.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}I.attr("aria-live",e)}function r(){_.closeOnHover&&I.hover(C,$),!_.onclick&&_.tapToDismiss&&I.click(x),_.closeButton&&M&&M.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),_.onCloseClick&&_.onCloseClick(e),x(!0)}),_.onclick&&I.click(function(e){_.onclick(e),x()})}function l(){I.hide(),I[_.showMethod]({duration:_.showDuration,easing:_.showEasing,complete:_.onShown}),_.timeOut>0&&(O=setTimeout(x,_.timeOut),P.maxHideTime=parseFloat(_.timeOut),P.hideEta=(new Date).getTime()+P.maxHideTime,_.progressBar&&(P.intervalId=setInterval(S,10)))}function s(){t.iconClass&&I.addClass(_.toastClass).addClass(T)}function d(){_.newestOnTop?h.prepend(I):h.append(I)}function c(){if(t.title){var e=t.title;_.escapeHtml&&(e=a(t.title)),E.append(e).addClass(_.titleClass),I.append(E)}}function u(){if(t.message){var e=t.message;_.escapeHtml&&(e=a(t.message)),A.append(e).addClass(_.messageClass),I.append(A)}}function p(){_.closeButton&&(M.addClass(_.closeClass).attr("role","button"),I.prepend(M))}function m(){_.progressBar&&(H.addClass(_.progressClass),I.prepend(H))}function v(){_.rtl&&I.addClass("rtl")}function w(e,t){if(e.preventDuplicates){if(t.message===y)return!0;y=t.message}return!1}function x(t){var o=t&&_.closeMethod!==!1?_.closeMethod:_.hideMethod,a=t&&_.closeDuration!==!1?_.closeDuration:_.hideDuration,i=t&&_.closeEasing!==!1?_.closeEasing:_.hideEasing;return!e(":focus",I).length||t?(clearTimeout(P.intervalId),I[o]({duration:a,easing:i,complete:function(){b(I),clearTimeout(O),_.onHidden&&"hidden"!==D.state&&_.onHidden(),D.state="hidden",D.endTime=new Date,f(D)}})):void 0}function $(){(_.timeOut>0||_.extendedTimeOut>0)&&(O=setTimeout(x,_.extendedTimeOut),P.maxHideTime=parseFloat(_.extendedTimeOut),P.hideEta=(new Date).getTime()+P.maxHideTime)}function C(){clearTimeout(O),P.hideEta=0,I.stop(!0,!0)[_.showMethod]({duration:_.showDuration,easing:_.showEasing})}function S(){var e=100*((P.hideEta-(new Date).getTime())/P.maxHideTime);H.width(e+"%")}var _=g(),T=t.iconClass||_.iconClass;if("undefined"!=typeof t.optionsOverride&&(_=e.extend(_,t.optionsOverride),T=t.optionsOverride.iconClass||T),!w(_,t)){k++,h=o(_,!0);var O=null,I=e("<div/>"),E=e("<div/>"),A=e("<div/>"),H=e("<div/>"),M=e(_.closeHtml),P={intervalId:null,hideEta:null,maxHideTime:null},D={toastId:k,state:"visible",startTime:new Date,options:_,map:t};return i(),l(),r(),f(D),_.debug&&console&&console.log(D),I}}function g(){return e.extend({},p(),x.options)}function b(e){h||(h=o()),e.is(":visible")||(e.remove(),e=null,0===h.children().length&&(h.remove(),y=void 0))}var h,v,y,k=0,w={error:"error",info:"info",success:"success",warning:"warning"},x={clear:l,remove:s,error:t,getContainer:o,info:a,options:{},subscribe:i,success:n,version:"2.1.3",warning:r};return x}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t((typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null)):window.toastr=t(window.jQuery)});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],20:[function(require,module,exports){
var templateSystem=require("../src/js/bindings/choose-template.js");document.addEventListener("DOMContentLoaded",function(){templateSystem.addTemplate("array","<!-- ko foreach: $data --><!-- ko block: $data --><!-- /ko --><!-- /ko -->"),templateSystem.addTemplate("block-show","<!-- ko block: $data, scrollIntoView: $root.selectedBlock() === $data --><!-- /ko -->"),templateSystem.addTemplate("block-wysiwyg",'<div class="editable block" data-drop-content="Drop here" data-bind="attr: { \'data-drop-content\': $root.t(\'Drop here\') }, click: function(obj, evt) { $root.selectBlock(obj); return true }, clickBubble: false, css: { selected: $root.selectedBlock() === $data }, scrollIntoView: $root.selectedBlock() === $data">  <div class="mo-blockselectionhelper"></div>  <div class="tools" data-bind="tooltips: {}">    <!-- ko if: typeof $index != \'undefined\' -->    <div title="Drag this handle to move the block" data-bind="attr: { title: $root.t(\'Drag this handle to move the block\') }" class="tool handle"><i class="fa fa-fw fa-sort"></i></div>    <!-- ko if: $index() > 0 -->    <div title="Move this block upside" data-bind="attr: { title: $root.t(\'Move this block upside\') }" class="tool moveup"><i class="fa fa-fw fa-sort-asc" data-bind=\'click: $root.moveBlock.bind($element, $index, $parent, true)\'></i></div>    <!-- /ko -->    <!-- ko if: $index() < $parent.blocks().length -1 -->    <div title="Move this block downside" data-bind="attr: { title: $root.t(\'Move this block downside\') }" class="tool movedown"><i class="fa fa-fw fa-sort-desc" data-bind=\'click: $root.moveBlock.bind($element, $index, $parent, false)\'></i></div>    <!-- /ko -->    <div title="Delete block" class="tool delete" data-bind="attr: { title: $root.t(\'Delete block\') }, click: $root.removeBlock.bind($element, $rawData, $parent)"><i class="fa fa-fw fa-trash-o"></i></div>    <div title="Duplicate block" class="tool clone" data-bind="attr: { title: $root.t(\'Duplicate block\') }, click: $root.duplicateBlock.bind($element, $index, $parent)"><i class="fa fa-fw fa-files-o"></i></div>    <!-- /ko -->    <!-- ko if: typeof $data._nextVariant != \'undefined\' --><div title="Switch block variant" class="tool variant" data-bind="attr: { title: $root.t(\'Switch block variant\') }, click: $data._nextVariant"><i class="fa fa-fw fa-magic"></i></div><!-- /ko -->  </div>  <!-- ko block: $data --><!-- /ko --></div>'),templateSystem.addTemplate("blocks-show","<!-- ko template: { name: 'block-show', foreach: blocks } --><!-- /ko -->"),templateSystem.addTemplate("blocks-wysiwyg","<div class=\"sortable-blocks-edit\" data-drop-content=\"Drop here\" data-empty-content=\"Drop here blocks from the Blocks tab\" data-bind=\"attr: { 'data-drop-content': $root.t('Drop here'), 'data-empty-content': $root.t('Drop here blocks from the &quot;Blocks&quot; tab') }, css: { 'empty': ko.utils.unwrapObservable(blocks).length == 0 }, extsortable: { connectClass: 'sortable-blocks-edit', template: 'block-wysiwyg', data: blocks, dragging: $root.dragging, beforeMove: $root.startMultiple, afterMove: $root.stopMultiple, options: { handle: '.handle', placeholder: $root.placeholderHelper } }\"></div>"),templateSystem.addTemplate("customstyle",'<div class="customStyleHelp"></div>'),templateSystem.addTemplate("empty",""),templateSystem.addTemplate("error",'[<div style="background-color: #fff0f0" data-bind="text: ko.toJS($data)"></div>]'),templateSystem.addTemplate("gallery-images",'<div data-bind="foreach: items.currentPageData">  <div class="draggable-item" data-bind="if: typeof thumbnailUrl != \'undefined\'">    <div class="draggable image" data-bind="click: $root.addImage, extdraggable: { data: $data, dropContainer: \'#main-wysiwyg-area\', dragging: $root.draggingImage, \'options\': { \'appendTo\': \'.container-main\' } }, style: { backgroundImage: \'url(\\\'\' + thumbnailUrl + \'\\\')\' }">      <img title="Drag this image and drop it on any template image placeholder" style="display: block;" data-bind="tooltips: {}, attr: { src: thumbnailUrl, \'title\': $root.t(\'Drag this image and drop it on any template image placeholder\') }"/>    </div>  </div></div><!-- ko if: items.pageCount() > 1 --><div class="galleryPager" data-bind="buttonset: {}">  <a href="javascript:void(0)" data-bind="click: items.moveFirst, button: { disabled: items.currentPage() == 1, icons: { primary: \'fa fa-fast-backward\' }, text: false }">First</a>  <a href="javascript:void(0)" data-bind="click: items.movePrevious, button: { disabled: items.currentPage() == 1, icons: { primary: \'fa fa-backward\' }, text: false }">Previous</a>  <span data-bind="button: { disabled: true, text: true, label: \' \'+items.currentPage()+\' of \'+items.pageCount()+\' \' }"> X of Y </span>  <a href="javascript:void(0)" data-bind="click: items.moveNext, button: { disabled: items.currentPage() == items.pageCount(), icons: { primary: \'fa fa-forward\' }, text: false }">Next</a>  <a href="javascript:void(0)" data-bind="click: items.moveLast, button: { disabled: items.currentPage() == items.pageCount(), icons: { primary: \'fa fa-fast-forward\' }, text: false }">Last</a></div><!-- /ko -->'),templateSystem.addTemplate("img-wysiwyg",'<table tabfocus="0" cellspacing="0" cellpadding="0" data-drop-content="Drop here" data-bind="style: _stylebind, click: function(obj, evt) { $root.selectItem(_item, _data); return true; }, clickBubble: false, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }, droppable: { options: { accept: \'.image\', activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }, data: _src, dragged: $root.fileToImage }, css: { selecteditem: $root.isSelectedItem(_item) }, scrollIntoView: $root.isSelectedItem(_item), attr: { \'data-drop-content\': $root.t(\'Drop here\'), width: _width, height: _height, align: _align }"  class="img-wysiwyg selectable-img" style="display: table;"><tr><td class="uploadzone">  <div class="mo-imgselectionhelper"></div>  <div class="mo-uploadzone"></div>  <div class="img-size" data-bind="text: _size">size</div>  <div class="midtools" data-bind="tooltips: {}">    <!-- ko if: _src() != \'\' -->    <div title="Remove image" class="tool delete" data-bind="attr: { title: $root.t(\'Remove image\') }, click: _src.bind(_src, \'\'), clickBubble: false"><i class="fa fa-fw fa-trash-o"></i></div>    <div title="Open the image editing tool" class="tool edit" data-bind="attr: { title: $root.t(\'Open the image editing tool\') }, click: $root.editImage.bind($element, _src), clickBubble: false"><i class="fa fa-fw fa-pencil"></i></div>    <!-- /ko -->    <!-- ko if: _src() == \'\' -->    <div title="Upload a new image" data-bind="attr: { title: $root.t(\'Upload a new image\') }" class="tool upload" style="position: relative; overflow: hidden;"><i class="fa fa-fw fa-upload"></i>      <input class="fileupload nofile" type="file" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.loadImage, canvasPreview: true }" style="z-index: 20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-size: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">    </div>    <!-- /ko -->  </div>  <!-- ko template: _template --><!-- /ko -->  <!-- ko if: _src() == \'\' -->    <!--    <img style="display: block;" class="imgplaceholder" width="200" src="" alt="Insert an image here" data-bind="wysiwygSrc: { src: _src.preloaded, placeholder: _placeholdersrc, width: _width, height: _height, method: _method }" />    -->    <span class="fileuploadtext" style="text-align: center; display: -ms-flexbox; display: flex; align-items: center; flex-align: center; justify-content: center; padding: 1em; position: absolute; top: 0; left: 0; right: 0; bottom: 0;"><span class="textMiddle" style=" text-shadow: 1px 1px 0 #FFFFFF, 0 0 10px #FFFFFF; font-weight: bold;" data-bind="text: $root.t(\'Drop an image here\')">Drop an image here</span></span>  <!-- /ko -->  <!-- ko if: _src() != \'\' -->  <!--    <img style="display: block;" width="200" src="" data-bind="preloader: _src, wysiwygSrc: { src: _src.preloaded, placeholder: _placeholdersrc, width: _width, height: _height, method: _method }" />    -->  <!-- /ko -->  <!-- pulsante per la cancellazione -->  <div title="Drop an image here or click the upload button" data-bind="attr: { title: $root.t(\'Drop an image here or click the upload button\') }, tooltips: {}" class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">    <!-- ko if: _src.preloaded && _src() != _src.preloaded() -->PRELOADING....<!-- /ko -->    <!-- ko if: _src() != \'\' -->      <input class="fileupload withfile" type="file" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.galleryRecent.unshift.bind($root.galleryRecent), canvasPreview: true }" style="z-index: -20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">    <!-- /ko -->    <div class="progress" style="opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;">      <div class="progress-bar progress-bar-success" style="height: 20px; background-color: black; "></div>    </div>  </div></table>'),templateSystem.addTemplate("main",'<div class="tinyMCE-card">  <div class="tinyMCE-card__content">    <div class="tinyMCE-header">      <span class="undo-redo" data-bind="buttonset: { }">        <a title="Undo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Undo last operation\') }, click: $root.undo.execute, clickBubble: false, button: { disabled: !$root.undo.enabled(), icons: { primary: \'mce-ico mce-i-undo\' }}"></a>        <a title="Redo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Redo last operation\') }, click: $root.redo.execute, clickBubble: false, button: { disabled: !$root.redo.enabled(), icons: { primary: \'mce-ico mce-i-redo\' }}"></a>      </span>    </div>    <div id="main-edit-area" data-bind="click: function(obj, evt) { $root.selectBlock(null); return true; }, clickBubble: false">      <!-- ko withProperties: { templateMode: \'wysiwyg\', templateModeFallback: \'show\' } -->      <div id="main-wysiwyg-area" data-bind="wysiwygScrollfix: true, scrollable: true, fudroppable: { active: draggingImage }, css: { isdragging: dragging, isdraggingimg: draggingImage }, block: content"></div>      <!-- /ko -->    </div>  </div></div><div id="page" style="display: none;" data-bind="visible: true, css: { withToolbox: $root.showToolbox, withPreviewFrame: showPreviewFrame }">  <div id="toolbar" class="mo" data-bind="tooltips: {}">    <!-- ko if: typeof $root.undo != \'undefined\' -->        <!-- ko if: $root.debug -->    <a href="javascript:void(0)" data-bind="click: $root.undoReset, clickBubble: false, button: { disabled: !$root.undo.enabled() && !$root.redo.enabled(), label: \'reset\', text: true }">RESET</a>    <!-- /ko -->    <!-- /ko -->    <span>    <input id="showGallery" type="checkbox" data-bind="checked: $root.showGallery, button: { refreshOn: $root.showGallery,     icons: { primary: \'fa fa-fw fa-picture-o\', secondary: null }, text: true, label: $root.t(\'Gallery\') }"><label title="Show image gallery" for="showGallery" data-bind="attr: { title: $root.t(\'Show image gallery\') }">show gallery</label></input>    </span>    <input id="previewFrameToggle" type="checkbox" data-bind="checked: $root.showPreviewFrame, button: { refreshOn: $root.showPreviewFrame, icons: { primary: \'fa fa-fw fa-tablet\', secondary: null }, text: false, label: $root.t(\'Preview\') }"><label title="Show live preview" for="previewFrameToggle" data-bind="attr: { title: $root.t(\'Show live preview\') }">PREVIEW</label></input>    <!-- ko if: $root.debug -->    <a href="javascript:void(0)" data-bind="click: $root.export, clickBubble: false, button: { label: \'export\', text: true }">EXPORT</a>    <input type="checkbox" data-bind="checked: $root.debug" /> debug    <a href="javascript:void(0)" data-bind="click: $root.loadDefaultBlocks, clickBubble: false, button: { icons: { primary: \'fa fa-fw fa-upload\' }, label: \'Default\', text: true }">LOAD BLOCKS</a>    [<a id="subscriptionsCount" href="javascript:viewModel.loopSubscriptionsCount()">subs</a>]    <!-- /ko -->    <span data-bind="visible: false">    <input type="checkbox" data-bind="checked: $root.showToolbox" /> toolbox    </span>    <div class="rightButtons">    <!-- ko if: typeof $root.save !== \'undefined\' -->    <a title="Save template" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Save template\') }, click: $root.save.execute, clickBubble: false, button: { disabled: !$root.save.enabled(), icons: { primary: \'fa fa-fw fa-cloud-upload\' }, label: $root.t($root.save.name), text: true }">SALVA</a>    <!-- /ko -->    <!-- ko if: typeof $root.test !== \'undefined\' -->    <a title="Show preview and send test" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show preview and send test\') }, click: $root.test.execute, clickBubble: false, button: { disabled: !$root.test.enabled(), icons: { primary: \'fa fa-fw fa-paper-plane\' }, label: $root.t($root.test.name), text: true }">TEST</a>    <!-- /ko -->    <!-- ko if: typeof $root.download !== \'undefined\' -->    <form id="downloadForm" action="#" method="POST">    <input type="hidden" name="action" value="download" />    <input type="hidden" name="filename" value="email.html" />    <input type="hidden" name="html" id="downloadHtmlTextarea" />    <a title="Download template" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Download template\') }, click: $root.download.execute, clickBubble: false, button: { disabled: !$root.download.enabled(), icons: { primary: \'fa fa-fw fa-download\' }, label: $root.t($root.download.name), text: true }">DOWNLOAD</a>    </form>    <!-- /ko -->    </div>  </div>  <!-- ko if: $root.showToolbox -->  <div id="main-toolbox" class="mo" data-bind="scrollable: true, withProperties: { templateMode: \'edit\' }">    <div data-bind="template: { name: \'toolbox\' }"></div>  </div>  <!-- /ko -->    <div id="main-preview" class="mo" data-bind="scrollable: true, if: $root.showPreviewFrame">    <div id="preview-toolbar">      <div data-bind="visible: $root.showPreviewFrame, buttonset: { }" style="display: inline-block">        <input id="previewLarge" type="radio" name="previewMode" value="large" data-bind="checked: $root.previewMode, button: { text: false, label: \'large\', icons: { primary: \'fa fa-fw fa-desktop\' } }" />        <label for="previewLarge" title="Large screen" data-bind="attr: { title: $root.t(\'Large screen\') }">Large screen</label>        <input id="previewDesktop" type="radio" name="previewMode" value="desktop" data-bind="checked: $root.previewMode, button: { text: false, label: \'desktop\', icons: { primary: \'fa fa-fw fa-tablet\' } }" />        <label for="previewDesktop" title="Tablet" data-bind="attr: { title: $root.t(\'Tablet\') }">Tablet</label>        <input id="previewMobile" type="radio" name="previewMode" value="mobile" data-bind="checked: $root.previewMode, button: { text: false, label: \'mobile\', icons: { primary: \'fa fa-fw fa-mobile\' } }" />        <label for="previewMobile" title="Smartphone" data-bind="attr: { title: $root.t(\'Smartphone\') }">Smartphone</label>      </div>    </div>    <div id="frame-container" data-bind="css: { desktop: $root.previewMode() == \'desktop\', mobile: $root.previewMode() == \'mobile\', large: $root.previewMode() == \'large\' }">      <iframe data-bind="bindIframe: $data"></iframe>    </div>  </div>  <div class="mo" id="mo-body"></div>  <div id="incompatible-template" title="Saved model is obsolete" style="display: none" data-bind="attr: { title: $root.t(\'Saved model is obsolete\') }, html: $root.t(\'<p>The saved model has been created with a previous, non completely compatible version, of the template</p><p>Some content or style in the model <b>COULD BE LOST</b> if you will <b>save</b></p><p>Contact us for more informations!</p>\')">    Incompatible template  </div>  <div id="fake-image-editor" title="Fake image editor" style="display: none" data-bind="attr: { title: $root.t(\'Fake image editor\') }, html: $root.t(\'<p>Fake image editor</p>\')">    <p>Fake image editor</p>  </div></div><!-- ko if: $root.logoPath --><div id="loading" class="loading" style="display: block; width: 300px; text-align: center; height: 32px; position: absolute; top:0; bottom: 0; left: 0; right: 0;  margin: auto;" data-bind="attr: { style: \'position: absolute; top: 5px; left: 6px; z-index: 150;\'}, css: { loading: false }">  <a href="/" data-bind="attr: { href: $root.logoUrl, alt: $root.logoAlt }"><img data-bind="attr: { src: $root.logoPath }" width="32" height="32" alt="mosaico" border="0" /></a>  <div style="opacity: 0" data-bind="visible: false">Oppps... !!</div></div><!-- /ko -->'),templateSystem.addTemplate("tinymce-area",'<div class="tinyMCE-card">  <div class="tinyMCE-card__content">    <div class="tinyMCE-header">      <span class="undo-redo" data-bind="buttonset: { }">        <a title="Undo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Undo last operation\') }, click: $root.undo.execute, clickBubble: false, button: { disabled: !$root.undo.enabled(), icons: { primary: \'mce-ico mce-i-undo\' }}"></a>        <a title="Redo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Redo last operation\') }, click: $root.redo.execute, clickBubble: false, button: { disabled: !$root.redo.enabled(), icons: { primary: \'mce-ico mce-i-redo\' }}"></a>      </span>    </div>    <div id="main-edit-area" data-bind="click: function(obj, evt) { $root.selectBlock(null); return true; }, clickBubble: false">      <!-- ko withProperties: { templateMode: \'wysiwyg\', templateModeFallback: \'show\' } -->      <div id="main-wysiwyg-area" data-bind="wysiwygScrollfix: true, scrollable: true, fudroppable: { active: draggingImage }, css: { isdragging: dragging, isdraggingimg: draggingImage }, block: content"></div>      <!-- /ko -->    </div>    <div id="fake-image-editor" title="Fake image editor" style="display: none" data-bind="attr: { title: $root.t(\'Fake image editor\') }, html: $root.t(\'<p>Fake image editor</p>\')">    <p>Fake image editor</p>  </div>  </div></div>'),templateSystem.addTemplate("tinymce-sidebar",'  <!-- ko if: $root.showToolbox -->  <div id="main-toolbox" class="mo" data-bind="scrollable: true, withProperties: { templateMode: \'edit\' }">    <div data-bind="template: { name: \'toolbox\' }"></div>  </div>  <!-- /ko -->'),templateSystem.addTemplate("toolbox",'<div id="tooltabs" class="tabs_horizontal button_color" data-bind="tabs: { active: $root.selectedTool }">  <ul>    <li data-bind="tooltips: {}"><a title="Blocks ready to be added to the template" data-local="true" href="#toolblocks" data-bind="attr: { title: $root.t(\'Blocks ready to be added to the template\') }"><span data-bind="html: $root.t(\'Blocks\')">Blocks</span></a></li>    <li data-bind="tooltips: {}"><a title="Edit content options" href="#toolcontents" data-local="true" data-bind="attr: { title: $root.t(\'Edit content options\') }"><span data-bind="html: $root.t(\'Content\')">Content</span></a></li>    <li data-bind="click: $root.showGallery"><a title="Edit style options" href="#toolimages" data-local="true" data-bind="attr: { title: $root.t(\'View or upload images\') }"><span data-bind="html: $root.t(\'Images\')">Images</span></a></li>  </ul>  <div id="toolblocks" data-bind="scrollable: true">    <div class="block-list" data-bind="foreach: blockDefs" style="text-align: center">      <div class="draggable-item" data-bind="withProperties: { templateMode: \'show\' }">        <div class="block" data-bind="extdraggable: { connectClass: \'sortable-blocks-edit\', data: $data, dropContainer: \'#main-wysiwyg-area\', dragging: $root.dragging, \'options\': { handle: \'.handle\', distance: 10, \'appendTo\': \'#page\' } }, click: $root.addBlock" style="position: relative;">          <div title="Click or drag to add this block to the template" class="handle" data-bind="attr: { title: $root.t(\'Click or drag to add this block to the template\') }, tooltips: {}"></div>          <img data-bind="attr: { alt: $root.t(\'Block __name__\', { name: ko.utils.unwrapObservable(type) }), src: $root.templatePath(\'edres/\'+ko.utils.unwrapObservable(type)+\'.png\') }" alt="Block __name__" />        </div>        <a href="javascript:void(0)" class="addblockbutton" data-bind="click: $root.addBlock, button: { label: $root.t(\'Add\') }">Add</a>      </div>    </div>  </div>  <div id="toolcontents" data-bind="scrollable: true">    <div data-bind="scrollable: true, withProperties: { templateMode: \'styler\' }">    <!-- ko if: typeof $root.content().theme === \'undefined\' || typeof $root.content().theme().scheme === \'undefined\' || $root.content().theme().scheme() === \'custom\' -->      <!-- ko if: $root.selectedBlock() !== null -->      <div data-bind="block: $root.selectedBlock, css: { workGlobal: $root.selectedBlock().customStyle, workLocal: typeof $root.selectedBlock().customStyle === \'undefined\' || !$root.selectedBlock().customStyle() }"></div>      <!-- /ko -->      <!-- ko if: $root.selectedBlock() == null -->      <div class="noSelectedBlock" data-bind="text: $root.t(\'By clicking on message parts you will select a block and style options, if available, will show here\')">By clicking on message parts you will select a block and style options, if available, will show here</div>      <!-- /ko -->      <div class="workGlobalContent">      <!-- ko block: content --><!-- /ko -->    </div>    <!-- /ko -->    </div>    <!-- ko if: $root.selectedBlock() !== null -->    <div data-bind="block: $root.selectedBlock"></div>    <!-- /ko -->    <!-- ko if: $root.selectedBlock() == null -->    <div class="noSelectedBlock" data-bind="text: $root.t(\'By clicking on message parts you will select a block and content options, if any, will show here\')">By clicking on message parts you will select a block and content options, if any, will show here</div>    <!-- /ko -->    <!-- ko block: content --><!-- /ko -->  </div>    <div id="toolimages" class="slidebar" data-bind="scrollable: true, css: { hidden: $root.showGallery() === false }, tabs: { active: $root.selectedImageTab }">  <div data-drop-content="Drop here" class="img-dropzone pane uploadzone" data-bind="attr: { \'data-drop-content\': $root.t(\'Drop here\') }, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }">  <div class="mo-uploadzone" style="position: relative; padding: 2em; border: 2px dotted #808080">     <input class="fileupload" type="file" multiple name="files[]" data-bind="fileupload: { onerror: $root.notifier.error, onfile: $root.loadImage }" style="z-index: 10; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">     <span data-bind="text: $root.t(\'Click or drag files here\')">Click or drag files here</span>     <div class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">       <div class="progress" style="opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;">         <div class="progress-bar progress-bar-success" style="height: 20px; background-color: black; "></div>       </div>     </div>  </div>  </div>  <div id="toolimagestab" class="tabs_horizontal" data-bind="tabs: { active: $root.selectedImageTab }">    <ul>      <li data-bind="tooltips: {}"><a title="Session images" data-local="true" href="#toolimagesrecent" data-bind="attr: { title: $root.t(\'Session images\') }, text: $root.t(\'Recents\')">Recents</a></li>      <li data-bind="tooltips: {}"><a title="Remote images" data-local="true" href="#toolimagesgallery" data-bind="attr: { title: $root.t(\'Remote gallery\') }, text: $root.t(\'My Images\')">My Images</a></li>      <li data-bind="tooltips: {}"><a title="Remote gallery" data-local="true" href="#toolholidaygallery" data-bind="attr: { title: $root.t(\'Nature images\') }, text: $root.t(\'Holidays\')">Holidays</a></li>      <li data-bind="tooltips: {}"><a title="Remote gallery" data-local="true" href="#toolnaturegallery" data-bind="attr: { title: $root.t(\'Nature images\') }, text: $root.t(\'Nature\')">Nature</a></li>      <li data-bind="tooltips: {}"><a title="Remote gallery" data-local="true" href="#toolpromotiongallery" data-bind="attr: { title: $root.t(\'Promotion images\') }, text: $root.t(\'Promotion\')">Promotion</a></li>    </ul>    <div id="toolimagesrecent">      <!-- ko if: galleryRecent().length == 0 --><div class="galleryEmpty" data-bind="text: $root.t(\'No images uploaded, yet\')">No images uploaded, yet</div><!-- /ko -->      <!-- ko template: {name: \'gallery-images\', data: { items: galleryRecent } } --># recent gallery #<!-- /ko -->    </div>    <div id="toolimagesgallery" style="text-align: center">    <!-- ko if: $root.galleryLoaded() === false --><a class="loadbutton" title="Show images from the gallery" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show images from the gallery\') }, click: $root.loadGallery, button: { disabled: $root.galleryLoaded, icons: { primary: \'fa fa-fw fa-picture-o\' }, label: $root.galleryLoaded() == \'loading\' ? $root.t(\'Loading...\') : $root.t(\'Load gallery\'), text: true }"># load gally #</a><!-- /ko -->    <!-- ko if: $root.galleryLoaded() === \'loading\' --><div class="galleryEmpty" data-bind="text: $root.t(\'Loading gallery...\')">Loading gallery...</div><!-- /ko -->    <!-- ko if: $root.galleryLoaded() === 0 --><div class="galleryEmpty" data-bind="text: $root.t(\'The gallery is empty\')">The gallery is empty</div><!-- /ko -->    <!-- ko template: {name: \'gallery-images\', data: { items: galleryRemote } } --># remote gallery #<!-- /ko -->    </div>    <div id="toolholidaygallery" style="text-align: center">    <!-- ko if: $root.galleryHolidayLoaded() === false --><a class="loadbutton" title="Show images from the gallery" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show images from the nature gallery\') }, click: $root.loadHolidayGallery, button: { disabled: $root.galleryHolidayLoaded, icons: { primary: \'fa fa-fw fa-picture-o\' }, label: $root.galleryHolidayLoaded() == \'loading\' ? $root.t(\'Loading...\') : $root.t(\'Load gallery\'), text: true }"># load gally #</a><!-- /ko -->    <!-- ko if: $root.galleryHolidayLoaded() === \'loading\' --><div class="galleryEmpty" data-bind="text: $root.t(\'Loading gallery...\')">Loading gallery...</div><!-- /ko -->    <!-- ko if: $root.galleryHolidayLoaded() === 0 --><div class="galleryEmpty" data-bind="text: $root.t(\'The gallery is empty\')">The gallery is empty</div><!-- /ko -->    <!-- ko template: {name: \'gallery-images\', data: { items: galleryHolidayRemote } } --># remote gallery #<!-- /ko -->    </div>    <div id="toolnaturegallery" style="text-align: center">    <!-- ko if: $root.galleryNatureLoaded() === false --><a class="loadbutton" title="Show images from the gallery" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show images from the nature gallery\') }, click: $root.loadNatureGallery, button: { disabled: $root.galleryNatureLoaded, icons: { primary: \'fa fa-fw fa-picture-o\' }, label: $root.galleryNatureLoaded() == \'loading\' ? $root.t(\'Loading...\') : $root.t(\'Load gallery\'), text: true }"># load gally #</a><!-- /ko -->    <!-- ko if: $root.galleryNatureLoaded() === \'loading\' --><div class="galleryEmpty" data-bind="text: $root.t(\'Loading gallery...\')">Loading gallery...</div><!-- /ko -->    <!-- ko if: $root.galleryNatureLoaded() === 0 --><div class="galleryEmpty" data-bind="text: $root.t(\'The gallery is empty\')">The gallery is empty</div><!-- /ko -->    <!-- ko template: {name: \'gallery-images\', data: { items: galleryNatureRemote } } --># remote gallery #<!-- /ko -->    </div>    <div id="toolpromotiongallery" style="text-align: center">    <!-- ko if: $root.galleryPromotionLoaded() === false --><a class="loadbutton" title="Show images from the gallery" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show images from the nature gallery\') }, click: $root.loadPromotionGallery, button: { disabled: $root.galleryPromotionLoaded, icons: { primary: \'fa fa-fw fa-picture-o\' }, label: $root.galleryPromotionLoaded() == \'loading\' ? $root.t(\'Loading...\') : $root.t(\'Load gallery\'), text: true }"># load gally #</a><!-- /ko -->    <!-- ko if: $root.galleryPromotionLoaded() === \'loading\' --><div class="galleryEmpty" data-bind="text: $root.t(\'Loading gallery...\')">Loading gallery...</div><!-- /ko -->    <!-- ko if: $root.galleryPromotionLoaded() === 0 --><div class="galleryEmpty" data-bind="text: $root.t(\'The gallery is empty\')">The gallery is empty</div><!-- /ko -->    <!-- ko template: {name: \'gallery-images\', data: { items: galleryPromotionRemote } } --># remote gallery #<!-- /ko -->    </div>  </div>  </div></div><div id="tooltheme" class="ui-widget slidebar" data-bind="css: { hidden: $root.showTheme() === false }">    <!-- ko withProperties: { templateMode: \'styler\' } -->    <!-- ko if: $root.showTheme -->      <!-- ko block: $root.content().theme --><!-- /ko -->    <!-- /ko -->  <!-- /ko --></div>')});

},{"../src/js/bindings/choose-template.js":30}],21:[function(require,module,exports){
(function (global){
'use strict';

// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js
// original notice:

/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function compare(a, b) {
  if (a === b) {
    return 0;
  }

  var x = a.length;
  var y = b.length;

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i];
      y = b[i];
      break;
    }
  }

  if (x < y) {
    return -1;
  }
  if (y < x) {
    return 1;
  }
  return 0;
}
function isBuffer(b) {
  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {
    return global.Buffer.isBuffer(b);
  }
  return !!(b != null && b._isBuffer);
}

// based on node assert, original notice:

// http://wiki.commonjs.org/wiki/Unit_Testing/1.0
//
// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!
//
// Originally from narwhal.js (http://narwhaljs.org)
// Copyright (c) 2009 Thomas Robinson <280north.com>
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the 'Software'), to
// deal in the Software without restriction, including without limitation the
// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
// sell copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

var util = require('util/');
var hasOwn = Object.prototype.hasOwnProperty;
var pSlice = Array.prototype.slice;
var functionsHaveNames = (function () {
  return function foo() {}.name === 'foo';
}());
function pToString (obj) {
  return Object.prototype.toString.call(obj);
}
function isView(arrbuf) {
  if (isBuffer(arrbuf)) {
    return false;
  }
  if (typeof global.ArrayBuffer !== 'function') {
    return false;
  }
  if (typeof ArrayBuffer.isView === 'function') {
    return ArrayBuffer.isView(arrbuf);
  }
  if (!arrbuf) {
    return false;
  }
  if (arrbuf instanceof DataView) {
    return true;
  }
  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {
    return true;
  }
  return false;
}
// 1. The assert module provides functions that throw
// AssertionError's when particular conditions are not met. The
// assert module must conform to the following interface.

var assert = module.exports = ok;

// 2. The AssertionError is defined in assert.
// new assert.AssertionError({ message: message,
//                             actual: actual,
//                             expected: expected })

var regex = /\s*function\s+([^\(\s]*)\s*/;
// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js
function getName(func) {
  if (!util.isFunction(func)) {
    return;
  }
  if (functionsHaveNames) {
    return func.name;
  }
  var str = func.toString();
  var match = str.match(regex);
  return match && match[1];
}
assert.AssertionError = function AssertionError(options) {
  this.name = 'AssertionError';
  this.actual = options.actual;
  this.expected = options.expected;
  this.operator = options.operator;
  if (options.message) {
    this.message = options.message;
    this.generatedMessage = false;
  } else {
    this.message = getMessage(this);
    this.generatedMessage = true;
  }
  var stackStartFunction = options.stackStartFunction || fail;
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, stackStartFunction);
  } else {
    // non v8 browsers so we can have a stacktrace
    var err = new Error();
    if (err.stack) {
      var out = err.stack;

      // try to strip useless frames
      var fn_name = getName(stackStartFunction);
      var idx = out.indexOf('\n' + fn_name);
      if (idx >= 0) {
        // once we have located the function frame
        // we need to strip out everything before it (and its line)
        var next_line = out.indexOf('\n', idx + 1);
        out = out.substring(next_line + 1);
      }

      this.stack = out;
    }
  }
};

// assert.AssertionError instanceof Error
util.inherits(assert.AssertionError, Error);

function truncate(s, n) {
  if (typeof s === 'string') {
    return s.length < n ? s : s.slice(0, n);
  } else {
    return s;
  }
}
function inspect(something) {
  if (functionsHaveNames || !util.isFunction(something)) {
    return util.inspect(something);
  }
  var rawname = getName(something);
  var name = rawname ? ': ' + rawname : '';
  return '[Function' +  name + ']';
}
function getMessage(self) {
  return truncate(inspect(self.actual), 128) + ' ' +
         self.operator + ' ' +
         truncate(inspect(self.expected), 128);
}

// At present only the three keys mentioned above are used and
// understood by the spec. Implementations or sub modules can pass
// other keys to the AssertionError's constructor - they will be
// ignored.

// 3. All of the following functions must throw an AssertionError
// when a corresponding condition is not met, with a message that
// may be undefined if not provided.  All assertion methods provide
// both the actual and expected values to the assertion error for
// display purposes.

function fail(actual, expected, message, operator, stackStartFunction) {
  throw new assert.AssertionError({
    message: message,
    actual: actual,
    expected: expected,
    operator: operator,
    stackStartFunction: stackStartFunction
  });
}

// EXTENSION! allows for well behaved errors defined elsewhere.
assert.fail = fail;

// 4. Pure assertion tests whether a value is truthy, as determined
// by !!guard.
// assert.ok(guard, message_opt);
// This statement is equivalent to assert.equal(true, !!guard,
// message_opt);. To test strictly for the value true, use
// assert.strictEqual(true, guard, message_opt);.

function ok(value, message) {
  if (!value) fail(value, true, message, '==', assert.ok);
}
assert.ok = ok;

// 5. The equality assertion tests shallow, coercive equality with
// ==.
// assert.equal(actual, expected, message_opt);

assert.equal = function equal(actual, expected, message) {
  if (actual != expected) fail(actual, expected, message, '==', assert.equal);
};

// 6. The non-equality assertion tests for whether two objects are not equal
// with != assert.notEqual(actual, expected, message_opt);

assert.notEqual = function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, '!=', assert.notEqual);
  }
};

// 7. The equivalence assertion tests a deep equality relation.
// assert.deepEqual(actual, expected, message_opt);

assert.deepEqual = function deepEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected, false)) {
    fail(actual, expected, message, 'deepEqual', assert.deepEqual);
  }
};

assert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected, true)) {
    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);
  }
};

function _deepEqual(actual, expected, strict, memos) {
  // 7.1. All identical values are equivalent, as determined by ===.
  if (actual === expected) {
    return true;
  } else if (isBuffer(actual) && isBuffer(expected)) {
    return compare(actual, expected) === 0;

  // 7.2. If the expected value is a Date object, the actual value is
  // equivalent if it is also a Date object that refers to the same time.
  } else if (util.isDate(actual) && util.isDate(expected)) {
    return actual.getTime() === expected.getTime();

  // 7.3 If the expected value is a RegExp object, the actual value is
  // equivalent if it is also a RegExp object with the same source and
  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).
  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {
    return actual.source === expected.source &&
           actual.global === expected.global &&
           actual.multiline === expected.multiline &&
           actual.lastIndex === expected.lastIndex &&
           actual.ignoreCase === expected.ignoreCase;

  // 7.4. Other pairs that do not both pass typeof value == 'object',
  // equivalence is determined by ==.
  } else if ((actual === null || typeof actual !== 'object') &&
             (expected === null || typeof expected !== 'object')) {
    return strict ? actual === expected : actual == expected;

  // If both values are instances of typed arrays, wrap their underlying
  // ArrayBuffers in a Buffer each to increase performance
  // This optimization requires the arrays to have the same type as checked by
  // Object.prototype.toString (aka pToString). Never perform binary
  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their
  // bit patterns are not identical.
  } else if (isView(actual) && isView(expected) &&
             pToString(actual) === pToString(expected) &&
             !(actual instanceof Float32Array ||
               actual instanceof Float64Array)) {
    return compare(new Uint8Array(actual.buffer),
                   new Uint8Array(expected.buffer)) === 0;

  // 7.5 For all other Object pairs, including Array objects, equivalence is
  // determined by having the same number of owned properties (as verified
  // with Object.prototype.hasOwnProperty.call), the same set of keys
  // (although not necessarily the same order), equivalent values for every
  // corresponding key, and an identical 'prototype' property. Note: this
  // accounts for both named and indexed properties on Arrays.
  } else if (isBuffer(actual) !== isBuffer(expected)) {
    return false;
  } else {
    memos = memos || {actual: [], expected: []};

    var actualIndex = memos.actual.indexOf(actual);
    if (actualIndex !== -1) {
      if (actualIndex === memos.expected.indexOf(expected)) {
        return true;
      }
    }

    memos.actual.push(actual);
    memos.expected.push(expected);

    return objEquiv(actual, expected, strict, memos);
  }
}

function isArguments(object) {
  return Object.prototype.toString.call(object) == '[object Arguments]';
}

function objEquiv(a, b, strict, actualVisitedObjects) {
  if (a === null || a === undefined || b === null || b === undefined)
    return false;
  // if one is a primitive, the other must be same
  if (util.isPrimitive(a) || util.isPrimitive(b))
    return a === b;
  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))
    return false;
  var aIsArgs = isArguments(a);
  var bIsArgs = isArguments(b);
  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))
    return false;
  if (aIsArgs) {
    a = pSlice.call(a);
    b = pSlice.call(b);
    return _deepEqual(a, b, strict);
  }
  var ka = objectKeys(a);
  var kb = objectKeys(b);
  var key, i;
  // having the same number of owned properties (keys incorporates
  // hasOwnProperty)
  if (ka.length !== kb.length)
    return false;
  //the same set of keys (although not necessarily the same order),
  ka.sort();
  kb.sort();
  //~~~cheap key test
  for (i = ka.length - 1; i >= 0; i--) {
    if (ka[i] !== kb[i])
      return false;
  }
  //equivalent values for every corresponding key, and
  //~~~possibly expensive deep test
  for (i = ka.length - 1; i >= 0; i--) {
    key = ka[i];
    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))
      return false;
  }
  return true;
}

// 8. The non-equivalence assertion tests for any deep inequality.
// assert.notDeepEqual(actual, expected, message_opt);

assert.notDeepEqual = function notDeepEqual(actual, expected, message) {
  if (_deepEqual(actual, expected, false)) {
    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);
  }
};

assert.notDeepStrictEqual = notDeepStrictEqual;
function notDeepStrictEqual(actual, expected, message) {
  if (_deepEqual(actual, expected, true)) {
    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);
  }
}


// 9. The strict equality assertion tests strict equality, as determined by ===.
// assert.strictEqual(actual, expected, message_opt);

assert.strictEqual = function strictEqual(actual, expected, message) {
  if (actual !== expected) {
    fail(actual, expected, message, '===', assert.strictEqual);
  }
};

// 10. The strict non-equality assertion tests for strict inequality, as
// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);

assert.notStrictEqual = function notStrictEqual(actual, expected, message) {
  if (actual === expected) {
    fail(actual, expected, message, '!==', assert.notStrictEqual);
  }
};

function expectedException(actual, expected) {
  if (!actual || !expected) {
    return false;
  }

  if (Object.prototype.toString.call(expected) == '[object RegExp]') {
    return expected.test(actual);
  }

  try {
    if (actual instanceof expected) {
      return true;
    }
  } catch (e) {
    // Ignore.  The instanceof check doesn't work for arrow functions.
  }

  if (Error.isPrototypeOf(expected)) {
    return false;
  }

  return expected.call({}, actual) === true;
}

function _tryBlock(block) {
  var error;
  try {
    block();
  } catch (e) {
    error = e;
  }
  return error;
}

function _throws(shouldThrow, block, expected, message) {
  var actual;

  if (typeof block !== 'function') {
    throw new TypeError('"block" argument must be a function');
  }

  if (typeof expected === 'string') {
    message = expected;
    expected = null;
  }

  actual = _tryBlock(block);

  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +
            (message ? ' ' + message : '.');

  if (shouldThrow && !actual) {
    fail(actual, expected, 'Missing expected exception' + message);
  }

  var userProvidedMessage = typeof message === 'string';
  var isUnwantedException = !shouldThrow && util.isError(actual);
  var isUnexpectedException = !shouldThrow && actual && !expected;

  if ((isUnwantedException &&
      userProvidedMessage &&
      expectedException(actual, expected)) ||
      isUnexpectedException) {
    fail(actual, expected, 'Got unwanted exception' + message);
  }

  if ((shouldThrow && actual && expected &&
      !expectedException(actual, expected)) || (!shouldThrow && actual)) {
    throw actual;
  }
}

// 11. Expected to throw an error:
// assert.throws(block, Error_opt, message_opt);

assert.throws = function(block, /*optional*/error, /*optional*/message) {
  _throws(true, block, error, message);
};

// EXTENSION! This is annoying to write outside this module.
assert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {
  _throws(false, block, error, message);
};

assert.ifError = function(err) { if (err) throw err; };

var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) {
    if (hasOwn.call(obj, key)) keys.push(key);
  }
  return keys;
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"util/":26}],22:[function(require,module,exports){
exports.endianness = function () { return 'LE' };

exports.hostname = function () {
    if (typeof location !== 'undefined') {
        return location.hostname
    }
    else return '';
};

exports.loadavg = function () { return [] };

exports.uptime = function () { return 0 };

exports.freemem = function () {
    return Number.MAX_VALUE;
};

exports.totalmem = function () {
    return Number.MAX_VALUE;
};

exports.cpus = function () { return [] };

exports.type = function () { return 'Browser' };

exports.release = function () {
    if (typeof navigator !== 'undefined') {
        return navigator.appVersion;
    }
    return '';
};

exports.networkInterfaces
= exports.getNetworkInterfaces
= function () { return {} };

exports.arch = function () { return 'javascript' };

exports.platform = function () { return 'browser' };

exports.tmpdir = exports.tmpDir = function () {
    return '/tmp';
};

exports.EOL = '\n';

},{}],23:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],24:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],25:[function(require,module,exports){
module.exports = function isBuffer(arg) {
  return arg && typeof arg === 'object'
    && typeof arg.copy === 'function'
    && typeof arg.fill === 'function'
    && typeof arg.readUInt8 === 'function';
}
},{}],26:[function(require,module,exports){
(function (process,global){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var formatRegExp = /%[sdj%]/g;
exports.format = function(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (x === '%%') return '%';
    if (i >= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
};


// Mark that a method should not be used.
// Returns a modified function which warns once by default.
// If --no-deprecation is set, then it is a no-op.
exports.deprecate = function(fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (isUndefined(global.process)) {
    return function() {
      return exports.deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process.throwDeprecation) {
        throw new Error(msg);
      } else if (process.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
};


var debugs = {};
var debugEnviron;
exports.debuglog = function(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
};


/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */
/* legacy: obj, showHidden, depth, colors*/
function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &&
      value &&
      isFunction(value.inspect) &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);

  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = keys.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  return reduceToSingleString(output, base, braces);
}


function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize('undefined', 'undefined');
  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                             .replace(/'/g, "\\'")
                                             .replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }
  if (isNumber(value))
    return ctx.stylize('' + value, 'number');
  if (isBoolean(value))
    return ctx.stylize('' + value, 'boolean');
  // For some reason typeof null is "object", so special case here.
  if (isNull(value))
    return ctx.stylize('null', 'null');
}


function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}


function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), true));
    } else {
      output.push('');
    }
  }
  keys.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, true));
    }
  });
  return output;
}


function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = '[' + key + ']';
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf('\n') > -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &&
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = require('./support/isBuffer');

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n < 10 ? '0' + n.toString(10) : n.toString(10);
}


var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}


// log is just a thin wrapper to console.log that prepends a timestamp
exports.log = function() {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
};


/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = require('inherits');

exports._extend = function(origin, add) {
  // Don't do anything if add isn't an object
  if (!add || !isObject(add)) return origin;

  var keys = Object.keys(add);
  var i = keys.length;
  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  return origin;
};

function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./support/isBuffer":25,"_process":23,"inherits":24}],27:[function(require,module,exports){
(function (global){
"use strict";function _canonicalize(e){var t=global.document.createElement("div");return t.innerHTML="<a></a>",t.firstChild.href=e,t.innerHTML=t.innerHTML,t.firstChild.href}function _appendUrlParameters(e,t){var a=-1==e.indexOf("?")?"?":"&",o=e;for(var i in t)t.hasOwnProperty(i)&&(o+=a+i+"="+encodeURIComponent(t[i]),a="&");return o}require("./custom.js");var templateLoader=require("./template-loader.js"),console=require("./../../bower_components/console-browserify/index.js"),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null);require("./ko-bindings.js"),require("./exp-manager.js");var performanceAwareCaller=require("./timed-call.js").timedCall,addUndoStackExtensionMaker=require("./undomanager/undomain.js"),colorPlugin=require("./ext/color.js"),utilPlugin=require("./ext/util.js"),inlinerPlugin=require("./ext/inliner.js"),localStorageLoader=require("./ext/localstorage.js");if("undefined"==typeof ko)throw"Cannot find knockout.js library!";if("undefined"==typeof $)throw"Cannot find jquery library!";var applyBindingOptions=function(e,t){t.bindingHandlers.wysiwygSrc.convertedUrl=function(t,a,o,i){var l,d=e.imgProcessorBackend?e.imgProcessorBackend:"./upload",r=d.match(/^(https?:\/\/[^\/]*\/).*$/),n=t.match(/^(https?:\/\/[^\/]*\/).*$/);if(null===r||null!==n&&r[1]==n[1])return l=-1==d.indexOf("?")?"?":"&",_appendUrlParameters(d,{src:t,method:a,params:o+","+i});console.log("Cannot apply backend image resizing to non-local resources ",t,a,o,i,r,n);var s={method:a,width:o};return null!==i&&(s.height=i),_appendUrlParameters(t,s)},t.bindingHandlers.wysiwygSrc.placeholderUrl=function(t,a){var o=e.imgProcessorBackend?e.imgProcessorBackend:"./upload";return _appendUrlParameters(o,{method:"placeholder",params:t+","+a})},e&&e.tinymceConfig&&(t.bindingHandlers.wysiwyg.standardOptions=e.tinymceConfig),e&&e.tinymceConfigFull&&(t.bindingHandlers.wysiwyg.fullOptions=e.tinymceConfigFull)},start=function(e,t,a,o,i){templateLoader.fixPageEvents();var l=function(t){var a={messages:{unknownError:t.t("Unknown error"),uploadedBytes:t.t("Uploaded bytes exceed file size"),maxNumberOfFiles:t.t("Maximum number of files exceeded"),acceptFileTypes:t.t("File type not allowed"),maxFileSize:t.t("File is too large"),minFileSize:t.t("File is too small"),post_max_size:t.t("The uploaded file exceeds the post_max_size directive in php.ini"),max_file_size:t.t("File is too big"),min_file_size:t.t("File is too small"),accept_file_types:t.t("Filetype not allowed"),max_number_of_files:t.t("Maximum number of files exceeded"),max_width:t.t("Image exceeds maximum width"),min_width:t.t("Image requires a minimum width"),max_height:t.t("Image exceeds maximum height"),min_height:t.t("Image requires a minimum height"),abort:t.t("File upload aborted"),image_resize:t.t("Failed to resize image"),generic:t.t("Unexpected upload error")}};e&&e.fileuploadConfig&&(a=$.extend(!0,a,e.fileuploadConfig)),ko.bindingHandlers.fileupload.extendOptions=a},d=function(t){e&&e.strings&&(t.t=function(a,o){var i=e.strings[a];return"undefined"==typeof i&&(console.warn("Missing translation string for",a,": using default string"),i=a),t.tt(i,o)})},r=[d,addUndoStackExtensionMaker(performanceAwareCaller),colorPlugin,utilPlugin,inlinerPlugin];if("undefined"!=typeof i)for(var n=0;n<i.length;n++)r.push(i[n]);r.push(l);var s=e.fileuploadConfig?e.fileuploadConfig.url:"/upload/";applyBindingOptions(e,ko),$("<!-- ko template: 'main' --><!-- /ko -->").appendTo(global.document.getElementById("editor-area")),$("<!-- ko template: 'tinymce-area' --><!-- /ko -->").appendTo(global.document.getElementById("tinymce-area")),$("<!-- ko template: 'tinymce-sidebar' --><!-- /ko -->").appendTo(global.document.getElementById("r-sidebar")),"undefined"==typeof t&&"undefined"!=typeof a&&(t=a.template),templateLoader.load(performanceAwareCaller,t,a,o,r,s)},initFromLocalStorage=function(e,t,a){try{var o=localStorageLoader(t,e.emailProcessorBackend),i="undefined"!=typeof a?a:[];i.push(o.extension);var l=_canonicalize(o.metadata.template);start(e,l,o.metadata,o.model,i)}catch(d){console.error("TODO not found ",t,d)}},init=function(e,t){var a=global.location.hash?global.location.href.split("#")[1]:void 0;if(e&&(e.template||e.data))if(e.data){var o=JSON.parse(e.data);start(e,void 0,o.metadata,o.content,t)}else start(e,e.template,void 0,void 0,t);else if(a&&7==a.length)initFromLocalStorage(e,a,t);else{if(!a)return!1;start(e,_canonicalize(a),void 0,void 0,t)}return!0};module.exports={isCompatible:templateLoader.isCompatible,init:init,start:start};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../bower_components/console-browserify/index.js":1,"./custom.js":59,"./exp-manager.js":60,"./ext/color.js":61,"./ext/inliner.js":62,"./ext/localstorage.js":63,"./ext/util.js":64,"./ko-bindings.js":65,"./template-loader.js":66,"./timed-call.js":67,"./undomanager/undomain.js":68}],28:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js"),addScriptTemplate=function(e,t,o){var a=e.createElement("script");return a.setAttribute("type","text/html"),a.setAttribute("id",t),a.text=o,e.body.appendChild(a),a};ko.bindingHandlers.bindIframe={tpl:'<!DOCTYPE html>\r\n<html>\r\n<head>\r\n</head>\r\n<body><div data-bind="block: content"></div></body>\r\n</html>\r\n',init:function(e,t){function o(o){try{var a=e.contentDocument;a.open(),a.write(ko.bindingHandlers.bindIframe.tpl),a.close();try{var i=a.body;if(i){for(var l=e.contentWindow.parent.document.getElementsByTagName("script"),r=0;r<l.length;r++)"text/html"==l[r].getAttribute("type")&&l[r].getAttribute("id")&&addScriptTemplate(a,l[r].getAttribute("id"),l[r].innerHTML);var n=a.getElementsByTagName("HTML");ko.utils.domNodeDisposal.addDisposeCallback(e,function(){ko.cleanNode(n[0]||i)}),ko.applyBindings(t(),n[0]||i)}else console.log("no iframedoc",o)}catch(s){throw console.log("error reading iframe.body",s,o),s}}catch(s){throw console.log("error reading iframe contentDocument",s,o),s}}o("first call")}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],29:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js");ko.bindingHandlers.withProperties={init:function(e,t,o,a,i){var l=i.createChildContext(i.$rawData,null,function(e){ko.utils.extend(e,t())});return ko.applyBindingsToDescendants(l,e),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.withProperties=!0,ko.bindingHandlers.log={init:function(e,t){console.log("log",t())}},ko.bindingHandlers.block={templateExists:function(e){var t=global.document.getElementById(e);return t?!0:!1},_chooseTemplate:function(e,t,o,a){var i=t+"-"+o;if(ko.bindingHandlers.block.templateExists(i))return i;if("undefined"!=typeof a&&null!==a)return ko.bindingHandlers.block._chooseTemplate(e,t,a);var l=e?"array":"object-"+o;if(ko.bindingHandlers.block.templateExists(l))return l;throw"cannot find template for "+i+"/"+l},_displayMode:function(e,t){var o="undefined"!=typeof e.type?ko.utils.unwrapObservable(e.type):"notablock-"+typeof e,a="undefined"!=typeof e.splice,i=t.templateMode?t.templateMode:"show";return ko.bindingHandlers.block._chooseTemplate(a,o,i,t.templateModeFallback)},_makeTemplateValueAccessor:function(e,t){return function(){var o,a,i=e(),l=ko.utils.peekObservable(i);if(!l||"object"!=typeof l.data&&"function"!=typeof l.data)o=i;else if(o=l.data,"undefined"!=typeof l.template){var r=ko.utils.unwrapObservable(l.template),n=t.templateMode?t.templateMode:"show";a=ko.bindingHandlers.block._chooseTemplate(!1,r,n,t.templateModeFallback)}var s=ko.utils.unwrapObservable(o);if(ko.isObservable(s)&&console.log("doubleObservable",s),"undefined"==typeof a)if(void 0===o)a="empty";else try{a=ko.bindingHandlers.block._displayMode(s,t)}catch(d){throw console.log(d,s,t.$data,t.templateMode),d}return{name:a,data:o,templateEngine:ko.nativeTemplateEngine.instance}}},init:function(e,t,o,a,i){"undefined"==typeof t()&&console.log("found a null block: check ending commas in arrays defs in IE");var l=ko.bindingHandlers.block._makeTemplateValueAccessor(t,i);return ko.bindingHandlers.template.init(e,l)},update:function(e,t,o,a,i){var l=ko.bindingHandlers.block._makeTemplateValueAccessor(t,i);return ko.bindingHandlers.template.update(e,l,o,a,i)}},ko.expressionRewriting.bindingRewriteValidators.block=!1,ko.virtualElements.allowedBindings.block=!0;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],30:[function(require,module,exports){
"use strict";module.exports=require("./string-template.js");

},{"./string-template.js":44}],31:[function(require,module,exports){
(function (global){
"use strict";require("./../../../bower_components/evol-colorpicker/js/evol.colorpicker.min.js");var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),kojqui=(typeof window !== "undefined" ? window['kojqui'] : typeof global !== "undefined" ? global['kojqui'] : null),ColorPicker=function(){kojqui.BindingHandler.call(this,"colorpicker")};ColorPicker.prototype=kojqui.utils.createObject(kojqui.BindingHandler.prototype),ColorPicker.prototype.constructor=ColorPicker,ColorPicker.prototype.init=function(e,t,o){var a=t(),i=a.color,l=ko.computed({read:i,write:i,disposeWhenNodeIsRemoved:e}),r=function(){return l};ko.bindingHandlers.value.init(e,r,o);var n=function(e,t){"undefined"!=typeof t&&l(t)};$(e).on("change.color",n),ko.computed({read:function(){var t={color:ko.utils.unwrapObservable(l),showOn:"button"};for(var o in a)"color"!==o&&a.hasOwnProperty(o)&&(t[o]=ko.utils.unwrapObservable(a[o]));$(e).colorpicker(t)},disposeWhenNodeIsRemoved:e}),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).off("change.color",n),$(e).colorpicker("destroy")})},kojqui.utils.register(ColorPicker);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/evol-colorpicker/js/evol.colorpicker.min.js":2}],32:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null);ko.bindingHandlers.cssText={update:function(e,t){var o=ko.utils.unwrapObservable(t());try{e.innerText=o}catch(a){e.styleSheet||(e.innerHTML="a{}"),e.styleSheet.cssText=o}}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],33:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null);!function(e){e(ko,$)}(function(e,t){var o="ko_sortItem",a="ko_dragItem",i=(e.utils.unwrapObservable,e.utils.domData.get);e.utils.domData.set,e.bindingHandlers.droppable={init:function(l,r){var n,s=t(l),d=e.utils.unwrapObservable(r())||{},c={};t.extend(!0,c,e.bindingHandlers.droppable),d.data?(d.options&&c.options&&(e.utils.extend(c.options,d.options),delete d.options),e.utils.extend(c,d)):c.data=d,n=c.options.drop,s.droppable(e.utils.extend(c.options,{drop:function(e,t){var l=t.draggable[0],r=i(l,o)||i(l,a);r&&(r.clone&&(r=r.clone()),c.dragged&&(r=c.dragged.call(this,r,e,t)||r),c.data&&c.data(r)),n&&n.apply(this,arguments)}})),void 0!==c.isEnabled&&e.computed({read:function(){s.droppable(e.utils.unwrapObservable(c.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:l})},update:function(){},targetIndex:null,afterMove:null,beforeMove:null,options:{}}});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],34:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),console=require("./../../../bower_components/console-browserify/index.js");ko.bindingHandlers.focusable={focus:function(){},blur:function(){},init:function(e){ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).off("focusin",ko.bindingHandlers.focusable.focus),$(e).off("focusout",ko.bindingHandlers.focusable.blur)}),$(e).on("focusin",ko.bindingHandlers.focusable.focus),$(e).on("focusout",ko.bindingHandlers.focusable.blur)}},ko.bindingHandlers.scrollable={scroll:function(){},init:function(e){ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).off("scroll",ko.bindingHandlers.scrollable.scroll)}),$(e).on("scroll",ko.bindingHandlers.scrollable.scroll)}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],35:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null);ko.extenders.paging=function(e,t){var o=ko.observable(t||10),a=ko.observable(1);return e.pageSize=ko.computed({read:o,write:function(e){e>0?o(e):o(10)}}),e.currentPage=ko.computed({read:a,write:function(t){t>e.pageCount()?a(e.pageCount()):0>=t?a(1):a(t)}}),e.pageCount=ko.computed(function(){return Math.ceil(e().length/e.pageSize())||1}),e.currentPageData=ko.computed(function(){var t=o(),i=a(),l=t*(i-1),n=t*i;return e().slice(l,n)}),e.moveFirst=function(){e.currentPage(1)},e.movePrevious=function(){e.currentPage(e.currentPage()-1)},e.moveNext=function(){e.currentPage(e.currentPage()+1)},e.moveLast=function(){e.currentPage(e.pageCount())},e};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],36:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),sortable=(typeof window !== "undefined" ? window['jQuery']['ui']['sortable'] : typeof global !== "undefined" ? global['jQuery']['ui']['sortable'] : null),draggable=(typeof window !== "undefined" ? window['jQuery']['ui']['draggable'] : typeof global !== "undefined" ? global['jQuery']['ui']['draggable'] : null),console=require("./../../../bower_components/console-browserify/index.js");if(require("./../../../bower_components/knockout-sortable/build/knockout-sortable.min.js"),"undefined"==typeof sortable)throw"Cannot find jquery-ui sortable widget dependency!";if("undefined"==typeof draggable)throw"Cannot find jquery-ui sortable widget dependency!";var isDraggingHelper=function(e,t){e()?t.type==e()+"stop"&&e(!1):("dragstart"==t.type||"sortstart"==t.type)&&e(t.type.substring(0,4))},makeExtendedValueAccessor=function(e){return function(){var t=e();ko.utils.peekObservable(t),ko.utils.unwrapObservable(t),"undefined"==t.options&&(t.options={});var o=t.options.start;t.options.start=function(e,a){return"undefined"!=typeof t.dragging&&ko.isWritableObservable(t.dragging)&&isDraggingHelper(t.dragging,e),"undefined"!=typeof t.dropContainer&&(t.scrollInterval=global.setInterval(function(){var e=$(t.dropContainer).scrollTop();$(t.dropContainer).scrollTop(e+t.adding)},20)),"undefined"!=typeof o?o(e,a):void 0};var a=t.options.stop;t.options.stop=function(e,o){return"undefined"!=typeof t.dragging&&ko.isWritableObservable(t.dragging)&&isDraggingHelper(t.dragging,e),"undefined"!=typeof t.dropContainer&&global.clearInterval(t.scrollInterval),"undefined"!=typeof a?a(e,o):void 0};var i=t.options.drag;return t.options.drag=function(e,o){if("undefined"!=typeof t.dropContainer){var a=e.pageY-$(t.dropContainer).offset().top,l=a-$(t.dropContainer).height();t.adding=-20>a?-20:0>a?-10:10>a?-5:l>20?20:l>0?10:l>-10?5:0}return"undefined"!=typeof i?i(e,o):void 0},t}};ko.bindingHandlers.extsortable={init:function(e,t,o,a,i){return ko.bindingHandlers.sortable.init(e,makeExtendedValueAccessor(t),o,a,i)},update:function(e,t,o,a,i){return ko.bindingHandlers.sortable.update(e,makeExtendedValueAccessor(t),o,a,i)}},ko.bindingHandlers.extdraggable={init:function(e,t,o,a,i){return ko.bindingHandlers.draggable.init(e,makeExtendedValueAccessor(t),o,a,i)},update:function(e,t,o,a,i){return ko.bindingHandlers.draggable.update(e,makeExtendedValueAccessor(t),o,a,i)}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/knockout-sortable/build/knockout-sortable.min.js":8}],37:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js");ko.bindingHandlers.preloader={init:function(e,t){var o=t();if("undefined"==typeof o.preloaded){o.preloaded=ko.observable("");var a=function(e){if(e!=o.preloaded())if(""!==e){var t=new Image;t.onload=function(){o.preloaded(e)},t.onerror=function(){o.preloaded(e)},t.src=e}else o.preloaded(e)};o.subscribe(a),a(o())}}},ko.bindingHandlers.advattr={init:function(e,t){var o=ko.utils.unwrapObservable(t()||{});ko.utils.objectForEach(o,function(t,o){var a=e.getAttribute(t);if(ko.isWriteableObservable(o)){var i=o();i!=a&&(o(a),null!==i&&console.log("AdvAttr found a value different from the default",t,i,a))}})},update:function(e,t){var o=ko.utils.unwrapObservable(t())||{};ko.utils.objectForEach(o,function(t,o){o=ko.utils.unwrapObservable(o);var a=o===!1||null===o||void 0===o;a?e.removeAttribute(t):e.setAttribute(t,o.toString())})}},ko.bindingHandlers.advstyle={init:function(e,t){var o=ko.utils.unwrapObservable(t()||{});ko.utils.objectForEach(o,function(t,o){var a;if(t.match(/Px$/)?(t=t.substr(0,t.length-2),a=e.style[t],a.match(/px$/)?a=a.replace(/px$/,""):console.log("AdvStyle binding found an unexpected default value",t,a,e)):a=e.style[t],ko.isWriteableObservable(o)){var i=o();i!=a&&(o(a),null!==i&&console.log("AdvStyle found a value different from the default",t,i,a))}})},update:function(e,t){var o=ko.utils.unwrapObservable(t()||{});ko.utils.objectForEach(o,function(t,o){o=ko.utils.unwrapObservable(o),(null===o||"undefined"==typeof o||o===!1)&&(o=""),t.match(/Px$/)&&(t=t.substr(0,t.length-2),o+="px"),e.style[t]=o})}},ko.bindingHandlers.domlog={init:function(e){console.log("initialized",e),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){console.log("disposed",e)})}},ko.bindingHandlers.fudroppable={init:function(e,t){var o=t()||{},a={},i=function(e,t,o,a,i,l){e[t]?global.clearTimeout(e[t]):("undefined"!=typeof a&&o.classList.add(a),ko.isWriteableObservable(i)&&!i()&&i(!0));var r=function(){e[t]=null,"undefined"!=typeof a&&o.classList.remove(a),ko.isWriteableObservable(i)&&i()&&i(!1)};"dragleave"==l.type?r():e[t]=global.setTimeout(r,500)};(o.active||o.activeClass)&&ko.utils.registerEventHandler(global,"dragover",i.bind(void 0,a,"activeTimeout",e,o.activeClass,o.active)),o.hoverClass&&ko.utils.registerEventHandler(e,"dragover dragenter dragleave",i.bind(void 0,a,"hoverTimeout",e,o.hoverClass,void 0))}},ko.bindingHandlers.fileupload={extendOptions:{},remoteFilePreprocessor:function(e){return e},init:function(e){ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).fileupload("destroy")}),global.webkitURL?$(e).attr("title"," "):$(e).attr("title","")},update:function(e,t){var o=t()||{},a=$(e),i=a.parents(".uploadzone"),l=o.data;o.data=void 0;var r=o.canvasPreview;ko.utils.extend(o,{url:"/upload/",dataType:"json",dropZone:i.find(".mo-uploadzone")[0],autoUpload:!0,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,maxFileSize:1048576,disableImageResize:/Android(?!.*Chrome)|Opera/.test(global.navigator.userAgent),previewMaxWidth:200,previewMaxHeight:200,previewCrop:!1,replaceFileInput:!1,messages:{unknownError:"Unknown error",uploadedBytes:"Uploaded bytes exceed file size",maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small",post_max_size:"The uploaded file exceeds the post_max_size directive in php.ini",max_file_size:"File is too big",min_file_size:"File is too small",accept_file_types:"Filetype not allowed",max_number_of_files:"Maximum number of files exceeded",max_width:"Image exceeds maximum width",min_width:"Image requires a minimum width",max_height:"Image exceeds maximum height",min_height:"Image requires a minimum height",abort:"File upload aborted",image_resize:"Failed to resize image",generic:"Unexpected upload error"}}),ko.utils.extend(o,ko.bindingHandlers.fileupload.extendOptions);var n=0,s="",d=function(){0===--n&&(l&&l(s),s="",r&&(i.find("img").show(),i.find("canvas").remove()),i.removeClass("uploading"),i.find(".progress-bar").css("width",0))},c=function(e){if("object"==typeof o.messages&&null!==o.messages){var t=e.match(/^([^ ]+)(.*)$/);if(t&&"undefined"!=typeof o.messages[t[1]])return o.messages[t[1]]+t[2]}return e};a.fileupload(o);for(var u=["fileuploadadd","fileuploadprocessalways","fileuploadprogressall","fileuploaddone","fileuploadfail"],p=function(e,t){if("fileuploadadd"==e.type&&n++,"fileuploadfail"==e.type&&(console.log("fileuploadfail",e,t),o.onerror&&(""===t.errorThrown&&"error"==t.textStatus?o.onerror(c("generic")):o.onerror(c("generic ("+t.errorThrown+")"))),d()),"fileuploaddone"==e.type)if("undefined"!=typeof t.result.files[0].url){if(o.onfile)for(var a=0;a<t.result.files.length;a++)t.result.files[a]=ko.bindingHandlers.fileupload.remoteFilePreprocessor(t.result.files[a]),o.onfile(t.result.files[a]);if(""===s&&(s=t.result.files[0].url),r){var l=new Image;l.onload=d,l.onerror=d,l.src=t.result.files[0].url}else d()}else"undefined"!=typeof t.result.files[0].error?(console.log("remote error",e,t),o.onerror&&o.onerror(c(t.result.files[0].error)),d()):(console.log("unexpected error",e,t),o.onerror&&o.onerror(c("generic (Unexpected Error retrieving uploaded file)")),d());if("fileuploadprocessalways"==e.type){var u=t.index,p=t.files[u];if(p.preview&&0===u&&0===i.find("canvas").length){if(r){var m=$(p.preview).css("width","100%");i.find("img").hide(),i.prepend(m)}i.addClass("uploading"),i.find(".progress-bar").css("width",0)}p.error&&(o.onerror&&o.onerror(c(p.error)),d())}if("fileuploadprogressall"==e.type){var g=parseInt(100*(t.loaded/t.total),10);i.find(".progress-bar").css("width",g+"%")}},m=u.length-1;m>=0;m--){var g=u[m];a.on(g,p)}$.support.fileInput||a.prop("disabled",!0).parent().addClass("disabled")}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],38:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js");ko.bindingHandlers.ifSubs={cloneNodes:function(e,t){for(var o=0,a=e.length,i=[];a>o;o++){var l=e[o].cloneNode(!0);i.push(t?ko.cleanNode(l):l)}return i},init:function(e,t,o,a,i){var l,n,r=t();return"undefined"==typeof r.data.subsCount&&ko.extenders.subscriptionsCount(r.data),ko.computed(function(){var o,a,s,d=ko.utils.unwrapObservable(t().data.subsCount),c=!n;s=-("undefined"!=typeof t().gutter?t().gutter:1),o=d+(l?s:0)>=ko.utils.unwrapObservable(r.threshold),"undefined"!=typeof t().not&&t().not&&(o=!o),a=c||o!==l,a&&(c&&ko.computedContext.getDependenciesCount()&&(n=ko.bindingHandlers.ifSubs.cloneNodes(ko.virtualElements.childNodes(e),!0)),o?(c||ko.virtualElements.setDomNodeChildren(e,ko.bindingHandlers.ifSubs.cloneNodes(n)),ko.applyBindingsToDescendants(i,e)):ko.virtualElements.emptyNode(e),l=o)},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.ifSubs=!0;var beforeSubscriptionProp,afterSubscriptionProp;if("function"==typeof ko.subscription&&"undefined"!=typeof ko.isWritableObservable)beforeSubscriptionProp="beforeSubscriptionAdd",afterSubscriptionProp="afterSubscriptionRemove";else if("3.2.0"==ko.version)beforeSubscriptionProp="va",afterSubscriptionProp="nb";else if("3.3.0"==ko.version)beforeSubscriptionProp="ja",afterSubscriptionProp="ua";else if("3.4.0"==ko.version)beforeSubscriptionProp="sa",afterSubscriptionProp="Ia";else{if("3.4.1"!=ko.version)throw"Unsupported minimized Knockout version "+ko.version+" (supported DEBUG or minimized 3.2.0 ... 3.4.1)";beforeSubscriptionProp="sa",afterSubscriptionProp="Ia"}ko.extenders.subscriptionsCount=function(e,t,o){if("undefined"==typeof e.subsCount){e.subsCount=ko.observable(e.getSubscriptionsCount()).extend({notify:"always"});var a=e[beforeSubscriptionProp],i=e[afterSubscriptionProp];e[beforeSubscriptionProp]=function(i){a&&a.call(e,i);var l=e.getSubscriptionsCount()+1;("undefined"==typeof t||l==t||"undefined"==typeof o||l==o)&&e.subsCount(l)},e[afterSubscriptionProp]=function(a){i&&i.call(e,a);var l=e.getSubscriptionsCount();("undefined"==typeof t||l==t||"undefined"==typeof o||l==o)&&e.subsCount(l)}}else console.log("already applied subscriptionCount to observable");return null};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],39:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),spinner=(typeof window !== "undefined" ? window['jQuery']['ui']['spinner'] : typeof global !== "undefined" ? global['jQuery']['ui']['spinner'] : null),console=require("./../../../bower_components/console-browserify/index.js");if("undefined"==typeof spinner)throw"Cannot find jquery-ui spinner widget dependency!";$.widget("ui.spinner",spinner,{_adjustValue:function(e){this._super(e);var t=this.options;return e=parseFloat(e.toFixed(this._precision())),null!==t.max&&e>t.max?t.max:null!==t.min&&e<t.min?t.min:e}});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],40:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),console=require("./../../../bower_components/console-browserify/index.js"),tabs=(typeof window !== "undefined" ? window['jQuery']['ui']['tabs'] : typeof global !== "undefined" ? global['jQuery']['ui']['tabs'] : null);if("undefined"==typeof tabs)throw"Cannot find jquery-ui tabs widget dependency!";$.widget("ui.tabs",tabs,{_isLocal:function(e){return"true"==e.getAttribute("data-local")?!0:this._superApply(arguments)}});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],41:[function(require,module,exports){
(function (global){
"use strict";function pushTemplate(e,t){var o=global.document.createElement("script");o.setAttribute("type","text/html"),o.setAttribute("id",e),o.text=t,global.document.body.appendChild(o)}function removeTemplate(e){var t=global.document.getElementById(e);t&&t.parentNode.removeChild(t)}function init(){}function getTemplateContent(e){var t=global.document.getElementById(e);return t?t.innerHTML:void 0}module.exports={init:init,addTemplate:pushTemplate,removeTemplate:removeTemplate,getTemplateContent:getTemplateContent};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],42:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),console=require("./../../../bower_components/console-browserify/index.js"),tinymce=(typeof window !== "undefined" ? window['tinymce'] : typeof global !== "undefined" ? global['tinymce'] : null),timeout,render=function(){timeout=void 0,"undefined"!=typeof tinymce.activeEditor&&null!==tinymce.activeEditor&&"undefined"!=typeof tinymce.activeEditor.theme&&null!==tinymce.activeEditor.theme&&"undefined"!=typeof tinymce.activeEditor.theme.panel&&null!==tinymce.activeEditor.theme.panel&&"undefined"!=typeof tinymce.activeEditor.theme.panel.visible&&(("undefined"!=typeof tinymce.activeEditor.theme.panel._visible&&tinymce.activeEditor.theme.panel._visible&&tinymce.activeEditor.theme.panel._fixed||"undefined"!=typeof tinymce.activeEditor.theme.panel.state&&tinymce.activeEditor.theme.panel.state.get("visible")&&tinymce.activeEditor.theme.panel.state.get("fixed"))&&tinymce.activeEditor.theme.panel.fixed(!1),tinymce.activeEditor.nodeChanged(),tinymce.activeEditor.theme.panel.visible(!0),tinymce.activeEditor.theme.panel.layoutRect().y<=40&&tinymce.activeEditor.theme.panel.moveBy(0,40-tinymce.activeEditor.theme.panel.layoutRect().y))};ko.bindingHandlers.wysiwygScrollfix={scroll:function(){timeout&&global.clearTimeout(timeout),timeout=global.setTimeout(render,50)},init:function(e){ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).off("scroll",ko.bindingHandlers.wysiwygScrollfix.scroll)}),$(e).on("scroll",ko.bindingHandlers.wysiwygScrollfix.scroll)}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],43:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js"),_scrollIntoView=function(e,t,o,a){var i=o.scrollTop(),n=i-a-(t?20:-20),l="undefined"!=typeof o[0].nodeType;if(l){var r={scrollTop:""+Math.round(n)+"px"},s=Math.round(Math.abs(n-i));o.stop().animate(r,s)}else o.scrollTop(n)};ko.bindingHandlers.scrollIntoView={update:function(e,t){var o=ko.utils.unwrapObservable(t());if(o)try{for(;8===e.nodeType;)e=e.nextSibling;if(8!==e.nodeType){var a,i=$(e).scrollParent(),n=!1;9==i[0].nodeType?(i=$(i[0].defaultView),a=0,n=!0):a=i.offset().top;var l=i.height(),r=i.scrollTop(),s=a+l,d=$(e),c=d.offset().top;n&&(c-=r);var u=d.height(),p=c+u;c>a&&s>c+u||(l>u?(a>c&&_scrollIntoView(e,!0,i,a-c),p>s&&_scrollIntoView(e,!1,i,s-p)):(a>c&&s>p&&_scrollIntoView(e,!1,i,s-p),c>a&&p>s&&_scrollIntoView(e,!0,i,a-c)))}}catch(m){console.log("TODO exception scrolling into view",m)}}},ko.virtualElements.allowedBindings.scrollIntoView=!0;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],44:[function(require,module,exports){
(function (global){
"use strict";function createStringTemplateEngine(e){var t=e.makeTemplateSource;return e.makeTemplateSource=function(e){return"undefined"!=typeof templates[e]?new ko.templateSources.stringTemplate(e,templates[e]):t(e)},e}function pushTemplate(e,t){templates[e]=t}function removeTemplate(e){"undefined"!=typeof templates[e]?templates[e]=void 0:origTemplateSystem.removeTemplate(e)}function init(){ko.setTemplateEngine(createStringTemplateEngine(new ko.nativeTemplateEngine))}function getTemplateContent(e){return"undefined"!=typeof templates[e]?templates[e]:origTemplateSystem.getTemplateContent(e)}var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),origTemplateSystem=require("./script-template.js"),templates={};ko.templateSources.stringTemplate=function(e,t){this.templateName=e,this.template=t,this._data={}},ko.utils.extend(ko.templateSources.stringTemplate.prototype,{data:function(e,t){return 1===arguments.length?this._data[e]:(this._data[e]=t,void 0)},text:function(e){return 0===arguments.length?this.template:(this.template=e,void 0)}}),module.exports={init:init,addTemplate:pushTemplate,removeTemplate:removeTemplate,getTemplateContent:getTemplateContent};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./script-template.js":41}],45:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),kojqui=(typeof window !== "undefined" ? window['kojqui'] : typeof global !== "undefined" ? global['kojqui'] : null),console=require("./../../../bower_components/console-browserify/index.js"),extendValueAccessor=function(e,t){return function(){return ko.utils.extend(t,e()),t}},options={show:{delay:500},track:!0,items:'[title][title!=""][title!=" "]'};ko.bindingHandlers.tooltips={init:function(e,t,o,a,i){return"undefined"!=typeof $.fn.tooltip&&"undefined"!=typeof ko.bindingHandlers.tooltip?ko.bindingHandlers.tooltip.init(e,extendValueAccessor(t,options),o,a,i):void 0},update:function(e,t,o,a,i){return"undefined"!=typeof $.fn.tooltip&&"undefined"!=typeof ko.bindingHandlers.tooltip?ko.bindingHandlers.tooltip.update(e,extendValueAccessor(t,options),o,a,i):void 0}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],46:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js");ko.bindingHandlers.validatedValue={init:function(e,t,o){var a=t;if("undefined"!=typeof e.pattern){var i=new RegExp("^(?:"+e.pattern+")$"),n=ko.computed({read:function(){var o=ko.utils.unwrapObservable(t()),a=null===o||""===o||i.test(o);return a?e.classList.remove("invalid"):e.classList.add("invalid"),o},write:ko.isWriteableObservable(t())&&function(o){ko.selectExtensions.writeValue(e,o);var a=ko.selectExtensions.readValue(e);t()(a)},disposeWhenNodeIsRemoved:e});a=function(){return n}}ko.bindingHandlers.value.init(e,a,o)}},ko.expressionRewriting._twoWayBindings.validatedValue=!0;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],47:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js");ko.bindingHandlers.uniqueId={currentIndex:0,init:function(e,t){var o=ko.utils.unwrapObservable(t())||{};if(""===o.id()){var a,i,l;l="ko_"+("undefined"!=typeof o.type?ko.utils.unwrapObservable(o.type):"block");do a=l+"_"+ ++ko.bindingHandlers.uniqueId.currentIndex,i=global.document.getElementById(a);while(i);o.id(a)}}},ko.virtualElements.allowedBindings.uniqueId=!0,ko.bindingHandlers.virtualAttr={update:function(e,t){8!==e.nodeType&&ko.bindingHandlers.attr.update(e,t)}},ko.virtualElements.allowedBindings.virtualAttr=!0,ko.bindingHandlers.virtualAttrStyle={update:function(e,t,o,a,i){if(8!==e.nodeType){var l="undefined"==typeof i.templateMode||"wysiwyg"!=i.templateMode,r=["style"];l&&r.push("replacedstyle");for(var n=ko.utils.unwrapObservable(t()),s=0;s<r.length;s++){var d=r[s],c=n===!1||null===n||void 0===n;c?e.removeAttribute(d):e.setAttribute(d,n.toString())}}}},ko.virtualElements.allowedBindings.virtualAttrStyle=!0,ko.bindingHandlers.virtualStyle={update:function(e,t){8!==e.nodeType&&ko.bindingHandlers.style.update(e,t)}},ko.virtualElements.allowedBindings.virtualStyle=!0,ko.bindingHandlers.virtualHtml={init:ko.bindingHandlers.html.init,update:function(e,t){if(8===e.nodeType){var o=ko.utils.unwrapObservable(t());if(ko.virtualElements.emptyNode(e),null!==o&&void 0!==o){"string"!=typeof o&&(o=o.toString());var a=ko.utils.parseHtmlFragment(o);if(a)for(var i=e.nextSibling,l=0,r=a.length;r>l;l++)i.parentNode.insertBefore(a[l],i)}}else ko.bindingHandlers.html.update(e,t);return{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.virtualHtml=!0;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],48:[function(require,module,exports){
(function (global){
"use strict";var tinymce=(typeof window !== "undefined" ? window['tinymce'] : typeof global !== "undefined" ? global['tinymce'] : null),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js");require("./eventable.js");var clicks=0;ko.bindingHandlers.wysiwygOrHtml={init:function(e,t,o,a,i){var l="undefined"==typeof i.templateMode||"wysiwyg"!=i.templateMode;return l?ko.bindingHandlers.virtualHtml.init():ko.bindingHandlers.wysiwyg.init(e,t,o,a,i)},update:function(e,t,o,a,i){var l="undefined"==typeof i.templateMode||"wysiwyg"!=i.templateMode;return l?ko.bindingHandlers.virtualHtml.update(e,t,o,a,i):void 0}},ko.virtualElements.allowedBindings.wysiwygOrHtml=!0,ko.bindingHandlers.wysiwygHref={init:function(e,t,o,a,i){if(8!==e.nodeType){t();var l="undefined"==typeof i.templateMode||"wysiwyg"!=i.templateMode;if(l)e.setAttribute("target","_new");else{var n=o();"undefined"!=typeof n.wysiwygOrHtml?e.setAttribute("href","javascript:void(0)"):(e.removeAttribute("href"),e.setAttribute("disabledhref","#"))}}},update:function(e,t,o,a,i){if(8!==e.nodeType){var l="undefined"==typeof i.templateMode||"wysiwyg"!=i.templateMode,n=ko.utils.unwrapObservable(t());l&&(n===!1||null===n||void 0===n?e.removeAttribute("href"):e.setAttribute("href",n.toString()))}}},ko.virtualElements.allowedBindings.wysiwygHref=!0,ko.bindingHandlers.wysiwygSrc={convertedUrl:function(e,t,o,a){var i=-1==e.indexOf("?")?"?":"&",l=e+i+"method="+t+"&width="+o+(null!==a?"&height="+a:"");return l},placeholderUrl:function(e,t,o){},update:function(e,t){var o=ko.utils.unwrapObservable(t()),a=ko.utils.unwrapObservable(o.src),i=ko.utils.unwrapObservable(o.placeholder),l=ko.utils.unwrapObservable(o.width),n=ko.utils.unwrapObservable(o.height);if(a===!1||null===a||void 0===a||""===a)"object"==typeof i&&null!==i?e.setAttribute("src",ko.bindingHandlers.wysiwygSrc.placeholderUrl(i.width,i.height,i.text)):e.removeAttribute("src");else{var r=ko.utils.unwrapObservable(o.method);r||(r=l>0&&n>0?"cover":"resize");var s=ko.bindingHandlers.wysiwygSrc.convertedUrl(a.toString(),r,l,n);e.setAttribute("src",s)}"undefined"!=typeof l&&null!==l?e.setAttribute("width",l):e.removeAttribute("width"),"undefined"!=typeof n&&null!==n?e.setAttribute("height",n):e.removeAttribute("height")}},ko.bindingHandlers.wysiwygId={init:function(e,t,o,a,i){var l="undefined"==typeof i.templateMode||"wysiwyg"!=i.templateMode;l||e.setAttribute("id",ko.utils.unwrapObservable(t()))},update:function(e,t,o,a,i){var l="undefined"==typeof i.templateMode||"wysiwyg"!=i.templateMode;l||e.setAttribute("id",ko.utils.unwrapObservable(t()))}},ko.virtualElements.allowedBindings.wysiwygId=!0,ko.virtualElements.allowedBindings.wysiwygClick=!0,ko.bindingHandlers.wysiwygCss={update:function(e,t,o,a,i){var l="undefined"==typeof i.templateMode||"wysiwyg"!=i.templateMode;l||ko.bindingHandlers.css.update(e,t,o,a,i)}},ko.virtualElements.allowedBindings.wysiwygCss=!0,ko.bindingHandlers.wysiwygImg={makeTemplateValueAccessor:function(e,t){return function(){var o="undefined"!=typeof t.templateMode&&"wysiwyg"==t.templateMode,a=e(),i=ko.utils.peekObservable(a);return ko.utils.unwrapObservable(a),{name:o?i._editTemplate:i._template,templateEngine:ko.nativeTemplateEngine.instance}}},init:function(e,t,o,a,i){return ko.bindingHandlers.template.init(e,ko.bindingHandlers.wysiwygImg.makeTemplateValueAccessor(t,i))},update:function(e,t,o,a,i){return i=i.extend(t()),ko.bindingHandlers.template.update(e,ko.bindingHandlers.wysiwygImg.makeTemplateValueAccessor(t,i),o,a,i)}},ko.virtualElements.allowedBindings.wysiwygImg=!0,ko.bindingHandlers.wysiwyg={currentIndex:0,standardOptions:{toolbar1:"formatselect bold italic underline forecolor alignleft aligncenter alignright alignjustify bullist link removeformat"},codeOptions:{selector:".code-editor",inline:!1,visual:!1,toolbar1:"formatselect alignright alignjustify bullist link removeformat code"},fullOptions:{toolbar1:"fontselect fontsizeselect hr charmap sourcecode link unlink removeformat code",toolbar2:"formatselect bold italic underline forecolor backcolor outdent indent alignleft aligncenter alignright alignjustify bullist numlist ",plugins:"link hr paste lists textcolor colorpicker code image charmap spellchecker imagetools"},init:function(e,t){ko.bindingHandlers.focusable.init(e),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){tinymce.remove("#"+e.getAttribute("id"))});var o=t();if(!ko.isObservable(o))throw"Wysiwyg binding called with non observable";if(8===e.nodeType)throw"Wysiwyg binding called on virtual node, ignoring...."+e.innerHTML;var a=e.getAttribute("id");a||(a="wysiwyg_"+ ++ko.bindingHandlers.wysiwyg.currentIndex,e.setAttribute("id",a));var i,l=function(){$(".tinyMCE-header").height($(".mce-tinymce.mce-container").outerHeight())},n=$(e).parents("#tinymce-area").hasClass("simple-editor"),r=$(e).parents("#tinymce-area").hasClass("advanced-editor"),s=$(e).parents("#tinymce-area").hasClass("code-editor"),d=!1,c=!1,u={selector:"#"+a,inline:!0,hidden_input:!1,menubar:!1,fixed_toolbar_container:".tinyMCE-header",toolbar1:"formatselect bold italic underline forecolor alignleft aligncenter alignright alignjustify bullist link removeformat",plugins:"link hr paste lists textcolor colorpicker code image charmap spellchecker imagetools",preview_styles:!1,paste_as_text:!0,paste_data_images:!1,language:"en",schema:"html5",browser_spellcheck:!0,extended_valid_elements:"strong/b,em/i,*[*]",skin:"stedb",setup:function(e){e.on("change redo undo",function(){d||(c=!0,o(e.getContent({format:"raw"})),c=!1)}),e.on("focus",function(){e.nodeChanged(),e.getElement().click(),$(".tinyMCE-header .mce-tinymce-inline.mce-panel").removeClass("lastFocused"),l()}),e.on("click",function(){clicks++,clicks>1&&$("#main-toolbox").addClass("visible")}),e.on("blur",function(){$(".tinyMCE-header .mce-tinymce-inline.mce-panel:visible").addClass("lastFocused")}),e.on("BeforeSetContent",function(e){e.initial&&(e.format="raw")})}};return n&&ko.utils.extend(u,ko.bindingHandlers.wysiwyg.standardOptions),r&&ko.utils.extend(u,ko.bindingHandlers.wysiwyg.fullOptions),s&&ko.utils.extend(u,ko.bindingHandlers.wysiwyg.codeOptions),global.setTimeout(function(){tinymce.init(u)}),ko.computed(function(){var o=ko.utils.unwrapObservable(t());if(!c){try{d=!0,"undefined"!=typeof i?i.setContent(o,{format:"raw"}):ko.utils.setHtml(e,o)}catch(a){console.log("TODO exception setting content to editable element",typeof i,a)}d=!1}},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1,"./eventable.js":34}],49:[function(require,module,exports){
"use strict";var console=require("./../../../bower_components/console-browserify/index.js"),checkModel=function(e,t,o,n,i){var a,r,l,s=0;if("undefined"==typeof i&&(i=!1),"undefined"!=typeof t&&"function"==typeof t.splice)for(a={},r=0;r<t.length;r++)a[t[r].type]=t[r];else a=t;for(var d in e)if(e.hasOwnProperty(d))if(l="undefined"!=typeof n?n+"."+d:d,o.hasOwnProperty(d))if(typeof o[d]!=typeof e[d])null!==o[d]&&null!==e[d]&&("string"==typeof o[d]?String(e[d])!=e[d]&&(console.log("TODO Different type 1 ",l,typeof o[d],typeof e[d],o[d],e[d]),s=Math.max(s,2)):"number"==typeof o[d]?Number(e[d])!=e[d]&&(console.log("TODO Different type 2 ",l,typeof o[d],typeof e[d],o[d],e[d]),s=Math.max(s,2)):(console.log("TODO Different type 3 ",l,typeof o[d],typeof e[d],o[d],e[d]),s=Math.max(s,2)));else if("object"==typeof e[d])if(null!==e[d])if("undefined"!=typeof e[d].splice){if(e[d].length>0)if(o[d].length>0){var c=0;for(r=0;r<o[d].length;r++)if("string"==typeof o[d][r].type){for(;c<e[d].length&&e[d][c].type!==o[d][r].type;)console.log("ignoring ",l,e[d][c].type," block type in reference not found in model"),c++;if(c>=e[d].length){console.log("WARN cannot find ",l,o[d][r].type," block in reference"),s=Math.max(s,2);break}s=Math.max(s,checkModel(e[d][c],void 0,o[d][r],l+"["+r+"."+o[d][r].type+"]"))}}else for(r=0;r<e[d].length;r++)"string"!=typeof e[d][r].type?(console.log("TODO found an object with no type",l,e[d][r]),s=Math.max(s,2)):a.hasOwnProperty(e[d][r].type)?s=Math.max(s,checkModel(a[e[d][r].type],a,e[d][r],l+"["+r+"."+e[d][r].type+"]")):(console.warn("TODO the model uses a block type not defined by the template. REMOVING IT!!",l,e[d][r]),e[d].splice(r,1),r--,s=Math.max(s,2))}else null===o[d]?i?(console.log("WARN Null object in model ",l,"instead of",e[d],"deleting it"),s=Math.max(s,2),delete e[d]):(console.log("INFO Null object in model ",l,"instead of",e[d],"cloning it from the reference"),s=Math.max(s,1),o[d]=e[d]):s=Math.max(s,checkModel(e[d],a,o[d],l,i));else null!==o[d]&&(console.log("TODO Null in reference but not null in model",l,o[d]),s=Math.max(s,2));else"string"!=typeof e[d]&&"boolean"!=typeof e[d]&&"number"!=typeof e[d]&&(console.log("TODO unsupported type",l,typeof e[d]),s=Math.max(s,2));else i?(s=Math.max(s,2),delete e[d]):(s=Math.max(s,1),o[d]=e[d]);return i||(s=Math.max(s,checkModel(o,t,e,"undefined"!=typeof n?n+"!R":"!R",!0))),s};module.exports=checkModel;

},{"./../../../bower_components/console-browserify/index.js":1}],50:[function(require,module,exports){
"use strict";var converterUtils=require("./utils.js"),cssParse=require("./../../../bower_components/mensch/lib/parser.js"),console=require("./../../../bower_components/console-browserify/index.js"),domutils=require("./domutils.js"),_declarationValueLookup=function(e,t,o){for(var n=e.length-1;n>=0;n--)if("property"==e[n].type&&e[n].name==t)return _declarationValueUrlPrefixer(e[n].value,o);return null},_propToCamelCase=function(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})},_declarationValueUrlPrefixer=function(e,t){if(e.match(/url\(.*\)/)){var o=e.replace(/(url\()([^\)]*)(\))/g,function(e,o,n,i){var a=n.trim(),r=n.trim().charAt(0);"'"==r||'"'==r?a=a.substr(1,a.length-2):r="";var l=t(a);return null!==l?o+r+l+r+i:e});return o}return e},elaborateDeclarations=function(e,t,o,n,i,a,r){var l="object"==typeof a&&null!==a?a:{},s=null,d=0;if("undefined"==typeof t){var c=cssParse("#{\n"+e+"}",{comments:!0,position:!0});t=c.stylesheet.rules[0].declarations,d=1}for(var u=t.length-1;u>=0;u--)if("property"==t[u].type)if(r===!0&&"display"==t[u].name&&"none"==t[u].value)null===s&&(s=e),s=converterUtils.removeStyle(s,t[u].position.start,t[u].position.end,d,0,0,"");else{var f=t[u].name.match(/^-ko-(bind-|attr-)?([a-z0-9-]*?)(-if|-ifnot)?$/);if(null!==f){null===s&&"undefined"!=typeof e&&(s=e);var p,m,g,b="attr-"==f[1],h="bind-"==f[1],v=f[2],y="-if"==f[3]||"-ifnot"==f[3];if(y){p=t[u].name.substr(0,t[u].name.length-f[3].length);var k=_declarationValueLookup(t,p,o);if(null===k)throw"Unable to find declaration "+p+" for "+t[u].name}else{if((b||h)&&"undefined"==typeof i&&"undefined"!=typeof e)throw"Attributes and bind declarations are only allowed in inline styles!";var w,x=!0;if(b?(g=domutils.getAttribute(i,v),x=!1,w="virtualAttr"):h?(w=null,"text"==v?"undefined"!=typeof i?g=domutils.getInnerText(i):x=!1:"html"==v?"undefined"!=typeof i?g=domutils.getInnerHtml(i):x=!1:x=!1):(x="undefined"!=typeof e,x&&(g=_declarationValueLookup(t,v,o)),w="virtualStyle"),x&&null===g)throw console.error("Cannot find default value for",t[u].name,t),"Cannot find default value for "+t[u].name+": "+t[u].value+" in "+i+" ("+typeof e+"/"+v+")";var _=g,$=h||b?-1!=v.indexOf("-")?"'"+v+"'":v:_propToCamelCase(v);try{m=converterUtils.expressionBinding(t[u].value,n,_)}catch(C){throw console.error("Model ensure path failed",C.stack,"name",t[u].name,"value",t[u].value,"default",g,"element",i),C}null!==w&&"undefined"==typeof l[w]&&(l[w]={}),"virtualAttr"==w&&"href"==$&&(w=null,$="wysiwygHref","undefined"!=typeof i&&null!==i&&domutils.removeAttribute(i,"href"));var S=_declarationValueLookup(t,t[u].name+"-if",o),O=!1;if(null===S)S=_declarationValueLookup(t,t[u].name+"-ifnot",o),O=!0;else if(null!==_declarationValueLookup(t,t[u].name+"-ifnot",o))throw"Unexpected error: cannot use both -if and -ifnot property conditions";if(null!==S)try{var T=converterUtils.conditionBinding(S,n);m=(O?"!":"")+"("+T+") ? "+m+" : null"}catch(C){throw console.error("Unable to deal with -ko style binding condition",S,t[u].name),C}null!==w?l[w][$]=m:l[$]=m}if(null!==s)try{if("undefined"!=typeof i&&null!==i)s=converterUtils.removeStyle(s,t[u].position.start,t[u].position.end,d,0,0,"");else{var E="";y||(E=v+": <!-- ko text: "+m+" -->"+g+"<!-- /ko -->"),s=converterUtils.removeStyle(s,t[u].position.start,t[u].position.end,d,0,0,E)}}catch(C){throw console.warn("Remove style failed",C,"name",t[u]),C}}else{var A=_declarationValueUrlPrefixer(t[u].value,o);if(A!=t[u].value&&(null===s&&"undefined"!=typeof e&&(s=e),null!==s))try{s=converterUtils.removeStyle(s,t[u].position.start,t[u].position.end,d,0,0,t[u].name+": "+A)}catch(C){throw console.log("Remove style failed replacing url",C,"name",t[u]),C}var I=_propToCamelCase(t[u].name),D="virtualAttrStyle",M="undefined"!=typeof l.virtualStyle?l.virtualStyle[I]:void 0,P=" ";"undefined"==typeof l[D]&&(l[D]="''",P=""),"undefined"!=typeof M?(l[D]="'"+t[u].name+": '+("+M+")+';"+P+"'+"+l[D],delete l.virtualStyle[I]):l[D]="'"+t[u].name+": "+converterUtils.addSlashes(A)+";"+P+"'+"+l[D]}}if("undefined"!=typeof i&&null!==i){for(var j in l.virtualStyle)if(l.virtualStyle.hasOwnProperty(j))throw console.log("Unexpected virtualStyle binding after conversion to virtualAttr.style",j,l.virtualStyle[j],e),"Unexpected virtualStyle binding after conversion to virtualAttr.style for "+j;delete l.virtualStyle;var H=domutils.getAttribute(i,"data-bind"),B=(null!==H?H+", ":"")+_bindingSerializer(l);domutils.setAttribute(i,"data-bind",B)}if("undefined"==typeof e){var q=!1;for(var R in l.virtualStyle)if(l.virtualStyle.hasOwnProperty(R)){q=!0;break}if(q){if("undefined"!=typeof l.virtualAttrStyle){var N=l.virtualAttrStyle;delete l.virtualAttrStyle,l.virtualAttrStyle=N}}else delete l.virtualStyle;return _bindingSerializer(l)}return s},_bindingSerializer=function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&("object"==typeof e[o]?t.push(o+": "+"{ "+_bindingSerializer(e[o])+" }"):t.push(o+": "+e[o]));return t.reverse().join(", ")};module.exports=elaborateDeclarations;

},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/mensch/lib/parser.js":15,"./domutils.js":51,"./utils.js":57}],51:[function(require,module,exports){
(function (global){
"use strict";function _extend(e,t){if(t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),objExtend=function(e,t){return"function"==typeof $.extend?$.extend(!0,e,t):_extend(e,JSON.parse(JSON.stringify(t)))},getAttribute=function(e,t){var o=$(e).attr(t);return"undefined"==typeof o&&(o=null),o},setAttribute=function(e,t,o){$(e).attr(t,o)},removeAttribute=function(e,t){$(e).removeAttr(t)},getInnerText=function(e){return $(e).text()},getInnerHtml=function(e){return $(e).html()},getLowerTagName=function(e){return""===e.tagName&&"string"==typeof e.name?e.name.toLowerCase():""!==e.tagName?e.tagName.toLowerCase():$(e).prop("tagName").toLowerCase()},setContent=function(e,t){$(e).html(t)},replaceHtml=function(e,t){$(e).replaceWith(t)},removeElements=function(e,t){t&&"undefined"!=typeof e.detach&&e.detach(),e.remove()};module.exports={getAttribute:getAttribute,setAttribute:setAttribute,removeAttribute:removeAttribute,getInnerText:getInnerText,getInnerHtml:getInnerHtml,getLowerTagName:getLowerTagName,setContent:setContent,replaceHtml:replaceHtml,removeElements:removeElements,objExtend:objExtend};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],52:[function(require,module,exports){
(function (global){
"use strict";var console=require("./../../../bower_components/console-browserify/index.js"),elaborateDeclarations=require("./declarations.js"),utils=require("./utils.js"),modelDef=require("./model.js"),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),_getOptionsObject=function(e){for(var t=e.split("|"),o={},i=0;i<t.length;i++){var n=t[i].split("=");o[n[0]]=n.length>1?n[1]:n[0]}return o},_filterProps=function(e,t,o){var i=[],n=["buttonStyle","bigButtonStyle","buttonColor","backgroundColor","radius"];for(var a in e)if(!a.match(/^customStyle$/)&&!a.match(/^_/)&&e.hasOwnProperty(a)){var r=null!==e[a]&&"undefined"!=typeof e[a]._category&&"style"==e[a]._category;if("id"==a||"type"==a||a.match(/Blocks$/));else if("styler"==t&&n.indexOf(a)>-1)(r||o>0)&&i.push(a);else if("edit"==t){var l=null!==e[a]&&"undefined"!=typeof e[a]._category&&"content"==e[a]._category&&("undefined"==typeof e[a]._context||"block"!=e[a]._context);l&&i.push(a)}else"undefined"==typeof t&&i.push(a)}return i},_propInput=function(e,t,o,i,n){var a,r="";if(null!==e&&"undefined"!=typeof e._widget&&(a=e._widget),"undefined"==typeof a)throw"Unknown data type for "+t;var l="focusable: true";if("edit"==i&&(l+=", event: { focus: function(ui, event) { $($element).click(); } } "),r+='<label class="data-'+a+'"'+("boolean"==a?" data-bind=\"event: { mousedown: function(ui, evt) { if (evt.button == 0) { var input = $($element).find('input'); var ch = input.prop('checked'); setTimeout(function() { input.click(); input.prop('checked', !ch); input.trigger('change'); }, 0); } } }, click: function(ui, evt) { evt.preventDefault(); }, clickBubble: false\"":"")+">","undefined"!=typeof n&&"undefined"!=typeof n[a]){var s=n[a],d={};if("undefined"!=typeof s.parameters)for(var c in s.parameters)s.parameters.hasOwnProperty(c)&&"undefined"!=typeof e["_"+c]&&(d[c]=e["_"+c]);r+=s.html(o,l,d)}else if("boolean"==a)r+='<input type="checkbox" value="nothing" data-bind="checked: '+o+", "+l+'" />',r+='<span class="checkbox-replacer" ></span>';else if("color"==a)r+='<input size="7" type="text" data-bind="colorpicker: { color: '+o+", strings: $root.t('Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet.') }, "+", "+l+'" />';else if("select"==a){if("undefined"!=typeof e._options){var u=_getOptionsObject(e._options);r+='<select data-bind="value: '+o+", "+l+'">';for(var f in u)u.hasOwnProperty(f)&&(r+='<option value="'+f+"\" data-bind=\"text: $root.ut('template', '"+utils.addSlashes(u[f])+"')\">"+u[f]+"</option>");r+="</select>"}}else if("font"==a)r+='<select type="text" data-bind="value: '+o+", "+l+'">',r+='<optgroup label="Sans-Serif Fonts">',r+='<option value="Arial,Helvetica,sans-serif">Arial</option>',r+="<option value=\"'Comic Sans MS',cursive,sans-serif\">Comic Sans MS</option>",r+='<option value="Impact,Charcoal,sans-serif">Impact</option>',r+="<option value=\"'Trebuchet MS',Helvetica,sans-serif\">Trebuchet MS</option>",r+='<option value="Verdana,Geneva,sans-serif">Verdana</option>',r+="</optgroup>",r+='<optgroup label="Serif Fonts">',r+='<option value="Georgia,serif">Georgia</option>',r+="<option value=\"'Times New Roman',Times,serif\">Times New Roman</option>",r+="</optgroup>",r+='<optgroup label="Monospace Fonts">',r+="<option value=\"'Courier New',Courier,monospace\">Courier New</option>",r+="</optgroup>",r+="</select>";else if("url"==a)r+='<div class="ui-textbutton">',r+='<input class="ui-textbutton-input" size="7" type="url" pattern="(mailto:.+@.+|https?://.+\\..+|\\[.*\\].*)" value="nothing" data-bind="css: { withButton: typeof $root.linkDialog !== \'undefined\' }, validatedValue: '+o+", "+l+'" />',r+="<a class=\"ui-textbutton-button\" data-bind=\"visible: typeof $root.linkDialog !== 'undefined', click: typeof $root.linkDialog !== 'undefined' ? $root.linkDialog.bind($element.previousSibling) : false, button: { icons: { primary: 'fa fa-fw fa-ellipsis-h' }, label: 'Opzioni', text: false }\">Opzioni</a>",r+="</div>";else if("integer"==a){var p=0,m=1e3;null!==e&&"undefined"!=typeof e._max&&(m=e._max),null!==e&&"undefined"!=typeof e._min&&(p=e._min);var g=m-p>=100?10:1,b=5*g;r+='<input class="number-spinner" size="7" step="'+g+'" type="number" value="-1" data-bind="spinner: { min: '+p+", max: "+m+", page: "+b+", value: "+o+" }, valueUpdate: ['change', 'spin']"+", "+l+'" />'}else r+='<input size="7" type="text" value="nothing" data-bind="value: '+o+", "+l+'" />';return r+="</label>"},_getGlobalStyleProp=function(e,t,o,i){var n;return("object"!=typeof t||null===t||"undefined"!=typeof t._widget)&&"undefined"!=typeof o&&"undefined"!=typeof i&&i.length>0&&"object"==typeof e&&"undefined"!=typeof e[i]&&(n=e[i]),n},_propEditor=function(e,t,o,i,n,a,r,l,s,d,c,u,f,p,m){if("undefined"==typeof s&&(s=0),"undefined"!=typeof r&&"object"==typeof i&&null!==i&&"undefined"==typeof i._usecount)return console.log("TODO EDITOR ignoring",a,"property because it is not used by the template","prop:",r,"type:",l,"level:",s,e._templateName),"";var g,b="undefined"!=typeof u?r+"._defaultComputed":r,h="",v=b,y=1,k=1;if("object"==typeof i&&null!==i&&"undefined"==typeof i._widget||"undefined"==typeof u&&(y+=1),"undefined"==typeof u&&"undefined"!=typeof d&&(k+=d),"undefined"!=typeof r&&f&&(h+="<!-- ko ifSubs: { data: "+v+", threshold: "+k+", gutter: "+y+"} -->"),"undefined"==typeof r||null!==i&&"undefined"!=typeof i._name||console.log("TODO WARN Missing label for property ",r),"undefined"==typeof r&&null!==i&&"undefined"==typeof i._name&&console.log("TODO WARN Missing label for object ",i.type),"object"==typeof i&&null!==i&&"undefined"==typeof i._widget){var w=_filterProps(i,l,s),x="styler"==l&&null!==i&&"undefined"!=typeof i.customStyle&&"undefined"!=typeof u,_="",$="";"undefined"!=typeof r&&"edit"==l&&(_=", click: function(obj, evt) { $root.selectItem("+r+", $data); return false }, clickBubble: false, css: { selecteditem: $root.isSelectedItem("+r+") }, scrollIntoView: $root.isSelectedItem("+r+"), ",$+=" selectable"),x&&($+=" supportsCustomStyles"),h+='<div class="objEdit level'+s+$+'" data-bind="tooltips: {}'+_+'">';var C=null!==i&&"undefined"!=typeof i._name?i._name:"undefined"!=typeof r?"["+r+"]":"";if(x){var S="Stile";"undefined"!=typeof n&&null!==n&&"undefined"!=typeof n._name?S=n._name:console.log("TODO missing label for theme section ",r,null!==i?i.type:"-"),C="<span class=\"blockSelectionMethod\" data-bind=\"text: customStyle() ? $root.ut('template', '"+utils.addSlashes(C)+"') : $root.ut('template', '"+utils.addSlashes(S)+"')\">Block</span>"}else C="<span data-bind=\"text: $root.ut('template', '"+utils.addSlashes(C)+"')\">"+C+"</span>";g=null!==i&&"undefined"!=typeof i._help?' title="'+utils.addSlashes(i._help)+"\" data-bind=\"attr: { title: $root.ut('template', '"+utils.addSlashes(i._help)+"') }\"":"",("0"==s||"1"==s)&&(h+="<span"+g+' class="objLabel level'+s+'">'+C+"</span>"),"edit"==l&&"undefined"!=typeof i._blockDescription&&(h+="<div class=\"blockDescription\" data-bind=\"html: $root.ut('template', '"+utils.addSlashes(i._blockDescription)+"')\">"+i._blockDescription+"</div>"),x&&(h+='<label class="data-boolean blockCheck" data-bind="tooltips: { }">',h+='<input type="checkbox" value="nothing" data-bind="focusable: true, checked: customStyle" />',h+='<span title="Switch between global and block level styles editing" data-bind="attr: { title: $root.t(\'Switch between global and block level styles editing\') }" class="checkbox-replacer checkbox-replacer-onoff"></span>',h+="</label>",h+="<!-- ko template: { name: 'customstyle', if: customStyle } --><!-- /ko -->"),"undefined"!=typeof r&&(h+="<!-- ko with: "+r+" -->",1==s&&"undefined"!=typeof r&&"undefined"!=typeof i._previewBindings&&"undefined"!=typeof e&&("undefined"!=typeof p&&(h+='<!-- ko with: $root.content() --><div class="objPreview" data-bind="'+p+'"></div><!-- /ko -->'),"undefined"!=typeof m&&(h+='<!-- ko with: $parent --><div class="objPreview" data-bind="'+m+'"></div><!-- /ko -->'),elaborateDeclarations(void 0,i._previewBindings,o,e.bind(this,a+"."))));var O;0===s&&"undefined"!=typeof i._previewBindings&&(O=elaborateDeclarations(void 0,i._previewBindings,o,e.bind(this,a.length>0?a+".":"")));var T,I,E,A,D=h.length;for(T=0;T<w.length;T++)I=a.length>0?a+"."+w[T]:w[T],("object"!=typeof i[w[T]]||null===i[w[T]]||"undefined"!=typeof i[w[T]]._widget)&&(A=void 0,0===s&&"theme"==w[T]?h+=_propEditor(e,t,o,i[w[T]],E,I,w[T],l,0,d,void 0,void 0,f,p):(A=_getGlobalStyleProp(c,i[w[T]],w[T],I),h+=_propEditor(e,t,o,i[w[T]],E,I,w[T],l,s+1,d,c,A,f,p,O)));for(T=0;T<w.length;T++)I=a.length>0?a+"."+w[T]:w[T],"object"==typeof i[w[T]]&&null!==i[w[T]]&&"undefined"==typeof i[w[T]]._widget&&(A=void 0,0===s&&"theme"==w[T]?h+=_propEditor(e,t,o,i[w[T]],E,I,w[T],l,0,d,void 0,void 0,f,p):(A=_getGlobalStyleProp(c,i[w[T]],w[T],I),h+=_propEditor(e,t,o,i[w[T]],E,I,w[T],l,s+1,d,c,A,f,p,O)));var M=h.length-D;if(0===M){if("object"==typeof i&&null!==i&&"template"==i._context)return"";h+='<div class="objEmpty" data-bind="html: $root.t(\'Selected element does not seem to have editable links, buttons or images \')">Selected element does not seem to have editable links, buttons or images</div>'}"undefined"!=typeof r&&(h+="<!-- /ko -->"),h+="</div>"}else{var P=!0;if("undefined"==typeof c&&(P=!1),null===i||"object"!=typeof i||"undefined"!=typeof i._widget){var H=[];"undefined"!=typeof u&&H.push("css: { notnull: "+r+"() !== null }"),g=null!==i&&"undefined"!=typeof i._help?' title="'+utils.addSlashes(i._help)+"\" data-bind=\"attr: { title: $root.ut('template', '"+utils.addSlashes(i._help)+"') }\"":"",g.length>0&&H.push("tooltips: {}");var j=H.length>0?'data-bind="'+utils.addSlashes(H.join())+'"':"";h+='<div class="propEditor '+(P?"checkboxes":"")+'"'+j+">";var B=null!==i&&"undefined"!=typeof i._name?i._name:"undefined"!=typeof r?"["+r+"]":"";B="<span data-bind=\"text: $root.ut('template', '"+utils.addSlashes(B)+"')\">"+B+"</span>",h+="<span"+g+' class="propLabel">'+B+"</span>",h+='<div class="propInput '+("undefined"!=typeof c?"local":"")+'" data-bind="css: { default: '+r+'() === null }">',h+=_propInput(i,r,b,l,t),h+="</div>","undefined"!=typeof u&&(h+='<div class="propInput global" data-bind="css: { overridden: '+r+'() !== null }">',h+=_propInput(i,r,u,l,t),h+="</div>",P&&(h+='<div class="propCheck"><label data-bind="tooltips: {}"><input type="checkbox" data-bind="focusable: true, click: function(evt, obj) { $root.localGlobalSwitch('+r+", "+u+"); return true; }, checked: "+r+'() !== null">',h+='<span class="checkbox-replacer" data-bind="css: { checked: '+r+"() !== null }, attr: { title: $root.t('This style is specific for this block: click here to remove the custom style and revert to the theme value') }\"></span>",h+="</label></div>")),h+="</div>"}else h+=null===i||"object"!=typeof i?'<div class="propEditor unknown">[A|'+r+"|"+typeof i+"]</div>":'<div class="propEditor unknown">[B|'+r+"|"+typeof i+"]</div>"}return"undefined"!=typeof r&&f&&(h+="<!-- /ko -->",h+="<!-- ko ifSubs: { not: true, data: "+v+", threshold: "+k+", gutter: 0 } -->",h+='<span class="label notused">('+r+")</span>",h+="<!-- /ko -->"),h},createBlockEditor=function(e,t,o,i,n,a,r,l,s,d,c,u){"undefined"==typeof c&&(c=!0);var f,p=modelDef.getDef(e,a),m=modelDef.getDef(e,n);"undefined"!=typeof m._previewBindings&&"theme"!=a&&"styler"==r&&(f=elaborateDeclarations(void 0,m._previewBindings,i,modelDef.getBindValue.bind(void 0,e,o,n,n,"")));var g,b="undefined"!=typeof d&&d?e[a]._globalStyles:void 0,h="undefined"!=typeof d&&d?e[a]._globalStyle:void 0;if("undefined"!=typeof h){var v=modelDef.getDef(e,"theme");g=v[h.replace(/^(\$theme|_theme_)\./,"")]}var y=modelDef.getBindValue.bind(void 0,e,o,n,a);y._templateName=a;var k='<div class="editor">';k+='<div class="blockType'+("undefined"!=typeof b?" withdefaults":"")+'">'+p.type+"</div>";var w=_propEditor(y,t,i,p,g,"",void 0,r,u,s,b,h,c,f);w.length>0&&(k+=w),k+="</div>",l(k,a,r)},createBlockEditors=function(e,t,o,i,n,a,r,l){createBlockEditor(e,t,o,i,n,a,"edit",r,l),createBlockEditor(e,t,o,i,n,a,"styler",r,l,!0)},generateEditors=function(e,t,o,i,n){var a,r=e._defs,l=e.templateName,s=e._blocks,d=[];for(a=0;a<s.length;a++)"undefined"!=typeof s[a].container&&d.push(modelDef.generateModel(r,s[a].block)),createBlockEditors(r,t,void 0,o,s[a].root,s[a].block,i,n);return"undefined"!=typeof r.theme&&createBlockEditor(r,t,void 0,o,l,"theme","styler",i,void 0,!1,!1,-1),d};module.exports=generateEditors;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1,"./declarations.js":50,"./model.js":54,"./utils.js":57}],53:[function(require,module,exports){
"use strict";var modelDef=require("./model.js"),wrappedResultModel=function(e){var t=e._defs,o=e.templateName,a=modelDef.getDef(t,o),i=modelDef.generateResultModel(e),l=require("./wrapper.js"),n=l(i,a,t);return n},translateTemplate=function(){var e=require("./parser.js");return e.apply(e,arguments)},generateEditors=function(){var e=require("./editor.js");return e.apply(e,arguments)},checkModel=function(){var e=require("./checkmodel.js");return e.apply(e,arguments)};module.exports={translateTemplate:translateTemplate,wrappedResultModel:wrappedResultModel,generateResultModel:modelDef.generateResultModel,generateEditors:generateEditors,checkModel:checkModel};

},{"./checkmodel.js":49,"./editor.js":52,"./model.js":54,"./parser.js":55,"./wrapper.js":58}],54:[function(require,module,exports){
"use strict";var objExtend=require("./domutils.js").objExtend,console=require("./../../../bower_components/console-browserify/index.js"),_valueSet=function(e,t,o,n){var i=o.indexOf(".");if(-1==i)if("undefined"==typeof t[o])console.log("Undefined prop "+o+" while setting value "+n+" in model._valueSet");else if(null===t[o])"object"==typeof n&&null!==n&&"undefined"==typeof n.push&&console.log("nullpropobjectvalue",o,n),t[o]=n;else if("object"==typeof t[o]&&"function"==typeof t[o].push){var a;if("string"==typeof n){var r=n.match(/^\[(.*)\]$/);if(null===r)throw"Unexpected default value for array property "+o+": "+n;a=r[1].split(",")}else{if("object"!=typeof n||"undefined"==typeof n.push)throw"Unexpected default value for array property "+o+": "+n+" typeof "+typeof n;a=n}for(var l=[],s=0;s<a.length;s++)"@"==a[s].substr(0,1)?l.push(_generateModel(e,a[s].substr(1))):a[s].length>0&&l.push(a[s]);t[o]=l}else"string"==typeof t[o]||"boolean"==typeof t[o]?t[o]=n:"object"==typeof t[o]&&null!==t[o]&&"undefined"!=typeof t[o]._widget?("object"==typeof n&&null!==n&&console.log("objectvalue",o,t[o]._widget,n),t[o]=n):console.log("setting",typeof t[o],t[o],o,n);else{var d=o.substr(0,i);_valueSet(e,t[d],o.substr(i+1),n)}},_modelCreateOrUpdateBlockDef=function(e,t,o,n){if("undefined"!=typeof e[t]&&e[t]._initialized&&!e[t]._writeable)throw console.log("_modelCreateOrUpdateBlockDef",e,t,o,n),"Trying to alter non writeable model: "+t+" / "+o;if("undefined"==typeof e[t]&&(e[t]={_writeable:!0},"undefined"==typeof n&&(n={}),"undefined"==typeof n.category&&"undefined"==typeof e[t]._category&&(n.category=t.match(/(^t|.T)heme$/)||t.match(/(^s|.S)tyle$/)||t.match(/(^c|.C)olor$/)||t.match(/(^r|.R)adius$/)?"style":"content")),"undefined"!=typeof n){if("undefined"!=typeof n.name&&(e[t]._name=n.name),"undefined"!=typeof n.themeOverride&&(e[t]._themeOverride=n.themeOverride),"undefined"!=typeof n.globalStyle){e[t]._globalStyle=n.globalStyle;var i=n.globalStyle.replace(/^(\$theme|_theme_)\./,""),a=i.indexOf("."),r=-1!=a?i.substr(0,a):i;_modelCreateOrUpdateBlockDef(e,"theme",r),("undefined"==typeof e[t]._themeOverride||e[t]._themeOverride)&&_modelCreateOrUpdateBlockDef(e,t,"customStyle=false")}"undefined"!=typeof n.contextName&&(e[t]._context=n.contextName,"block"==n.contextName&&"undefined"==typeof e[t]._globalStyle&&(e[t]._globalStyle="_theme_.bodyTheme",_modelCreateOrUpdateBlockDef(e,"theme","bodyTheme"),("undefined"==typeof e[t]._themeOverride||e[t]._themeOverride)&&_modelCreateOrUpdateBlockDef(e,t,"customStyle=false"))),"undefined"!=typeof n.extend&&(e[t].type=n.extend)}for(var l in n)n.hasOwnProperty(l)&&"undefined"!=typeof n[l]&&-1==["name","extend","contextName","globalStyle","themeOverride"].indexOf(l)&&(e[t]["_"+l]=n[l]);"undefined"!=typeof o&&o.length>0&&(e[t]._props="undefined"!=typeof e[t]._props&&e[t]._props.length>0?e[t]._props+" "+o:o)},_removePrefix=function(e){var t=e.match(/^[^A-Z]+([A-Z])(.*)$/);return null!==t?t[1].toLowerCase()+t[2]:null},_generateModelFromDef=function(e,t){var o={};for(var n in e)if(!n.match(/^_.*/)&&e.hasOwnProperty(n)){var i=e[n];if("object"==typeof i&&null!==i&&"undefined"!=typeof i._complex&&i._complex)o[n]=_generateModelFromDef(i,t);else if("type"==n)o[n]=i;else{if("object"!=typeof i)throw console.error("Unexpected model def",n,i,e),"Unexpected model def ["+n+"]="+i;o[n]=null}}if("undefined"!=typeof e._defaultValues){var a=e._defaultValues;for(var r in a)a.hasOwnProperty(r)&&_valueSet(t,o,r,a[r])}return o},_generateModel=function(e,t){var o=_getModelDef(e,t,!1,!0);return _generateModelFromDef(o,e)},_getDef=function(e,t){return _getModelDef(e,t,!1,!0)},_getModelDef=function(e,t,o,n){if("undefined"==typeof e[t]){if(-1!=t.indexOf(" "))return null;var i=_removePrefix(t);return null!==i?_getModelDef(e,i,o,n):null}var a=e[t];if("object"!=typeof a)throw"Block definition must be an object: found "+a+" for "+t;if("undefined"==typeof a._initialized){if("undefined"==typeof a.type&&(a.type=-1==t.indexOf(" ")?t:t.substr(t.indexOf(" ")+1)),a.type!=t&&"undefined"==typeof a._widget){var r=_getModelDef(e,a.type,!0),l=objExtend(r,a);a=l,e[t]=a}else"undefined"==typeof a._widget&&"undefined"==typeof a._props&&"undefined"==typeof a._complex;a._writeable=!0,a._initialized=!0}if("undefined"!=typeof a._props){var s=a._props;if(s=s.split(" "),s.length>0&&"undefined"==typeof a._writeable)throw console.error("Altering a non writable object ",t,s,a),"Altering a non writable object: "+t+" def: "+s;"undefined"==typeof a._processedDefs&&(a._processedDefs={}),"undefined"==typeof a._globalStyles&&(a._globalStyles={}),"undefined"==typeof a._defaultValues&&(a._defaultValues={});for(var d=0;d<s.length;d++){var c=s[d];if(0!==c.length){var u=c,f=null,p=c.match(/^([^=\[\]]+)(\[\])?(=?)(.*)$/);if(null!==p&&(c=p[1],"[]"==p[2]&&("undefined"==typeof a[c]&&(a[c]=[]),f=[]),"="==p[3]&&(f=c.match(/(^v|V)isible$/)?"true"==String(p[4]).toLowerCase():c.match(/^customStyle$/)?"true"==String(p[4]).toLowerCase():p[4])),null!==f&&"undefined"==typeof a._defaultValues[c]&&(a._defaultValues[c]=f),"undefined"==typeof a[c]){var m=_getModelDef(e,t+" "+c,!0);null===m&&(m=_getModelDef(e,c,!0)),a[c]=m}a._processedDefs[c]=u,a._complex=!0}}delete a._props}if(o){a._writeable=!1;var g=objExtend({},a);return g}if(n)return a._writeable=!1,a;if("undefined"==typeof a._writeable||a._writeable===!1)throw"Retrieving non writeable object definition: "+t;return a},_increaseUseCount=function(e,t){if(e){if("undefined"==typeof t._usecount)throw console.error("ERROR trying to bind an unused property while readonly",t),"ERROR trying to bind an unused property"}else"undefined"==typeof t._usecount&&(t._usecount=0),t._usecount++},ensureGlobalStyle=function(e,t,o,n,i,a,r,l){var s=o(a,r,l);if("undefined"==typeof e[n]._globalStyles[i]){if(t)throw"Cannot find _globalStyle for "+i+" in "+n+"!";(-1!=i.indexOf(".")||"object"==typeof e[n][i]&&"undefined"!=typeof e[n][i]._widget)&&(e[n]._globalStyles[i]=s)}else if(e[n]._globalStyles[i]!=s)throw"Unexpected conflicting globalStyle [2] for "+n+"/"+i+": old="+e[n]._globalStyles[i]+" new="+s},modelEnsurePathAndGetBindValue=function(e,t,o,n,i,a,r,l,s,d){var c,u,f;if("$"==r.substr(0,1)){console.warn("DEPRECATED $ in bindingProvider: ",r,i);var p=r.indexOf(".");if(-1==p)throw"Unexpected fullPath: "+r+"/"+a+"/"+i+"/"+l+"/"+s;if(c=r.substr(1,p-1),f=r.substr(p+1),"theme"!=c)throw"Unexpected $ sequence: "+c+" in "+r;var m=f.indexOf(".");c=f.substr(0,m),f=f.substr(m+1),u="$root.content().theme()."+c+"()."+f.replace(new RegExp("\\.","g"),"().")}else if("#"==r.substr(0,1))console.warn("DEPRECATED # in bindingProvider: ",r,i),c=n,f=r.substr(1),u="$root.content()."+f.replace(new RegExp("\\.","g"),"().");else if("_theme_."==r.substr(0,8)){var g=r.indexOf(".",8);c=r.substr(8,g-8),f=r.substr(g+1),u="$root.content().theme()."+c+"()."+f.replace(new RegExp("\\.","g"),"().")}else"_root_."==r.substr(0,7)?(c=n,f=r.substr(7),u="$root.content()."+f.replace(new RegExp("\\.","g"),"().")):(c=i,f=a+r,u=r.replace(new RegExp("\\.","g"),"()."));if("undefined"==typeof t[c])throw"Cannot find model def for ["+c+"]";var b=f.indexOf("."),h=-1==b?f:f.substr(0,b);if(-1!=c.indexOf("-"))throw console.error("ERROR cannot use - for block names",c),"ERROR unexpected char in block name: "+c;if(-1!=h.indexOf("-"))throw console.error("ERROR cannot use - for property names",h),"ERROR unexpected char in property name: "+c;if(e)return"undefined"!=typeof t[c]._globalStyle&&"undefined"!=typeof t[c][h]&&"style"==t[c][h]._category&&(u+="._defaultComputed"),u;var v;if(e){if("undefined"!=typeof l)throw"Cannot use defaultValue in readonly mode!";if(s)throw"Cannot use overrideDefault in readonly mode for "+c+"/"+f+"/"+s+"!";if("undefined"!=typeof d)throw"Cannot set category for "+c+"/"+f+"/"+d+" in readonly mode!";v=_getModelDef(t,c,!1,!0)}else t[c]._writeable===!1&&console.log("TODO debug use cases for this condition",c,f),v=_getModelDef(t,c,t[c]._writeable===!1);if(null===v)throw"Unexpected model for ["+c+"]";if("undefined"==typeof v[h]){if(e)throw"Cannot find path "+h+" for "+c+"!";_modelCreateOrUpdateBlockDef(t,c,h),v=_getModelDef(t,c,!1)}"undefined"!=typeof t[c]._globalStyle&&"undefined"!=typeof t[c][h]&&null!==t[c][h]&&"style"==t[c][h]._category&&(u+="._defaultComputed");var y=v;try{if(_increaseUseCount(e,y),-1!=b){var k=f;do{var w=k.substr(0,b);if("undefined"==typeof y[w])throw"Found an unexpected prop "+w+" for model "+c+" for "+f;y=y[w],_increaseUseCount(e,y),k=k.substr(b+1),b=k.indexOf(".")}while(-1!=b);if("undefined"==typeof y[k]||null===y[k])throw"Found an unexpected path termination "+k+" for model "+c+" for "+f;y=y[k]}else y=y[f];if("undefined"==typeof y||null===y)throw"Unexpected null model for "+c+"/"+a+"/"+r;"undefined"!=typeof d&&(y._category=d),_increaseUseCount(e,y)}catch(x){throw console.error("TODO ERROR Property lookup exception",x,c,f,i,r,t),x}if("undefined"!=typeof t[c]._globalStyle&&"object"==typeof t[c][h]&&null!==t[c][h]&&"undefined"!=typeof t[c][h]._category&&"style"==t[c][h]._category){var _=modelEnsurePathAndGetBindValue.bind(void 0,e,t,o,n,i,""),$=-1!=f.indexOf(".")?f.substr(f.indexOf(".")):"";if(-1!=$.indexOf(".",1))throw"TODO unsupported object nesting! "+f;var C=t[c]._globalStyle+"."+h;"object"==typeof t[c][h]&&null!==t[c][h]&&"undefined"!=typeof t[c][h]._globalStyle&&(C=t[c][h]._globalStyle),ensureGlobalStyle(t,e,_,c,h,C,void 0,!1);var S=C+$;if("undefined"==typeof l&&null!==t[c]._defaultValues[f]&&(l=t[c]._defaultValues[f]),ensureGlobalStyle(t,e,_,c,f,S,l,s),"undefined"!=typeof l){if(e)throw console.error("Cannot set a new theme default value",S.substr(7),l,"while in readonly mode"),"Cannot set a new theme default value ("+l+") for "+S.substr(7)+" while in readonly mode!";o("default",S.substr(7),l)}l=null}if("undefined"!=typeof l)if("undefined"==typeof t[c]._defaultValues[f]||"undefined"!=typeof s&&s){if(e)throw"Cannot set new _defaultValues [1] for "+f+" in "+c+"!";t[c]._defaultValues[f]=l}else if(null===l){if(e&&null!==t[c]._defaultValues[f])throw"Cannot set new _defaultValues [2] for "+f+" in "+c+"!";t[c]._defaultValues[f]=null}else if(t[c]._defaultValues[f]!=l)throw console.error("TODO error!!! Trying to set a new default value for "+c+" "+f+" while it already exists (current: "+t[c]._defaultValues[f]+", new: "+l+")"),"Trying to set a new default value for "+c+" "+f+" while it already exists (current: "+t[c].defaultValues[f]+", new: "+l+")";return u},generateResultModel=function(e){var t=e._defs,o=e.templateName,n=_generateModel(t,o);return"undefined"!=typeof t.theme&&(n.theme=_generateModel(t,"theme")),n};module.exports={ensurePathAndGetBindValue:modelEnsurePathAndGetBindValue.bind(void 0,!1),getBindValue:modelEnsurePathAndGetBindValue.bind(void 0,!0),generateModel:_generateModel,generateResultModel:generateResultModel,getDef:_getDef,createOrUpdateBlockDef:_modelCreateOrUpdateBlockDef};

},{"./../../../bower_components/console-browserify/index.js":1,"./domutils.js":51}],55:[function(require,module,exports){
(function (global){
"use strict";function conditional_replace(e){return e.replace(/<!--\[if ([^\]]*)\]>((?:(?!--)[\s\S])*?)<!\[endif\]-->/g,function(e,t,o){var i="<!-- cc:start -->";i+=o.replace(/<([A-Za-z:]+)/g,"<!-- cc:bo:$1 --><cc").replace(/<\/([A-Za-z:]+)>/g,"<!-- cc:bc:$1 --></cc><!-- cc:ac:$1 -->").replace(/\/>/g,"/><!-- cc:sc -->"),i+="<!-- cc:end -->";var n='<replacedcc condition="'+t+'" style="display: none">';return n+=$("<div>").append($(i)).html().replace(/^<!-- cc:start -->/,"").replace(/<!-- cc:end -->$/,""),n+="</replacedcc>"})}var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),console=require("./../../../bower_components/console-browserify/index.js"),converterUtils=require("./utils.js"),elaborateDeclarations=require("./declarations.js"),processStylesheetRules=require("./stylesheet.js"),modelDef=require("./model.js"),domutils=require("./domutils.js"),wrapElementWithCondition=function(e,t,o){var i=domutils.getAttribute(t,e);try{var n=converterUtils.conditionBinding(i,o);$(t).before("<!-- ko if: "+n+" -->"),$(t).after("<!-- /ko -->"),domutils.removeAttribute(t,e)}catch(a){throw console.warn("Model ensure path failed in if/variant",t,i,e),a}},replacedAttributes=function(e,t){domutils.setAttribute(e,t,domutils.getAttribute(e,"replaced"+t))},processStyle=function(e,t,o,i){var n,a=domutils.getAttribute(e,"replacedstyle"),r=null;i&&(n={uniqueId:"$data",attr:{id:"id"}});var l=null!==domutils.getAttribute(e,"data-ko-display");r=elaborateDeclarations(a,void 0,t,o,e,n,l),null===r?r=a:domutils.removeAttribute(e,"replacedstyle"),null!==r&&(r.trim().length>0?domutils.setAttribute(e,"style",r):domutils.removeAttribute(e,"style"))},_fixRelativePath=function(e,t,o,i){var n=domutils.getAttribute(i,e),a=t(n);null!==a&&domutils.setAttribute(i,e,a)},processBlock=function(e,t,o,i,n,a,r,l,s,d){try{var c;if("block"==a)c=domutils.getAttribute(e,"data-ko-block"),domutils.removeAttribute(e,"data-ko-block");else{if("template"!=a)throw"Unexpected context name while processing block: "+a;c=r}$("[data-ko-remove]",e).remove();for(var u=$("[data-ko-block]",e).replaceWith("<replacedblock>"),f=["href","src","data-ko-placeholder-src","background"],p=0;p<f.length;p++){var m=_fixRelativePath.bind(void 0,f[p],n);$("["+f[p]+"]",e).each(m)}var g=domutils.getAttribute(e,"data-ko-properties");null===g&&(g=""),$("[data-ko-properties]",e).each(function(e,t){g.length>0&&(g+=" "),g+=domutils.getAttribute(t,"data-ko-properties"),domutils.removeAttribute(t,"data-ko-properties")}),modelDef.createOrUpdateBlockDef(t,c,g,{contextName:a});var b=modelDef.ensurePathAndGetBindValue.bind(void 0,t,o,r,c,"");"block"==a&&b("id",""),$("style",e).each(function(e,i){var a=domutils.getInnerHtml(i),l=modelDef.createOrUpdateBlockDef.bind(void 0,t),s=modelDef.ensurePathAndGetBindValue.bind(void 0,t,o,r),u=processStylesheetRules(a,void 0,s,l,o,n,r,c);if(u!=a)if(""!==u.trim()){var f=d(u);domutils.setAttribute(i,"data-bind","template: { name: '"+f+"' }"),domutils.setContent(i,"")}else domutils.removeElements($(i))}),processStyle(e,n,b,s);for(var h=["data-ko-display","data-ko-editable","data-ko-wrap","href"],v=0;v<h.length;v++){var y=domutils.getAttribute(e,h[v]);if(y)throw console.warn("ERROR: Unsupported "+h[v]+" used together with data-ko-block",e),"ERROR: Unsupported "+h[v]+" used together with data-ko-block"}return $("[data-ko-link]",e).each(function(e,t){var o=domutils.getAttribute(t,"data-ko-link"),i=domutils.getAttribute(t,"replacedstyle");("undefined"==typeof i||null===i)&&(i=""),i=""!==i?"-ko-attr-href: @"+o+"; "+i:"-ko-attr-href: @"+o,domutils.setAttribute(t,"replacedstyle",i),domutils.setAttribute(t,"data-ko-wrap",o),domutils.removeAttribute(t,"data-ko-link")}),$("[replacedstyle]",e).each(function(e,t){processStyle(t,n,b,!1)}),$("[replacedhttp-equiv]",e).each(function(e,t){replacedAttributes(t,"http-equiv")}),$("[data-ko-display]",e).each(function(e,t){wrapElementWithCondition("data-ko-display",t,b)}),$("[data-ko-editable]",e).each(function(e,t){var o,i,n,a,r,l,s=domutils.getAttribute(t,"data-ko-editable");if(s.lastIndexOf(".")>0){var c=s.substr(0,s.lastIndexOf("."));r=b(c)}else r=b(s);if(l="wysiwygClick: function(obj, evt) { $root.selectItem("+r+", $data); return false }, clickBubble: false, wysiwygCss: { selecteditem: $root.isSelectedItem("+r+") }, scrollIntoView: $root.isSelectedItem("+r+")","img"!=domutils.getLowerTagName(t)){i=domutils.getInnerHtml(t);var u=b(s,i,!0,"wysiwyg");if(o="",domutils.getAttribute(t,"id")||(o+="wysiwygId: id()+'_"+s.replace(".","_")+"', "),"undefined"!=typeof l&&(o+=l+", "),o+="wysiwygOrHtml: "+u,"td"==domutils.getLowerTagName(t)){var f=$('<div data-ko-wrap="false" style="width: 100%; height: 100%"></div>')[0];domutils.setAttribute(f,"data-bind",o);var p=domutils.getInnerHtml($("<div></div>").append(f));domutils.setContent(t,p)}else n=domutils.getAttribute(t,"data-bind"),a=(null!==n?n+", ":"")+o,domutils.setAttribute(t,"data-bind",a),domutils.setContent(t,"");domutils.removeAttribute(t,"data-ko-editable")}else{var m=domutils.getAttribute(t,"width");if(""===m&&(m=null),null===m)throw console.error("ERROR: data-ko-editable images must declare a WIDTH attribute!",t),"ERROR: data-ko-editable images must declare a WIDTH attribute!";var g=domutils.getAttribute(t,"height");""===g&&(g=null);var h=domutils.getAttribute(t,"align");n=domutils.getAttribute(t,"data-bind");var v=n&&n.match(/virtualAttr: {[^}]* height: ([^,}]*)[,}]/);v&&(g=v[1]);var y=n&&n.match(/virtualAttr: {[^}]* width: ([^,}]*)[,}]/);y&&(m=y[1]);var k;i=domutils.getAttribute(t,"data-ko-placeholder-src");var w="";i?w=domutils.getAttribute(t,"src"):i=domutils.getAttribute(t,"src");var x;m&&g?x=m+"+'x'+"+g:g?m||(x="'h'+"+g+"+''"):x="'w'+"+m+"+''";var _,C=g||domutils.getAttribute(t,"data-ko-placeholder-height"),O=m||domutils.getAttribute(t,"data-ko-placeholder-width");if(domutils.removeAttribute(t,"src"),domutils.removeAttribute(t,"data-ko-editable"),domutils.removeAttribute(t,"data-ko-placeholder-height"),domutils.removeAttribute(t,"data-ko-placeholder-width"),domutils.removeAttribute(t,"data-ko-placeholder-src"),i&&(_="{ width: "+O+", height: "+C+", text: "+x+"}"),!O||!C)throw console.error("IMG data-ko-editable must declare width and height attributes, or their placeholder counterparts data-ko-placeholder-width/data-ko-placeholder-height",t),"ERROR: IMG data-ko-editable MUST declare width and height attributes, or their placeholder counterparts data-ko-placeholder-width/data-ko-placeholder-height";var S=b(s,w,!1,"wysiwyg");o="wysiwygSrc: { width: "+m+", height: "+g+", src: "+S+", placeholder: "+_+" }",a=(null!==n?n+", ":"")+o,domutils.setAttribute(t,"data-bind",a);var T=d(t),I="{ width: "+m;"left"==h?I+=", float: 'left'":"right"==h?I+=", float: 'right'":"center"==h?console.log("non so cosa fa align=center su una img e quindi non so come simularne l'editing"):"top"==h?I+=", verticalAlign: 'top'":"middle"==h?I+=", verticalAlign: 'middle'":"bottom"==h&&(I+=", verticalAlign: 'bottom'"),I+="}",$(t).before("<!-- ko wysiwygImg: { _data: $data, _item: "+r+", _template: '"+T+"', _editTemplate: 'img-wysiwyg', _src: "+S+", _width: "+m+", _height: "+g+", _align: "+(null===h?void 0:"'"+h+"'")+", _size: "+x+", _method: "+k+", _placeholdersrc: "+_+", _stylebind: "+I+" } -->"),$(t).after("<!-- /ko -->")}}),$("[href]",e).each(function(e,t){var o=domutils.getAttribute(t,"href"),i="wysiwygHref: '"+converterUtils.addSlashes(o)+"'",n=domutils.getAttribute(t,"data-bind"),a=(null!==n?n+", ":"")+i;domutils.setAttribute(t,"data-bind",a)}),$("replacedblock",e).each(function(e,a){var s=u[e],f=processBlock(s,t,o,i,n,"block",c,l,!0,d),p=modelDef.ensurePathAndGetBindValue(t,o,r,c,"",f);$(a).before("<!-- ko block: { data: "+converterUtils.addSlashes(p)+", template: 'block' } -->"),$(a).after("<!-- /ko -->"),$(a).remove()}),$($("[data-ko-wrap]",e).get().reverse(),e).each(function(e,t){var o=domutils.getAttribute(t,"data-ko-wrap");if("undefined"==typeof o||""===o||"true"===o)throw"Unsupported empty value for data-ko-wrap: use false value if you want to always remove the tag";var i,n,a=converterUtils.conditionBinding(o,b),r=domutils.getAttribute(t,"data-bind");if(""!==r&&null!==r&&r.match(/(block|wysiwygOrHtml):/)){var l="<!-- ko "+r+" -->"+domutils.getInnerHtml(t)+"<!-- /ko -->";i=d(l),domutils.removeAttribute(t,"data-ko-wrap"),n=d(t),domutils.replaceHtml(t,"<!-- ko template: /* special */ (typeof templateMode != 'undefined' && templateMode == 'wysiwyg') || "+a+" ? '"+n+"' : '"+i+"' --><!-- /ko -->")}else i=d(domutils.getInnerHtml(t)),domutils.removeAttribute(t,"data-ko-wrap"),domutils.setContent(t,"<!-- ko template: '"+i+"' --><!-- /ko -->"),n=d(t),domutils.replaceHtml(t,"<!-- ko template: (typeof templateMode != 'undefined' && templateMode == 'wysiwyg') || "+a+" ? '"+n+"' : '"+i+"' --><!-- /ko -->")}),d(e,c,"show"),i(r,c,a,l),c}catch(k){throw console.error("Exception while parsing the template",k,e),k}},translateTemplate=function(e,t,o,i){var n={},a=conditional_replace(t.replace(/(<[^>]+\s)(style|http-equiv)(="[^"]*"[^>]*>)/gi,function(e,t,o,i){return t+"replaced"+o+i})),r=$(a),l=r[0],s=[],d=function(e,t,o,i){s.push({root:e,block:t,context:o,container:i})},c=function(e,t,o){if("undefined"==typeof n.themes&&(n.themes={}),"undefined"==typeof n.themes[e]&&(n.themes[e]={}),"undefined"==typeof n.themes[e][t]||null===n.themes[e][t])n.themes[e][t]=o;else if("undefined"!=typeof o&&null!==o){var i=n.themes[e][t];i!=o&&console.log("Error setting a new default for property "+t+" in theme "+e+". old:"+i+" new:"+o+"!")}},u=$("[data-ko-container]",r),f={};u.each(function(e,t){var o=domutils.getAttribute(t,"data-ko-container")+"Blocks";domutils.removeAttribute(t,"data-ko-container"),domutils.setAttribute(t,"data-bind","block: "+o);var i=$("> [data-ko-block]",t);domutils.removeElements(i,!0),f[o]=i}),modelDef.createOrUpdateBlockDef(n,"id"),modelDef.createOrUpdateBlockDef(n,"bodyTheme"),modelDef.createOrUpdateBlockDef(n,"blocks","blocks[]"),modelDef.createOrUpdateBlockDef(n,"text"),processBlock(l,n,c,d,o,"template",e,void 0,!1,i);var p=function(t,a,r){processBlock(r,n,c,d,o,"block",e,t,!0,i)};for(var m in f)if(f.hasOwnProperty(m)){var g=f[m],b=m;modelDef.ensurePathAndGetBindValue(n,c,e,e,"",b+".blocks","[]"),g.each(p.bind(void 0,b))}var h={_defs:n,templateName:e,_blocks:s};return"undefined"!=typeof n[e]._version&&(h.version=n[e]._version),h};module.exports=translateTemplate;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1,"./declarations.js":50,"./domutils.js":51,"./model.js":54,"./stylesheet.js":56,"./utils.js":57}],56:[function(require,module,exports){
"use strict";var cssParse=require("./../../../bower_components/mensch/lib/parser.js"),console=require("./../../../bower_components/console-browserify/index.js"),converterUtils=require("./utils.js"),elaborateDeclarations=require("./declarations.js"),_processStyleSheetRules_processBlockDef=function(e,t){for(var o,n,i,a=0;a<t.length;a++)if("rule"==t[a].type){for(var r=t[a].selectors,l=!1,s=!1,d=0;d<r.length;d++)r[d].match(/:preview$/)?s=!0:l=!0;if(s&&l)throw console.log("cannot mix selectors type (:preview and declarations) in @supports -ko-blockdefs ",r),"Cannot mix selectors type (:preview and declarations) in @supports -ko-blockdefs";if(!s&&!l)throw console.log("cannot find known selectors in @supports -ko-blockdefs ",r),"Cannot find known selectors in @supports -ko-blockdefs";if(l){o="",n={},i=t[a].declarations;for(var c=0;c<i.length;c++)"property"==i[c].type&&("label"==i[c].name?n.name=i[c].value:"context"==i[c].name?n.contextName=i[c].value:"properties"==i[c].name?o=i[c].value:"theme"==i[c].name?n.globalStyle="_theme_."+i[c].value:"themeOverride"==i[c].name?n.themeOverride="true"==String(i[c].value).toLowerCase():n[i[c].name]=i[c].value);for(var u=0;u<r.length;u++)e(r[u],o,n)}if(s)for(var f=0;f<r.length;f++){var p=r[f].substr(0,r[f].indexOf(":")),m=t[a].declarations;e(p,void 0,{previewBindings:m})}}},processStylesheetRules=function(e,t,o,n,i,a,r,l){var s=e,d=null;if("undefined"==typeof t){var c=cssParse(e,{comments:!0,position:!0});if("stylesheet"!=c.type||"undefined"==typeof c.stylesheet)throw console.log("unable to process styleSheet",c),"Unable to parse stylesheet";t=c.stylesheet.rules}for(var u,f=t.length-1;f>=0;f--){if("supports"==t[f].type&&"-ko-blockdefs"==t[f].name)_processStyleSheetRules_processBlockDef(n,t[f].rules),s=converterUtils.removeStyle(s,t[f].position.start,d,0,0,0,"");else if("media"==t[f].type||"supports"==t[f].type)s=processStylesheetRules(s,t[f].rules,o,n,i,a,r,l);else if("comment"==t[f].type);else if("rule"==t[f].type){for(var p=t[f].selectors,m="",g=null,b=0;b<p.length;b++){m.length>0&&(m+=", ");var h=p[b].match(/\[data-ko-block=([^ ]*)\]/);if(null!==h){if(null!==g&&g!=h[1])throw"Found multiple block-match attribute selectors: cannot translate it ("+g+" vs "+h[1]+")";g=h[1]}m+="<!-- ko text: templateMode =='wysiwyg' ? '#main-wysiwyg-area ' : '' --><!-- /ko -->"+p[b]}if(g){var v="<!-- ko foreach: $root.findObjectsOfType($data, '"+g+"') -->",y="<!-- /ko -->",k=d,w=" ";t[f].declarations.length>0&&(t[f].declarations[0].position.start.line!=t[f].position.end.line&&(w="\n"+new Array(t[f].position.start.col).join(" ")),k=t[f].declarations[t[f].declarations.length-1].position.end),null===k?s+=w+y:s=k==d?converterUtils.removeStyle(s,k,d,0,0,0,w+y):converterUtils.removeStyle(s,k,d,0,0,0,w+"}"+w+y),m=v+w+m.replace(new RegExp("\\[data-ko-block="+g+"\\]","g"),"<!-- ko text: '#'+id() -->"+g+"<!-- /ko -->"),n(g,"",{contextName:"block"})}var x=g?g:l;u=o.bind(this,x,"");var _=elaborateDeclarations(s,t[f].declarations,a,u);null!==_&&(s=_),s=converterUtils.removeStyle(s,t[f].position.start,t[f].position.end,0,0,0,m)}else console.log("Unknown rule type",t[f].type,"while parsing <style> rules");d=t[f].position.start}return s};module.exports=processStylesheetRules;

},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/mensch/lib/parser.js":15,"./declarations.js":50,"./utils.js":57}],57:[function(require,module,exports){
"use strict";var console=require("./../../../bower_components/console-browserify/index.js"),jsep=require("./../../../bower_components/jsep/src/jsep.js");jsep.addBinaryOp("or",1),jsep.addBinaryOp("and",2),jsep.addBinaryOp("eq",6),jsep.addBinaryOp("neq",6),jsep.addBinaryOp("lt",7),jsep.addBinaryOp("lte",7),jsep.addBinaryOp("gt",7),jsep.addBinaryOp("gte",7);var addSlashes=function(e){return e.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},removeStyle=function(e,t,o,n,i,a,r){for(var l=e.split("\n"),s=i,d=a,c=1+n;c<t.line;c++)s+=l[c-1-n].length+1;if(s+=t.col,null!==o){for(var u=1+n;u<o.line;u++)d+=l[u-1-n].length+1;d+=o.col}else d+=e.length+1;var f=e.substr(0,s-1)+r+e.substr(d-1);return f},expressionGenerator=function(e,t,o){function n(e){switch(e){case"or":return"||";case"and":return"&&";case"lt":return"<";case"lte":return"<=";case"gt":return">";case"gte":return">=";case"eq":return"==";case"neq":return"!=";default:return e}}function i(e,t,o,a){if("undefined"==typeof o&&(o=!0),"undefined"!=typeof a&&"Identifier"!==e.type&&"MemberExpression"!==e.type&&console.log("Cannot apply default value to variable when using expressions"),"BinaryExpression"===e.type||"LogicalExpression"===e.type)return"("+i(e.left,t,o)+" "+n(e.operator)+" "+i(e.right,t,o)+")";if("CallExpression"===e.type){var r=e.arguments.map(function(e){return i(e,t,o)});return i(e.callee,t,o)+"("+r.join(", ")+")"}if("UnaryExpression"===e.type)return e.operator+i(e.argument,t,o);if("MemberExpression"==e.type&&e.computed)throw"Unexpected computed member expression";if("MemberExpression"!=e.type||e.computed){if("Literal"===e.type)return e.raw;if("Identifier"===e.type){var l=e.name;return o?t(l,a)+"()":l}if("ConditionalExpression"===e.type)return"("+i(e.test,t,o)+" ? "+i(e.consequent,t,o)+" : "+i(e.alternate,t,o)+")";throw"Compound"===e.type?"Syntax error in expression: operator expected after "+i(e.body[0],t,!1):"Found an unsupported expression type: "+e.type}var s=i(e.object,t,!1)+"."+i(e.property,t,!1);return o&&"Math"!==e.object.name&&"Color"!==e.object.name&&"Util"!==e.object.name?t(s,a)+"()":s}return i(e,t,void 0,o)},expressionBinding=function(e,t,o){var n;if("undefined"!=typeof o&&null!==o){var i=e.trim().replace(/@\[([^\]]+)\]|@([a-zA-Z0-9\._]+)\b/g,"###var###");if(i=i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"###var###"==i)n=[null,o];else if(i="^"+i.replace(/###var###/g,"(.+)")+"$",n=o.trim().match(new RegExp(i)),!n)throw console.log("Cannot find matches",n,"for",o,e,i,e),"Cannot find default value for "+e+" in "+o}try{var a=0,r="'"+e.replace(/@\[([^\]]+)\]|@([a-zA-Z0-9\._]+)\b|(')/g,function(e,o,i,r){if(r)return"\\"+r;a++;var l,s=o||i;if(n&&("undefined"!=typeof n[a]?l=n[a].trim():console.log("ABZZZ Cannot find default value for",s,"in",n,"as",a)),o){var d=jsep(o),c=expressionGenerator(d,t,l);return"'+"+c+"+'"}return"'+"+t(s,l)+"()+'"})+"'";return r=r.replace(/(^|[^\\])''\+/g,"$1").replace(/\+''/g,""),0===a&&"false"!==r&&"true"!==r&&console.error("Unexpected expression with no valid @variable references",e),r}catch(l){throw"Exception parsing expression "+e+" "+l}},conditionBinding=function(e,t){var o=jsep(e),n=expressionGenerator(o,t);return n};module.exports={addSlashes:addSlashes,removeStyle:removeStyle,conditionBinding:conditionBinding,expressionBinding:expressionBinding};

},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/jsep/src/jsep.js":3}],58:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),kowrap=require("./../../../bower_components/knockout.wrap/knockout.wrap.js"),console=require("./../../../bower_components/console-browserify/index.js"),_getOptionsObject=function(e){for(var t=e.split("|"),o={},i=0;i<t.length;i++){var a=t[i].split("=");o[a[0]]=a.length>1?a[1]:a[0]}return o},_makeComputed=function(e,t,o,i,a,n){var r=ko.computed({read:function(){var o=e();if(null===o){var r=ko.utils.unwrapObservable(i);return"undefined"==typeof r||"custom"==r?ko.utils.unwrapObservable(t):n[r][a]}return o},write:function(r){var l,s=ko.utils.unwrapObservable(i);if(l="undefined"==typeof s||"custom"==s?ko.utils.peekObservable(t):n[s][a],o)r==l?e(null):e(r);else{var d=ko.utils.peekObservable(e);(r!=l||null!==d)&&e(r)}}});return r},_nextVariantFunction=function(e,t,o){for(var i,a=e.utils.unwrapObservable(t),n=0;n<o.length&&(i=e.utils.peekObservable(o[n]),i!=a);n++);n==o.length&&(console.warn("Didn't find a variant!",t,a,o),n=o.length-1);var r=n+1;r==o.length&&(r=0);var l=e.utils.peekObservable(o[r]);t(l)},_getVariants=function(e){var t,o=e._variant;if("object"!=typeof e[o]||"undefined"==typeof e[o]._widget||"string"!=typeof e[o]._options&&"boolean"!==e[o]._widget)throw console.error("Unexpected variant declaration",o,e[o]),"Unexpected variant declaration: cannot find property "+o+" or its _options string and it is not a boolean";return t="string"==typeof e[o]._options?Object.keys(_getOptionsObject(e[o]._options)):[!0,!1]},_makeComputedFunction=function(e,t,o,i,a,n,r){if("undefined"==typeof e){if("undefined"==typeof i.utils.unwrapObservable(r).type)throw console.log("TODO ERROR Found a non-typed def ",e,r),"Found a non-typed def "+e;var l=i.utils.unwrapObservable(i.utils.unwrapObservable(r).type);e=t[l],"object"!=typeof e&&console.log("TODO ERROR Found a non-object def ",e,"for",l)}"undefined"==typeof a&&"undefined"!=typeof n&&n&&(a=r);var s="$root.content().",d=e._globalStyles;if("undefined"!=typeof d)for(var c in d)if(d.hasOwnProperty(c)){var u,p,f,m="$root.content().theme().scheme";if(d[c].substr(0,s.length)!=s)throw"UNEXPECTED globalStyle path ("+d[c]+") outside selfPath ("+s+")";f=d[c].substr(s.length),p=a,m.substr(0,s.length)==s?u=m.substr(s.length):(console.log("IS THIS CORRECT?",m,s),u=m);for(var g=p,b=f.split("()."),h="",v=!0,y=0;y<b.length;y++)p=i.utils.unwrapObservable(p)[b[y]],v?"theme"==b[y]&&(v=!1):(h.length>0&&(h+="."),h+=b[y]);for(var k=u.split("()."),w=0;w<k.length;w++)g=i.utils.unwrapObservable(g)[k[w]];for(var x=!0,$=c.split("."),_=r,C=0;C<$.length;C++)_=i.utils.unwrapObservable(_)[$[C]];if(!i.isObservable(_))throw"Unexpected non observable target "+c+"/"+h;_._defaultComputed=_makeComputed(_,p,x,g,h,o)}if("undefined"!=typeof e._variant){for(var S=e._variant.split("."),O=r,T=i.utils.unwrapObservable(r),I=0;I<S.length;I++)O=i.utils.unwrapObservable(O)[S[I]];if("undefined"!=typeof O._defaultComputed&&(console.log("Found variant on a style property: beware variants should be only used on content properties because they don't match the theme fallback behaviour",e._variant),O=O._defaultComputed),"undefined"==typeof O)throw console.log("ERROR looking for variant target",e._variant,r),"ERROR looking for variant target "+e._variant;T._nextVariant=_nextVariantFunction.bind(O,i,O,_getVariants(e))}for(var E in e)if(e.hasOwnProperty(E)){var H=e[E];if("object"==typeof H&&null!==H&&"undefined"!=typeof H._context&&"block"==H._context){var P=a[E](),M=_makeComputedFunction(t[E],t,o,i,a,n,P);r[E](M)}else if("object"==typeof H&&null!==H&&"blocks"==H.type){for(var A,q,D,B=a[E](),j=B.blocks(),F=0;F<j.length;F++)A=i.utils.unwrapObservable(j[F]),q=i.utils.unwrapObservable(A.type),D=_makeComputedFunction(t[q],t,o,i,a,n,A),j[F](D);var N=B.blocks;_augmentBlocksObservable(N,_blockInstrumentFunction.bind(B,void 0,t,o,i,void 0,a,n)),a[E]._wrap=_makeBlocksWrap.bind(a[E],N._instrumentBlock),a[E]._unwrap=_unwrap.bind(a[E])}}return r},_augmentBlocksObservable=function(e,t){e._instrumentBlock=t,"undefined"==typeof e.origPush&&(e.origPush=e.push,e.push=_makePush.bind(e),e.origSplice=e.splice,e.splice=_makeSplice.bind(e))},_makeBlocksWrap=function(e,t){var o=ko.toJS(t),i=o.blocks;o.blocks=[];var a=kowrap.fromJS(o,void 0,!0)();_augmentBlocksObservable(a.blocks,e);for(var n=0;n<i.length;n++){var r=ko.toJS(i[n]);r.id="block_"+n,a.blocks.push(r)}this(a)},_makePush=function(){if(arguments.length>1)throw"Array push with multiple arguments not implemented";if(arguments.length>0&&ko.isObservable(arguments[0])&&("function"==typeof arguments[0]._unwrap?arguments[0]=arguments[0]._unwrap():console.log("WARN: pushing observable with no _unwrap function (TODO remove me, expected condition)")),ko.isObservable(arguments[0]))return this.origPush.apply(this,arguments);var e=this._instrumentBlock(arguments[0]);return this.origPush.apply(this,[e])},_makeSplice=function(){if(arguments.length>3)throw"Array splice with multiple objects not implemented";if(arguments.length>2&&ko.isObservable(arguments[2])&&("function"==typeof arguments[2]._unwrap?arguments[2]=arguments[2]._unwrap():console.log("WARN: splicing observable with no _unwrap function (TODO remove me, expected condition)")),arguments.length>2&&!ko.isObservable(arguments[2])){var e=this._instrumentBlock(arguments[2]);return this.origSplice.apply(this,[arguments[0],arguments[1],e])}return this.origSplice.apply(this,arguments)},_blockInstrumentFunction=function(e,t,o,i,a,n,r,l){"undefined"==typeof a&&(a=l);var s;s={"":_makeComputedFunction.bind(a,e,t,o,i,n,r)};var d=kowrap.fromJS(a,s,!0);return d._unwrap=_unwrap.bind(d),d},_wrap=function(e,t){var o=ko.utils.unwrapObservable(e(ko,t,void 0,!0));this(o)},_unwrap=function(){return ko.toJS(this)},_modelInstrument=function(e,t,o){var i=_blockInstrumentFunction.bind(void 0,t,o,o.themes),a=i(ko,e,void 0,!0);return a._wrap=_wrap.bind(a,i),a._unwrap=_unwrap.bind(a),a};module.exports=_modelInstrument;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/knockout.wrap/knockout.wrap.js":10}],59:[function(require,module,exports){
function renderView(){var e='<div class="r-sidebar-toggle"><i class="fa fa-spin fa-gear"></i></div>';$(window).width()<980?($(".collapse-sidebar").prependTo("body"),$(".l-sidebar").css("width","0"),$("body").addClass("mobile-view"),$(".r-sidebar").not(".r-sidebar-placeholder").prepend(e)):($(".collapse-sidebar").prependTo(".header > .col:first-child"),$("body").removeClass("mobile-view"),$(".r-sidebar").find(".r-sidebar-toggle").remove())}function deleteCheckedButton(){$(".remove-checkboxes .remove-checkbox-placeholder").is(":checked")?$(".delete-checked").show():$(".delete-checked").hide()}function toggleAllCheckboxesStatus(){var e=$(".remove-checkboxes .remove-checkbox-placeholder").length,t=$(".remove-checkboxes .remove-checkbox-placeholder:checked").length,o=$(".all-remove-checkboxes");0==t?(o.prop("checked",!1),o.css("opacity","1")):t>0&&e>t?(o.prop("checked",!0),o.css("opacity","0.5")):t>=e&&(o.prop("checked",!0),o.css("opacity","1"))}function resizeTemplates(){var e=$(".m-content").width();715>e?$(".template, .template-placeholder").css({width:"100%","min-width":"0"}):900>e?$(".template, .template-placeholder").css({width:"calc(33.3% - 15px)","min-width":"230px"}):1180>e?$(".template, .template-placeholder").css("width","calc(25% - 15px)"):1414>e?$(".template, .template-placeholder").css("width","calc(20% - 15px)"):e>1414&&$(".template, .template-placeholder").css("width","calc(16.6% - 15px)")}function tableScrollable(){$(".table-responsive").each(function(){$(this).width()>$(".m-content .content").width()?$(this).addClass("table-scrollable"):$(this).removeClass("table-scrollable")})}function grayoutColumn(){$.each($("table thead .grayed-out"),function(){var e=$(this),t=$(this).index(),o=e.closest("table");o.find("tbody tr").each(function(){$(this).children(":eq("+t+")").addClass("grayed-out-content")})})}function emailValidation(e){$("#"+e).addClass("is-invalid"),isInvalid.length||($("#"+e).siblings("h5.form-text").remove(),emailError.insertAfter($("#"+e)))}function regularValidation(e){""==$("#"+e+".required").val()?$("#"+e).addClass("is-invalid"):$("#"+e).removeClass("is-invalid")}function validateForm(e,t){var o=!1;return e.find(".required").each(function(){return!$(this).val()||$(this).hasClass("is-invalid")?(t.prop("disabled",!0),o=!0,!1):void 0}),o?(t.prop("disabled",!0),!1):(t.prop("disabled",!1),void 0)}function validateCampaignForm(){return $("#campaignName").hasClass("is-invalid")||$("#campaignSubject").hasClass("is-invalid")||!$("#fromEmail").hasClass("is-valid")||$("#fromName").hasClass("is-invalid")||!$("#replyToEmail").hasClass("is-valid")?($("#send-campaign").prop("disabled",!0),!1):($("#send-campaign").prop("disabled",!1),void 0)}function validateSimpleCampaignForm(){$("#fromName").hasClass("is-invalid")||$("#campaignSubject").hasClass("is-invalid")||!$("#fromEmail").hasClass("is-valid")?$("#send-simple-campaign").prop("disabled",!0):$("#send-simple-campaign").prop("disabled",!1)}function validateTemplateForm(){return $("#templateName").hasClass("is-invalid")||$("#templateDesc").hasClass("is-invalid")||""==$("#templateName").val()||""==$("#templateDesc").val()?($("#save-template-confirm").prop("disabled",!0),!1):($("#save-template-confirm").prop("disabled",!1),void 0)}function clearInputs(e){$("form#"+e+" input").val(""),$("form#"+e+" input").removeClass("is-valid"),$("form#"+e+" input").removeClass("is-invalid"),$("form#"+e+" input").prop("readonly",!1),$("form#"+e+" input").siblings("h5.form-text").remove()}var verifyEmail=$("<h5 class='form-text warning-feedback'>Since replies to your campaign will go to this email address, let's verify <a id='verify-email'><u>this email</u></a></h5>"),verifySuccess=$("<h5 class='form-text valid-feedback'>An email has been sent to this email address.<br> Please check your inbox and confirm the 'From Email' of your campaign.</h5>"),emailError=$("<h5 class='form-text invalid-feedback'>Please enter a valid email address</a></h5>"),email_regex=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i,isInvalid=$(this).siblings(".invalid-feedback").length,isValid=$(this).siblings(".valid-feedback").length,isWarning=$(this).siblings(".warning-feedback").length,DMARC=!1;$(window).resize(function(){renderView(),setTimeout(function(){tableScrollable(),resizeTemplates()},300)}),$(document).ready(function(){$(".m-content").scroll(function(){var e=$(this).scrollTop();$("#main-toolbox").length&&e>=75&&$("#edit-area").on("mouseenter",function(){$(this).addClass("hovered"),$("#main-toolbox").addClass("visible")})}),grayoutColumn(),renderView(),setTimeout(function(){tableScrollable(),resizeTemplates()},300),"true"!==document.cookie.replace(/(?:(?:^|.*;\s*)sidebarCollapsed\s*\=\s*([^;]*).*$)|^.*$/,"$1")&&$(".l-sidebar").addClass("collapsed"),setTimeout(resizeTemplates,180),$("body").hasClass("mobile-view")&&$('.l-sidebar .nav-item > .nav-link:not([data-toggle="collapse"]), .l-sidebar .nav-link-inner > a').on("click",function(){$(".l-sidebar").addClass("collapsed"),document.cookie="sidebarCollapsed=false; expires=Fri, 31 Dec 9999 23:59:59 GMT"}),$(".collapse-sidebar").on("click",function(){document.cookie=$(".l-sidebar").hasClass("collapsed")?"sidebarCollapsed=true; expires=Fri, 31 Dec 9999 23:59:59 GMT":"sidebarCollapsed=false; expires=Fri, 31 Dec 9999 23:59:59 GMT",$(".l-sidebar").toggleClass("collapsed"),setTimeout(resizeTemplates,210)}),$(document).on("click",".r-sidebar-toggle",function(){$(".r-sidebar").toggleClass("visible")}),$(".nav-link-inner").hasClass("active")&&$(".nav-link-inner.active").parents(".collapse").addClass("show"),$(".nav-link").hasClass("active")&&$(".nav-link.active").parents(".collapse").addClass("show"),$(".nav-user-settings").on("click",function(){$("#settings-modal").modal("toggle"),$("#settings-modal .nav-item a").trigger("click")}),$("#add-sub-user").on("click",function(){$("#add-sub-user-table").show(),$("#sub-users-table").hide()}),$('#add-sub-user-table button[type="reset"]').on("click",function(){$("#add-sub-user-table").hide(),$("#sub-users-table").show()}),$("#edit-area").on("click","*",function(){$("#main-toolbox").addClass("visible")}),$(".r-sidebar .checkbox-dependency").on("click",function(e){"INPUT"==e.target.tagName&&(1==$(this).children(".form-check-input").prop("checked")?($(this).closest(".checkbox-dependency-container").find(".collapse").addClass("show"),$(this).closest(".checkbox-dependency-container").find(".caret-dropdown").addClass("show-dropdown")):($(this).closest(".checkbox-dependency-container").find(".collapse").removeClass("show"),$(this).closest(".checkbox-dependency-container").find(".caret-dropdown").removeClass("show-dropdown")))}),$(".r-sidebar .checkbox-dependency-container .caret-dropdown").on("click",function(){$(this).closest(".checkbox-dependency-container").find(".collapse").toggleClass("show"),$(this).hasClass("show-dropdown")?$(this).removeClass("show-dropdown"):$(this).addClass("show-dropdown")}),$("#previewFrameToggle").on("click",function(){$(this).hasClass("active")||($("#preview-frame").contents().find("html").css("background-color","#fff"),$("#preview-frame").height(1e3),$("#preview-frame").css("max-height","635px"),$("#preview-toolbar").on("click",function(){$("#frame-container").hasClass("desktop")?$("#preview-frame").css("max-height","635px"):$("#frame-container").hasClass("tablet")?$("#preview-frame").css("max-height","555px"):$("#frame-container").hasClass("mobile")&&$("#preview-frame").css("max-height","465px")}))}),$("#file-explorer").on("click",".remove-checkbox",function(){$(this).next().trigger("click"),toggleAllCheckboxesStatus(),deleteCheckedButton()}),$("#file-explorer").on("focus","input:checkbox",function(){$(this).blur()}),$(".all-remove-checkboxes").on("click",function(){$(".remove-checkboxes .remove-checkbox-placeholder").is(":checked")?($(".remove-checkboxes .remove-checkbox-placeholder").prop("checked",!0),$(".remove-checkboxes .remove-checkbox").trigger("click"),toggleAllCheckboxesStatus(),deleteCheckedButton()):($(".remove-checkboxes .remove-checkbox-placeholder").prop("checked",!1),$(".remove-checkboxes .remove-checkbox").trigger("click"),toggleAllCheckboxesStatus(),deleteCheckedButton())}),$('button[type="reset"]').on("click",function(){clearInputs($(this).closest("form").prop("id"))}),$("form#advanced-campaign-form input").on("keyup blur",function(){regularValidation($(this).prop("id")),validateCampaignForm()}),$("form#simple-campaign-form input").on("keyup blur",function(){regularValidation($(this).prop("id")),validateSimpleCampaignForm()}),$("form#save-template-form input").on("keyup blur",function(){regularValidation($(this).prop("id")),validateTemplateForm()}),$("form#settings-form input").on("keyup blur",function(){regularValidation($(this).prop("id")),validateForm($("form#settings-form"),$("#settings-form-save"))}),$("form#first-login-address-form input").on("keyup blur",function(){regularValidation($(this).prop("id")),validateForm($("form#first-login-address-form"),$("#first-login-address-form-save"))}),$("#save-template-cancel").on("click",function(){clearInputs("save-template-form")}),$("#clear-inputs").on("click",function(){clearInputs("advanced-campaign-form"),validateCampaignForm(),$("html,body").animate({scrollTop:0},"slow")}),$("#replyToEmail").on("keyup blur click",function(){email_regex.test($(this).val())?($(this).removeClass("is-invalid"),$(this).addClass("is-valid"),$(this).siblings("h5.form-text").remove()):(emailValidation($(this).prop("id")),$(this).removeClass("is-valid"),$(this).addClass("is-invalid"))}),$("#fromEmail").on("keyup blur click",function(){if(email_regex.test($(this).val())){if($(this).removeClass("is-invalid"),!isWarning&&isValid)return!1;isWarning||($(this).siblings("h5.form-text").remove(),verifyEmail.insertAfter(this)),$("#verify-email").on("click",function(){$(this).parent().siblings("#fromEmail").prop("readonly",!0),$(this).parent().siblings("#fromEmail").addClass("is-valid"),$(this).parent().siblings("small.form-text").remove(),verifyEmail.replaceWith(verifySuccess),$("form#simple-campaign-form").length?validateSimpleCampaignForm():$("form#advanced-campaign-form").length&&validateCampaignForm()})}else emailValidation($(this).prop("id"))}),$("#fromEmail").on("blur",function(){0==DMARC&&$(this).val().indexOf(".com")>-1&&($("#DMARC-modal").modal("show"),DMARC=!0)})}),$(document).keydown(function(e){var t=$(".exp-item.key-selected");$(e.target).is("input, textarea, .modal")||(40!=e.keyCode||t.is(":last-child")?38!=e.keyCode||t.is(":first-child")?13==e.keyCode?t.find(".media-items-block div:first-child").trigger("click"):8==e.keyCode?$(".parent-folder").trigger("click"):46==e.keyCode?t.find(".delete-item").trigger("click"):32==e.keyCode&&(t.find(".remove-checkbox").trigger("click"),1==t.find(".remove-checkbox").next().prop("checked")?t.find(".remove-checkbox").next().prop("checked",!0):t.find(".remove-checkbox").next().prop("checked",!1),toggleAllCheckboxesStatus(),deleteCheckedButton()):(e.preventDefault(),t.length||$(".exp-item-container").find(".exp-item:first-child").addClass("key-selected"),t.removeClass("key-selected"),t.prev().addClass("key-selected")):(e.preventDefault(),t.removeClass("key-selected"),t.next().addClass("key-selected"),t.length||$(".exp-item-container").find(".exp-item:first-child").addClass("key-selected")))});

},{}],60:[function(require,module,exports){
(function (global){
var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../bower_components/console-browserify/index.js");$(document).ready(function(){function e(){function e(e){n.saveOrCancelAllEdits();var o=new t(n,e);o.folderId=n.folderId(),o.date(p),o.value(0),o.isActive(!0),n.items.unshift(o)}function o(e){var t,o;if(e.id()){for(t=0;t<n.path().length;t++)if(n.path()[t].id()==e.id()){o=t+1;break}}else o=1;if(o)for(t=o;t<n.path().length;t++)n.path.pop();else n.path.push(e)}function r(){var e=(n.searchQuery()||"").toLowerCase(),t=n.folderId()||"";n.items.removeAll();for(var o=0;o<n.allItems().length;o++){var a=n.allItems()[o],i=a.folderId||"";t==i&&(e&&a.title().toLowerCase().indexOf(e)<0||n.items.push(a))}n.items().length>0&&n.items.sort(d)}function d(e,t){var o=n.sortColumn(),i=n.sortDirection()==a.ascending,l="Title"==o||e.isFolder==e.title().toLowerCase(),r="Title"==o||t.isFolder==t.title().toLowerCase();return e.isFolder!=t.isFolder?e.isFolder?-1==i:1==i:l==r?0:r>l?-1==i:1==i}var n=this;n.allItems=ko.observableArray(),n.items=ko.observableArray(),n.path=ko.observableArray(),n.searchQuery=ko.observable(""),n.sortColumn=ko.observable(l),n.sortDirection=ko.observable(i),n.folderId=ko.observable(""),n.date=ko.observable("");var s=new Date,c=s.getMonth()+1,m=s.getDate(),p=s.getFullYear()+"/"+((""+c).length<2?"0":"")+c+"/"+((""+m).length<2?"0":"")+m;n.addNewFolder=function(){e(!0)},n.addNewFile=function(){e(!1)},n.searchItems=function(){n.saveOrCancelAllEdits(),r()},n.sortItems=function(e){n.saveOrCancelAllEdits();var t=n.sortColumn(),o=n.sortDirection()==a.descending;t==e?n.sortDirection(o?a.ascending:a.descending):n.sortDirection(a.ascending),n.sortColumn(e),r()},n.changeFolder=function(e){n.saveOrCancelAllEdits(),n.folderId(e);var t,a;for(t=0;t<n.allItems().length;t++)if(n.allItems()[t].id()==e){a=n.allItems()[t];break}o(a||n.path()[0]),n.sortDirection(i),n.sortColumn(l),n.searchQuery(""),r()},n.openParentFolder=function(){n.saveOrCancelAllEdits();for(var e="",t=n.folderId(),o=0;o<n.allItems().length;o++)if(n.allItems()[o].id()==t){e=n.allItems()[o].folderId;break}n.changeFolder(e)},n.isSortedAscending=function(e){return e==n.sortColumn()&&n.sortDirection()==a.ascending},n.isSortedDescending=function(e){return e==n.sortColumn()&&n.sortDirection()==a.descending},n.isRootFolder=ko.computed(function(){return!n.folderId()}),n.getNewId=function(){for(var e=0,t=0;t<n.allItems().length;t++)n.allItems()[t].id()>e&&(e=n.allItems()[t].id());return e+1},n.saveOrCancelAllEdits=function(){for(var e=0;e<n.items().length;e++){var t=n.items()[e];t.isActive()&&t.saveOrCancelEdit()}},n.initialize=function(){n.path.removeAll();var e=new t(n,!0);e.title(""),n.path.push(e),n.folderId(""),r()}}function t(e,t,o,a,i,l,d){var n=this;n.id=ko.observable(),n.extension=ko.observable(),n.isActive=ko.observable(!1),n.title=ko.observable().extend({required:!0}),n.date=ko.observable().extend({required:!0}),n.value=ko.observable().extend({required:!1}),n.parent=e,n.folderId="",n.isFolder=t,n.oldTitle=null,n.title.subscribe(function(){n.isActive()||(n.oldTitle=n.title())});var s=new Date,c=s.getMonth()+1,m=s.getDate(),p=s.getFullYear()+"/"+((""+c).length<2?"0":"")+c+"/"+((""+m).length<2?"0":"")+m;n.rowClassNames=ko.computed(function(){var e;return n.isFolder?(e="exp-item folder-box",n.isActive()&&(e+=" folder-box-active")):(e="exp-item file-box",n.isActive()&&(e+=" file-box-active")),e}),n.iconClassNames=ko.computed(function(){var e;return e=n.isFolder?"system-folder":"system-file"}),n.saveItem=function(){n.title.hasError()||(n.id()||(n.parent.allItems.push(n),n.id(n.parent.getNewId())),n.isActive(!1),n.date(p),n.oldTitle=n.title())},n.deleteItem=function(e){n.parent.saveOrCancelAllEdits();var t=this;$("#delete-exp-modal").modal("show").focus(),$("#delete-exp-modal").on("keyup",function(e){13==e.keyCode&&$(".delete-exp-items").trigger("click")}),$("#delete-exp-modal .delete-exp-items").on("click",function(){e.items.remove(t),e.allItems.remove(t),$("#delete-exp-modal").modal("hide")})},n.checkItem=function(e){for(var t=e.allItems().indexOf(this),o=e.allItems()[t].id(),a=r.filter(function(e){return e!==o}),i=0;i<e.allItems().length;i++)e.allItems()[i].id()==o&&(r.indexOf(o)<0?r.push(o):r=a)},deleteChecked=function(e){$("#delete-exp-modal").modal("show"),$("#delete-exp-modal .delete-exp-items").on("click",function(){for(var t=0;t<r.length;t++)for(var o=0;o<e.allItems().length;o++)if(e.allItems()[o].id()==r[t]){var a=e.allItems()[o];e.items.remove(a),e.allItems.remove(a)}$("#delete-exp-modal").modal("toggle")})},n.editItem=function(){n.parent.saveOrCancelAllEdits(),n.isActive(!0)},n.openItem=function(){n.isFolder&&n.parent.changeFolder(n.id())},n.cancelEditItem=function(){n.id()?(n.title(n.oldTitle),n.isActive(!1)):n.parent.items.remove(n)},n.saveOrCancelEdit=function(){n.isActive()&&(n.title.hasError()?n.cancelEditItem():n.saveItem())},n.id(o).title(a).date(i).value(l),n.folderId=d}function o(o){var a=document.getElementById("file-explorer-content"),i=new e;if(o.Folders)for(var l=0;l<o.Folders.length;l++){var r=o.Folders[l],d=new t(i,!0,r.Id,r.Title,r.Date,r.Value,r.ParentId);i.allItems.push(d)}if(o.Files)for(var n=0;n<o.Files.length;n++){var s=o.Files[n],c=new t(i,!1,s.Id,s.Title,s.Date,s.Value,s.FolderId);i.allItems.push(c)}o.GridOptions&&(i.searchQuery(o.GridOptions.SearchQuery),i.sortColumn(o.GridOptions.Column),i.sortDirection(o.GridOptions.Direction)),i.initialize(),ko.applyBindings(i,a)}ko.bindingHandlers.anyKeyPress={init:function(e,t,o,a){var i=o();e.addEventListener("keyup",function(){return i.anyKeyPress.call(a),!1})}},ko.bindingHandlers.enterPress={init:function(e,t,o,a){var i=o();e.addEventListener("keydown",function(e){var t=e.which?e.which:e.keyCode;return 13===t?(i.enterPress.call(a),!1):!0})}},ko.bindingHandlers.escPress={init:function(e,t,o,a){var i=o();e.addEventListener("keydown",function(e){var t=e.which?e.which:e.keyCode;return 27===t?(i.escPress.call(a),!1):!0})}},ko.extenders.required=function(e){function t(t){e.hasError(t?!1:!0)}return e.hasError=ko.observable(),t(e()),e.subscribe(t),e};var a={ascending:1,descending:2},i=a.ascending,l="Title",r=[];"object"==typeof expData&&o(expData)});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../bower_components/console-browserify/index.js":1}],61:[function(require,module,exports){
(function (global){
function Color(e){this.getBrightness=function(t){return e(t).getBrightness()},this.isLight=function(t){return e(t).isLight()},this.isDark=function(t){return e(t).isDark()},this.getLuminance=function(t){return e(t).getLuminance()},this.lighten=function(t,o){return e(t).lighten(o).toHexString()},this.brighten=function(t,o){return e(t).brighten(o).toHexString()},this.darken=function(t,o){return e(t).darken(o).toHexString()},this.desaturate=function(t,o){return e(t).desaturate(o).toHexString()},this.saturate=function(t,o){return e(t).saturate(o).toHexString()},this.greyscale=function(t){return e(t).greyscale().toHexString()},this.spin=function(t,o){return e(t).spin(o).toHexString()},this.complement=function(t){return e(t).complement().toHexString()},this.mix=e.mix,this.readability=e.readability,this.isReadable=e.isReadable,this.mostReadable=e.mostReadable}var tinycolor=require("./../../../bower_components/tinycolor/tinycolor.js"),colorPlugin=function(){global.Color=new Color(tinycolor)};module.exports=colorPlugin;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/tinycolor/tinycolor.js":18}],62:[function(require,module,exports){
(function (global){
"use strict";var console=require("./../../../bower_components/console-browserify/index.js"),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),inlineDocument=require("./../../../bower_components/juice/lib/inline")({}).inlineDocument,inlinerPlugin=function(e){e.inline=function(e){$("[style]:not([replacedstyle])",e).each(function(e,t){var o=$(t);o.attr("replacedstyle",o.attr("style"))});var t=[];$('style[data-inline="true"]',e).each(function(e,o){var a=$(o).html();a=a.replace(/<!-- ko ((?!--).)*? -->/g,""),a=a.replace(/<!-- \/ko -->/g,""),t.push(a),$(o).removeAttr("data-inline")});var o=t.join("\n"),a=function(t,o){return"undefined"==typeof o&&(o=e),$(t,o)};a.root=function(){return $(":root",e)},inlineDocument(a,o,{styleAttributeName:"replacedstyle"})}};module.exports=inlinerPlugin;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1,"./../../../bower_components/juice/lib/inline":4}],63:[function(require,module,exports){
(function (global){
"use strict";var console=require("./../../../bower_components/console-browserify/index.js"),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),$=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),d=new Date,month=d.getMonth()+1,day=d.getDate(),currentDate=d.getFullYear()+"/"+((""+month).length<2?"0":"")+month+"/"+((""+day).length<2?"0":"")+day,lsLoader=function(e,t){var o=global.localStorage.getItem("metadata-"+e);if(null!==o){var a,i=global.localStorage.getItem("template-"+e);null!==i&&(a=JSON.parse(i));var l=JSON.parse(o);return{metadata:l,model:a,extension:lsCommandPluginFactory(l,t)}}throw"Cannot find stored data for "+e},lsCommandPluginFactory=function(e,t){var o=function(e,o,a){var i={name:"Save",enabled:ko.observable(!0)};i.execute=function(){i.enabled(!1),a.metadata.changed=Date.now(),"undefined"==typeof a.metadata.key&&(console.warn("Unable to find key in metadata object...",a.metadata),a.metadata.key=e);var t=JSON.parse(global.localStorage.getItem("edits")),o=global.localStorage.getItem("templates");if(t.indexOf(e)<0||"object"!=typeof t||o.indexOf(e)>0){var l=Math.random().toString(36).substr(2,7);if(global.localStorage.setItem("edits",JSON.stringify(t)),global.localStorage.setItem("metadata-"+l,a.exportMetadata()),global.localStorage.setItem("template-"+l,a.exportJSON()),$("#main-wysiwyg-area").html().length&&$(".code-editor").length){var r=JSON.parse(global.localStorage.getItem("metadata-"+l,a.exportMetadata()));r.desc="Code your own",r.key=l,a.edits.push({created:currentDate,title:"Untitled draft",key:l,name:"versafix-1",template:"templates/versafix-1/template-versafix-1.html",desc:"Code your own"}),global.document.location="code-campaign.html#"+l}else global.document.location="advanced-campaign.html#"+l}else global.localStorage.setItem("metadata-"+e,a.exportMetadata()),global.localStorage.setItem("template-"+e,a.exportJSON());i.enabled(!0)};var l={name:"Test",enabled:ko.observable(!0)},r={name:"Download",enabled:ko.observable(!0)};l.execute=function(){l.enabled(!1);var i=global.localStorage.getItem("testemail");if((null===i||"null"==i)&&(i=a.t("Insert here the recipient email address")),i=global.prompt(a.t("Test email address"),i),i.match(/@/)){global.localStorage.setItem("testemail",i),console.log("TODO testing...",i);var r=t?t:"/dl/",n=$.post(r,{action:"email",rcpt:i,subject:"[test] "+e+" - "+o,html:a.exportHTML()},null,"html");n.fail(function(){console.log("fail",arguments),a.notifier.error(a.t("Unexpected error talking to server: contact us!"))}),n.success(function(){console.log("success",arguments),a.notifier.success(a.t("Test email sent..."))}),n.always(function(){l.enabled(!0)})}else global.alert(a.t("Invalid email address")),l.enabled(!0)},r.execute=function(){r.enabled(!1),a.notifier.info(a.t("Downloading...")),a.exportHTMLtoTextarea("#downloadHtmlTextarea");var e=t?t:"/dl/";global.document.getElementById("downloadForm").setAttribute("action",e),global.document.getElementById("downloadForm").submit(),r.enabled(!0)},a.save=i,a.test=l,a.download=r}.bind(void 0,e.key,e.name);return o};module.exports=lsLoader;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],64:[function(require,module,exports){
(function (global){
var utilPlugin=function(){global.Util={decodeURI:decodeURI,encodeURI:encodeURI,decodeURIComponent:decodeURIComponent,encodeURIComponent:encodeURIComponent}};module.exports=utilPlugin;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],65:[function(require,module,exports){
"use strict";require("./../../bower_components/knockout-sortable/build/knockout-sortable.min.js"),require("./bindings/jqueryui-spinner.js"),require("./bindings/jqueryui-tabs.js"),require("./bindings/colorpicker.js"),require("./bindings/blocks.js"),require("./bindings/csstext.js"),require("./bindings/bind-iframe.js"),require("./bindings/droppable.js"),require("./bindings/fileupload.js"),require("./bindings/virtuals.js"),require("./bindings/wysiwygs.js"),require("./bindings/scrollfix.js"),require("./bindings/if-subs.js"),require("./bindings/extsortables.js"),require("./bindings/eventable.js"),require("./bindings/tooltips.js"),require("./bindings/extender-pagination.js"),require("./bindings/validated-value.js"),require("./bindings/scrollintoview.js");

},{"./../../bower_components/knockout-sortable/build/knockout-sortable.min.js":8,"./bindings/bind-iframe.js":28,"./bindings/blocks.js":29,"./bindings/colorpicker.js":31,"./bindings/csstext.js":32,"./bindings/droppable.js":33,"./bindings/eventable.js":34,"./bindings/extender-pagination.js":35,"./bindings/extsortables.js":36,"./bindings/fileupload.js":37,"./bindings/if-subs.js":38,"./bindings/jqueryui-spinner.js":39,"./bindings/jqueryui-tabs.js":40,"./bindings/scrollfix.js":42,"./bindings/scrollintoview.js":43,"./bindings/tooltips.js":45,"./bindings/validated-value.js":46,"./bindings/virtuals.js":47,"./bindings/wysiwygs.js":48}],66:[function(require,module,exports){
(function (global){
"use strict";function _viewModelPluginInstance(e){var t;return{viewModel:function(o){t=e(o)},init:function(){"undefined"!=typeof t&&"undefined"!=typeof t.init&&t.init()},dispose:function(){"undefined"!=typeof t&&"undefined"!=typeof t.dispose&&t.dispose()}}}var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),kojqui=(typeof window !== "undefined" ? window['kojqui'] : typeof global !== "undefined" ? global['kojqui'] : null),templateConverter=require("./converter/main.js"),console=require("./../../bower_components/console-browserify/index.js"),initializeViewmodel=require("./viewmodel.js"),templateSystem=require("./bindings/choose-template.js"),pluginsCall=function(e,t,o,a){var i,l,r,n,d;d=[],"undefined"!=typeof a&&a?(i=e.length-1,l=0,r=-1):(i=0,l=e.length-1,r=1);for(var s=i;s!=l+r;s+=r)"undefined"!=typeof e[s][t]&&(n=e[s][t].apply(e[s],o),"undefined"!=typeof n&&d.push(n));return d},origDisposeCallback=ko.utils.domNodeDisposal.addDisposeCallback;ko.utils.domNodeDisposal.addDisposeCallback=function(e,t){var o=function(e){try{t(e)}catch(o){console.warn("Caught unexpected dispose callback exception",o)}};origDisposeCallback(e,o)};var bindingPluginMaker=function(e){return{viewModel:function(t){try{e("applyBindings",ko.applyBindings.bind(void 0,t))}catch(o){throw console.warn(o,o.stack),o}},dispose:function(){try{e("unapplyBindings",ko.cleanNode.bind(this,global.document.body))}catch(t){throw console.warn(t,t.stack),t}}}},templateCreator=function(e,t,o,a){var i=o;for("undefined"!=typeof o&&"undefined"!=typeof a&&("object"!=typeof t||"replacedhtml"!=t.tagName.toLowerCase())&&(i+="-"+a);"undefined"==typeof i||null===i||e.exists(i);)i="anonymous-"+Math.floor(1e5*Math.random()+1);if("object"==typeof t&&"replacedhtml"==t.tagName.toLowerCase()){var l=$(t),r=$("replacedhead",l),n=$("replacedbody",l);e.adder(i+"-head",r.html()||""),e.adder(i+"-show",n.html()||""),e.adder(i+"-preview",l.html()),e.adder(i+"-wysiwyg",l.html()),r.children().detach(),r.html("<!-- ko block: content --><!-- /ko -->"),r.before("<!-- ko withProperties: { templateMode: 'head' } -->"),r.after("<!-- /ko -->"),n.html("<!-- ko block: content --><!-- /ko -->"),e.adder(i+"-iframe",l[0].outerHTML)}else"object"==typeof t?e.adder(i,t.outerHTML):e.adder(i,t);return i},_templateUrlConverter=function(e,t){return t.match(/^[^\/]*:/)||t.match(/^\//)||t.match(/^\[/)||t.match(/^#?$/)?null:e+t},templateLoader=function(e,t,o,a,i,l){var r="string"==typeof t?t:o.template,n="./",d=r.lastIndexOf("/");-1!=d&&(n=r.substr(0,d+1));var s,c=_templateUrlConverter.bind(void 0,n);s="undefined"==typeof o?{template:r,name:"No name",created:Date.now()}:o,$.get(r,function(t){var o=templateCompiler(e,c,"template",t,a,s,i,l);o.init()})},templateCompiler=function(e,t,o,a,i,l,r,n){var d=a.match(/^([\S\s]*)([<]html[^>]*>[\S\s]*<\/html>)([\S\s]*)$/i);if(null===d)throw"Unable to find <html> opening and closing tags in the template";var s=d[1],c={"<html":0,"<head":0,"<body":0,"</html":0,"</body":0,"</head":0},p=d[2].replace(/(<\/?)(html|head|body)([^>]*>)/gi,function(e,t,o,a){return c[(t+o).toLowerCase()]+=1,t+"replaced"+o+a});for(var m in c)if(c.hasOwnProperty(m)&&1!=c[m]){if(0===c[m])throw"ERROR: missing mandatory element "+m+">";if(c[m]>1)throw"ERROR: multiple element "+m+"> occourences are not supported (found "+c[m]+" occourences)"}var u=d[3],b=[],g="+$root.contentListeners()",f=[];if("undefined"!=typeof r)for(var v=0;v<r.length;v++)"function"==typeof r[v]?f.push(_viewModelPluginInstance(r[v])):f.push(r[v]);var h=[],y={adder:function(e,t){if("string"!=typeof t)throw"Template system: cannot create new template "+e;var o=t.match(/(data)?-ko-[^ =:]*/g);o&&console.error("ERROR: found unexpected -ko- attribute in compiled template",e,", you probably mispelled it:",o),templateSystem.addTemplate(e,t),h.push(e)},exists:function(e){var t=templateSystem.getTemplateContent(e);return"undefined"!=typeof t?!0:!1},dispose:function(){for(var e=h.length-1;e>=0;e--)templateSystem.removeTemplate(h[e])}};ko.bindingHandlers.block.templateExists=y.exists;for(var k=templateCreator.bind(void 0,y),w=e("translateTemplate",templateConverter.translateTemplate.bind(void 0,o,p,t,k)),x=e("generateModel",templateConverter.wrappedResultModel.bind(void 0,w)),C={},I=pluginsCall(f,"widget",[$,ko,kojqui]),S=0;S<I.length;S++)C[I[S].widget]=I[S];b.push.apply(b,e("generateEditors",templateConverter.generateEditors.bind(void 0,w,C,t,k,g)));var L=!1;if("undefined"!=typeof i&&null!==i){var T;T="string"==typeof i?ko.utils.parseJson(i):i;var E=e("checkModel",templateConverter.checkModel.bind(void 0,x._unwrap(),b,T));2==E&&(console.error("Trying to compile an incompatible template version!",x._unwrap(),b,T),L=!0);try{x._wrap(T)}catch(_){console.error("Unable to inject model content!",_),L=!0}}var F=s+templateSystem.getTemplateContent(o+"-iframe").replace(/(<\/?)replaced(html|head|body)([^>]*>)/gi,function(e,t,o,a){return t+o+a})+u,B=ko.bindingHandlers.bindIframe.tpl;ko.bindingHandlers.bindIframe.tpl=F;var P={dispose:function(){ko.bindingHandlers.bindIframe.tpl=B}};f.push(P),f.push(y);var D=e("initializeViewmodel",initializeViewmodel.bind(this,x,b,t,n));D.metadata=l;var M="0.16.0";return"undefined"!=typeof D.metadata.editorversion&&D.metadata.editorversion!==M&&console.warn("The model being loaded has been created with an older editor version",D.metadata.editorversion,"vs",M),D.metadata.editorversion=M,"undefined"!=typeof w.version&&("undefined"!=typeof D.metadata.templateversion&&D.metadata.templateversion!==w.version&&console.error("The model being loaded has been created with a different template version",w.version,"vs",D.metadata.templateversion),D.metadata.templateversion=w.version),templateSystem.init(),f.push(bindingPluginMaker(e)),pluginsCall(f,"viewModel",[D]),L&&$("#incompatible-template").dialog({modal:!0,appendTo:"#mo-body",buttons:{Ok:function(){$(this).dialog("close")}}}),{model:D,init:function(){pluginsCall(f,"init",void 0,!0)},dispose:function(){pluginsCall(f,"dispose",void 0,!0)}}},checkFeature=function(e,t){if(!t())throw console.warn("Missing feature",e),"Missing feature "+e},isCompatible=function(){try{return checkFeature("matchMedia",function(){return"undefined"!=typeof global.matchMedia}),checkFeature("XMLHttpRequest 2",function(){return"XMLHttpRequest"in global&&"withCredentials"in new global.XMLHttpRequest}),checkFeature("ES5 strict",function(){return function(){return"undefined"==typeof this}()}),checkFeature("CSS borderRadius",function(){return"undefined"!=typeof global.document.body.style.borderRadius}),checkFeature("CSS boxShadow",function(){return"undefined"!=typeof global.document.body.style.boxShadow}),checkFeature("CSS boxSizing",function(){return"undefined"!=typeof global.document.body.style.boxSizing}),checkFeature("CSS backgroundSize",function(){return"undefined"!=typeof global.document.body.style.backgroundSize}),checkFeature("CSS backgroundOrigin",function(){return"undefined"!=typeof global.document.body.style.backgroundOrigin}),checkBadBrowserExtensions(),!0}catch(e){return!1}},checkBadBrowserExtensions=function(){var e="checkbadbrowsersframe",t=ko.bindingHandlers.bindIframe.tpl;ko.bindingHandlers.bindIframe.tpl='<!DOCTYPE html>\r\n<html>\r\n<head><title>A</title>\r\n</head>\r\n<body><p style="color: blue" align="right" data-bind="style: { color: \'red\' }">B</p><div data-bind="text: content"></div></body>\r\n</html>\r\n',$("body").append('<iframe id="'+e+'" data-bind="bindIframe: $data"></iframe>');var o=global.document.getElementById(e);ko.applyBindings({content:"dummy content"},o);var a=o.contentWindow.document.doctype,i="<!DOCTYPE "+a.name+(a.publicId?' PUBLIC "'+a.publicId+'"':"")+(!a.publicId&&a.systemId?" SYSTEM":"")+(a.systemId?' "'+a.systemId+'"':"")+">",l=i+"\n"+o.contentWindow.document.documentElement.outerHTML;ko.cleanNode(o),ko.removeNode(o),ko.bindingHandlers.bindIframe.tpl=t;var r='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p align="right" style="color: red;" data-bind="style: { color: \'red\' }">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>',n='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p style="color: red;" data-bind="style: { color: \'red\' }" align="right">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>',d='<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p style="color: red;" align="right" data-bind="style: { color: \'red\' }">B</p><div data-bind="text: content">dummy content</div>\n\n</body></html>';if(r!==l&&n!==l&&d!==l)throw console.info("BadBrowser.FrameContentCheck",l.length,r.length,n.length,d.length,l==r,l==n,l==d),console.info(l),"Unexpected frame content. Misbehaving browser: "+l.length+"/"+r.length+"/"+n.length+"/"+d.length},fixPageEvents=function(){global.addEventListener&&(global.addEventListener("drag",function(e){e=e||global.event,e.preventDefault()},!1),global.addEventListener("dragstart",function(e){e=e||global.event,e.preventDefault()},!1),global.addEventListener("dragover",function(e){e=e||global.event,e.preventDefault()},!1),global.addEventListener("drop",function(e){e=e||global.event,e.preventDefault()},!1),global.document.body.addEventListener("drop",function(e){e.preventDefault()},!1)),global.document.ondragstart&&(global.document.ondragstart=function(){return!1})};module.exports={compile:templateCompiler,load:templateLoader,isCompatible:isCompatible,fixPageEvents:fixPageEvents};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../bower_components/console-browserify/index.js":1,"./bindings/choose-template.js":30,"./converter/main.js":53,"./viewmodel.js":70}],67:[function(require,module,exports){
"use strict";var console=require("./../../bower_components/console-browserify/index.js"),_call=function(e){return e()},logs=[],_timedCall=function(e,t){var o,a=(new Date).getTime();"object"==typeof console&&console.time&&console.time(e),o=_call(t),"object"==typeof console&&console.time&&console.timeEnd(e);var i=(new Date).getTime()-a;return"object"!=typeof console||console.time||console.log(e,"took",i,"ms"),logs.push({name:e,time:i}),logs.length>100&&logs.unshift(),o};module.exports={timedCall:_timedCall,logs:logs};

},{"./../../bower_components/console-browserify/index.js":1}],68:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),undoManager=require("./../../../bower_components/knockout-undomanager/knockout-undomanager.js"),undoserializer=require("./undoserializer.js"),addUndoStackExtensionMaker=function(e){return function(t){t.contentListeners(t.contentListeners()+2);var o=undoManager(t.content,{levels:100,undoLabel:ko.computed(function(){return t.t("Undo (#COUNT#)")}),redoLabel:ko.computed(function(){return t.t("Redo")})});return t.undo=o.undoCommand,t.undo.execute=e.bind(t,"undo",t.undo.execute),t.redo=o.redoCommand,t.redo.execute=e.bind(t,"redo",t.redo.execute),t.undoReset=e.bind(t,"undoReset",o.reset),t.setUndoModeMerge=o.setModeMerge,t.setUndoModeOnce=o.setModeOnce,o.setModeIgnore(),o.setUndoActionMaker(undoserializer.makeUndoAction.bind(void 0,t.content)),undoserializer.watchEnabled(!0),{pause:function(){o.setModeIgnore()},run:function(){o.setModeOnce()},init:function(){o.setModeOnce()},dispose:function(){t.contentListeners(t.contentListeners()-2),undoserializer.watchEnabled(!1),o.dispose()}}}};module.exports=addUndoStackExtensionMaker;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/knockout-undomanager/knockout-undomanager.js":9,"./undoserializer.js":69}],69:[function(require,module,exports){
(function (global){
"use strict";var ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),console=require("./../../../bower_components/console-browserify/index.js"),_reference=function(e,t){for(var o,a,i=0,n=e;i<t.length;)switch(t.charAt(i)){case"(":")"==t.charAt(i+1)&&(n=n()),i+=2;break;case"[":a=t.indexOf("]",i),n=n[t.substring(i+1,a)],i=a+1;break;case".":o=t.indexOf("(",i),-1==o&&(o=t.length),a=t.indexOf("[",i),-1==a&&(a=t.length),a=Math.min(o,a),n=n[t.substring(i+1,a)],i=a}return n},_getPath=function(e,t){for(var o,a="",i=0;i<=e.length;i++)if(o=i<e.length?e[i]:t,ko.isObservable(o)&&(a+="()"),"undefined"!=typeof o._fieldName)a+="."+o._fieldName;else{if(!(i>0&&"function"==typeof e[i-1].pop))throw console.error("Unexpected parent with no _fieldName and no parent array",i,e),"Unexpected parent with no _fieldName and no parent array";var n=ko.isObservable(e[i-1])?ko.utils.peekObservable(e[i-1]):e[i-1],r=ko.utils.arrayIndexOf(n,o);if(-1==r)throw"Unexpected object not found in parent array";a+="["+r+"]"}return a},makeDereferencedUndoAction=function(e,t,o,a,i){var n=_reference(t,o);e(n,a,i)},listener,_setListener=function(e){listener=e},makeUndoActionDereferenced=function(e,t,o,a,i,n){try{var r=_getPath(o,a);if(("object"==typeof i||"function"==typeof i)&&(i=ko.toJS(i)),"undefined"!=typeof n&&("object"==typeof n.value||"function"==typeof n.value)){var l=ko.toJS(n);n=l}if("undefined"!=typeof listener)try{listener(r,a,i,n)}catch(s){console.log("Undoserializer ignoring exception in listener callback")}return makeDereferencedUndoAction.bind(void 0,t,e,r,i,n)}catch(s){console.error("Exception processing undo",s,o,a,n)}},watchEnabled,_watchEnabled=function(e){return"undefined"==typeof e?watchEnabled:(watchEnabled=e,void 0)};module.exports={dereference:_getPath,reference:_reference,makeUndoAction:makeUndoActionDereferenced,setListener:_setListener,watchEnabled:_watchEnabled};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../../bower_components/console-browserify/index.js":1}],70:[function(require,module,exports){
(function (global){
"use strict";function initializeEditor(e,t,o,a){function l(e){return e.replace(/<replacedcc[^>]* condition="([^"]*)"[^>]*>([\s\S]*?)<\/replacedcc>/g,function(e,t,o){var a="<!--[if "+t.replace(/&amp;/,"&")+"]>";return a+=o.replace(/<!-- cc:bc:([A-Za-z:]*) -->(<\/cc>)?<!-- cc:ac:\1 -->/g,"</$1>").replace(/><\/cc><!-- cc:sc -->/g,"/>").replace(/<!-- cc:bo:([A-Za-z:]*) --><cc/g,"<$1").replace(/^.*<!-- cc:start -->/,"").replace(/<!-- cc:end -->.*$/,""),a+="<![endif]-->"})}var i=[],r=[],n=[],d=[{created:"Default",key:"0000001",title:"STEdb default",name:"versafix-1",template:"templates/versafix-1/template-versafix-1.html",desc:"The versatile template"},{created:"Default",key:"0000002",title:"TEDC15",name:"tedc15",template:"templates/tedc15/template-tedc15.html",desc:"The tedc15 template"},{created:"Default",key:"0000003",title:"Easy tutorial",name:"tutorial",template:"templates/tutorial/template-tutorial.html",desc:"The tutorial template"}],s={galleryRecent:ko.observableArray([]).extend({paging:16}),galleryRemote:ko.observableArray([]).extend({paging:16}),galleryHolidayRemote:ko.observableArray([]).extend({paging:16}),galleryNatureRemote:ko.observableArray([]).extend({paging:16}),galleryPromotionRemote:ko.observableArray([]).extend({paging:16}),selectedBlock:ko.observable(null),selectedItem:ko.observable(null),selectedTool:ko.observable(0),selectedImageTab:ko.observable(0),dragging:ko.observable(!1),draggingImage:ko.observable(!1),galleryLoaded:ko.observable(!1),galleryHolidayLoaded:ko.observable(!1),galleryNatureLoaded:ko.observable(!1),galleryPromotionLoaded:ko.observable(!1),showPreviewFrame:ko.observable(!1),previewMode:ko.observable("desktop"),showToolbox:ko.observable(!0),showTheme:ko.observable(!1),showGallery:ko.observable(!1),debug:ko.observable(!1),contentListeners:ko.observable(0),showSaved:ko.observable(!1),edits:ko.observableArray(n),templates:ko.observableArray(r),campaigns:ko.observableArray(i),logoPath:"dist/img/stedb.png",logoUrl:".",logoAlt:"stedb"};s.content=e,s.blockDefs=t,s.notifier=toastr,s.tt=function(e,t){if("undefined"!=typeof t)for(var o in t)t.hasOwnProperty(o)&&(e=e.replace(new RegExp("__"+o+"__","g"),t[o]));return e},s.t=s.tt,s.ut=function(e,t){return t},s.templatePath=o,s.remoteUrlProcessor=function(e){return e},s.remoteFileProcessor=function(e){return"undefined"!=typeof e.url&&(e.url=s.remoteUrlProcessor(e.url)),"undefined"!=typeof e.thumbnailUrl&&(e.thumbnailUrl=s.remoteUrlProcessor(e.thumbnailUrl)),e},s.loadGallery=function(){s.galleryLoaded("loading");var e=a?a:"/upload/";$.getJSON(e,function(e){for(var t=0;t<e.files.length;t++)e.files[t]=s.remoteFileProcessor(e.files[t]);s.galleryLoaded(e.files.length),s.galleryRemote(e.files.reverse())}).fail(function(){s.galleryLoaded(!1),s.notifier.error(s.t("Unexpected error listing files"))})},s.loadHolidayGallery=function(){s.galleryHolidayLoaded("loading");var e="/holiday/";$.getJSON(e,function(e){console.log(e);for(var t=0;t<e.files.length;t++)e.files[t]=s.remoteFileProcessor(e.files[t]);s.galleryHolidayLoaded(e.files.length),s.galleryHolidayRemote(e.files.reverse())}).fail(function(){s.galleryHolidayLoaded(!1),s.notifier.error(s.t("Unexpected error listing files"))})},s.loadNatureGallery=function(){s.galleryNatureLoaded("loading");var e="/nature/";$.getJSON(e,function(e){console.log(e);for(var t=0;t<e.files.length;t++)e.files[t]=s.remoteFileProcessor(e.files[t]);s.galleryNatureLoaded(e.files.length),s.galleryNatureRemote(e.files.reverse())}).fail(function(){s.galleryNatureLoaded(!1),s.notifier.error(s.t("Unexpected error listing files"))})},s.loadPromotionGallery=function(){s.galleryPromotionLoaded("loading");var e="/promotion/";$.getJSON(e,function(e){console.log(e);for(var t=0;t<e.files.length;t++)e.files[t]=s.remoteFileProcessor(e.files[t]);s.galleryPromotionLoaded(e.files.length),s.galleryPromotionRemote(e.files.reverse())}).fail(function(){s.galleryPromotionLoaded(!1),s.notifier.error(s.t("Unexpected error listing files"))})},s.fileToImage=function(e){return e.url},s.editImage=function(){var e=$(this).parents(".uploadzone").find("img.mobile-full").attr("src");$(this).parents(".uploadzone").find("img.mobile-full").prop("id",e),$("#trigger-editor").attr("data-src",e),$("#trigger-editor").trigger("click")},s.removeBlock=function(e,t){var o=!1;$("#main-wysiwyg-area .sortable-blocks-edit .editable.block").length<=1&&(o=!0),ko.utils.unwrapObservable(s.selectedBlock)==ko.utils.unwrapObservable(e)&&s.selectBlock(null,!0);var a=t.blocks.remove(e);return s.notifier.info(s.t("Block removed: use undo button to restore it...")),1==o&&($("#main-toolbox .block-list").find('img[alt="Block textBlock"]').parent().click(),global.setTimeout(function(){tinymce.editors[0].focus(),tinymce.editors[0].setContent("",{format:"raw"})},0)),a},s.duplicateBlock=function(e,t){var o=ko.utils.unwrapObservable(e),a=ko.toJS(ko.utils.unwrapObservable(t.blocks)[o]);"undefined"!=typeof a.id&&(a.id=""),t.blocks.splice(o+1,0,a)},s.moveBlock=function(e,t,o){var a=ko.utils.unwrapObservable(e),l=ko.utils.unwrapObservable(t.blocks);if(o&&a>0||!o&&a<l.length-1){var i=a+(o?-1:1),r=l[i];s.startMultiple(),t.blocks.splice(i,1),t.blocks.splice(a,0,r),s.stopMultiple()}},s.loadDefaultBlocks=function(){var e=ko.toJS(s.content().mainBlocks);e.blocks=[];for(var t=ko.utils.unwrapObservable(s.blockDefs),o=0;o<t.length;o++){var a=ko.toJS(t[o]);a.id="block_"+o,e.blocks.push(a)}performanceAwareCaller("setMainBlocks",s.content().mainBlocks._wrap.bind(s.content().mainBlocks,e))},s.addImage=function(e){var t=$("#main-wysiwyg-area .selectable-img.selecteditem");return 1==t.length&&"object"==typeof e&&"undefined"!=typeof e.url?(ko.contextFor(t[0])._src(e.url),!0):!1},s.addBlock=function(e){var t,o=s.selectedBlock();if(null!==o)for(var a=s.content().mainBlocks().blocks().length-1;a>=0;a--)if(s.content().mainBlocks().blocks()[a]()==o){t=a;break}var l;"undefined"!=typeof t?(l=t+1,s.content().mainBlocks().blocks.splice(l,0,e),s.notifier.info(s.t("New block added after the selected one (__pos__)",{pos:l}))):(s.content().mainBlocks().blocks.push(e),l=s.content().mainBlocks().blocks().length-1,s.notifier.info(s.t("New block added at the model bottom (__pos__)",{pos:l})));var i=s.content().mainBlocks().blocks()[l]();return s.selectBlock(i,!0),!1},s.findObjectsOfType=function(e,t){var o=[],a=ko.utils.unwrapObservable(e);for(var l in a)if(a.hasOwnProperty(l)){var i=ko.utils.unwrapObservable(a[l]);if(l.match(/Blocks$/))for(var r=ko.utils.unwrapObservable(i.blocks),n=0;n<r.length;n++){var d=ko.utils.unwrapObservable(r[n]);(null===t||ko.utils.unwrapObservable(d.type)==t)&&o.push(d)}else"object"==typeof i&&null!==i&&(null===t||ko.utils.unwrapObservable(i.type)==t)&&o.push(i)}return o},s.placeholderHelper={element:function(e){return $(e[0].outerHTML).removeClass("ui-draggable").addClass("sortable-placeholder").css("display","block").css("position","relative").css("width","100%").css("height","auto").css("opacity",".8")[0]},update:function(){}},s.startMultiple=function(){"undefined"!=typeof s.setUndoModeMerge&&s.setUndoModeMerge()},s.stopMultiple=function(){"undefined"!=typeof s.setUndoModeOnce&&s.setUndoModeOnce()},s.localGlobalSwitch=function(e,t){var o=e();return null===o?e(t()):e(null),!1},s.selectItem=function(e,t,o){var a=ko.utils.peekObservable(e);return"undefined"!=typeof o&&s.selectBlock(o,!1,!0),a!=t&&(e(t),null!==t&&0===s.selectedTool()&&s.selectedTool(1)),!1}.bind(s,s.selectedItem),s.isSelectedItem=function(e){return s.selectedItem()==e},s.selectBlock=function(e,t,o,a){var l=ko.utils.peekObservable(e);a||s.selectItem(null),l!=t&&(e(t),s.showGallery(!1),null===t||o||0!==s.selectedTool()||s.selectedTool(1))}.bind(s,s.selectedBlock),s.countSubscriptions=function(e,t){var o=0;for(var a in e)if(e.hasOwnProperty(a)){var l=e[a];if(ko.isObservable(l)&&("undefined"!=typeof l._defaultComputed&&("undefined"!=typeof t&&console.log(t+"/"+a+"/_",l._defaultComputed.getSubscriptionsCount()),o+=l._defaultComputed.getSubscriptionsCount()),"undefined"!=typeof t&&console.log(t+"/"+a+"/-",l.getSubscriptionsCount()),o+=l.getSubscriptionsCount(),l=ko.utils.unwrapObservable(l)),"object"==typeof l&&null!==l){var i=s.countSubscriptions(l,"undefined"!=typeof t?t+"/"+a+"@":void 0);"undefined"!=typeof t&&console.log(t+"/"+a+"@",i),o+=i}}return o},s.loopSubscriptionsCount=function(){var e=s.countSubscriptions(s.content());global.document.getElementById("subscriptionsCount").innerHTML=e,global.setTimeout(s.loopSubscriptionsCount,1e3)},s.export=function(){var e=performanceAwareCaller("exportHTML",s.exportHTML);return e},s.exportHTML=function(){var e="exportframe";$("body").append('<iframe id="'+e+'" data-bind="bindIframe: $data"></iframe>');var t=global.document.getElementById(e);ko.applyBindings(s,t),ko.cleanNode(t),s.inline&&s.inline(t.contentWindow.document);var o=t.contentWindow.document.doctype,a="<!DOCTYPE "+o.name+(o.publicId?' PUBLIC "'+o.publicId+'"':"")+(!o.publicId&&o.systemId?" SYSTEM":"")+(o.systemId?' "'+o.systemId+'"':"")+">",i=a+"\n"+t.contentWindow.document.documentElement.outerHTML;ko.removeNode(t),i=i.replace(/<script ([^>]* )?type="text\/html"[^>]*>[\s\S]*?<\/script>/gm,""),i=i.replace(/<!-- ko ((?!--).)*? -->/g,""),i=i.replace(/<!-- \/ko -->/g,""),i=i.replace(/ data-bind="[^"]*"/gm,""),i=i.replace(/ data-mce-(href|src|style)="[^"]*"/gm,""),i=i.replace(/ style="[^"]*"([^>]*) replaced(style="[^"]*")/gm,"$1 $2"),i=i.replace(/ replaced(style="[^"]*")([^>]*) style="[^"]*"/gm," $1$2"),i=i.replace(/ replaced(style="[^"]*")/gm," $1"),i=i.replace(/ http-equiv="[^"]*"([^>]*) replaced(http-equiv="[^"]*")/gm,"$1 $2"),i=i.replace(/ replaced(http-equiv="[^"]*")([^>]*) http-equiv="[^"]*"/gm," $1$2"),i=i.replace(/ replaced(http-equiv="[^"]*")/gm," $1"),i=l(i);var r=i.match(/ data-[^ =]+(="[^"]+")? /)||i.match(/ replaced([^= ]*=)/);return r&&console.warn("Output HTML contains unexpected data- attributes or replaced attributes",r),i},s.exportHTMLtoTextarea=function(e){$(e).val(s.exportHTML())},s.exportJSONtoTextarea=function(e){$(e).val(s.exportJSON())},s.importJSONfromTextarea=function(e){s.importJSON($(e).val())},s.exportMetadata=function(){var e=ko.toJSON(s.metadata);return e},s.exportJSON=function(){var e=ko.toJSON(s.content);return e},s.exportJS=function(){return ko.toJS(s.content)},s.importJSON=function(e){var t=ko.utils.parseJson(e);s.content._wrap(t)},s.exportTheme=function(){var e={},t=s.content().theme(),o=function(e,t,a){for(var l in a)if(a.hasOwnProperty(l)){var i=ko.utils.unwrapObservable(a[l]);null!==i&&"object"==typeof i?o(l+".",t,i):t[e+l]=i}};o("",e,t);var a="";for(var l in e)e.hasOwnProperty(l)&&"type"!=l&&(a+=l+": "+e[l]+";"+"\n");return a},s.loadImage=function(e){s.galleryRecent.unshift(e),s.selectedImageTab(0)},s.dialog=function(e,t){$(e).dialog(t)},s.log=function(){},s.selectedImageTab.subscribe(function(e){1==e&&s.galleryLoaded()===!1&&s.loadGallery()},s,"change"),s.selectedImageTab.subscribe(function(e){2==e&&s.galleryHolidayLoaded()===!1&&s.loadHolidayGallery()},s,"change"),s.selectedImageTab.subscribe(function(e){3==e&&s.galleryNatureLoaded()===!1&&s.loadNatureGallery()},s,"change"),s.selectedImageTab.subscribe(function(e){4==e&&s.galleryPromotionLoaded()===!1&&s.loadPromotionGallery()},s,"change");var c=global.window.location.href.substr(global.window.location.href.indexOf("#")+1),m=new Date,p=m.getMonth()+1,u=m.getDate(),g=m.getFullYear()+"/"+((""+p).length<2?"0":"")+p+"/"+((""+u).length<2?"0":"")+u;if(null===global.localStorage.getItem("templates")&&0==r.length){for(h=0;h<d.length;h++)r.push(d[h]);global.localStorage.setItem("templates",JSON.stringify(r))}for(var b,f=JSON.parse(global.localStorage.getItem("templates")),h=0;h<f.length;h++){var v=f[h].key;b=global.localStorage.getItem("metadata-"+v),"string"==typeof b?r.push(JSON.parse(b)):console.log("Ignoring saved key",f[h],"type",typeof b,b)}return s.edits.subscribe(function(e){var t=JSON.parse(global.localStorage.getItem("edits"));null==t&&(t=[]);for(var o=0;o<e.length;o++)t.push(e[o].key),global.localStorage.setItem("metadata-"+e[o].key,ko.toJSON(e[o]));global.localStorage.setItem("edits",ko.toJSON(t))}),s.campaigns.subscribe(function(e){var t=JSON.parse(global.localStorage.getItem("campaigns"));null==t&&(t=[]);for(var o=0;o<e.length;o++)t.push(e[o].key),global.localStorage.setItem("metadata-"+e[o].key,ko.toJSON(e[o]));global.localStorage.setItem("campaigns",ko.toJSON(t))}),s.templates.subscribe(function(e){JSON.parse(global.localStorage.getItem("templates"));for(var t=[],o=0;o<e.length;o++)t.push(e[o]),global.localStorage.setItem("metadata-"+e[o].key,ko.toJSON(e[o]));global.localStorage.setItem("templates",ko.toJSON(t))}),s.newTemplate=function(){var e,t=JSON.parse(global.localStorage.getItem("metadata-"+c)),o=t.key,a=t.name,l=t.template,i=Math.random().toString(36).substr(2,7);e=$("#main-wysiwyg-area").html().length&&$(".code-editor").length?{created:g,key:i,title:$("#templateName").val(),name:a,template:l,desc:"Code your own"}:{created:g,key:i,title:$("#templateName").val(),name:a,template:l,desc:$("#templateDesc").val()};var r=global.localStorage.getItem("template-"+o),n=s.exportJSON();if(r==n)return $("#save-template-modal").modal("toggle"),$("#template-notchanged-modal").modal("show"),!1;var d,m;null==JSON.parse(global.localStorage.getItem("edits"))?d=[]:(m=JSON.parse(global.localStorage.getItem("edits")),m.indexOf(o)>-1&&(d=m.filter(function(e){return e!==o}),s.edits.splice(o,1),global.localStorage.setItem("edits",JSON.stringify(d)),global.localStorage.removeItem("metadata-"+o))),"0000001"==o||"0000002"==o||"0000003"==o?(console.log(o),o=i,console.log(o)):(console.log(o),console.log("nu")),s.templates.push(e),global.localStorage.setItem("template-"+o,s.exportJSON()),global.localStorage.setItem("metadata-"+o,JSON.stringify(e)),$("#save-template-modal").modal("toggle"),$("#template-saved-modal").modal("toggle")},s.newEdit=function(e,t){var o=JSON.parse(global.localStorage.getItem("metadata-"+c)),a=o.key;o.name,o.template;var l,i,r=Math.random().toString(36).substr(2,7),n="templates/"+e+"/template-"+e+".html";null==JSON.parse(global.localStorage.getItem("edits"))?(l=[],s.edits.push({created:g,title:t.title,key:r,name:e,template:n,desc:"Draft"})):(i=JSON.parse(global.localStorage.getItem("edits")),i.indexOf(a)>-1&&(l=i.filter(function(e){return e!==a}),s.edits.splice(a,1),global.localStorage.setItem("edits",JSON.stringify(l)),global.localStorage.removeItem("metadata-"+a)),s.edits.push({created:g,title:t.title,key:c,name:e,template:n,desc:"Draft"})),global.location.reload()},s.sendCampaign=function(){var e,t=JSON.parse(global.localStorage.getItem("metadata-"+c)),o=t.key,a=t.name,l=t.template,i=Math.random().toString(36).substr(2,7);console.log(o),e=$("#campaignName").length?$("#campaignName").val():$("#fromName").val(),global.localStorage.getItem("template-"+o),s.exportJSON();var r,n;null==JSON.parse(global.localStorage.getItem("edits"))?r=[]:(n=JSON.parse(global.localStorage.getItem("edits")),n.indexOf(o)>-1&&(r=n.filter(function(e){return e!==o}),s.edits.splice(o,1),global.localStorage.setItem("edits",JSON.stringify(r)),global.localStorage.removeItem("metadata-"+o)));var d,m,p=JSON.parse(global.localStorage.getItem("templates"));if(null==global.localStorage.getItem("campaigns"))for(d=[],h=0;h<p.length;h++)p[h].key.indexOf(o)>-1&&(o=i);else{for(m=JSON.parse(global.localStorage.getItem("campaigns")),m.indexOf(o)>-1&&(o=i),h=0;h<p.length;h++)p[h].key.indexOf(o)>-1&&(o=i);d=m}console.log(o);var u;u=$("#main-wysiwyg-area").html().length&&$(".code-editor").length?{created:g,key:o,title:e,name:a,template:l,desc:"Code your own"}:{created:g,key:o,title:e,name:a,template:l,desc:$("#campaignSubject").val()},global.localStorage.setItem("campaigns",JSON.stringify(d)),s.campaigns.push(u),global.localStorage.setItem("template-"+o,s.exportJSON()),global.localStorage.setItem("metadata-"+o,JSON.stringify(u))},s}var $=(typeof window !== "undefined" ? window['jQuery'] : typeof global !== "undefined" ? global['jQuery'] : null),ko=(typeof window !== "undefined" ? window['ko'] : typeof global !== "undefined" ? global['ko'] : null),tinymce=(typeof window !== "undefined" ? window['tinymce'] : typeof global !== "undefined" ? global['tinymce'] : null),console=require("./../../bower_components/console-browserify/index.js"),performanceAwareCaller=require("./timed-call.js").timedCall,toastr=require("./../../bower_components/toastr/toastr.js");toastr.options={closeButton:!1,debug:!1,positionClass:"toast-bottom-full-width",target:"#mo-body",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},module.exports=initializeEditor;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./../../bower_components/console-browserify/index.js":1,"./../../bower_components/toastr/toastr.js":19,"./timed-call.js":67}]},{},[27,20])(27)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJib3dlcl9jb21wb25lbnRzL2NvbnNvbGUtYnJvd3NlcmlmeS9pbmRleC5qcyIsImJvd2VyX2NvbXBvbmVudHMvZXZvbC1jb2xvcnBpY2tlci9qcy9ldm9sLmNvbG9ycGlja2VyLm1pbi5qcyIsImJvd2VyX2NvbXBvbmVudHMvanNlcC9zcmMvanNlcC5qcyIsImJvd2VyX2NvbXBvbmVudHMvanVpY2UvbGliL2lubGluZS5qcyIsImJvd2VyX2NvbXBvbmVudHMvanVpY2UvbGliL3Byb3BlcnR5LmpzIiwiYm93ZXJfY29tcG9uZW50cy9qdWljZS9saWIvc2VsZWN0b3IuanMiLCJib3dlcl9jb21wb25lbnRzL2p1aWNlL2xpYi91dGlscy5qcyIsImJvd2VyX2NvbXBvbmVudHMva25vY2tvdXQtc29ydGFibGUvYnVpbGQva25vY2tvdXQtc29ydGFibGUubWluLmpzIiwiYm93ZXJfY29tcG9uZW50cy9rbm9ja291dC11bmRvbWFuYWdlci9rbm9ja291dC11bmRvbWFuYWdlci5qcyIsImJvd2VyX2NvbXBvbmVudHMva25vY2tvdXQud3JhcC9rbm9ja291dC53cmFwLmpzIiwiYm93ZXJfY29tcG9uZW50cy9rbm9ja291dGpzLXJlYWN0b3Ivc3JjL2tub2Nrb3V0LnJlYWN0b3IuanMiLCJib3dlcl9jb21wb25lbnRzL21lbnNjaC9pbmRleC5qcyIsImJvd2VyX2NvbXBvbmVudHMvbWVuc2NoL2xpYi9kZWJ1Zy5qcyIsImJvd2VyX2NvbXBvbmVudHMvbWVuc2NoL2xpYi9sZXhlci5qcyIsImJvd2VyX2NvbXBvbmVudHMvbWVuc2NoL2xpYi9wYXJzZXIuanMiLCJib3dlcl9jb21wb25lbnRzL21lbnNjaC9saWIvc3RyaW5naWZ5LmpzIiwiYm93ZXJfY29tcG9uZW50cy9zbGljay9wYXJzZXIuanMiLCJib3dlcl9jb21wb25lbnRzL3Rpbnljb2xvci90aW55Y29sb3IuanMiLCJib3dlcl9jb21wb25lbnRzL3RvYXN0ci90b2FzdHIuanMiLCJidWlsZC90ZW1wbGF0ZXMuanMiLCJub2RlX21vZHVsZXMvYXNzZXJ0L2Fzc2VydC5qcyIsIm5vZGVfbW9kdWxlcy9vcy1icm93c2VyaWZ5L2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3V0aWwvbm9kZV9tb2R1bGVzL2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy91dGlsL3V0aWwuanMiLCJzcmMvanMvYXBwLmpzIiwic3JjL2pzL2JpbmRpbmdzL2JpbmQtaWZyYW1lLmpzIiwic3JjL2pzL2JpbmRpbmdzL2Jsb2Nrcy5qcyIsInNyYy9qcy9iaW5kaW5ncy9jaG9vc2UtdGVtcGxhdGUuanMiLCJzcmMvanMvYmluZGluZ3MvY29sb3JwaWNrZXIuanMiLCJzcmMvanMvYmluZGluZ3MvY3NzdGV4dC5qcyIsInNyYy9qcy9iaW5kaW5ncy9kcm9wcGFibGUuanMiLCJzcmMvanMvYmluZGluZ3MvZXZlbnRhYmxlLmpzIiwic3JjL2pzL2JpbmRpbmdzL2V4dGVuZGVyLXBhZ2luYXRpb24uanMiLCJzcmMvanMvYmluZGluZ3MvZXh0c29ydGFibGVzLmpzIiwic3JjL2pzL2JpbmRpbmdzL2ZpbGV1cGxvYWQuanMiLCJzcmMvanMvYmluZGluZ3MvaWYtc3Vicy5qcyIsInNyYy9qcy9iaW5kaW5ncy9qcXVlcnl1aS1zcGlubmVyLmpzIiwic3JjL2pzL2JpbmRpbmdzL2pxdWVyeXVpLXRhYnMuanMiLCJzcmMvanMvYmluZGluZ3Mvc2NyaXB0LXRlbXBsYXRlLmpzIiwic3JjL2pzL2JpbmRpbmdzL3Njcm9sbGZpeC5qcyIsInNyYy9qcy9iaW5kaW5ncy9zY3JvbGxpbnRvdmlldy5qcyIsInNyYy9qcy9iaW5kaW5ncy9zdHJpbmctdGVtcGxhdGUuanMiLCJzcmMvanMvYmluZGluZ3MvdG9vbHRpcHMuanMiLCJzcmMvanMvYmluZGluZ3MvdmFsaWRhdGVkLXZhbHVlLmpzIiwic3JjL2pzL2JpbmRpbmdzL3ZpcnR1YWxzLmpzIiwic3JjL2pzL2JpbmRpbmdzL3d5c2l3eWdzLmpzIiwic3JjL2pzL2NvbnZlcnRlci9jaGVja21vZGVsLmpzIiwic3JjL2pzL2NvbnZlcnRlci9kZWNsYXJhdGlvbnMuanMiLCJzcmMvanMvY29udmVydGVyL2RvbXV0aWxzLmpzIiwic3JjL2pzL2NvbnZlcnRlci9lZGl0b3IuanMiLCJzcmMvanMvY29udmVydGVyL21haW4uanMiLCJzcmMvanMvY29udmVydGVyL21vZGVsLmpzIiwic3JjL2pzL2NvbnZlcnRlci9wYXJzZXIuanMiLCJzcmMvanMvY29udmVydGVyL3N0eWxlc2hlZXQuanMiLCJzcmMvanMvY29udmVydGVyL3V0aWxzLmpzIiwic3JjL2pzL2NvbnZlcnRlci93cmFwcGVyLmpzIiwic3JjL2pzL2N1c3RvbS5qcyIsInNyYy9qcy9leHAtbWFuYWdlci5qcyIsInNyYy9qcy9leHQvY29sb3IuanMiLCJzcmMvanMvZXh0L2lubGluZXIuanMiLCJzcmMvanMvZXh0L2xvY2Fsc3RvcmFnZS5qcyIsInNyYy9qcy9leHQvdXRpbC5qcyIsInNyYy9qcy9rby1iaW5kaW5ncy5qcyIsInNyYy9qcy90ZW1wbGF0ZS1sb2FkZXIuanMiLCJzcmMvanMvdGltZWQtY2FsbC5qcyIsInNyYy9qcy91bmRvbWFuYWdlci91bmRvbWFpbi5qcyIsInNyYy9qcy91bmRvbWFuYWdlci91bmRvc2VyaWFsaXplci5qcyIsInNyYy9qcy92aWV3bW9kZWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDd0NBLFFBQVMsUUFFVCxRQUFTLFFBQ0wsUUFBUSxJQUFJLE1BQU0sUUFBUyxXQUcvQixRQUFTLFFBQ0wsUUFBUSxJQUFJLE1BQU0sUUFBUyxXQUcvQixRQUFTLFNBQ0wsUUFBUSxLQUFLLE1BQU0sUUFBUyxXQUdoQyxRQUFTLE1BQUssR0FDVixNQUFNLEdBQVMsS0FBSyxNQUd4QixRQUFTLFNBQVEsR0FDYixHQUFJLEdBQU8sTUFBTSxFQUNqQixLQUFLLEVBQ0QsS0FBTSxJQUFJLE9BQU0sa0JBQW9CLEVBR3hDLElBQUksR0FBVyxLQUFLLE1BQVEsQ0FDNUIsU0FBUSxJQUFJLEVBQVEsS0FBTyxFQUFXLE1BRzFDLFFBQVMsU0FDTCxHQUFJLEdBQU0sR0FBSSxNQUNkLEdBQUksS0FBTyxRQUNYLEVBQUksUUFBVSxLQUFLLE9BQU8sTUFBTSxLQUFNLFdBQ3RDLFFBQVEsTUFBTSxFQUFJLE9BR3RCLFFBQVMsS0FBSSxHQUNULFFBQVEsSUFBSSxLQUFLLFFBQVEsR0FBVSxNQUd2QyxRQUFTLFFBQU8sR0FDWixJQUFLLEVBQVksQ0FDYixHQUFJLEdBQU0sTUFBTSxLQUFLLFVBQVcsRUFDaEMsUUFBTyxJQUFHLEVBQU8sS0FBSyxPQUFPLE1BQU0sS0FBTSxLQWpGakQsR0FBSSxNQUFPLFFBQVEsUUFDZixPQUFTLFFBQVEsVUFFakIsTUFBUSxNQUFNLFVBQVUsTUFDeEIsUUFDQSxRQUdBLFNBRGtCLG1CQUFYLFNBQTBCLE9BQU8sUUFDOUIsT0FBTyxRQUNRLG1CQUFYLFNBQTBCLE9BQU8sUUFDckMsT0FBTyxVQWlCckIsS0FBSyxHQVpELGFBQ0MsSUFBSyxRQUNILEtBQU0sU0FDTixLQUFNLFNBQ04sTUFBTyxVQUNQLEtBQU0sU0FDTixRQUFTLFlBQ1QsTUFBTyxVQUNQLElBQUssUUFDTCxPQUFRLFdBR04sRUFBSSxFQUFHLEVBQUksVUFBVSxPQUFRLElBQUssQ0FDdkMsR0FBSSxPQUFRLFVBQVUsR0FDbEIsRUFBSSxNQUFNLEdBQ1YsS0FBTyxNQUFNLEVBRVosU0FBUSxRQUNULFFBQVEsTUFBUSxHQUl4QixPQUFPLFFBQVU7Ozs7O0NDakNoQixTQUFTLEdBQUssR0FBSSxHQUFFLEVBQUUsRUFBRSxPQUFPLFVBQVUsVUFBVSxFQUFFLEVBQUUsUUFBUSxTQUFTLEVBQUUsRUFBRSxFQUFFLE1BQU0sR0FBRyxFQUFFLEdBQUUsRUFBRyxVQUFVLEtBQUssRUFBRSxpQkFBaUIsU0FBUyxLQUFLLEVBQUUsZUFBZSxLQUFLLEdBQUcsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsVUFBVSxHQUFHLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsVUFBVSxHQUFHLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFVBQVUsSUFBSSxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsV0FBVyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsV0FBVyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsV0FBVyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsV0FBVyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsV0FBVyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsV0FBVyxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsU0FBUyxXQUFXLEVBQUUsWUFBWSxFQUFFLFNBQVMsR0FBRyxHQUFJLEdBQUUsRUFBRSxTQUFTLEdBQUksT0FBTyxJQUFHLEVBQUUsU0FBUyxFQUFFLElBQUksR0FBRyxHQUFHLEVBQUUsU0FBUyxHQUFHLE1BQU8sR0FBRSxPQUFPLEtBQUssRUFBRSxTQUFTLEdBQUcsR0FBSSxHQUFFLEVBQUUsRUFBRyxPQUFPLEdBQUUsRUFBRSxHQUFHLEVBQUUsU0FBUyxHQUFHLEdBQUcsRUFBRSxPQUFPLEdBQUcsQ0FBQyxHQUFJLEdBQUUsRUFBRSxFQUFFLFFBQVEsS0FBSyxFQUFFLEVBQUUsUUFBUSxLQUFLLEVBQUUsRUFBRSxVQUFVLEVBQUUsR0FBRyxNQUFNLElBQUssUUFBTyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxLQUFLLEtBQUssSUFBSSxNQUFPLEdBQUcsR0FBRSxPQUFPLG9CQUFvQixRQUFRLFFBQVEsU0FBUyxNQUFNLEtBQUssT0FBTyxPQUFPLFlBQVcsRUFBRyxrQkFBaUIsRUFBRyxrQkFBaUIsRUFBRyxTQUFRLEVBQUcsZUFBZSxRQUFRLFFBQVEsZ0dBQWdHLFNBQVEsRUFBRyxRQUFRLFdBQVcsR0FBSSxHQUFFLElBQUssUUFBTyxLQUFLLFlBQVksU0FBUyxLQUFLLFFBQVEsZUFBZSxFQUFFLEVBQUUsS0FBSyxJQUFJLFNBQVMsSUFBSSxLQUFLLFVBQVMsRUFBRyxLQUFLLFFBQVEsT0FBTyxLQUFLLFFBQVEsV0FBVyxRQUFRLEtBQUssUUFBUSxPQUFPLEtBQUssUUFBUSxJQUFJLEdBQUcsU0FBUyxJQUFJLFFBQVEsR0FBSSxHQUFFLEtBQUssUUFBUSxNQUFNLEVBQUUsS0FBSyxRQUFRLEdBQUcsVUFBVSxLQUFLLFFBQVEsT0FBTyxHQUFHLGdCQUFnQixnQkFB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QVksRUFBRSxFQUFFLEtBQUssSUFBSSxFQUFFLEVBQUUsT0FBUSxNQUFLLFlBQVksR0FBRyxHQUFHLEtBQUssWUFBWSxLQUFLLFNBQVMsS0FBSyxhQUFhLFFBQVEsRUFBRSxHQUFHLEtBQUssWUFBWSxFQUFFLEVBQUUsRUFBRSxLQUFLLGVBQWUsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLEtBQUssWUFBWSxDQUFFLE1BQUssWUFBWSxDQUFFLElBQUksR0FBRSxLQUFLLFNBQVMsS0FBSyxhQUFhLE9BQU8sS0FBSyxHQUFHLE1BQU0sV0FBVyxHQUFHLEdBQUcsS0FBSyxFQUFHLEdBQUUsR0FBRyxFQUFFLE9BQU8sU0FBUyxxQkFBcUIsV0FBVyxJQUFJLEdBQUksR0FBRSxLQUFLLFFBQVEsRUFBRSxFQUFFLE9BQU8sR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLFdBQVcsRUFBRSxJQUFJLFlBQVksQ0FBQyxHQUFJLEdBQUUsS0FBSyxTQUFTLFNBQVMsSUFBSSxLQUFLLFNBQVMsU0FBUyxFQUFFLEVBQUUsU0FBUyxJQUFJLEVBQUUsU0FBUyxFQUFFLEtBQUssU0FBUyxTQUFTLElBQUksS0FBSyxTQUFTLFNBQVMsS0FBSyxRQUFRLGNBQWMsRUFBRSxFQUFFLFNBQVMsSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUUsR0FBRSxLQUFLLFNBQVMsS0FBSyxPQUFPLEtBQUssUUFBUSxjQUFjLE9BQU8sS0FBSyxTQUFTLEtBQUssT0FBTyxRQUFTLE9BQU0sR0FBRyxRQUFRLEVBQUUsR0FBRyxRQUFRLEtBQU0sR0FBRSxFQUFFLGVBQWUsTUFBTSxZQUFZLFdBQVcsR0FBRyxLQUFLLFdBQVcsS0FBSyxTQUFRLEVBQUcsRUFBRSxnQkFBZ0IsSUFBSSxJQUFJLEtBQUssS0FBSyxZQUFZLGVBQWUsT0FBTyxLQUFLLFVBQVUsQ0FBQyxLQUFLLFNBQVMsS0FBSyxRQUFRLE9BQU8sTUFBTSxLQUFLLGdCQUFnQixPQUFPLEdBQUcsUUFBUSxTQUFTLEdBQUcsTUFBTyxHQUFFLG1CQUFrQixJQUFLLEtBQUssYUFBYyxJQUFJ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LEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxZQUFZLEdBQUcsR0FBRyxFQUFFLFNBQVMsRUFBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEVBQUcsSUFBRyxFQUFFLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxHQUFHLFdBQVcsR0FBSSxPQUFPLElBQUcsRUFBRSxTQUFTLEVBQUUsR0FBRyxHQUFJLEdBQUUsQ0FBRSxJQUFHLEVBQUUsU0FBUyxlQUFlLEdBQUcsSUFBSSxFQUFFLEdBQUksR0FBRSxnQkFBZ0IsV0FBVyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsR0FBRyxXQUFXLEtBQUssV0FBVyxNQUFNLElBQUksS0FBSyxVQUFVLEVBQUUsWUFBWSxRQUFTLEdBQUUsZ0JBQWdCLFVBQVUsS0FBSyxTQUFTLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxXQUFXLElBQUssR0FBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLFFBQU8sRUFBRyxFQUFFLEVBQUUsZ0JBQWdCLFVBQVUsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sT0FBTyxFQUFFLFFBQVEsRUFBRSxlQUFnQixHQUFFLFNBQVMsRUFBRSxNQUFNLE9BQU8sRUFBRSxHQUFHLEVBQUUsZUFBZSxFQUFFLGFBQWEsRUFBRSxZQUFZLGtCQUFtQixHQUFFLFdBQVcsRUFBRSxVQUFVLEtBQUssV0FBVyxHQUFJLEdBQUUsRUFBRSxFQUFFLFdBQVcsRUFBRSxrQkFBbUIsR0FBRSxFQUFFLEtBQUssS0FBSyxFQUFFLFNBQVMsQ0FBRSxHQUFFLE1BQU0sc0JBQXNCLEVBQUUsRUFBRSxhQUFhLElBQUkseUJBQXlCLEdBQUcsTUFBTSxFQUFFLE1BQU0sc0JBQXNCLEVBQUUsRUFBRSxhQUFhLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixTQUFTLEtBQUssRUFBRSxXQUFXLE1BQU8sSUFBRyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsUUFBUSxNQUFNLEVBQUUsRUFBRSxRQUFRLE9BQU8sRUFBRSxRQUFRLFNBQVMsRUFBRSxRQUFRLE9BQU8sU0FBUyxFQUFFLEdBQUcsTUFBTyxHQUFFLEdBQUcsT0FBTyxFQUFFLFdBQVcsS0FBSyxXQUFXLEVBQUUsTUFBTSxNQUFNLEVBQUUsTUFBTSxXQUFXLEdBQUksSUFBSSxHQUFFLFdBQVcsV0FBVyxHQUFJLEdBQUUsRUFBRSxFQUFFLFFBQVEsT0FBUSxHQUFFLFNBQVMsRUFBRSxNQUFNLE9BQU8sRUFBRSxTQUFTLE1BQU0sU0FBUyxFQUFFLEdBQUcsR0FBSSxHQUFFLEVBQUUsS0FBSyxFQUFHLEdBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxhQUFhLEVBQUUsS0FBSyxTQUFTLFdBQVcsSUFBSSxFQUFFLEtBQUssS0FBSyxlQUFlLFNBQVMsR0FBRyxFQUFFLE1BQU0sS0FBSyxZQUFZLFFBQVEsU0FBUyxFQUFFLEdBQUcsa0JBQW1CLElBQUcsRUFBRSxLQUFLLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEtBQUssR0FBRyxHQUFHLElBQUksRUFBRSxRQUFRLEVBQUUsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLEVBQUUsUUFBUSxLQUFLLEtBQUssRUFBRSxFQUFFLElBQUksS0FBSyxPQUFPLFNBQVMsRUFBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxLQUFLLEdBQUcsRUFBRSxFQUFFLEtBQUssU0FBUyxHQUFHLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBRSxJQUFHLEdBQUcsRUFBRSxHQUFHLFNBQVMsRUFBRSxLQUFLLEdBQUcsT0FBTyxJQUFJLEdBQUcsRUFBRSxTQUFTLEtBQUssR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLFdBQVcsR0FBRyxFQUFFLEVBQUUsTUFBTSxhQUFhLEVBQUUsS0FBSyxTQUFTLFdBQVcsR0FBRyxFQUFFLG1CQUFtQixFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsYUFBYSxHQUFHLEtBQUssRUFBRSxhQUFhLEVBQUUsaUJBQWlCLEdBQUcsRUFBRSxRQUFRLEVBQUUsV0FBVyxZQUFZLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBRSxZQUFXLEdBQUksRUFBRSxZQUFZLEVBQUUsV0FBVyxLQUFLLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsUUFBUSxNQUFNLFNBQVMsVUFBVSxFQUFFLEdBQUcsU0FBUyxHQUFHLEVBQUUsV0FBVyxNQUFPLElBQUcsRUFBRSxlQUFlLGlCQUFpQixFQUFFLGdCQUFlLEdBQUksR0FBRyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLGFBQWEsQ0FBQyxHQUFJLEdBQUUsRUFBRSxFQUFHLEdBQUUsaUJBQWlCLEVBQUUsa0JBQWtCLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsRUFBRSxHQUFHLEVBQUUsaUJBQWlCLEVBQUUsc0JBQXVCLEdBQUUsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxhQUFjLElBQUcsSUFBSSxJQUFJLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxrQ0FBa0MsRUFBRSxtQ0FBbUMsRUFBRSxTQUFTLEVBQUUsUUFBUSxjQUFjLEVBQUUsTUFBTSxZQUFZLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxLQUFNLEdBQUUsa0NBQWtDLEVBQUUsbUNBQW1DLEVBQUUsV0FBVyxFQUFFLFVBQVUsS0FBSyxLQUFLLEVBQUUsRUFBRSxHQUFHLEdBQUcsRUFBRSxNQUFNLEtBQUssWUFBWSxZQUFZLEVBQUUsYUFBYSxJQUFJLEVBQUUs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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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UUFBUSxZQUFjLEVBQVMsS0FBSyxVQUFVLEtBRzdELEVBdjdCVCxHQUFJLEdBQUksUUFBUSxVQUNaLEdBQUssUUFBUSxZQUNiLFFBQVUsUUFBUSxXQUNsQixRQUFVLFFBQVEsV0FDbEIsdUJBQXlCLFFBQVEsbUJBQW1CLFVBRXBELE9BQVMsUUFBUSxTQUNyQixRQUFPLFNBQ0wsYUFBZSxFQUNmLE9BQVMsRUFDVCxjQUFpQiwwQkFDakIsT0FBVSxXQUNWLFFBQVcsS0FDWCxhQUFnQixNQUNoQixhQUFnQixPQUNoQixRQUFXLE9BQ1gsZ0JBQW1CLE9BQ25CLFdBQWMsUUFDZCxXQUFjLFNBQ2QsV0FBYyxTQUNkLFdBQWMsV0F1NkJoQixPQUFPLFFBQVUiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLypnbG9iYWwgd2luZG93LCBnbG9iYWwqL1xudmFyIHV0aWwgPSByZXF1aXJlKFwidXRpbFwiKVxudmFyIGFzc2VydCA9IHJlcXVpcmUoXCJhc3NlcnRcIilcblxudmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlXG52YXIgY29uc29sZVxudmFyIHRpbWVzID0ge31cblxuaWYgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLmNvbnNvbGUpIHtcbiAgICBjb25zb2xlID0gZ2xvYmFsLmNvbnNvbGVcbn0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cuY29uc29sZSkge1xuICAgIGNvbnNvbGUgPSB3aW5kb3cuY29uc29sZVxufSBlbHNlIHtcbiAgICBjb25zb2xlID0ge31cbn1cblxudmFyIGZ1bmN0aW9ucyA9IFtcbiAgICBbbG9nLCBcImxvZ1wiXVxuICAgICwgW2luZm8sIFwiaW5mb1wiXVxuICAgICwgW3dhcm4sIFwid2FyblwiXVxuICAgICwgW2Vycm9yLCBcImVycm9yXCJdXG4gICAgLCBbdGltZSwgXCJ0aW1lXCJdXG4gICAgLCBbdGltZUVuZCwgXCJ0aW1lRW5kXCJdXG4gICAgLCBbdHJhY2UsIFwidHJhY2VcIl1cbiAgICAsIFtkaXIsIFwiZGlyXCJdXG4gICAgLCBbYXNzZXJ0LCBcImFzc2VydFwiXVxuXVxuXG5mb3IgKHZhciBpID0gMDsgaSA8IGZ1bmN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0dXBsZSA9IGZ1bmN0aW9uc1tpXVxuICAgIHZhciBmID0gdHVwbGVbMF1cbiAgICB2YXIgbmFtZSA9IHR1cGxlWzFdXG5cbiAgICBpZiAoIWNvbnNvbGVbbmFtZV0pIHtcbiAgICAgICAgY29uc29sZVtuYW1lXSA9IGZcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY29uc29sZVxuXG5mdW5jdGlvbiBsb2coKSB7fVxuXG5mdW5jdGlvbiBpbmZvKCkge1xuICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cylcbn1cblxuZnVuY3Rpb24gd2FybigpIHtcbiAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpXG59XG5cbmZ1bmN0aW9uIGVycm9yKCkge1xuICAgIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpXG59XG5cbmZ1bmN0aW9uIHRpbWUobGFiZWwpIHtcbiAgICB0aW1lc1tsYWJlbF0gPSBEYXRlLm5vdygpXG59XG5cbmZ1bmN0aW9uIHRpbWVFbmQobGFiZWwpIHtcbiAgICB2YXIgdGltZSA9IHRpbWVzW2xhYmVsXVxuICAgIGlmICghdGltZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBzdWNoIGxhYmVsOiBcIiArIGxhYmVsKVxuICAgIH1cblxuICAgIHZhciBkdXJhdGlvbiA9IERhdGUubm93KCkgLSB0aW1lXG4gICAgY29uc29sZS5sb2cobGFiZWwgKyBcIjogXCIgKyBkdXJhdGlvbiArIFwibXNcIilcbn1cblxuZnVuY3Rpb24gdHJhY2UoKSB7XG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcigpXG4gICAgZXJyLm5hbWUgPSBcIlRyYWNlXCJcbiAgICBlcnIubWVzc2FnZSA9IHV0aWwuZm9ybWF0LmFwcGx5KG51bGwsIGFyZ3VtZW50cylcbiAgICBjb25zb2xlLmVycm9yKGVyci5zdGFjaylcbn1cblxuZnVuY3Rpb24gZGlyKG9iamVjdCkge1xuICAgIGNvbnNvbGUubG9nKHV0aWwuaW5zcGVjdChvYmplY3QpICsgXCJcXG5cIilcbn1cblxuZnVuY3Rpb24gYXNzZXJ0KGV4cHJlc3Npb24pIHtcbiAgICBpZiAoIWV4cHJlc3Npb24pIHtcbiAgICAgICAgdmFyIGFyciA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxuICAgICAgICBhc3NlcnQub2soZmFsc2UsIHV0aWwuZm9ybWF0LmFwcGx5KG51bGwsIGFycikpXG4gICAgfVxufVxuIiwiLypcbiAgIGV2b2wuY29sb3JwaWNrZXIgMy4yLjJcbiAgIChjKSAyMDE1IE9saXZpZXIgR2l1bGllcmlcbiAgIGh0dHA6Ly9ldm9sdXRldXIuZ2l0aHViLmlvL2NvbG9ycGlja2VyL1xuKi9cbiFmdW5jdGlvbihhLGIpe3ZhciBjPTAsZD13aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCxlPWQuaW5kZXhPZihcIk1TSUUgXCIpPjAsZj1lP1wiLWllXCI6XCJcIixnPWU/ITE6L21vemlsbGEvLnRlc3QoZC50b0xvd2VyQ2FzZSgpKSYmIS93ZWJraXQvLnRlc3QoZC50b0xvd2VyQ2FzZSgpKSxoPVtdLGk9W1wiZmZmZmZmXCIsXCIwMDAwMDBcIixcImVlZWNlMVwiLFwiMWY0OTdkXCIsXCI0ZjgxYmRcIixcImMwNTA0ZFwiLFwiOWJiYjU5XCIsXCI4MDY0YTJcIixcIjRiYWNjNlwiLFwiZjc5NjQ2XCJdLGo9W1wiZjJmMmYyXCIsXCI3ZjdmN2ZcIixcImRkZDljM1wiLFwiYzZkOWYwXCIsXCJkYmU1ZjFcIixcImYyZGNkYlwiLFwiZWJmMWRkXCIsXCJlNWUwZWNcIixcImRiZWVmM1wiLFwiZmRlYWRhXCIsXCJkOGQ4ZDhcIixcIjU5NTk1OVwiLFwiYzRiZDk3XCIsXCI4ZGIzZTJcIixcImI4Y2NlNFwiLFwiZTViOWI3XCIsXCJkN2UzYmNcIixcImNjYzFkOVwiLFwiYjdkZGU4XCIsXCJmYmQ1YjVcIixcImJmYmZiZlwiLFwiM2YzZjNmXCIsXCI5Mzg5NTNcIixcIjU0OGRkNFwiLFwiOTViM2Q3XCIsXCJkOTk2OTRcIixcImMzZDY5YlwiLFwiYjJhMmM3XCIsXCI5MmNkZGNcIixcImZhYzA4ZlwiLFwiYTVhNWE1XCIsXCIyNjI2MjZcIixcIjQ5NDQyOVwiLFwiMTczNjVkXCIsXCIzNjYwOTJcIixcIjk1MzczNFwiLFwiNzY5MjNjXCIsXCI1ZjQ5N2FcIixcIjMxODU5YlwiLFwiZTM2YzA5XCIsXCI3ZjdmN2ZcIixcIjBjMGMwY1wiLFwiMWQxYjEwXCIsXCIwZjI0M2VcIixcIjI0NDA2MVwiLFwiNjMyNDIzXCIsXCI0ZjYxMjhcIixcIjNmMzE1MVwiLFwiMjA1ODY3XCIsXCI5NzQ4MDZcIl0saz1bXCJjMDAwMDBcIixcImZmMDAwMFwiLFwiZmZjMDAwXCIsXCJmZmZmMDBcIixcIjkyZDA1MFwiLFwiMDBiMDUwXCIsXCIwMGIwZjBcIixcIjAwNzBjMFwiLFwiMDAyMDYwXCIsXCI3MDMwYTBcIl0sbD1bW1wiMDAzMzY2XCIsXCIzMzY2OTlcIixcIjMzNjZjY1wiLFwiMDAzMzk5XCIsXCIwMDAwOTlcIixcIjAwMDBjY1wiLFwiMDAwMDY2XCJdLFtcIjAwNjY2NlwiLFwiMDA2Njk5XCIsXCIwMDk5Y2NcIixcIjAwNjZjY1wiLFwiMDAzM2NjXCIsXCIwMDAwZmZcIixcIjMzMzNmZlwiLFwiMzMzMzk5XCJdLFtcIjY2OTk5OVwiLFwiMDA5OTk5XCIsXCIzM2NjY2NcIixcIjAwY2NmZlwiLFwiMDA5OWZmXCIsXCIwMDY2ZmZcIixcIjMzNjZmZlwiLFwiMzMzM2NjXCIsXCI2NjY2OTlcIl0sW1wiMzM5OTY2XCIsXCIwMGNjOTlcIixcIjAwZmZjY1wiLFwiMDBmZmZmXCIsXCIzM2NjZmZcIixcIjMzOTlmZlwiLFwiNjY5OWZmXCIsXCI2NjY2ZmZcIixcIjY2MDBmZlwiLFwiNjYwMGNjXCJdLFtcIjMzOTkzM1wiLFwiMDBjYzY2XCIsXCIwMGZmOTlcIixcIjY2ZmZjY1wiLFwiNjZmZmZmXCIsXCI2NmNjZmZcIixcIjk5Y2NmZlwiLFwiOTk5OWZmXCIsXCI5OTY2ZmZcIixcIjk5MzNmZlwiLFwiOTkwMGZmXCJdLFtcIjAwNjYwMFwiLFwiMDBjYzAwXCIsXCIwMGZmMDBcIixcIjY2ZmY5OVwiLFwiOTlmZmNjXCIsXCJjY2ZmZmZcIixcImNjY2NmZlwiLFwiY2M5OWZmXCIsXCJjYzY2ZmZcIixcImNjMzNmZlwiLFwiY2MwMGZmXCIsXCI5OTAwY2NcIl0sW1wiMDAzMzAwXCIsXCIwMDk5MzNcIixcIjMzY2MzM1wiLFwiNjZmZjY2XCIsXCI5OWZmOTlcIixcImNjZmZjY1wiLFwiZmZmZmZmXCIsXCJmZmNjZmZcIixcImZmOTlmZlwiLFwiZmY2NmZmXCIsXCJmZjAwZmZcIixcImNjMDBjY1wiLFwiNjYwMDY2XCJdLFtcIjMzMzMwMFwiLFwiMDA5OTAwXCIsXCI2NmZmMzNcIixcIjk5ZmY2NlwiLFwiY2NmZjk5XCIsXCJmZmZmY2NcIixcImZmY2NjY1wiLFwiZmY5OWNjXCIsXCJmZjY2Y2NcIixcImZmMzNjY1wiLFwiY2MwMDk5XCIsXCI5OTMzOTlcIl0sW1wiMzM2NjAwXCIsXCI2Njk5MDBcIixcIjk5ZmYzM1wiLFwiY2NmZjY2XCIsXCJmZmZmOTlcIixcImZmY2M5OVwiLFwiZmY5OTk5XCIsXCJmZjY2OTlcIixcImZmMzM5OVwiLFwiY2MzMzk5XCIsXCI5OTAwOTlcIl0sW1wiNjY2NjMzXCIsXCI5OWNjMDBcIixcImNjZmYzM1wiLFwiZmZmZjY2XCIsXCJmZmNjNjZcIixcImZmOTk2NlwiLFwiZmY2NjY2XCIsXCJmZjAwNjZcIixcImQ2MDA5NFwiLFwiOTkzMzY2XCJdLFtcImE1ODgwMFwiLFwiY2NjYzAwXCIsXCJmZmZmMDBcIixcImZmY2MwMFwiLFwiZmY5OTMzXCIsXCJmZjY2MDBcIixcImZmMDAzM1wiLFwiY2MwMDY2XCIsXCI2NjAwMzNcIl0sW1wiOTk2NjMzXCIsXCJjYzk5MDBcIixcImZmOTkwMFwiLFwiY2M2NjAwXCIsXCJmZjMzMDBcIixcImZmMDAwMFwiLFwiY2MwMDAwXCIsXCI5OTAwMzNcIl0sW1wiNjYzMzAwXCIsXCI5OTY2MDBcIixcImNjMzMwMFwiLFwiOTkzMzAwXCIsXCI5OTAwMDBcIixcIjgwMDAwMFwiLFwiOTkzMzMzXCJdXSxtPVwiIzAwMDBmZmZmXCIsbj1mdW5jdGlvbihhKXt2YXIgYj1hLnRvU3RyaW5nKDE2KTtyZXR1cm4gMT09Yi5sZW5ndGgmJihiPVwiMFwiK2IpLGJ9LG89ZnVuY3Rpb24oYSl7cmV0dXJuIG4oTnVtYmVyKGEpKX0scD1mdW5jdGlvbihhKXt2YXIgYj1uKGEpO3JldHVybiBiK2IrYn0scT1mdW5jdGlvbihhKXtpZihhLmxlbmd0aD4xMCl7dmFyIGI9MSthLmluZGV4T2YoXCIoXCIpLGM9YS5pbmRleE9mKFwiKVwiKSxkPWEuc3Vic3RyaW5nKGIsYykuc3BsaXQoXCIsXCIpO3JldHVybltcIiNcIixvKGRbMF0pLG8oZFsxXSksbyhkWzJdKV0uam9pbihcIlwiKX1yZXR1cm4gYX07YS53aWRnZXQoXCJldm9sLmNvbG9ycGlja2VyXCIse3ZlcnNpb246XCIzLjIuMVwiLG9wdGlvbnM6e2NvbG9yOm51bGwsc2hvd09uOlwiYm90aFwiLGhpZGVCdXR0b246ITEsZGlzcGxheUluZGljYXRvcjohMCx0cmFuc3BhcmVudENvbG9yOiExLGhpc3Rvcnk6ITAsZGVmYXVsdFBhbGV0dGU6XCJ0aGVtZVwiLHN0cmluZ3M6XCJUaGVtZSBDb2xvcnMsU3RhbmRhcmQgQ29sb3JzLFdlYiBDb2xvcnMsVGhlbWUgQ29sb3JzLEJhY2sgdG8gUGFsZXR0ZSxIaXN0b3J5LE5vIGhpc3RvcnkgeWV0LlwifSxfYWN0aXZlOiExLF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzO3N3aXRjaCh0aGlzLl9wYWxldHRlSWR4PVwidGhlbWVcIj09dGhpcy5vcHRpb25zLmRlZmF1bHRQYWxldHRlPzE6Mix0aGlzLl9pZD1cImV2by1jcFwiK2MrKyx0aGlzLl9lbmFibGVkPSEwLHRoaXMub3B0aW9ucy5zaG93T249dGhpcy5vcHRpb25zLmhpZGVCdXR0b24/XCJmb2N1c1wiOnRoaXMub3B0aW9ucy5zaG93T24sdGhpcy5lbGVtZW50LmdldCgwKS50YWdOYW1lKXtjYXNlXCJJTlBVVFwiOnZhciBkPXRoaXMub3B0aW9ucy5jb2xvcixoPXRoaXMuZWxlbWVudCxpPShcImZvY3VzXCI9PT10aGlzLm9wdGlvbnMuc2hvd09uP1wiXCI6XCJldm8tcG9pbnRlciBcIikrXCJldm8tY29sb3JpbmRcIisoZz9cIi1mZlwiOmYpKyh0aGlzLm9wdGlvbnMuaGlkZUJ1dHRvbj9cIiBldm8taGlkZGVuLWJ1dHRvblwiOlwiXCIpLGo9XCJcIjtpZih0aGlzLl9pc1BvcHVwPSEwLHRoaXMuX3BhbGV0dGU9bnVsbCxudWxsIT09ZCloLnZhbChkKTtlbHNle3ZhciBrPWgudmFsKCk7XCJcIiE9PWsmJihkPXRoaXMub3B0aW9ucy5jb2xvcj1rKX1kPT09bT9pKz1cIiBldm8tdHJhbnNwYXJlbnRcIjpqPW51bGwhPT1kP1wiYmFja2dyb3VuZC1jb2xvcjpcIitkOlwiXCIsaC5hZGRDbGFzcyhcImNvbG9yUGlja2VyIFwiK3RoaXMuX2lkKS53cmFwKCc8ZGl2IHN0eWxlPVwid2lkdGg6JysodGhpcy5vcHRpb25zLmhpZGVCdXR0b24/dGhpcy5lbGVtZW50LndpZHRoKCk6dGhpcy5lbGVtZW50LndpZHRoKCkrMzIpK1wicHg7XCIrKGU/XCJtYXJnaW4tYm90dG9tOi0yMXB4O1wiOlwiXCIpKyhnP1wicGFkZGluZzoxcHggMDtcIjpcIlwiKSsnXCI+PC9kaXY+JykuYWZ0ZXIoJzxkaXYgY2xhc3M9XCInK2krJ1wiIHN0eWxlPVwiJytqKydcIj48L2Rpdj4nKS5vbihcImtleXVwIG9ucGFzdGVcIixmdW5jdGlvbihjKXt2YXIgZD1hKHRoaXMpLnZhbCgpO2QhPWIub3B0aW9ucy5jb2xvciYmYi5fc2V0VmFsdWUoZCwhMCl9KTt2YXIgbD10aGlzLm9wdGlvbnMuc2hvd09uOyhcImJvdGhcIj09PWx8fFwiZm9jdXNcIj09PWwpJiZoLm9uKFwiZm9jdXNcIixmdW5jdGlvbigpe2Iuc2hvd1BhbGV0dGUoKX0pLChcImJvdGhcIj09PWx8fFwiYnV0dG9uXCI9PT1sKSYmaC5uZXh0KCkub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe3JldHVybiBhLnN0b3BQcm9wYWdhdGlvbigpLGIuc2hvd1BhbGV0dGUoKSwhMX0pO2JyZWFrO2RlZmF1bHQ6dGhpcy5faXNQb3B1cD0hMSx0aGlzLl9wYWxldHRlPXRoaXMuZWxlbWVudC5odG1sKHRoaXMuX3BhbGV0dGVIVE1MKCkpLmF0dHIoXCJhcmlhLWhhc3BvcHVwXCIsXCJ0cnVlXCIpLHRoaXMuX2JpbmRDb2xvcnMoKX1pZih0aGlzLm9wdGlvbnMuaGlzdG9yeSYmKGQmJnRoaXMuX2FkZDJIaXN0b3J5KGQpLHRoaXMub3B0aW9ucy5pbml0aWFsSGlzdG9yeSkpe3ZhciBuPXRoaXMub3B0aW9ucy5pbml0aWFsSGlzdG9yeTtmb3IodmFyIG8gaW4gbil0aGlzLl9hZGQySGlzdG9yeShuW29dKX19LF9wYWxldHRlSFRNTDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX3BhbGV0dGVJZHg9TWF0aC5hYnModGhpcy5fcGFsZXR0ZUlkeCksYj10aGlzLm9wdGlvbnMsYz1iLnN0cmluZ3Muc3BsaXQoXCIsXCIpLGQ9JzxkaXYgY2xhc3M9XCJldm8tcG9wJytmKycgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGxcIicrKHRoaXMuX2lzUG9wdXA/JyBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlXCInOlwiXCIpK1wiPjxzcGFuPlwiK3RoaXNbXCJfcGFsZXR0ZUhUTUxcIithXSgpKyc8L3NwYW4+PGRpdiBjbGFzcz1cImV2by1tb3JlXCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiPicrY1sxK2FdK1wiPC9hPlwiO3JldHVybiBiLmhpc3RvcnkmJihkKz0nPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIGNsYXNzPVwiZXZvLWhpc3RcIj4nK2NbNV0rXCI8L2E+XCIpLGQrPVwiPC9kaXY+XCIsYi5kaXNwbGF5SW5kaWNhdG9yJiYoZCs9dGhpcy5fY29sb3JJbmRIVE1MKHRoaXMub3B0aW9ucy5jb2xvcikrdGhpcy5fY29sb3JJbmRIVE1MKFwiXCIpKSxkKz1cIjwvZGl2PlwifSxfY29sb3JJbmRIVE1MOmZ1bmN0aW9uKGEpe3ZhciBiPWU/XCJldm8tY29sb3Jib3gtaWUgXCI6XCJcIixjPVwiXCI7cmV0dXJuIGE/YT09PW0/Yis9XCJldm8tdHJhbnNwYXJlbnRcIjpjPVwiYmFja2dyb3VuZC1jb2xvcjpcIithOmM9XCJkaXNwbGF5Om5vbmVcIiwnPGRpdiBjbGFzcz1cImV2by1jb2xvclwiIHN0eWxlPVwiZmxvYXQ6bGVmdFwiPjxkaXYgc3R5bGU9XCInK2MrJ1wiIGNsYXNzPVwiJytiKydcIj48L2Rpdj48c3Bhbj4nKyhhP2E6XCJcIikrXCI8L3NwYW4+PC9kaXY+XCJ9LF9wYWxldHRlSFRNTDE6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5vcHRpb25zLGI9YS5zdHJpbmdzLnNwbGl0KFwiLFwiKSxjPSc8dGQgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiMnLGQ9ZT8nXCI+PGRpdiBzdHlsZT1cIndpZHRoOjJweDtcIj48L2Rpdj48L3RkPic6J1wiPjxzcGFuLz48L3RkPicsZz0nPHRyPjx0aCBjb2xzcGFuPVwiMTBcIiBjbGFzcz1cInVpLXdpZGdldC1jb250ZW50XCI+JyxoPSc8dGFibGUgY2xhc3M9XCJldm8tcGFsZXR0ZScrZisnXCI+JytnK2JbMF0rXCI8L3RoPjwvdHI+PHRyPlwiLGw9MDsxMD5sO2wrKyloKz1jK2lbbF0rZDtmb3IoaCs9XCI8L3RyPlwiLGV8fChoKz0nPHRyPjx0aCBjb2xzcGFuPVwiMTBcIj48L3RoPjwvdHI+JyksaCs9Jzx0ciBjbGFzcz1cInRvcFwiPicsbD0wOzEwPmw7bCsrKWgrPWMraltsXStkO2Zvcih2YXIgbT0xOzQ+bTttKyspZm9yKGgrPSc8L3RyPjx0ciBjbGFzcz1cImluXCI+JyxsPTA7MTA+bDtsKyspaCs9YytqWzEwKm0rbF0rZDtmb3IoaCs9JzwvdHI+PHRyIGNsYXNzPVwiYm90dG9tXCI+JyxsPTQwOzUwPmw7bCsrKWgrPWMraltsXStkO2ZvcihoKz1cIjwvdHI+XCIrZyxhLnRyYW5zcGFyZW50Q29sb3ImJihoKz0nPGRpdiBjbGFzcz1cImV2by10cmFuc3BhcmVudCBldm8tdHItYm94XCI+PC9kaXY+JyksaCs9YlsxXStcIjwvdGg+PC90cj48dHI+XCIsbD0wOzEwPmw7bCsrKWgrPWMra1tsXStkO3JldHVybiBoKz1cIjwvdHI+PC90YWJsZT5cIn0sX3BhbGV0dGVIVE1MMjpmdW5jdGlvbigpe2Zvcih2YXIgYSxiLGM9Jzx0ZCBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IycsZD1lPydcIj48ZGl2IHN0eWxlPVwid2lkdGg6NXB4O1wiPjwvZGl2PjwvdGQ+JzonXCI+PHNwYW4vPjwvdGQ+JyxnPSc8dGFibGUgY2xhc3M9XCJldm8tcGFsZXR0ZTInK2YrJ1wiPjx0cj4nLGg9XCI8L3RyPjwvdGFibGU+XCIsaT0nPGRpdiBjbGFzcz1cImV2by1wYWxjZW50ZXJcIj4nLGo9MCxrPWwubGVuZ3RoO2s+ajtqKyspe2krPWc7dmFyIG09bFtqXTtmb3IoYT0wLGI9bS5sZW5ndGg7Yj5hO2ErKylpKz1jK21bYV0rZDtpKz1ofWkrPSc8ZGl2IGNsYXNzPVwiZXZvLXNlcFwiLz4nO3ZhciBuPVwiXCI7Zm9yKGkrPWcsYT0yNTU7YT4xMDthLT0xMClpKz1jK3AoYSkrZCxhLT0xMCxuKz1jK3AoYSkrZDtyZXR1cm4gaSs9aCtnK24raCtcIjwvZGl2PlwifSxfc3dpdGNoUGFsZXR0ZTpmdW5jdGlvbihiKXtpZih0aGlzLl9lbmFibGVkKXt2YXIgYyxkLGUsZj10aGlzLm9wdGlvbnMuc3RyaW5ncy5zcGxpdChcIixcIik7aWYoYShiKS5oYXNDbGFzcyhcImV2by1oaXN0XCIpKXt2YXIgZz1bJzx0YWJsZSBjbGFzcz1cImV2by1wYWxldHRlXCI+PHRyPjx0aCBjbGFzcz1cInVpLXdpZGdldC1jb250ZW50XCI+JyxmWzVdLFwiPC90aD48L3RyPjwvdHI+PC90YWJsZT5cIiwnPGRpdiBjbGFzcz1cImV2by1jSGlzdFwiPiddO2lmKDA9PT1oLmxlbmd0aClnLnB1c2goXCI8cD4mbmJzcDtcIixmWzZdLFwiPC9wPlwiKTtlbHNlIGZvcih2YXIgaT1oLmxlbmd0aC0xO2k+LTE7aS0tKTk9PT1oW2ldLmxlbmd0aD9nLnB1c2goJzxkaXYgY2xhc3M9XCJldm8tdHJhbnNwYXJlbnRcIj48L2Rpdj4nKTpnLnB1c2goJzxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOicsaFtpXSwnXCI+PC9kaXY+Jyk7Zy5wdXNoKFwiPC9kaXY+XCIpLGM9LXRoaXMuX3BhbGV0dGVJZHgsZD1nLmpvaW4oXCJcIiksZT1mWzRdfWVsc2UgdGhpcy5fcGFsZXR0ZUlkeDwwPyhjPS10aGlzLl9wYWxldHRlSWR4LHRoaXMuX3BhbGV0dGUuZmluZChcIi5ldm8taGlzdFwiKS5zaG93KCkpOmM9Mj09dGhpcy5fcGFsZXR0ZUlkeD8xOjIsZD10aGlzW1wiX3BhbGV0dGVIVE1MXCIrY10oKSxlPWZbYysxXSx0aGlzLl9wYWxldHRlSWR4PWM7dGhpcy5fcGFsZXR0ZUlkeD1jO3ZhciBqPXRoaXMuX3BhbGV0dGUuZmluZChcIi5ldm8tbW9yZVwiKS5wcmV2KCkuaHRtbChkKS5lbmQoKS5jaGlsZHJlbigpLmVxKDApLmh0bWwoZSk7MD5jJiZqLm5leHQoKS5oaWRlKCl9fSxfZG93bk9yVXBQb3NpdGlvbmluZzpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmVsZW1lbnQsYj0wO251bGwhPT1hJiYxMDA+Yjspe2lmKFwidmlzaWJsZVwiIT1hLmNzcyhcIm92ZXJmbG93XCIpKXt2YXIgYz10aGlzLl9wYWxldHRlLm9mZnNldCgpLnRvcCt0aGlzLl9wYWxldHRlLmhlaWdodCgpLGQ9YS5vZmZzZXQoKS50b3ArYS5oZWlnaHQoKSxlPXRoaXMuX3BhbGV0dGUub2Zmc2V0KCkudG9wLXRoaXMuX3BhbGV0dGUuaGVpZ2h0KCktdGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCksZj1hLm9mZnNldCgpLnRvcCxnPWM+ZCYmZT5mO2c/dGhpcy5fcGFsZXR0ZS5jc3Moe2JvdHRvbTp0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKStcInB4XCJ9KTp0aGlzLl9wYWxldHRlLmNzcyh7Ym90dG9tOlwiYXV0b1wifSk7YnJlYWt9aWYoXCJIVE1MXCI9PWFbMF0udGFnTmFtZSlicmVhazthPWEub2Zmc2V0UGFyZW50KCksYisrfX0sc2hvd1BhbGV0dGU6ZnVuY3Rpb24oKXtpZih0aGlzLl9lbmFibGVkJiYodGhpcy5fYWN0aXZlPSEwLGEoXCIuY29sb3JQaWNrZXJcIikubm90KFwiLlwiK3RoaXMuX2lkKS5jb2xvcnBpY2tlcihcImhpZGVQYWxldHRlXCIpLG51bGw9PT10aGlzLl9wYWxldHRlKSl7dGhpcy5fcGFsZXR0ZT10aGlzLmVsZW1lbnQubmV4dCgpLmFmdGVyKHRoaXMuX3BhbGV0dGVIVE1MKCkpLm5leHQoKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RvcFByb3BhZ2F0aW9uKCksITF9KSx0aGlzLl9iaW5kQ29sb3JzKCk7dmFyIGI9dGhpczt0aGlzLl9pc1BvcHVwJiYodGhpcy5fZG93bk9yVXBQb3NpdGlvbmluZygpLGEoZG9jdW1lbnQuYm9keSkub24oXCJjbGljay5cIitiLl9pZCxmdW5jdGlvbihhKXthLnRhcmdldCE9Yi5lbGVtZW50LmdldCgwKSYmYi5oaWRlUGFsZXR0ZSgpfSkub24oXCJrZXl1cC5cIitiLl9pZCxmdW5jdGlvbihhKXsyNz09PWEua2V5Q29kZSYmYi5oaWRlUGFsZXR0ZSgpfSkpfXJldHVybiB0aGlzfSxoaWRlUGFsZXR0ZTpmdW5jdGlvbigpe2lmKHRoaXMuX2lzUG9wdXAmJnRoaXMuX3BhbGV0dGUpe2EoZG9jdW1lbnQuYm9keSkub2ZmKFwiY2xpY2suXCIrdGhpcy5faWQpO3ZhciBiPXRoaXM7dGhpcy5fcGFsZXR0ZS5vZmYoXCJtb3VzZW92ZXIgY2xpY2tcIixcInRkLC5ldm8tdHJhbnNwYXJlbnRcIikuZmFkZU91dChmdW5jdGlvbigpe2IuX3BhbGV0dGUucmVtb3ZlKCksYi5fcGFsZXR0ZT1iLl9jVHh0PW51bGx9KS5maW5kKFwiLmV2by1tb3JlIGFcIikub2ZmKFwiY2xpY2tcIil9cmV0dXJuIHRoaXN9LF9iaW5kQ29sb3JzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPXRoaXMub3B0aW9ucyxkPXRoaXMuX3BhbGV0dGUuZmluZChcImRpdi5ldm8tY29sb3JcIiksZT1jLmhpc3Rvcnk/XCJ0ZCwuZXZvLWNIaXN0PmRpdlwiOlwidGRcIjtjLnRyYW5zcGFyZW50Q29sb3ImJihlKz1cIiwuZXZvLXRyYW5zcGFyZW50XCIpLHRoaXMuX2NUeHQxPWQuZXEoMCkuY2hpbGRyZW4oKS5lcSgwKSx0aGlzLl9jVHh0Mj1kLmVxKDEpLmNoaWxkcmVuKCkuZXEoMCksdGhpcy5fcGFsZXR0ZS5vbihcImNsaWNrXCIsZSxmdW5jdGlvbihjKXtpZihiLl9lbmFibGVkKXt2YXIgZD1hKHRoaXMpO2IuX3NldFZhbHVlKGQuaGFzQ2xhc3MoXCJldm8tdHJhbnNwYXJlbnRcIik/bTpxKGQuYXR0cihcInN0eWxlXCIpLnN1YnN0cmluZygxNykpKSxiLl9hY3RpdmU9ITF9fSkub24oXCJtb3VzZW92ZXJcIixlLGZ1bmN0aW9uKGMpe2lmKGIuX2VuYWJsZWQpe3ZhciBkPWEodGhpcyksZT1kLmhhc0NsYXNzKFwiZXZvLXRyYW5zcGFyZW50XCIpP206cShkLmF0dHIoXCJzdHlsZVwiKS5zdWJzdHJpbmcoMTcpKTtiLm9wdGlvbnMuZGlzcGxheUluZGljYXRvciYmYi5fc2V0Q29sb3JJbmQoZSwyKSxiLl9hY3RpdmUmJmIuZWxlbWVudC50cmlnZ2VyKFwibW91c2VvdmVyLmNvbG9yXCIsZSl9fSkuZmluZChcIi5ldm8tbW9yZSBhXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe2IuX3N3aXRjaFBhbGV0dGUodGhpcyl9KX0sdmFsOmZ1bmN0aW9uKGEpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBhP3RoaXMub3B0aW9ucy5jb2xvcjoodGhpcy5fc2V0VmFsdWUoYSksdGhpcyl9LF9zZXRWYWx1ZTpmdW5jdGlvbihhLGIpe2E9YS5yZXBsYWNlKC8gL2csXCJcIiksdGhpcy5vcHRpb25zLmNvbG9yPWEsdGhpcy5faXNQb3B1cD8oYnx8dGhpcy5oaWRlUGFsZXR0ZSgpLHRoaXMuX3NldEJveENvbG9yKHRoaXMuZWxlbWVudC52YWwoYSkubmV4dCgpLGEpKTp0aGlzLl9zZXRDb2xvckluZChhLDEpLHRoaXMub3B0aW9ucy5oaXN0b3J5JiZ0aGlzLl9wYWxldHRlSWR4PjAmJnRoaXMuX2FkZDJIaXN0b3J5KGEpLHRoaXMuZWxlbWVudC50cmlnZ2VyKFwiY2hhbmdlLmNvbG9yXCIsYSl9LF9zZXRDb2xvckluZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbXCJfY1R4dFwiK2JdO3RoaXMuX3NldEJveENvbG9yKGMsYSksYy5uZXh0KCkuaHRtbChhKX0sX3NldEJveENvbG9yOmZ1bmN0aW9uKGEsYil7Yj09PW0/YS5hZGRDbGFzcyhcImV2by10cmFuc3BhcmVudFwiKS5yZW1vdmVBdHRyKFwic3R5bGVcIik6YS5yZW1vdmVDbGFzcyhcImV2by10cmFuc3BhcmVudFwiKS5hdHRyKFwic3R5bGVcIixcImJhY2tncm91bmQtY29sb3I6XCIrYil9LF9zZXRPcHRpb246ZnVuY3Rpb24oYSxiKXtcImNvbG9yXCI9PWE/dGhpcy5fc2V0VmFsdWUoYiwhMCk6dGhpcy5vcHRpb25zW2FdPWJ9LF9hZGQySGlzdG9yeTpmdW5jdGlvbihhKXtmb3IodmFyIGI9aC5sZW5ndGgsYz0wO2I+YztjKyspaWYoYT09aFtjXSlyZXR1cm47Yj4yNyYmaC5zaGlmdCgpLGgucHVzaChhKX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmhpZGVQYWxldHRlKCkudmFsKFwiXCIpfSxlbmFibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnQ7cmV0dXJuIHRoaXMuX2lzUG9wdXA/YS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik6YS5jc3Moe29wYWNpdHk6XCIxXCIsXCJwb2ludGVyLWV2ZW50c1wiOlwiYXV0b1wifSksXCJmb2N1c1wiIT09dGhpcy5vcHRpb25zLnNob3dPbiYmdGhpcy5lbGVtZW50Lm5leHQoKS5hZGRDbGFzcyhcImV2by1wb2ludGVyXCIpLGEucmVtb3ZlQXR0cihcImFyaWEtZGlzYWJsZWRcIiksdGhpcy5fZW5hYmxlZD0hMCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50O3JldHVybiB0aGlzLl9pc1BvcHVwP2EuYXR0cihcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKToodGhpcy5oaWRlUGFsZXR0ZSgpLGEuY3NzKHtvcGFjaXR5OlwiMC4zXCIsXCJwb2ludGVyLWV2ZW50c1wiOlwibm9uZVwifSkpLFwiZm9jdXNcIiE9PXRoaXMub3B0aW9ucy5zaG93T24mJnRoaXMuZWxlbWVudC5uZXh0KCkucmVtb3ZlQ2xhc3MoXCJldm8tcG9pbnRlclwiKSxhLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsXCJ0cnVlXCIpLHRoaXMuX2VuYWJsZWQ9ITEsdGhpc30saXNEaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiF0aGlzLl9lbmFibGVkfSxkZXN0cm95OmZ1bmN0aW9uKCl7YShkb2N1bWVudC5ib2R5KS5vZmYoXCJjbGljay5cIit0aGlzLl9pZCksdGhpcy5fcGFsZXR0ZSYmKHRoaXMuX3BhbGV0dGUub2ZmKFwibW91c2VvdmVyIGNsaWNrXCIsXCJ0ZCwuZXZvLWNIaXN0PmRpdiwuZXZvLXRyYW5zcGFyZW50XCIpLmZpbmQoXCIuZXZvLW1vcmUgYVwiKS5vZmYoXCJjbGlja1wiKSx0aGlzLl9pc1BvcHVwJiZ0aGlzLl9wYWxldHRlLnJlbW92ZSgpLHRoaXMuX3BhbGV0dGU9dGhpcy5fY1R4dD1udWxsKSx0aGlzLl9pc1BvcHVwJiZ0aGlzLmVsZW1lbnQubmV4dCgpLm9mZihcImNsaWNrXCIpLnJlbW92ZSgpLmVuZCgpLm9mZihcImZvY3VzXCIpLnVud3JhcCgpLHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcImNvbG9yUGlja2VyIFwiK3RoaXMuaWQpLmVtcHR5KCksYS5XaWRnZXQucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKX19KX0oalF1ZXJ5KTsiLCIvLyAgICAgSmF2YVNjcmlwdCBFeHByZXNzaW9uIFBhcnNlciAoSlNFUCkgPCU9IHZlcnNpb24gJT5cbi8vICAgICBKU0VQIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXG4vLyAgICAgaHR0cDovL2pzZXAuZnJvbS5zby9cblxuLypnbG9iYWwgbW9kdWxlOiB0cnVlLCBleHBvcnRzOiB0cnVlLCBjb25zb2xlOiB0cnVlICovXG4oZnVuY3Rpb24gKHJvb3QpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHQvLyBOb2RlIFR5cGVzXG5cdC8vIC0tLS0tLS0tLS1cblxuXHQvLyBUaGlzIGlzIHRoZSBmdWxsIHNldCBvZiB0eXBlcyB0aGF0IGFueSBKU0VQIG5vZGUgY2FuIGJlLlxuXHQvLyBTdG9yZSB0aGVtIGhlcmUgdG8gc2F2ZSBzcGFjZSB3aGVuIG1pbmlmaWVkXG5cdHZhciBDT01QT1VORCA9ICdDb21wb3VuZCcsXG5cdFx0SURFTlRJRklFUiA9ICdJZGVudGlmaWVyJyxcblx0XHRNRU1CRVJfRVhQID0gJ01lbWJlckV4cHJlc3Npb24nLFxuXHRcdExJVEVSQUwgPSAnTGl0ZXJhbCcsXG5cdFx0VEhJU19FWFAgPSAnVGhpc0V4cHJlc3Npb24nLFxuXHRcdENBTExfRVhQID0gJ0NhbGxFeHByZXNzaW9uJyxcblx0XHRVTkFSWV9FWFAgPSAnVW5hcnlFeHByZXNzaW9uJyxcblx0XHRCSU5BUllfRVhQID0gJ0JpbmFyeUV4cHJlc3Npb24nLFxuXHRcdExPR0lDQUxfRVhQID0gJ0xvZ2ljYWxFeHByZXNzaW9uJyxcblx0XHRDT05ESVRJT05BTF9FWFAgPSAnQ29uZGl0aW9uYWxFeHByZXNzaW9uJyxcblx0XHRBUlJBWV9FWFAgPSAnQXJyYXlFeHByZXNzaW9uJyxcblxuXHRcdFBFUklPRF9DT0RFID0gNDYsIC8vICcuJ1xuXHRcdENPTU1BX0NPREUgID0gNDQsIC8vICcsJ1xuXHRcdFNRVU9URV9DT0RFID0gMzksIC8vIHNpbmdsZSBxdW90ZVxuXHRcdERRVU9URV9DT0RFID0gMzQsIC8vIGRvdWJsZSBxdW90ZXNcblx0XHRPUEFSRU5fQ09ERSA9IDQwLCAvLyAoXG5cdFx0Q1BBUkVOX0NPREUgPSA0MSwgLy8gKVxuXHRcdE9CUkFDS19DT0RFID0gOTEsIC8vIFtcblx0XHRDQlJBQ0tfQ09ERSA9IDkzLCAvLyBdXG5cdFx0UVVNQVJLX0NPREUgPSA2MywgLy8gP1xuXHRcdFNFTUNPTF9DT0RFID0gNTksIC8vIDtcblx0XHRDT0xPTl9DT0RFICA9IDU4LCAvLyA6XG5cblx0XHR0aHJvd0Vycm9yID0gZnVuY3Rpb24obWVzc2FnZSwgaW5kZXgpIHtcblx0XHRcdHZhciBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlICsgJyBhdCBjaGFyYWN0ZXIgJyArIGluZGV4KTtcblx0XHRcdGVycm9yLmluZGV4ID0gaW5kZXg7XG5cdFx0XHRlcnJvci5kZXNjcmlwdGlvbiA9IG1lc3NhZ2U7XG5cdFx0XHR0aHJvdyBlcnJvcjtcblx0XHR9LFxuXG5cdC8vIE9wZXJhdGlvbnNcblx0Ly8gLS0tLS0tLS0tLVxuXG5cdC8vIFNldCBgdGAgdG8gYHRydWVgIHRvIHNhdmUgc3BhY2UgKHdoZW4gbWluaWZpZWQsIG5vdCBnemlwcGVkKVxuXHRcdHQgPSB0cnVlLFxuXHQvLyBVc2UgYSBxdWlja2x5LWFjY2Vzc2libGUgbWFwIHRvIHN0b3JlIGFsbCBvZiB0aGUgdW5hcnkgb3BlcmF0b3JzXG5cdC8vIFZhbHVlcyBhcmUgc2V0IHRvIGB0cnVlYCAoaXQgcmVhbGx5IGRvZXNuJ3QgbWF0dGVyKVxuXHRcdHVuYXJ5X29wcyA9IHsnLSc6IHQsICchJzogdCwgJ34nOiB0LCAnKyc6IHR9LFxuXHQvLyBBbHNvIHVzZSBhIG1hcCBmb3IgdGhlIGJpbmFyeSBvcGVyYXRpb25zIGJ1dCBzZXQgdGhlaXIgdmFsdWVzIHRvIHRoZWlyXG5cdC8vIGJpbmFyeSBwcmVjZWRlbmNlIGZvciBxdWljayByZWZlcmVuY2U6XG5cdC8vIHNlZSBbT3JkZXIgb2Ygb3BlcmF0aW9uc10oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9PcmRlcl9vZl9vcGVyYXRpb25zI1Byb2dyYW1taW5nX2xhbmd1YWdlKVxuXHRcdGJpbmFyeV9vcHMgPSB7XG5cdFx0XHQnfHwnOiAxLCAnJiYnOiAyLCAnfCc6IDMsICAnXic6IDQsICAnJic6IDUsXG5cdFx0XHQnPT0nOiA2LCAnIT0nOiA2LCAnPT09JzogNiwgJyE9PSc6IDYsXG5cdFx0XHQnPCc6IDcsICAnPic6IDcsICAnPD0nOiA3LCAgJz49JzogNyxcblx0XHRcdCc8PCc6OCwgICc+Pic6IDgsICc+Pj4nOiA4LFxuXHRcdFx0JysnOiA5LCAnLSc6IDksXG5cdFx0XHQnKic6IDEwLCAnLyc6IDEwLCAnJSc6IDEwXG5cdFx0fSxcblx0Ly8gR2V0IHJldHVybiB0aGUgbG9uZ2VzdCBrZXkgbGVuZ3RoIG9mIGFueSBvYmplY3Rcblx0XHRnZXRNYXhLZXlMZW4gPSBmdW5jdGlvbihvYmopIHtcblx0XHRcdHZhciBtYXhfbGVuID0gMCwgbGVuO1xuXHRcdFx0Zm9yKHZhciBrZXkgaW4gb2JqKSB7XG5cdFx0XHRcdGlmKChsZW4gPSBrZXkubGVuZ3RoKSA+IG1heF9sZW4gJiYgb2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0XHRtYXhfbGVuID0gbGVuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF4X2xlbjtcblx0XHR9LFxuXHRcdG1heF91bm9wX2xlbiA9IGdldE1heEtleUxlbih1bmFyeV9vcHMpLFxuXHRcdG1heF9iaW5vcF9sZW4gPSBnZXRNYXhLZXlMZW4oYmluYXJ5X29wcyksXG5cdC8vIExpdGVyYWxzXG5cdC8vIC0tLS0tLS0tLS1cblx0Ly8gU3RvcmUgdGhlIHZhbHVlcyB0byByZXR1cm4gZm9yIHRoZSB2YXJpb3VzIGxpdGVyYWxzIHdlIG1heSBlbmNvdW50ZXJcblx0XHRsaXRlcmFscyA9IHtcblx0XHRcdCd0cnVlJzogdHJ1ZSxcblx0XHRcdCdmYWxzZSc6IGZhbHNlLFxuXHRcdFx0J251bGwnOiBudWxsXG5cdFx0fSxcblx0Ly8gRXhjZXB0IGZvciBgdGhpc2AsIHdoaWNoIGlzIHNwZWNpYWwuIFRoaXMgY291bGQgYmUgY2hhbmdlZCB0byBzb21ldGhpbmcgbGlrZSBgJ3NlbGYnYCBhcyB3ZWxsXG5cdFx0dGhpc19zdHIgPSAndGhpcycsXG5cdC8vIFJldHVybnMgdGhlIHByZWNlZGVuY2Ugb2YgYSBiaW5hcnkgb3BlcmF0b3Igb3IgYDBgIGlmIGl0IGlzbid0IGEgYmluYXJ5IG9wZXJhdG9yXG5cdFx0YmluYXJ5UHJlY2VkZW5jZSA9IGZ1bmN0aW9uKG9wX3ZhbCkge1xuXHRcdFx0cmV0dXJuIGJpbmFyeV9vcHNbb3BfdmFsXSB8fCAwO1xuXHRcdH0sXG5cdC8vIFV0aWxpdHkgZnVuY3Rpb24gKGdldHMgY2FsbGVkIGZyb20gbXVsdGlwbGUgcGxhY2VzKVxuXHQvLyBBbHNvIG5vdGUgdGhhdCBgYSAmJiBiYCBhbmQgYGEgfHwgYmAgYXJlICpsb2dpY2FsKiBleHByZXNzaW9ucywgbm90IGJpbmFyeSBleHByZXNzaW9uc1xuXHRcdGNyZWF0ZUJpbmFyeUV4cHJlc3Npb24gPSBmdW5jdGlvbiAob3BlcmF0b3IsIGxlZnQsIHJpZ2h0KSB7XG5cdFx0XHR2YXIgdHlwZSA9IChvcGVyYXRvciA9PT0gJ3x8JyB8fCBvcGVyYXRvciA9PT0gJyYmJykgPyBMT0dJQ0FMX0VYUCA6IEJJTkFSWV9FWFA7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRvcGVyYXRvcjogb3BlcmF0b3IsXG5cdFx0XHRcdGxlZnQ6IGxlZnQsXG5cdFx0XHRcdHJpZ2h0OiByaWdodFxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdC8vIGBjaGAgaXMgYSBjaGFyYWN0ZXIgY29kZSBpbiB0aGUgbmV4dCB0aHJlZSBmdW5jdGlvbnNcblx0XHRpc0RlY2ltYWxEaWdpdCA9IGZ1bmN0aW9uKGNoKSB7XG5cdFx0XHRyZXR1cm4gKGNoID49IDQ4ICYmIGNoIDw9IDU3KTsgLy8gMC4uLjlcblx0XHR9LFxuXHRcdGlzSWRlbnRpZmllclN0YXJ0ID0gZnVuY3Rpb24oY2gpIHtcblx0XHRcdHJldHVybiAoY2ggPT09IDM2KSB8fCAoY2ggPT09IDk1KSB8fCAvLyBgJGAgYW5kIGBfYFxuXHRcdFx0XHRcdChjaCA+PSA2NSAmJiBjaCA8PSA5MCkgfHwgLy8gQS4uLlpcblx0XHRcdFx0XHQoY2ggPj0gOTcgJiYgY2ggPD0gMTIyKSB8fCAvLyBhLi4uelxuICAgICAgICAgICAgICAgICAgICAoY2ggPj0gMTI4ICYmICFiaW5hcnlfb3BzW1N0cmluZy5mcm9tQ2hhckNvZGUoY2gpXSk7IC8vIGFueSBub24tQVNDSUkgdGhhdCBpcyBub3QgYW4gb3BlcmF0b3Jcblx0XHR9LFxuXHRcdGlzSWRlbnRpZmllclBhcnQgPSBmdW5jdGlvbihjaCkge1xuXHRcdFx0cmV0dXJuIChjaCA9PT0gMzYpIHx8IChjaCA9PT0gOTUpIHx8IC8vIGAkYCBhbmQgYF9gXG5cdFx0XHRcdFx0KGNoID49IDY1ICYmIGNoIDw9IDkwKSB8fCAvLyBBLi4uWlxuXHRcdFx0XHRcdChjaCA+PSA5NyAmJiBjaCA8PSAxMjIpIHx8IC8vIGEuLi56XG5cdFx0XHRcdFx0KGNoID49IDQ4ICYmIGNoIDw9IDU3KSB8fCAvLyAwLi4uOVxuICAgICAgICAgICAgICAgICAgICAoY2ggPj0gMTI4ICYmICFiaW5hcnlfb3BzW1N0cmluZy5mcm9tQ2hhckNvZGUoY2gpXSk7IC8vIGFueSBub24tQVNDSUkgdGhhdCBpcyBub3QgYW4gb3BlcmF0b3Jcblx0XHR9LFxuXG5cdFx0Ly8gUGFyc2luZ1xuXHRcdC8vIC0tLS0tLS1cblx0XHQvLyBgZXhwcmAgaXMgYSBzdHJpbmcgd2l0aCB0aGUgcGFzc2VkIGluIGV4cHJlc3Npb25cblx0XHRqc2VwID0gZnVuY3Rpb24oZXhwcikge1xuXHRcdFx0Ly8gYGluZGV4YCBzdG9yZXMgdGhlIGNoYXJhY3RlciBudW1iZXIgd2UgYXJlIGN1cnJlbnRseSBhdCB3aGlsZSBgbGVuZ3RoYCBpcyBhIGNvbnN0YW50XG5cdFx0XHQvLyBBbGwgb2YgdGhlIGdvYmJsZXMgYmVsb3cgd2lsbCBtb2RpZnkgYGluZGV4YCBhcyB3ZSBtb3ZlIGFsb25nXG5cdFx0XHR2YXIgaW5kZXggPSAwLFxuXHRcdFx0XHRjaGFyQXRGdW5jID0gZXhwci5jaGFyQXQsXG5cdFx0XHRcdGNoYXJDb2RlQXRGdW5jID0gZXhwci5jaGFyQ29kZUF0LFxuXHRcdFx0XHRleHBySSA9IGZ1bmN0aW9uKGkpIHsgcmV0dXJuIGNoYXJBdEZ1bmMuY2FsbChleHByLCBpKTsgfSxcblx0XHRcdFx0ZXhwcklDb2RlID0gZnVuY3Rpb24oaSkgeyByZXR1cm4gY2hhckNvZGVBdEZ1bmMuY2FsbChleHByLCBpKTsgfSxcblx0XHRcdFx0bGVuZ3RoID0gZXhwci5sZW5ndGgsXG5cblx0XHRcdFx0Ly8gUHVzaCBgaW5kZXhgIHVwIHRvIHRoZSBuZXh0IG5vbi1zcGFjZSBjaGFyYWN0ZXJcblx0XHRcdFx0Z29iYmxlU3BhY2VzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIGNoID0gZXhwcklDb2RlKGluZGV4KTtcblx0XHRcdFx0XHQvLyBzcGFjZSBvciB0YWJcblx0XHRcdFx0XHR3aGlsZShjaCA9PT0gMzIgfHwgY2ggPT09IDkgfHwgY2ggPT09IDEwIHx8IGNoID09PSAxMykge1xuXHRcdFx0XHRcdFx0Y2ggPSBleHBySUNvZGUoKytpbmRleCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFRoZSBtYWluIHBhcnNpbmcgZnVuY3Rpb24uIE11Y2ggb2YgdGhpcyBjb2RlIGlzIGRlZGljYXRlZCB0byB0ZXJuYXJ5IGV4cHJlc3Npb25zXG5cdFx0XHRcdGdvYmJsZUV4cHJlc3Npb24gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgdGVzdCA9IGdvYmJsZUJpbmFyeUV4cHJlc3Npb24oKSxcblx0XHRcdFx0XHRcdGNvbnNlcXVlbnQsIGFsdGVybmF0ZTtcblx0XHRcdFx0XHRnb2JibGVTcGFjZXMoKTtcblx0XHRcdFx0XHRpZihleHBySUNvZGUoaW5kZXgpID09PSBRVU1BUktfQ09ERSkge1xuXHRcdFx0XHRcdFx0Ly8gVGVybmFyeSBleHByZXNzaW9uOiB0ZXN0ID8gY29uc2VxdWVudCA6IGFsdGVybmF0ZVxuXHRcdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRcdGNvbnNlcXVlbnQgPSBnb2JibGVFeHByZXNzaW9uKCk7XG5cdFx0XHRcdFx0XHRpZighY29uc2VxdWVudCkge1xuXHRcdFx0XHRcdFx0XHR0aHJvd0Vycm9yKCdFeHBlY3RlZCBleHByZXNzaW9uJywgaW5kZXgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Z29iYmxlU3BhY2VzKCk7XG5cdFx0XHRcdFx0XHRpZihleHBySUNvZGUoaW5kZXgpID09PSBDT0xPTl9DT0RFKSB7XG5cdFx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0XHRcdGFsdGVybmF0ZSA9IGdvYmJsZUV4cHJlc3Npb24oKTtcblx0XHRcdFx0XHRcdFx0aWYoIWFsdGVybmF0ZSkge1xuXHRcdFx0XHRcdFx0XHRcdHRocm93RXJyb3IoJ0V4cGVjdGVkIGV4cHJlc3Npb24nLCBpbmRleCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBDT05ESVRJT05BTF9FWFAsXG5cdFx0XHRcdFx0XHRcdFx0dGVzdDogdGVzdCxcblx0XHRcdFx0XHRcdFx0XHRjb25zZXF1ZW50OiBjb25zZXF1ZW50LFxuXHRcdFx0XHRcdFx0XHRcdGFsdGVybmF0ZTogYWx0ZXJuYXRlXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0aHJvd0Vycm9yKCdFeHBlY3RlZCA6JywgaW5kZXgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGVzdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gU2VhcmNoIGZvciB0aGUgb3BlcmF0aW9uIHBvcnRpb24gb2YgdGhlIHN0cmluZyAoZS5nLiBgK2AsIGA9PT1gKVxuXHRcdFx0XHQvLyBTdGFydCBieSB0YWtpbmcgdGhlIGxvbmdlc3QgcG9zc2libGUgYmluYXJ5IG9wZXJhdGlvbnMgKDMgY2hhcmFjdGVyczogYD09PWAsIGAhPT1gLCBgPj4+YClcblx0XHRcdFx0Ly8gYW5kIG1vdmUgZG93biBmcm9tIDMgdG8gMiB0byAxIGNoYXJhY3RlciB1bnRpbCBhIG1hdGNoaW5nIGJpbmFyeSBvcGVyYXRpb24gaXMgZm91bmRcblx0XHRcdFx0Ly8gdGhlbiwgcmV0dXJuIHRoYXQgYmluYXJ5IG9wZXJhdGlvblxuXHRcdFx0XHRnb2JibGVCaW5hcnlPcCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGdvYmJsZVNwYWNlcygpO1xuXHRcdFx0XHRcdHZhciBiaW9wLCB0b19jaGVjayA9IGV4cHIuc3Vic3RyKGluZGV4LCBtYXhfYmlub3BfbGVuKSwgdGNfbGVuID0gdG9fY2hlY2subGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlKHRjX2xlbiA+IDApIHtcblx0XHRcdFx0XHRcdGlmKGJpbmFyeV9vcHMuaGFzT3duUHJvcGVydHkodG9fY2hlY2spKSB7XG5cdFx0XHRcdFx0XHRcdGluZGV4ICs9IHRjX2xlbjtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRvX2NoZWNrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dG9fY2hlY2sgPSB0b19jaGVjay5zdWJzdHIoMCwgLS10Y19sZW4pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gVGhpcyBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgZ29iYmxpbmcgYW4gaW5kaXZpZHVhbCBleHByZXNzaW9uLFxuXHRcdFx0XHQvLyBlLmcuIGAxYCwgYDErMmAsIGBhKyhiKjIpLU1hdGguc3FydCgyKWBcblx0XHRcdFx0Z29iYmxlQmluYXJ5RXhwcmVzc2lvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBjaF9pLCBub2RlLCBiaW9wLCBwcmVjLCBzdGFjaywgYmlvcF9pbmZvLCBsZWZ0LCByaWdodCwgaTtcblxuXHRcdFx0XHRcdC8vIEZpcnN0LCB0cnkgdG8gZ2V0IHRoZSBsZWZ0bW9zdCB0aGluZ1xuXHRcdFx0XHRcdC8vIFRoZW4sIGNoZWNrIHRvIHNlZSBpZiB0aGVyZSdzIGEgYmluYXJ5IG9wZXJhdG9yIG9wZXJhdGluZyBvbiB0aGF0IGxlZnRtb3N0IHRoaW5nXG5cdFx0XHRcdFx0bGVmdCA9IGdvYmJsZVRva2VuKCk7XG5cdFx0XHRcdFx0YmlvcCA9IGdvYmJsZUJpbmFyeU9wKCk7XG5cblx0XHRcdFx0XHQvLyBJZiB0aGVyZSB3YXNuJ3QgYSBiaW5hcnkgb3BlcmF0b3IsIGp1c3QgcmV0dXJuIHRoZSBsZWZ0bW9zdCBub2RlXG5cdFx0XHRcdFx0aWYoIWJpb3ApIHtcblx0XHRcdFx0XHRcdHJldHVybiBsZWZ0O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgd2UgbmVlZCB0byBzdGFydCBhIHN0YWNrIHRvIHByb3Blcmx5IHBsYWNlIHRoZSBiaW5hcnkgb3BlcmF0aW9ucyBpbiB0aGVpclxuXHRcdFx0XHRcdC8vIHByZWNlZGVuY2Ugc3RydWN0dXJlXG5cdFx0XHRcdFx0YmlvcF9pbmZvID0geyB2YWx1ZTogYmlvcCwgcHJlYzogYmluYXJ5UHJlY2VkZW5jZShiaW9wKX07XG5cblx0XHRcdFx0XHRyaWdodCA9IGdvYmJsZVRva2VuKCk7XG5cdFx0XHRcdFx0aWYoIXJpZ2h0KSB7XG5cdFx0XHRcdFx0XHR0aHJvd0Vycm9yKFwiRXhwZWN0ZWQgZXhwcmVzc2lvbiBhZnRlciBcIiArIGJpb3AsIGluZGV4KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c3RhY2sgPSBbbGVmdCwgYmlvcF9pbmZvLCByaWdodF07XG5cblx0XHRcdFx0XHQvLyBQcm9wZXJseSBkZWFsIHdpdGggcHJlY2VkZW5jZSB1c2luZyBbcmVjdXJzaXZlIGRlc2NlbnRdKGh0dHA6Ly93d3cuZW5nci5tdW4uY2EvfnRoZW8vTWlzYy9leHBfcGFyc2luZy5odG0pXG5cdFx0XHRcdFx0d2hpbGUoKGJpb3AgPSBnb2JibGVCaW5hcnlPcCgpKSkge1xuXHRcdFx0XHRcdFx0cHJlYyA9IGJpbmFyeVByZWNlZGVuY2UoYmlvcCk7XG5cblx0XHRcdFx0XHRcdGlmKHByZWMgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRiaW9wX2luZm8gPSB7IHZhbHVlOiBiaW9wLCBwcmVjOiBwcmVjIH07XG5cblx0XHRcdFx0XHRcdC8vIFJlZHVjZTogbWFrZSBhIGJpbmFyeSBleHByZXNzaW9uIGZyb20gdGhlIHRocmVlIHRvcG1vc3QgZW50cmllcy5cblx0XHRcdFx0XHRcdHdoaWxlICgoc3RhY2subGVuZ3RoID4gMikgJiYgKHByZWMgPD0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMl0ucHJlYykpIHtcblx0XHRcdFx0XHRcdFx0cmlnaHQgPSBzdGFjay5wb3AoKTtcblx0XHRcdFx0XHRcdFx0YmlvcCA9IHN0YWNrLnBvcCgpLnZhbHVlO1xuXHRcdFx0XHRcdFx0XHRsZWZ0ID0gc3RhY2sucG9wKCk7XG5cdFx0XHRcdFx0XHRcdG5vZGUgPSBjcmVhdGVCaW5hcnlFeHByZXNzaW9uKGJpb3AsIGxlZnQsIHJpZ2h0KTtcblx0XHRcdFx0XHRcdFx0c3RhY2sucHVzaChub2RlKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0bm9kZSA9IGdvYmJsZVRva2VuKCk7XG5cdFx0XHRcdFx0XHRpZighbm9kZSkge1xuXHRcdFx0XHRcdFx0XHR0aHJvd0Vycm9yKFwiRXhwZWN0ZWQgZXhwcmVzc2lvbiBhZnRlciBcIiArIGJpb3AsIGluZGV4KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHN0YWNrLnB1c2goYmlvcF9pbmZvLCBub2RlKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpID0gc3RhY2subGVuZ3RoIC0gMTtcblx0XHRcdFx0XHRub2RlID0gc3RhY2tbaV07XG5cdFx0XHRcdFx0d2hpbGUoaSA+IDEpIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBjcmVhdGVCaW5hcnlFeHByZXNzaW9uKHN0YWNrW2kgLSAxXS52YWx1ZSwgc3RhY2tbaSAtIDJdLCBub2RlKTtcblx0XHRcdFx0XHRcdGkgLT0gMjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIG5vZGU7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gQW4gaW5kaXZpZHVhbCBwYXJ0IG9mIGEgYmluYXJ5IGV4cHJlc3Npb246XG5cdFx0XHRcdC8vIGUuZy4gYGZvby5iYXIoYmF6KWAsIGAxYCwgYFwiYWJjXCJgLCBgKGEgJSAyKWAgKGJlY2F1c2UgaXQncyBpbiBwYXJlbnRoZXNpcylcblx0XHRcdFx0Z29iYmxlVG9rZW4gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgY2gsIHRvX2NoZWNrLCB0Y19sZW47XG5cblx0XHRcdFx0XHRnb2JibGVTcGFjZXMoKTtcblx0XHRcdFx0XHRjaCA9IGV4cHJJQ29kZShpbmRleCk7XG5cblx0XHRcdFx0XHRpZihpc0RlY2ltYWxEaWdpdChjaCkgfHwgY2ggPT09IFBFUklPRF9DT0RFKSB7XG5cdFx0XHRcdFx0XHQvLyBDaGFyIGNvZGUgNDYgaXMgYSBkb3QgYC5gIHdoaWNoIGNhbiBzdGFydCBvZmYgYSBudW1lcmljIGxpdGVyYWxcblx0XHRcdFx0XHRcdHJldHVybiBnb2JibGVOdW1lcmljTGl0ZXJhbCgpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZihjaCA9PT0gU1FVT1RFX0NPREUgfHwgY2ggPT09IERRVU9URV9DT0RFKSB7XG5cdFx0XHRcdFx0XHQvLyBTaW5nbGUgb3IgZG91YmxlIHF1b3Rlc1xuXHRcdFx0XHRcdFx0cmV0dXJuIGdvYmJsZVN0cmluZ0xpdGVyYWwoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYoaXNJZGVudGlmaWVyU3RhcnQoY2gpIHx8IGNoID09PSBPUEFSRU5fQ09ERSkgeyAvLyBvcGVuIHBhcmVudGhlc2lzXG5cdFx0XHRcdFx0XHQvLyBgZm9vYCwgYGJhci5iYXpgXG5cdFx0XHRcdFx0XHRyZXR1cm4gZ29iYmxlVmFyaWFibGUoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGNoID09PSBPQlJBQ0tfQ09ERSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGdvYmJsZUFycmF5KCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRvX2NoZWNrID0gZXhwci5zdWJzdHIoaW5kZXgsIG1heF91bm9wX2xlbik7XG5cdFx0XHRcdFx0XHR0Y19sZW4gPSB0b19jaGVjay5sZW5ndGg7XG5cdFx0XHRcdFx0XHR3aGlsZSh0Y19sZW4gPiAwKSB7XG5cdFx0XHRcdFx0XHRcdGlmKHVuYXJ5X29wcy5oYXNPd25Qcm9wZXJ0eSh0b19jaGVjaykpIHtcblx0XHRcdFx0XHRcdFx0XHRpbmRleCArPSB0Y19sZW47XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFVOQVJZX0VYUCxcblx0XHRcdFx0XHRcdFx0XHRcdG9wZXJhdG9yOiB0b19jaGVjayxcblx0XHRcdFx0XHRcdFx0XHRcdGFyZ3VtZW50OiBnb2JibGVUb2tlbigpLFxuXHRcdFx0XHRcdFx0XHRcdFx0cHJlZml4OiB0cnVlXG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0b19jaGVjayA9IHRvX2NoZWNrLnN1YnN0cigwLCAtLXRjX2xlbik7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdC8vIFBhcnNlIHNpbXBsZSBudW1lcmljIGxpdGVyYWxzOiBgMTJgLCBgMy40YCwgYC41YC4gRG8gdGhpcyBieSB1c2luZyBhIHN0cmluZyB0b1xuXHRcdFx0XHQvLyBrZWVwIHRyYWNrIG9mIGV2ZXJ5dGhpbmcgaW4gdGhlIG51bWVyaWMgbGl0ZXJhbCBhbmQgdGhlbiBjYWxsaW5nIGBwYXJzZUZsb2F0YCBvbiB0aGF0IHN0cmluZ1xuXHRcdFx0XHRnb2JibGVOdW1lcmljTGl0ZXJhbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBudW1iZXIgPSAnJywgY2gsIGNoQ29kZTtcblx0XHRcdFx0XHR3aGlsZShpc0RlY2ltYWxEaWdpdChleHBySUNvZGUoaW5kZXgpKSkge1xuXHRcdFx0XHRcdFx0bnVtYmVyICs9IGV4cHJJKGluZGV4KyspO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmKGV4cHJJQ29kZShpbmRleCkgPT09IFBFUklPRF9DT0RFKSB7IC8vIGNhbiBzdGFydCB3aXRoIGEgZGVjaW1hbCBtYXJrZXJcblx0XHRcdFx0XHRcdG51bWJlciArPSBleHBySShpbmRleCsrKTtcblxuXHRcdFx0XHRcdFx0d2hpbGUoaXNEZWNpbWFsRGlnaXQoZXhwcklDb2RlKGluZGV4KSkpIHtcblx0XHRcdFx0XHRcdFx0bnVtYmVyICs9IGV4cHJJKGluZGV4KyspO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNoID0gZXhwckkoaW5kZXgpO1xuXHRcdFx0XHRcdGlmKGNoID09PSAnZScgfHwgY2ggPT09ICdFJykgeyAvLyBleHBvbmVudCBtYXJrZXJcblx0XHRcdFx0XHRcdG51bWJlciArPSBleHBySShpbmRleCsrKTtcblx0XHRcdFx0XHRcdGNoID0gZXhwckkoaW5kZXgpO1xuXHRcdFx0XHRcdFx0aWYoY2ggPT09ICcrJyB8fCBjaCA9PT0gJy0nKSB7IC8vIGV4cG9uZW50IHNpZ25cblx0XHRcdFx0XHRcdFx0bnVtYmVyICs9IGV4cHJJKGluZGV4KyspO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0d2hpbGUoaXNEZWNpbWFsRGlnaXQoZXhwcklDb2RlKGluZGV4KSkpIHsgLy9leHBvbmVudCBpdHNlbGZcblx0XHRcdFx0XHRcdFx0bnVtYmVyICs9IGV4cHJJKGluZGV4KyspO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYoIWlzRGVjaW1hbERpZ2l0KGV4cHJJQ29kZShpbmRleC0xKSkgKSB7XG5cdFx0XHRcdFx0XHRcdHRocm93RXJyb3IoJ0V4cGVjdGVkIGV4cG9uZW50ICgnICsgbnVtYmVyICsgZXhwckkoaW5kZXgpICsgJyknLCBpbmRleCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cblx0XHRcdFx0XHRjaENvZGUgPSBleHBySUNvZGUoaW5kZXgpO1xuXHRcdFx0XHRcdC8vIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGlzIGlzbid0IGEgdmFyaWFibGUgbmFtZSB0aGF0IHN0YXJ0IHdpdGggYSBudW1iZXIgKDEyM2FiYylcblx0XHRcdFx0XHRpZihpc0lkZW50aWZpZXJTdGFydChjaENvZGUpKSB7XG5cdFx0XHRcdFx0XHR0aHJvd0Vycm9yKCdWYXJpYWJsZSBuYW1lcyBjYW5ub3Qgc3RhcnQgd2l0aCBhIG51bWJlciAoJyArXG5cdFx0XHRcdFx0XHRcdFx0XHRudW1iZXIgKyBleHBySShpbmRleCkgKyAnKScsIGluZGV4KTtcblx0XHRcdFx0XHR9IGVsc2UgaWYoY2hDb2RlID09PSBQRVJJT0RfQ09ERSkge1xuXHRcdFx0XHRcdFx0dGhyb3dFcnJvcignVW5leHBlY3RlZCBwZXJpb2QnLCBpbmRleCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdHR5cGU6IExJVEVSQUwsXG5cdFx0XHRcdFx0XHR2YWx1ZTogcGFyc2VGbG9hdChudW1iZXIpLFxuXHRcdFx0XHRcdFx0cmF3OiBudW1iZXJcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFBhcnNlcyBhIHN0cmluZyBsaXRlcmFsLCBzdGFyaW5nIHdpdGggc2luZ2xlIG9yIGRvdWJsZSBxdW90ZXMgd2l0aCBiYXNpYyBzdXBwb3J0IGZvciBlc2NhcGUgY29kZXNcblx0XHRcdFx0Ly8gZS5nLiBgXCJoZWxsbyB3b3JsZFwiYCwgYCd0aGlzIGlzXFxuSlNFUCdgXG5cdFx0XHRcdGdvYmJsZVN0cmluZ0xpdGVyYWwgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgc3RyID0gJycsIHF1b3RlID0gZXhwckkoaW5kZXgrKyksIGNsb3NlZCA9IGZhbHNlLCBjaDtcblxuXHRcdFx0XHRcdHdoaWxlKGluZGV4IDwgbGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRjaCA9IGV4cHJJKGluZGV4KyspO1xuXHRcdFx0XHRcdFx0aWYoY2ggPT09IHF1b3RlKSB7XG5cdFx0XHRcdFx0XHRcdGNsb3NlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKGNoID09PSAnXFxcXCcpIHtcblx0XHRcdFx0XHRcdFx0Ly8gQ2hlY2sgZm9yIGFsbCBvZiB0aGUgY29tbW9uIGVzY2FwZSBjb2Rlc1xuXHRcdFx0XHRcdFx0XHRjaCA9IGV4cHJJKGluZGV4KyspO1xuXHRcdFx0XHRcdFx0XHRzd2l0Y2goY2gpIHtcblx0XHRcdFx0XHRcdFx0XHRjYXNlICduJzogc3RyICs9ICdcXG4nOyBicmVhaztcblx0XHRcdFx0XHRcdFx0XHRjYXNlICdyJzogc3RyICs9ICdcXHInOyBicmVhaztcblx0XHRcdFx0XHRcdFx0XHRjYXNlICd0Jzogc3RyICs9ICdcXHQnOyBicmVhaztcblx0XHRcdFx0XHRcdFx0XHRjYXNlICdiJzogc3RyICs9ICdcXGInOyBicmVhaztcblx0XHRcdFx0XHRcdFx0XHRjYXNlICdmJzogc3RyICs9ICdcXGYnOyBicmVhaztcblx0XHRcdFx0XHRcdFx0XHRjYXNlICd2Jzogc3RyICs9ICdcXHgwQic7IGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGRlZmF1bHQgOiBzdHIgKz0gJ1xcXFwnICsgY2g7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHN0ciArPSBjaDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZighY2xvc2VkKSB7XG5cdFx0XHRcdFx0XHR0aHJvd0Vycm9yKCdVbmNsb3NlZCBxdW90ZSBhZnRlciBcIicrc3RyKydcIicsIGluZGV4KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0dHlwZTogTElURVJBTCxcblx0XHRcdFx0XHRcdHZhbHVlOiBzdHIsXG5cdFx0XHRcdFx0XHRyYXc6IHF1b3RlICsgc3RyICsgcXVvdGVcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIEdvYmJsZXMgb25seSBpZGVudGlmaWVyc1xuXHRcdFx0XHQvLyBlLmcuOiBgZm9vYCwgYF92YWx1ZWAsIGAkeDFgXG5cdFx0XHRcdC8vIEFsc28sIHRoaXMgZnVuY3Rpb24gY2hlY2tzIGlmIHRoYXQgaWRlbnRpZmllciBpcyBhIGxpdGVyYWw6XG5cdFx0XHRcdC8vIChlLmcuIGB0cnVlYCwgYGZhbHNlYCwgYG51bGxgKSBvciBgdGhpc2Bcblx0XHRcdFx0Z29iYmxlSWRlbnRpZmllciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBjaCA9IGV4cHJJQ29kZShpbmRleCksIHN0YXJ0ID0gaW5kZXgsIGlkZW50aWZpZXI7XG5cblx0XHRcdFx0XHRpZihpc0lkZW50aWZpZXJTdGFydChjaCkpIHtcblx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRocm93RXJyb3IoJ1VuZXhwZWN0ZWQgJyArIGV4cHJJKGluZGV4KSwgaW5kZXgpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHdoaWxlKGluZGV4IDwgbGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRjaCA9IGV4cHJJQ29kZShpbmRleCk7XG5cdFx0XHRcdFx0XHRpZihpc0lkZW50aWZpZXJQYXJ0KGNoKSkge1xuXHRcdFx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlkZW50aWZpZXIgPSBleHByLnNsaWNlKHN0YXJ0LCBpbmRleCk7XG5cblx0XHRcdFx0XHRpZihsaXRlcmFscy5oYXNPd25Qcm9wZXJ0eShpZGVudGlmaWVyKSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0dHlwZTogTElURVJBTCxcblx0XHRcdFx0XHRcdFx0dmFsdWU6IGxpdGVyYWxzW2lkZW50aWZpZXJdLFxuXHRcdFx0XHRcdFx0XHRyYXc6IGlkZW50aWZpZXJcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSBlbHNlIGlmKGlkZW50aWZpZXIgPT09IHRoaXNfc3RyKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4geyB0eXBlOiBUSElTX0VYUCB9O1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBJREVOVElGSUVSLFxuXHRcdFx0XHRcdFx0XHRuYW1lOiBpZGVudGlmaWVyXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBHb2JibGVzIGEgbGlzdCBvZiBhcmd1bWVudHMgd2l0aGluIHRoZSBjb250ZXh0IG9mIGEgZnVuY3Rpb24gY2FsbFxuXHRcdFx0XHQvLyBvciBhcnJheSBsaXRlcmFsLiBUaGlzIGZ1bmN0aW9uIGFsc28gYXNzdW1lcyB0aGF0IHRoZSBvcGVuaW5nIGNoYXJhY3RlclxuXHRcdFx0XHQvLyBgKGAgb3IgYFtgIGhhcyBhbHJlYWR5IGJlZW4gZ29iYmxlZCwgYW5kIGdvYmJsZXMgZXhwcmVzc2lvbnMgYW5kIGNvbW1hc1xuXHRcdFx0XHQvLyB1bnRpbCB0aGUgdGVybWluYXRvciBjaGFyYWN0ZXIgYClgIG9yIGBdYCBpcyBlbmNvdW50ZXJlZC5cblx0XHRcdFx0Ly8gZS5nLiBgZm9vKGJhciwgYmF6KWAsIGBteV9mdW5jKClgLCBvciBgW2JhciwgYmF6XWBcblx0XHRcdFx0Z29iYmxlQXJndW1lbnRzID0gZnVuY3Rpb24odGVybWluYXRpb24pIHtcblx0XHRcdFx0XHR2YXIgY2hfaSwgYXJncyA9IFtdLCBub2RlLCBjbG9zZWQgPSBmYWxzZTtcblx0XHRcdFx0XHR3aGlsZShpbmRleCA8IGxlbmd0aCkge1xuXHRcdFx0XHRcdFx0Z29iYmxlU3BhY2VzKCk7XG5cdFx0XHRcdFx0XHRjaF9pID0gZXhwcklDb2RlKGluZGV4KTtcblx0XHRcdFx0XHRcdGlmKGNoX2kgPT09IHRlcm1pbmF0aW9uKSB7IC8vIGRvbmUgcGFyc2luZ1xuXHRcdFx0XHRcdFx0XHRjbG9zZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoY2hfaSA9PT0gQ09NTUFfQ09ERSkgeyAvLyBiZXR3ZWVuIGV4cHJlc3Npb25zXG5cdFx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRub2RlID0gZ29iYmxlRXhwcmVzc2lvbigpO1xuXHRcdFx0XHRcdFx0XHRpZighbm9kZSB8fCBub2RlLnR5cGUgPT09IENPTVBPVU5EKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhyb3dFcnJvcignRXhwZWN0ZWQgY29tbWEnLCBpbmRleCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0YXJncy5wdXNoKG5vZGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIWNsb3NlZCkge1xuXHRcdFx0XHRcdFx0dGhyb3dFcnJvcignRXhwZWN0ZWQgJyArIFN0cmluZy5mcm9tQ2hhckNvZGUodGVybWluYXRpb24pLCBpbmRleCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBhcmdzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIEdvYmJsZSBhIG5vbi1saXRlcmFsIHZhcmlhYmxlIG5hbWUuIFRoaXMgdmFyaWFibGUgbmFtZSBtYXkgaW5jbHVkZSBwcm9wZXJ0aWVzXG5cdFx0XHRcdC8vIGUuZy4gYGZvb2AsIGBiYXIuYmF6YCwgYGZvb1snYmFyJ10uYmF6YFxuXHRcdFx0XHQvLyBJdCBhbHNvIGdvYmJsZXMgZnVuY3Rpb24gY2FsbHM6XG5cdFx0XHRcdC8vIGUuZy4gYE1hdGguYWNvcyhvYmouYW5nbGUpYFxuXHRcdFx0XHRnb2JibGVWYXJpYWJsZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBjaF9pLCBub2RlO1xuXHRcdFx0XHRcdGNoX2kgPSBleHBySUNvZGUoaW5kZXgpO1xuXG5cdFx0XHRcdFx0aWYoY2hfaSA9PT0gT1BBUkVOX0NPREUpIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBnb2JibGVHcm91cCgpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRub2RlID0gZ29iYmxlSWRlbnRpZmllcigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRnb2JibGVTcGFjZXMoKTtcblx0XHRcdFx0XHRjaF9pID0gZXhwcklDb2RlKGluZGV4KTtcblx0XHRcdFx0XHR3aGlsZShjaF9pID09PSBQRVJJT0RfQ09ERSB8fCBjaF9pID09PSBPQlJBQ0tfQ09ERSB8fCBjaF9pID09PSBPUEFSRU5fQ09ERSkge1xuXHRcdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRcdGlmKGNoX2kgPT09IFBFUklPRF9DT0RFKSB7XG5cdFx0XHRcdFx0XHRcdGdvYmJsZVNwYWNlcygpO1xuXHRcdFx0XHRcdFx0XHRub2RlID0ge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IE1FTUJFUl9FWFAsXG5cdFx0XHRcdFx0XHRcdFx0Y29tcHV0ZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdG9iamVjdDogbm9kZSxcblx0XHRcdFx0XHRcdFx0XHRwcm9wZXJ0eTogZ29iYmxlSWRlbnRpZmllcigpXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoY2hfaSA9PT0gT0JSQUNLX0NPREUpIHtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBNRU1CRVJfRVhQLFxuXHRcdFx0XHRcdFx0XHRcdGNvbXB1dGVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdG9iamVjdDogbm9kZSxcblx0XHRcdFx0XHRcdFx0XHRwcm9wZXJ0eTogZ29iYmxlRXhwcmVzc2lvbigpXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdGdvYmJsZVNwYWNlcygpO1xuXHRcdFx0XHRcdFx0XHRjaF9pID0gZXhwcklDb2RlKGluZGV4KTtcblx0XHRcdFx0XHRcdFx0aWYoY2hfaSAhPT0gQ0JSQUNLX0NPREUpIHtcblx0XHRcdFx0XHRcdFx0XHR0aHJvd0Vycm9yKCdVbmNsb3NlZCBbJywgaW5kZXgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoY2hfaSA9PT0gT1BBUkVOX0NPREUpIHtcblx0XHRcdFx0XHRcdFx0Ly8gQSBmdW5jdGlvbiBjYWxsIGlzIGJlaW5nIG1hZGU7IGdvYmJsZSBhbGwgdGhlIGFyZ3VtZW50c1xuXHRcdFx0XHRcdFx0XHRub2RlID0ge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IENBTExfRVhQLFxuXHRcdFx0XHRcdFx0XHRcdCdhcmd1bWVudHMnOiBnb2JibGVBcmd1bWVudHMoQ1BBUkVOX0NPREUpLFxuXHRcdFx0XHRcdFx0XHRcdGNhbGxlZTogbm9kZVxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Z29iYmxlU3BhY2VzKCk7XG5cdFx0XHRcdFx0XHRjaF9pID0gZXhwcklDb2RlKGluZGV4KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIG5vZGU7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gUmVzcG9uc2libGUgZm9yIHBhcnNpbmcgYSBncm91cCBvZiB0aGluZ3Mgd2l0aGluIHBhcmVudGhlc2VzIGAoKWBcblx0XHRcdFx0Ly8gVGhpcyBmdW5jdGlvbiBhc3N1bWVzIHRoYXQgaXQgbmVlZHMgdG8gZ29iYmxlIHRoZSBvcGVuaW5nIHBhcmVudGhlc2lzXG5cdFx0XHRcdC8vIGFuZCB0aGVuIHRyaWVzIHRvIGdvYmJsZSBldmVyeXRoaW5nIHdpdGhpbiB0aGF0IHBhcmVudGhlc2lzLCBhc3N1bWluZ1xuXHRcdFx0XHQvLyB0aGF0IHRoZSBuZXh0IHRoaW5nIGl0IHNob3VsZCBzZWUgaXMgdGhlIGNsb3NlIHBhcmVudGhlc2lzLiBJZiBub3QsXG5cdFx0XHRcdC8vIHRoZW4gdGhlIGV4cHJlc3Npb24gcHJvYmFibHkgZG9lc24ndCBoYXZlIGEgYClgXG5cdFx0XHRcdGdvYmJsZUdyb3VwID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHR2YXIgbm9kZSA9IGdvYmJsZUV4cHJlc3Npb24oKTtcblx0XHRcdFx0XHRnb2JibGVTcGFjZXMoKTtcblx0XHRcdFx0XHRpZihleHBySUNvZGUoaW5kZXgpID09PSBDUEFSRU5fQ09ERSkge1xuXHRcdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRcdHJldHVybiBub2RlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aHJvd0Vycm9yKCdVbmNsb3NlZCAoJywgaW5kZXgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBSZXNwb25zaWJsZSBmb3IgcGFyc2luZyBBcnJheSBsaXRlcmFscyBgWzEsIDIsIDNdYFxuXHRcdFx0XHQvLyBUaGlzIGZ1bmN0aW9uIGFzc3VtZXMgdGhhdCBpdCBuZWVkcyB0byBnb2JibGUgdGhlIG9wZW5pbmcgYnJhY2tldFxuXHRcdFx0XHQvLyBhbmQgdGhlbiB0cmllcyB0byBnb2JibGUgdGhlIGV4cHJlc3Npb25zIGFzIGFyZ3VtZW50cy5cblx0XHRcdFx0Z29iYmxlQXJyYXkgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBBUlJBWV9FWFAsXG5cdFx0XHRcdFx0XHRlbGVtZW50czogZ29iYmxlQXJndW1lbnRzKENCUkFDS19DT0RFKVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0bm9kZXMgPSBbXSwgY2hfaSwgbm9kZTtcblxuXHRcdFx0d2hpbGUoaW5kZXggPCBsZW5ndGgpIHtcblx0XHRcdFx0Y2hfaSA9IGV4cHJJQ29kZShpbmRleCk7XG5cblx0XHRcdFx0Ly8gRXhwcmVzc2lvbnMgY2FuIGJlIHNlcGFyYXRlZCBieSBzZW1pY29sb25zLCBjb21tYXMsIG9yIGp1c3QgaW5mZXJyZWQgd2l0aG91dCBhbnlcblx0XHRcdFx0Ly8gc2VwYXJhdG9yc1xuXHRcdFx0XHRpZihjaF9pID09PSBTRU1DT0xfQ09ERSB8fCBjaF9pID09PSBDT01NQV9DT0RFKSB7XG5cdFx0XHRcdFx0aW5kZXgrKzsgLy8gaWdub3JlIHNlcGFyYXRvcnNcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBUcnkgdG8gZ29iYmxlIGVhY2ggZXhwcmVzc2lvbiBpbmRpdmlkdWFsbHlcblx0XHRcdFx0XHRpZigobm9kZSA9IGdvYmJsZUV4cHJlc3Npb24oKSkpIHtcblx0XHRcdFx0XHRcdG5vZGVzLnB1c2gobm9kZSk7XG5cdFx0XHRcdFx0Ly8gSWYgd2Ugd2VyZW4ndCBhYmxlIHRvIGZpbmQgYSBiaW5hcnkgZXhwcmVzc2lvbiBhbmQgYXJlIG91dCBvZiByb29tLCB0aGVuXG5cdFx0XHRcdFx0Ly8gdGhlIGV4cHJlc3Npb24gcGFzc2VkIGluIHByb2JhYmx5IGhhcyB0b28gbXVjaFxuXHRcdFx0XHRcdH0gZWxzZSBpZihpbmRleCA8IGxlbmd0aCkge1xuXHRcdFx0XHRcdFx0dGhyb3dFcnJvcignVW5leHBlY3RlZCBcIicgKyBleHBySShpbmRleCkgKyAnXCInLCBpbmRleCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIHRoZXJlJ3Mgb25seSBvbmUgZXhwcmVzc2lvbiBqdXN0IHRyeSByZXR1cm5pbmcgdGhlIGV4cHJlc3Npb25cblx0XHRcdGlmKG5vZGVzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRyZXR1cm4gbm9kZXNbMF07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHR5cGU6IENPTVBPVU5ELFxuXHRcdFx0XHRcdGJvZHk6IG5vZGVzXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fTtcblxuXHQvLyBUbyBiZSBmaWxsZWQgaW4gYnkgdGhlIHRlbXBsYXRlXG5cdGpzZXAudmVyc2lvbiA9ICc8JT0gdmVyc2lvbiAlPic7XG5cdGpzZXAudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuICdKYXZhU2NyaXB0IEV4cHJlc3Npb24gUGFyc2VyIChKU0VQKSB2JyArIGpzZXAudmVyc2lvbjsgfTtcblxuXHQvKipcblx0ICogQG1ldGhvZCBqc2VwLmFkZFVuYXJ5T3Bcblx0ICogQHBhcmFtIHtzdHJpbmd9IG9wX25hbWUgVGhlIG5hbWUgb2YgdGhlIHVuYXJ5IG9wIHRvIGFkZFxuXHQgKiBAcmV0dXJuIGpzZXBcblx0ICovXG5cdGpzZXAuYWRkVW5hcnlPcCA9IGZ1bmN0aW9uKG9wX25hbWUpIHtcblx0XHRtYXhfdW5vcF9sZW4gPSBNYXRoLm1heChvcF9uYW1lLmxlbmd0aCwgbWF4X3Vub3BfbGVuKTtcblx0XHR1bmFyeV9vcHNbb3BfbmFtZV0gPSB0OyByZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKipcblx0ICogQG1ldGhvZCBqc2VwLmFkZEJpbmFyeU9wXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBvcF9uYW1lIFRoZSBuYW1lIG9mIHRoZSBiaW5hcnkgb3AgdG8gYWRkXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBwcmVjZWRlbmNlIFRoZSBwcmVjZWRlbmNlIG9mIHRoZSBiaW5hcnkgb3AgKGNhbiBiZSBhIGZsb2F0KVxuXHQgKiBAcmV0dXJuIGpzZXBcblx0ICovXG5cdGpzZXAuYWRkQmluYXJ5T3AgPSBmdW5jdGlvbihvcF9uYW1lLCBwcmVjZWRlbmNlKSB7XG5cdFx0bWF4X2Jpbm9wX2xlbiA9IE1hdGgubWF4KG9wX25hbWUubGVuZ3RoLCBtYXhfYmlub3BfbGVuKTtcblx0XHRiaW5hcnlfb3BzW29wX25hbWVdID0gcHJlY2VkZW5jZTtcblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKipcblx0ICogQG1ldGhvZCBqc2VwLmFkZExpdGVyYWxcblx0ICogQHBhcmFtIHtzdHJpbmd9IGxpdGVyYWxfbmFtZSBUaGUgbmFtZSBvZiB0aGUgbGl0ZXJhbCB0byBhZGRcblx0ICogQHBhcmFtIHsqfSBsaXRlcmFsX3ZhbHVlIFRoZSB2YWx1ZSBvZiB0aGUgbGl0ZXJhbFxuXHQgKiBAcmV0dXJuIGpzZXBcblx0ICovXG5cdGpzZXAuYWRkTGl0ZXJhbCA9IGZ1bmN0aW9uKGxpdGVyYWxfbmFtZSwgbGl0ZXJhbF92YWx1ZSkge1xuXHRcdGxpdGVyYWxzW2xpdGVyYWxfbmFtZV0gPSBsaXRlcmFsX3ZhbHVlO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBAbWV0aG9kIGpzZXAucmVtb3ZlVW5hcnlPcFxuXHQgKiBAcGFyYW0ge3N0cmluZ30gb3BfbmFtZSBUaGUgbmFtZSBvZiB0aGUgdW5hcnkgb3AgdG8gcmVtb3ZlXG5cdCAqIEByZXR1cm4ganNlcFxuXHQgKi9cblx0anNlcC5yZW1vdmVVbmFyeU9wID0gZnVuY3Rpb24ob3BfbmFtZSkge1xuXHRcdGRlbGV0ZSB1bmFyeV9vcHNbb3BfbmFtZV07XG5cdFx0aWYob3BfbmFtZS5sZW5ndGggPT09IG1heF91bm9wX2xlbikge1xuXHRcdFx0bWF4X3Vub3BfbGVuID0gZ2V0TWF4S2V5TGVuKHVuYXJ5X29wcyk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBAbWV0aG9kIGpzZXAucmVtb3ZlQWxsVW5hcnlPcHNcblx0ICogQHJldHVybiBqc2VwXG5cdCAqL1xuXHRqc2VwLnJlbW92ZUFsbFVuYXJ5T3BzID0gZnVuY3Rpb24oKSB7XG5cdFx0dW5hcnlfb3BzID0ge307XG5cdFx0bWF4X3Vub3BfbGVuID0gMDtcblx0XHRcblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKipcblx0ICogQG1ldGhvZCBqc2VwLnJlbW92ZUJpbmFyeU9wXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBvcF9uYW1lIFRoZSBuYW1lIG9mIHRoZSBiaW5hcnkgb3AgdG8gcmVtb3ZlXG5cdCAqIEByZXR1cm4ganNlcFxuXHQgKi9cblx0anNlcC5yZW1vdmVCaW5hcnlPcCA9IGZ1bmN0aW9uKG9wX25hbWUpIHtcblx0XHRkZWxldGUgYmluYXJ5X29wc1tvcF9uYW1lXTtcblx0XHRpZihvcF9uYW1lLmxlbmd0aCA9PT0gbWF4X2Jpbm9wX2xlbikge1xuXHRcdFx0bWF4X2Jpbm9wX2xlbiA9IGdldE1heEtleUxlbihiaW5hcnlfb3BzKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBtZXRob2QganNlcC5yZW1vdmVBbGxCaW5hcnlPcHNcblx0ICogQHJldHVybiBqc2VwXG5cdCAqL1xuXHRqc2VwLnJlbW92ZUFsbEJpbmFyeU9wcyA9IGZ1bmN0aW9uKCkge1xuXHRcdGJpbmFyeV9vcHMgPSB7fTtcblx0XHRtYXhfYmlub3BfbGVuID0gMDtcblx0XHRcblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKipcblx0ICogQG1ldGhvZCBqc2VwLnJlbW92ZUxpdGVyYWxcblx0ICogQHBhcmFtIHtzdHJpbmd9IGxpdGVyYWxfbmFtZSBUaGUgbmFtZSBvZiB0aGUgbGl0ZXJhbCB0byByZW1vdmVcblx0ICogQHJldHVybiBqc2VwXG5cdCAqL1xuXHRqc2VwLnJlbW92ZUxpdGVyYWwgPSBmdW5jdGlvbihsaXRlcmFsX25hbWUpIHtcblx0XHRkZWxldGUgbGl0ZXJhbHNbbGl0ZXJhbF9uYW1lXTtcblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKipcblx0ICogQG1ldGhvZCBqc2VwLnJlbW92ZUFsbExpdGVyYWxzXG5cdCAqIEByZXR1cm4ganNlcFxuXHQgKi9cblx0anNlcC5yZW1vdmVBbGxMaXRlcmFscyA9IGZ1bmN0aW9uKCkge1xuXHRcdGxpdGVyYWxzID0ge307XG5cdFx0XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG5cblx0Ly8gSW4gZGVza3RvcCBlbnZpcm9ubWVudHMsIGhhdmUgYSB3YXkgdG8gcmVzdG9yZSB0aGUgb2xkIHZhbHVlIGZvciBganNlcGBcblx0aWYgKHR5cGVvZiBleHBvcnRzID09PSAndW5kZWZpbmVkJykge1xuXHRcdHZhciBvbGRfanNlcCA9IHJvb3QuanNlcDtcblx0XHQvLyBUaGUgc3RhciBvZiB0aGUgc2hvdyEgSXQncyBhIGZ1bmN0aW9uIVxuXHRcdHJvb3QuanNlcCA9IGpzZXA7XG5cdFx0Ly8gQW5kIGEgY291cnRlb3VzIGZ1bmN0aW9uIHdpbGxpbmcgdG8gbW92ZSBvdXQgb2YgdGhlIHdheSBmb3Igb3RoZXIgc2ltaWxhcmx5LW5hbWVkIG9iamVjdHMhXG5cdFx0anNlcC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZihyb290LmpzZXAgPT09IGpzZXApIHtcblx0XHRcdFx0cm9vdC5qc2VwID0gb2xkX2pzZXA7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4ganNlcDtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdC8vIEluIE5vZGUuSlMgZW52aXJvbm1lbnRzXG5cdFx0aWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdFx0XHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBqc2VwO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRleHBvcnRzLnBhcnNlID0ganNlcDtcblx0XHR9XG5cdH1cbn0odGhpcykpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWFrZUp1aWNlQ2xpZW50KGp1aWNlQ2xpZW50KSB7XG5cbmp1aWNlQ2xpZW50Lmlnbm9yZWRQc2V1ZG9zID0gWydob3ZlcicsICdhY3RpdmUnLCAnZm9jdXMnLCAndmlzaXRlZCcsICdsaW5rJ107XG5qdWljZUNsaWVudC53aWR0aEVsZW1lbnRzID0gWydUQUJMRScsICdURCcsICdJTUcnXTtcbmp1aWNlQ2xpZW50LmhlaWdodEVsZW1lbnRzID0gWydUQUJMRScsICdURCcsICdJTUcnXTtcbmp1aWNlQ2xpZW50LnRhYmxlRWxlbWVudHMgPSBbJ1RBQkxFJywgJ1REJywgJ1RIJywgJ1RSJywgJ1REJywgJ0NBUFRJT04nLCAnQ09MR1JPVVAnLCAnQ09MJywgJ1RIRUFEJywgJ1RCT0RZJywgJ1RGT09UJ107XG5qdWljZUNsaWVudC5ub25WaXN1YWxFbGVtZW50cyA9IFsgJ0hFQUQnLCAnVElUTEUnLCAnQkFTRScsICdMSU5LJywgJ1NUWUxFJywgJ01FVEEnLCAnU0NSSVBUJywgJ05PU0NSSVBUJyBdO1xuanVpY2VDbGllbnQuc3R5bGVUb0F0dHJpYnV0ZSA9IHtcbiAgJ2JhY2tncm91bmQtY29sb3InOiAnYmdjb2xvcicsXG4gICdiYWNrZ3JvdW5kLWltYWdlJzogJ2JhY2tncm91bmQnLFxuICAndGV4dC1hbGlnbic6ICdhbGlnbicsXG4gICd2ZXJ0aWNhbC1hbGlnbic6ICd2YWxpZ24nXG59O1xuanVpY2VDbGllbnQuZXhjbHVkZWRQcm9wZXJ0aWVzID0gW107XG5cbmp1aWNlQ2xpZW50Lmp1aWNlRG9jdW1lbnQgPSBqdWljZURvY3VtZW50O1xuanVpY2VDbGllbnQuaW5saW5lRG9jdW1lbnQgPSBpbmxpbmVEb2N1bWVudDtcblxuZnVuY3Rpb24gaW5saW5lRG9jdW1lbnQoJCwgY3NzLCBvcHRpb25zKSB7XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBydWxlcyA9IHV0aWxzLnBhcnNlQ1NTKGNzcyk7XG4gIHZhciBlZGl0ZWRFbGVtZW50cyA9IFtdO1xuICB2YXIgc3R5bGVBdHRyaWJ1dGVOYW1lID0gJ3N0eWxlJztcbiAgXG4gIGlmIChvcHRpb25zLnN0eWxlQXR0cmlidXRlTmFtZSkge1xuICAgIHN0eWxlQXR0cmlidXRlTmFtZSA9IG9wdGlvbnMuc3R5bGVBdHRyaWJ1dGVOYW1lO1xuICB9XG5cbiAgcnVsZXMuZm9yRWFjaChoYW5kbGVSdWxlKTtcbiAgZWRpdGVkRWxlbWVudHMuZm9yRWFjaChzZXRTdHlsZUF0dHJzKTtcblxuICBpZiAob3B0aW9ucy5pbmxpbmVQc2V1ZG9FbGVtZW50cykge1xuICAgIGVkaXRlZEVsZW1lbnRzLmZvckVhY2goaW5saW5lUHNldWRvRWxlbWVudHMpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuYXBwbHlXaWR0aEF0dHJpYnV0ZXMpIHtcbiAgICBlZGl0ZWRFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG4gICAgICBzZXREaW1lbnNpb25BdHRycyhlbCwgJ3dpZHRoJyk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAob3B0aW9ucy5hcHBseUhlaWdodEF0dHJpYnV0ZXMpIHtcbiAgICBlZGl0ZWRFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG4gICAgICBzZXREaW1lbnNpb25BdHRycyhlbCwgJ2hlaWdodCcpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuYXBwbHlBdHRyaWJ1dGVzVGFibGVFbGVtZW50cykge1xuICAgIGVkaXRlZEVsZW1lbnRzLmZvckVhY2goc2V0QXR0cmlidXRlc09uVGFibGVFbGVtZW50cyk7XG4gIH1cblxuICBpZiAob3B0aW9ucy5pbnNlcnRQcmVzZXJ2ZWRFeHRyYUNzcyAmJiBvcHRpb25zLmV4dHJhQ3NzKSB7XG4gICAgdmFyIHByZXNlcnZlZFRleHQgPSB1dGlscy5nZXRQcmVzZXJ2ZWRUZXh0KG9wdGlvbnMuZXh0cmFDc3MsIHtcbiAgICAgIG1lZGlhUXVlcmllczogb3B0aW9ucy5wcmVzZXJ2ZU1lZGlhUXVlcmllcyxcbiAgICAgIGZvbnRGYWNlczogb3B0aW9ucy5wcmVzZXJ2ZUZvbnRGYWNlc1xuICAgIH0pO1xuICAgIGlmIChwcmVzZXJ2ZWRUZXh0KSB7XG4gICAgICB2YXIgJGFwcGVuZFRvID0gbnVsbDtcbiAgICAgIGlmIChvcHRpb25zLmluc2VydFByZXNlcnZlZEV4dHJhQ3NzICE9PSB0cnVlKSB7XG4gICAgICAgICRhcHBlbmRUbyA9ICQob3B0aW9ucy5pbnNlcnRQcmVzZXJ2ZWRFeHRyYUNzcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkYXBwZW5kVG8gPSAkKCdoZWFkJyk7XG4gICAgICAgIGlmICghJGFwcGVuZFRvLmxlbmd0aCkgeyAkYXBwZW5kVG8gPSAkKCdib2R5Jyk7IH1cbiAgICAgICAgaWYgKCEkYXBwZW5kVG8ubGVuZ3RoKSB7ICRhcHBlbmRUbyA9ICQucm9vdCgpOyB9XG4gICAgICB9XG5cbiAgICAgICRhcHBlbmRUby5maXJzdCgpLmFwcGVuZCgnPHN0eWxlPicgKyBwcmVzZXJ2ZWRUZXh0ICsgJzwvc3R5bGU+Jyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlUnVsZShydWxlKSB7XG4gICAgdmFyIHNlbCA9IHJ1bGVbMF07XG4gICAgdmFyIHN0eWxlID0gcnVsZVsxXTtcbiAgICB2YXIgc2VsZWN0b3IgPSBuZXcgdXRpbHMuU2VsZWN0b3Ioc2VsKTtcbiAgICB2YXIgcGFyc2VkU2VsZWN0b3IgPSBzZWxlY3Rvci5wYXJzZWQoKTtcbiAgICB2YXIgcHNldWRvRWxlbWVudFR5cGUgPSBnZXRQc2V1ZG9FbGVtZW50VHlwZShwYXJzZWRTZWxlY3Rvcik7XG5cbiAgICAvLyBza2lwIHJ1bGUgaWYgdGhlIHNlbGVjdG9yIGhhcyBhbnkgcHNldWRvcyB3aGljaCBhcmUgaWdub3JlZFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyc2VkU2VsZWN0b3IubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBzdWJTZWwgPSBwYXJzZWRTZWxlY3RvcltpXTtcbiAgICAgIGlmIChzdWJTZWwucHNldWRvcykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN1YlNlbC5wc2V1ZG9zLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgdmFyIHN1YlNlbFBzZXVkbyA9IHN1YlNlbC5wc2V1ZG9zW2pdO1xuICAgICAgICAgIGlmIChqdWljZUNsaWVudC5pZ25vcmVkUHNldWRvcy5pbmRleE9mKHN1YlNlbFBzZXVkby5uYW1lKSA+PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBzZXVkb0VsZW1lbnRUeXBlKSB7XG4gICAgICB2YXIgbGFzdCA9IHBhcnNlZFNlbGVjdG9yW3BhcnNlZFNlbGVjdG9yLmxlbmd0aCAtIDFdO1xuICAgICAgdmFyIHBzZXVkb3MgPSBsYXN0LnBzZXVkb3M7XG4gICAgICBsYXN0LnBzZXVkb3MgPSBmaWx0ZXJFbGVtZW50UHNldWRvcyhsYXN0LnBzZXVkb3MpO1xuICAgICAgc2VsID0gcGFyc2VkU2VsZWN0b3IudG9TdHJpbmcoKTtcbiAgICAgIGxhc3QucHNldWRvcyA9IHBzZXVkb3M7XG4gICAgfVxuXG4gICAgdmFyIGVscztcbiAgICB0cnkge1xuICAgICAgZWxzID0gJChzZWwpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gc2tpcCBpbnZhbGlkIHNlbGVjdG9yXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZWxzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZWwgPSB0aGlzO1xuXG4gICAgICBpZiAoZWwubmFtZSAmJiBqdWljZUNsaWVudC5ub25WaXN1YWxFbGVtZW50cy5pbmRleE9mKGVsLm5hbWUudG9VcHBlckNhc2UoKSkgPj0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChwc2V1ZG9FbGVtZW50VHlwZSkge1xuICAgICAgICB2YXIgcHNldWRvRWxQcm9wTmFtZSA9ICdwc2V1ZG8nICsgcHNldWRvRWxlbWVudFR5cGU7XG4gICAgICAgIHZhciBwc2V1ZG9FbCA9IGVsW3BzZXVkb0VsUHJvcE5hbWVdO1xuICAgICAgICBpZiAoIXBzZXVkb0VsKSB7XG4gICAgICAgICAgcHNldWRvRWwgPSBlbFtwc2V1ZG9FbFByb3BOYW1lXSA9ICQoJzxzcGFuIC8+JykuZ2V0KDApO1xuICAgICAgICAgIHBzZXVkb0VsLnBzZXVkb0VsZW1lbnRUeXBlID0gcHNldWRvRWxlbWVudFR5cGU7XG4gICAgICAgICAgcHNldWRvRWwucHNldWRvRWxlbWVudFBhcmVudCA9IGVsO1xuICAgICAgICAgIGVsW3BzZXVkb0VsUHJvcE5hbWVdID0gcHNldWRvRWw7XG4gICAgICAgIH1cbiAgICAgICAgZWwgPSBwc2V1ZG9FbDtcbiAgICAgIH1cblxuICAgICAgaWYgKCFlbC5zdHlsZVByb3BzKSB7XG4gICAgICAgIGVsLnN0eWxlUHJvcHMgPSB7fTtcblxuICAgICAgICAvLyBpZiB0aGUgZWxlbWVudCBoYXMgaW5saW5lIHN0eWxlcywgZmFrZSBzZWxlY3RvciB3aXRoIHRvcG1vc3Qgc3BlY2lmaWNpdHlcbiAgICAgICAgaWYgKCQoZWwpLmF0dHIoc3R5bGVBdHRyaWJ1dGVOYW1lKSkge1xuICAgICAgICAgIHZhciBjc3NUZXh0ID0gJyogeyAnICsgJChlbCkuYXR0cihzdHlsZUF0dHJpYnV0ZU5hbWUpICsgJyB9ICc7XG4gICAgICAgICAgYWRkUHJvcHModXRpbHMucGFyc2VDU1MoY3NzVGV4dClbMF1bMV0sIG5ldyB1dGlscy5TZWxlY3RvcignPHN0eWxlPicsIHRydWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHN0b3JlIHJlZmVyZW5jZSB0byBhbiBlbGVtZW50IHdlIG5lZWQgdG8gY29tcGlsZSBzdHlsZT1cIlwiIGF0dHIgZm9yXG4gICAgICAgIGVkaXRlZEVsZW1lbnRzLnB1c2goZWwpO1xuICAgICAgfVxuXG4gICAgICAvLyBnbyB0aHJvdWdoIHRoZSBwcm9wZXJ0aWVzXG4gICAgICBmdW5jdGlvbiBhZGRQcm9wcyhzdHlsZSwgc2VsZWN0b3IpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdHlsZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBpZiAoc3R5bGVbaV0udHlwZSA9PSAncHJvcGVydHknKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IHN0eWxlW2ldLm5hbWU7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBzdHlsZVtpXS52YWx1ZTtcbiAgICAgICAgICAgIHZhciBpbXBvcnRhbnQgPSBzdHlsZVtpXS52YWx1ZS5tYXRjaCgvIWltcG9ydGFudCQvKSAhPT0gbnVsbDtcbiAgICAgICAgICAgIGlmIChpbXBvcnRhbnQgJiYgIW9wdGlvbnMucHJlc2VydmVJbXBvcnRhbnQpIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxzKiFpbXBvcnRhbnQkLywgJycpO1xuICAgICAgICAgICAgLy8gYWRkcyBsaW5lIG51bWJlciBhbmQgY29sdW1uIG51bWJlciBmb3IgdGhlIHByb3BlcnRpZXMgYXMgXCJhZGRpdGlvbmFsUHJpb3JpdHlcIiB0byB0aGUgXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIGJlY2F1c2UgaW4gQ1NTIHRoZSBwb3NpdGlvbiBkaXJlY3RseSBhZmZlY3QgdGhlIHByaW9yaXR5LlxuICAgICAgICAgICAgdmFyIGFkZGl0aW9uYWxQcmlvcml0eSA9IFtzdHlsZVtpXS5wb3NpdGlvbi5zdGFydC5saW5lLCBzdHlsZVtpXS5wb3NpdGlvbi5zdGFydC5jb2xdO1xuICAgICAgICAgICAgdmFyIHByb3AgPSBuZXcgdXRpbHMuUHJvcGVydHkobmFtZSwgdmFsdWUsIHNlbGVjdG9yLCBpbXBvcnRhbnQgPyAyIDogMCwgYWRkaXRpb25hbFByaW9yaXR5KTtcbiAgICAgICAgICAgIHZhciBleGlzdGluZyA9IGVsLnN0eWxlUHJvcHNbbmFtZV07XG5cbiAgICAgICAgICAgIC8vIGlmIHByb3BlcnR5IG5hbWUgaXMgbm90IGluIHRoZSBleGNsdWRlZCBwcm9wZXJ0aWVzIGFycmF5XG4gICAgICAgICAgICBpZiAoanVpY2VDbGllbnQuZXhjbHVkZWRQcm9wZXJ0aWVzLmluZGV4T2YobmFtZSkgPCAwKSB7XG4gICAgICAgICAgICAgIGlmIChleGlzdGluZyAmJiBleGlzdGluZy5jb21wYXJlKHByb3ApID09PSBwcm9wIHx8ICFleGlzdGluZykge1xuICAgICAgICAgICAgICAgIC8vIGRlbGV0aW5nIGEgcHJvcGVydHkgbGV0IHVzIGNoYW5nZSB0aGUgb3JkZXIgKG1vdmUgaXQgdG8gdGhlIGVuZCBpbiB0aGUgc2V0U3R5bGVBdHRycyBsb29wKVxuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZyAmJiBleGlzdGluZy5zZWxlY3RvciAhPT0gc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBlbC5zdHlsZVByb3BzW25hbWVdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgIC8vIG1ha2UgXCJwcm9wXCIgYSBzcGVjaWFsIGNvbXBvc2VkIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgICAgcHJvcC5uZXh0UHJvcCA9IGV4aXN0aW5nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGVsLnN0eWxlUHJvcHNbbmFtZV0gPSBwcm9wO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGFkZFByb3BzKHN0eWxlLCBzZWxlY3Rvcik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTdHlsZUF0dHJzKGVsKSB7XG4gICAgdmFyIGwgPSBPYmplY3Qua2V5cyhlbC5zdHlsZVByb3BzKS5sZW5ndGg7XG4gICAgdmFyIHByb3BzID0gW107XG4gICAgLy8gSGVyZSB3ZSBsb29wIGVhY2ggcHJvcGVydHkgYW5kIG1ha2Ugc3VyZSB0byBcImV4cGFuZFwiXG4gICAgLy8gbGlua2VkIFwibmV4dFByb3BcIiBwcm9wZXJ0aWVzIGhhcHBlbmluZyB3aGVuIHRoZSBzYW1lIHByb3BlcnR5XG4gICAgLy8gaXMgZGVjbGFyZWQgbXVsdGlwbGUgdGltZXMgaW4gdGhlIHNhbWUgc2VsZWN0b3IuXG4gICAgT2JqZWN0LmtleXMoZWwuc3R5bGVQcm9wcykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBucCA9IGVsLnN0eWxlUHJvcHNba2V5XTtcbiAgICAgIHdoaWxlICh0eXBlb2YgbnAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHByb3BzLnB1c2gobnApO1xuICAgICAgICBucCA9IG5wLm5leHRQcm9wO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIHNvcnQgcHJvcGVydGllcyBieSB0aGVpciBvcmlnaW5hdGluZyBzZWxlY3RvcidzIHNwZWNpZmljaXR5IHNvIHRoYXRcbiAgICAvLyBwcm9wcyBsaWtlIFwicGFkZGluZ1wiIGFuZCBcInBhZGRpbmctYm90dG9tXCIgYXJlIHJlc29sdmVkIGFzIGV4cGVjdGVkLlxuICAgIHByb3BzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIGEuY29tcGFyZUZ1bmMoYik7XG4gICAgfSk7XG4gICAgdmFyIHN0cmluZyA9IHByb3BzXG4gICAgICAuZmlsdGVyKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgICAgLy8gQ29udGVudCBiZWNvbWVzIHRoZSBpbm5lckhUTUwgb2YgcHNldWRvIGVsZW1lbnRzLCBub3QgdXNlZCBhcyBhXG4gICAgICAgIC8vIHN0eWxlIHByb3BlcnR5XG4gICAgICAgIHJldHVybiBwcm9wLnByb3AgIT09ICdjb250ZW50JztcbiAgICAgIH0pXG4gICAgICAubWFwKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgICAgcmV0dXJuIHByb3AucHJvcCArICc6ICcgKyBwcm9wLnZhbHVlLnJlcGxhY2UoL1tcIl0vZywgJ1xcJycpICsgJzsnO1xuICAgICAgfSlcbiAgICAgIC5qb2luKCcgJyk7XG4gICAgaWYgKHN0cmluZykge1xuICAgICAgJChlbCkuYXR0cihzdHlsZUF0dHJpYnV0ZU5hbWUsIHN0cmluZyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaW5saW5lUHNldWRvRWxlbWVudHMoZWwpIHtcbiAgICBpZiAoZWwucHNldWRvRWxlbWVudFR5cGUgJiYgZWwuc3R5bGVQcm9wcy5jb250ZW50KSB7XG4gICAgICB2YXIgcGFyc2VkID0gcGFyc2VDb250ZW50KGVsLnN0eWxlUHJvcHMuY29udGVudC52YWx1ZSk7XG4gICAgICBpZiAocGFyc2VkLmltZykge1xuICAgICAgICBlbC5uYW1lID0gJ2ltZyc7XG4gICAgICAgICQoZWwpLmF0dHIoJ3NyYycsIHBhcnNlZC5pbWcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChlbCkudGV4dChwYXJzZWQpO1xuICAgICAgfVxuICAgICAgdmFyIHBhcmVudCA9IGVsLnBzZXVkb0VsZW1lbnRQYXJlbnQ7XG4gICAgICBpZiAoZWwucHNldWRvRWxlbWVudFR5cGUgPT09ICdiZWZvcmUnKSB7XG4gICAgICAgICQocGFyZW50KS5wcmVwZW5kKGVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQocGFyZW50KS5hcHBlbmQoZWwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldERpbWVuc2lvbkF0dHJzKGVsLCBkaW1lbnNpb24pIHtcbiAgICBpZiAoIWVsLm5hbWUpIHsgcmV0dXJuOyB9XG4gICAgdmFyIGVsTmFtZSA9IGVsLm5hbWUudG9VcHBlckNhc2UoKTtcbiAgICBpZiAoanVpY2VDbGllbnRbZGltZW5zaW9uICsgJ0VsZW1lbnRzJ10uaW5kZXhPZihlbE5hbWUpID4gLTEpIHtcbiAgICAgIGZvciAodmFyIGkgaW4gZWwuc3R5bGVQcm9wcykge1xuICAgICAgICBpZiAoZWwuc3R5bGVQcm9wc1tpXS5wcm9wID09PSBkaW1lbnNpb24pIHtcbiAgICAgICAgICBpZiAoZWwuc3R5bGVQcm9wc1tpXS52YWx1ZS5tYXRjaCgvcHgvKSkge1xuICAgICAgICAgICAgdmFyIHB4U2l6ZSA9IGVsLnN0eWxlUHJvcHNbaV0udmFsdWUucmVwbGFjZSgncHgnLCAnJyk7XG4gICAgICAgICAgICAkKGVsKS5hdHRyKGRpbWVuc2lvbiwgcHhTaXplKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGp1aWNlQ2xpZW50LnRhYmxlRWxlbWVudHMuaW5kZXhPZihlbE5hbWUpID4gLTEgJiYgZWwuc3R5bGVQcm9wc1tpXS52YWx1ZS5tYXRjaCgvXFwlLykpIHtcbiAgICAgICAgICAgICQoZWwpLmF0dHIoZGltZW5zaW9uLCBlbC5zdHlsZVByb3BzW2ldLnZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRBdHRyaWJ1dGVzT25UYWJsZUVsZW1lbnRzKGVsKSB7XG4gICAgaWYgKCFlbC5uYW1lKSB7IHJldHVybjsgfVxuICAgIHZhciBlbE5hbWUgPSBlbC5uYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgdmFyIHN0eWxlUHJvcHMgPSBPYmplY3Qua2V5cyhqdWljZUNsaWVudC5zdHlsZVRvQXR0cmlidXRlKTtcblxuICAgIGlmIChqdWljZUNsaWVudC50YWJsZUVsZW1lbnRzLmluZGV4T2YoZWxOYW1lKSA+IC0xKSB7XG4gICAgICBmb3IgKHZhciBpIGluIGVsLnN0eWxlUHJvcHMpIHtcbiAgICAgICAgaWYgKHN0eWxlUHJvcHMuaW5kZXhPZihlbC5zdHlsZVByb3BzW2ldLnByb3ApID4gLTEpIHtcbiAgICAgICAgICAkKGVsKS5hdHRyKGp1aWNlQ2xpZW50LnN0eWxlVG9BdHRyaWJ1dGVbZWwuc3R5bGVQcm9wc1tpXS5wcm9wXSwgZWwuc3R5bGVQcm9wc1tpXS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VDb250ZW50KGNvbnRlbnQpIHtcbiAgaWYgKGNvbnRlbnQgPT09ICdub25lJyB8fCBjb250ZW50ID09PSAnbm9ybWFsJykge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHZhciBpbWFnZVVybE1hdGNoID0gY29udGVudC5tYXRjaCgvXlxccyp1cmxcXHMqXFwoXFxzKiguKj8pXFxzKlxcKVxccyokL2kpO1xuICBpZiAoaW1hZ2VVcmxNYXRjaCkge1xuICAgIHZhciB1cmwgPSBpbWFnZVVybE1hdGNoWzFdLnJlcGxhY2UoL15bJ1wiXXxbJ1wiXSQvZywgJycpO1xuICAgIHJldHVybiB7IGltZzogdXJsIH07XG4gIH1cblxuICAvLyBOYWl2ZSBwYXJzaW5nLCBhc3N1bWUgd2VsbC1mb3JtZWQgdmFsdWVcbiAgY29udGVudCA9IGNvbnRlbnQuc2xpY2UoMSwgY29udGVudC5sZW5ndGggLSAxKTtcbiAgLy8gTmFpdmUgdW5lc2NhcGUsIGFzc3VtZSBubyB1bmljb2RlIGNoYXIgY29kZXNcbiAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxcXC9nLCAnJyk7XG4gIHJldHVybiBjb250ZW50O1xufVxuXG4vLyBSZXR1cm4gXCJiZWZvcmVcIiBvciBcImFmdGVyXCIgaWYgdGhlIGdpdmVuIHNlbGVjdG9yIGlzIGEgcHNldWRvIGVsZW1lbnQgKGUuZy4sXG4vLyBhOjphZnRlcikuXG5mdW5jdGlvbiBnZXRQc2V1ZG9FbGVtZW50VHlwZShzZWxlY3Rvcikge1xuICBpZiAoc2VsZWN0b3IubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHBzZXVkb3MgPSBzZWxlY3RvcltzZWxlY3Rvci5sZW5ndGggLSAxXS5wc2V1ZG9zO1xuICBpZiAoIXBzZXVkb3MpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBzZXVkb3MubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoaXNQc2V1ZG9FbGVtZW50TmFtZShwc2V1ZG9zW2ldKSkge1xuICAgICAgcmV0dXJuIHBzZXVkb3NbaV0ubmFtZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNQc2V1ZG9FbGVtZW50TmFtZShwc2V1ZG8pIHtcbiAgcmV0dXJuIHBzZXVkby5uYW1lID09PSAnYmVmb3JlJyB8fCBwc2V1ZG8ubmFtZSA9PT0gJ2FmdGVyJztcbn1cblxuZnVuY3Rpb24gZmlsdGVyRWxlbWVudFBzZXVkb3MocHNldWRvcykge1xuICByZXR1cm4gcHNldWRvcy5maWx0ZXIoZnVuY3Rpb24ocHNldWRvKSB7XG4gICAgcmV0dXJuICFpc1BzZXVkb0VsZW1lbnROYW1lKHBzZXVkbyk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBqdWljZURvY3VtZW50KCQsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IHV0aWxzLmdldERlZmF1bHRPcHRpb25zKG9wdGlvbnMpO1xuICB2YXIgY3NzID0gZXh0cmFjdENzc0Zyb21Eb2N1bWVudCgkLCBvcHRpb25zKTtcbiAgY3NzICs9ICdcXG4nICsgb3B0aW9ucy5leHRyYUNzcztcbiAgaW5saW5lRG9jdW1lbnQoJCwgY3NzLCBvcHRpb25zKTtcbiAgcmV0dXJuICQ7XG59XG5cbmZ1bmN0aW9uIGdldFN0eWxlc0RhdGEoJCwgb3B0aW9ucykge1xuICB2YXIgcmVzdWx0cyA9IFtdO1xuICB2YXIgc3R5bGVzTGlzdCA9ICQoJ3N0eWxlJyk7XG4gIHZhciBzdHlsZURhdGFMaXN0LCBzdHlsZURhdGEsIHN0eWxlRWxlbWVudDtcbiAgc3R5bGVzTGlzdC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIHN0eWxlRWxlbWVudCA9IHRoaXM7XG4gICAgc3R5bGVEYXRhTGlzdCA9IHN0eWxlRWxlbWVudC5jaGlsZE5vZGVzO1xuICAgIGlmIChzdHlsZURhdGFMaXN0Lmxlbmd0aCAhPT0gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzdHlsZURhdGEgPSBzdHlsZURhdGFMaXN0WzBdLmRhdGE7XG4gICAgaWYgKG9wdGlvbnMuYXBwbHlTdHlsZVRhZ3MgJiYgJChzdHlsZUVsZW1lbnQpLmF0dHIoJ2RhdGEtZW1iZWQnKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXN1bHRzLnB1c2goc3R5bGVEYXRhKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucmVtb3ZlU3R5bGVUYWdzICYmICQoc3R5bGVFbGVtZW50KS5hdHRyKCdkYXRhLWVtYmVkJykgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIHByZXNlcnZlZFRleHQgPSB1dGlscy5nZXRQcmVzZXJ2ZWRUZXh0KHN0eWxlRWxlbWVudC5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZSwge1xuICAgICAgICBtZWRpYVF1ZXJpZXM6IG9wdGlvbnMucHJlc2VydmVNZWRpYVF1ZXJpZXMsXG4gICAgICAgIGZvbnRGYWNlczogb3B0aW9ucy5wcmVzZXJ2ZUZvbnRGYWNlc1xuICAgICAgfSk7XG4gICAgICBpZiAocHJlc2VydmVkVGV4dCkge1xuICAgICAgICBzdHlsZUVsZW1lbnQuY2hpbGROb2Rlc1swXS5ub2RlVmFsdWUgPSBwcmVzZXJ2ZWRUZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChzdHlsZUVsZW1lbnQpLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICAkKHN0eWxlRWxlbWVudCkucmVtb3ZlQXR0cignZGF0YS1lbWJlZCcpO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RDc3NGcm9tRG9jdW1lbnQoJCwgb3B0aW9ucykge1xuICB2YXIgcmVzdWx0cyA9IGdldFN0eWxlc0RhdGEoJCwgb3B0aW9ucyk7XG4gIHZhciBjc3MgPSByZXN1bHRzLmpvaW4oJ1xcbicpO1xuICByZXR1cm4gY3NzO1xufVxuXG5yZXR1cm4ganVpY2VDbGllbnQ7XG5cbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBQcm9wZXJ0eTtcblxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcblxuLyoqXG4gKiBDU1MgcHJvcGVydHkgY29uc3RydWN0b3IuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7U2VsZWN0b3J9IHNlbGVjdG9yIHRoZSBwcm9wZXJ0eSBvcmlnaW5hdGVzIGZyb21cbiAqIEBwYXJhbSB7SW50ZWdlcn0gcHJpb3JpdHkgMCBmb3Igbm9ybWFsIHByb3BlcnRpZXMsIDIgZm9yICFpbXBvcnRhbnQgcHJvcGVydGllcy5cbiAqIEBwYXJhbSB7QXJyYXl9IGFkZGl0aW9uYWwgYXJyYXkgb2YgaW50ZWdlcnMgcmVwcmVzZW50aW5nIG1vcmUgZGV0YWlsZWQgcHJpb3JpdGllcyAoc29ydGluZylcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gUHJvcGVydHkocHJvcCwgdmFsdWUsIHNlbGVjdG9yLCBwcmlvcml0eSwgYWRkaXRpb25hbFByaW9yaXR5KSB7XG4gIHRoaXMucHJvcCA9IHByb3A7XG4gIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcbiAgdGhpcy5hZGRpdGlvbmFsUHJpb3JpdHkgPSBhZGRpdGlvbmFsUHJpb3JpdHkgfHwgW107XG59XG5cbi8qKlxuICogQ29tcGFyZXMgd2l0aCBhbm90aGVyIFByb3BlcnR5IGJhc2VkIG9uIFNlbGVjdG9yI3NwZWNpZmljaXR5LlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuUHJvcGVydHkucHJvdG90eXBlLmNvbXBhcmVGdW5jID0gZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgdmFyIGEgPSBbXTtcbiAgYS5wdXNoLmFwcGx5KGEsIHRoaXMuc2VsZWN0b3Iuc3BlY2lmaWNpdHkoKSk7XG4gIGEucHVzaC5hcHBseShhLCB0aGlzLmFkZGl0aW9uYWxQcmlvcml0eSk7XG4gIGFbMF0gKz0gdGhpcy5wcmlvcml0eTtcbiAgdmFyIGIgPSBbXTtcbiAgYi5wdXNoLmFwcGx5KGIsIHByb3BlcnR5LnNlbGVjdG9yLnNwZWNpZmljaXR5KCkpO1xuICBiLnB1c2guYXBwbHkoYiwgcHJvcGVydHkuYWRkaXRpb25hbFByaW9yaXR5KTtcbiAgYlswXSArPSBwcm9wZXJ0eS5wcmlvcml0eTtcbiAgcmV0dXJuIHV0aWxzLmNvbXBhcmVGdW5jKGEsIGIpO1xufTtcblxuUHJvcGVydHkucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbihwcm9wZXJ0eSkge1xuICB2YXIgd2lubmVyID0gdGhpcy5jb21wYXJlRnVuYyhwcm9wZXJ0eSk7XG4gIGlmICh3aW5uZXIgPT09IDEpIHJldHVybiB0aGlzO1xuICByZXR1cm4gcHJvcGVydHk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyBDU1MgcHJvcGVydHlcbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblByb3BlcnR5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5wcm9wICsgJzogJyArIHRoaXMudmFsdWUucmVwbGFjZSgvWydcIl0rL2csICcnKSArICc7Jztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBwYXJzZXIgPSByZXF1aXJlKCdzbGljay9wYXJzZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzID0gU2VsZWN0b3I7XG5cbi8qKlxuICogQ1NTIHNlbGVjdG9yIGNvbnN0cnVjdG9yLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvciB0ZXh0XG4gKiBAcGFyYW0ge0FycmF5fSBvcHRpb25hbGx5LCBwcmVjYWxjdWxhdGVkIHNwZWNpZmljaXR5XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIFNlbGVjdG9yKHRleHQsIHN0eWxlQXR0cmlidXRlKSB7XG4gIHRoaXMudGV4dCA9IHRleHQ7XG4gIHRoaXMuc3BlYyA9IHVuZGVmaW5lZDtcbiAgdGhpcy5zdHlsZUF0dHJpYnV0ZSA9IHN0eWxlQXR0cmlidXRlIHx8IGZhbHNlO1xufVxuXG4vKipcbiAqIEdldCBwYXJzZWQgc2VsZWN0b3IuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5TZWxlY3Rvci5wcm90b3R5cGUucGFyc2VkID0gZnVuY3Rpb24oKSB7XG4gIGlmICghdGhpcy50b2tlbnMpIHsgdGhpcy50b2tlbnMgPSBwYXJzZSh0aGlzLnRleHQpOyB9XG4gIHJldHVybiB0aGlzLnRva2Vucztcbn07XG5cbi8qKlxuICogTGF6eSBzcGVjaWZpY2l0eSBnZXR0ZXJcbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cblNlbGVjdG9yLnByb3RvdHlwZS5zcGVjaWZpY2l0eSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc3R5bGVBdHRyaWJ1dGUgPSB0aGlzLnN0eWxlQXR0cmlidXRlO1xuICBpZiAoIXRoaXMuc3BlYykgeyB0aGlzLnNwZWMgPSBzcGVjaWZpY2l0eSh0aGlzLnRleHQsIHRoaXMucGFyc2VkKCkpOyB9XG4gIHJldHVybiB0aGlzLnNwZWM7XG5cbiAgZnVuY3Rpb24gc3BlY2lmaWNpdHkodGV4dCwgcGFyc2VkKSB7XG4gICAgdmFyIGV4cHJlc3Npb25zID0gcGFyc2VkIHx8IHBhcnNlKHRleHQpO1xuICAgIHZhciBzcGVjID0gW3N0eWxlQXR0cmlidXRlID8gMSA6IDAsIDAsIDAsIDBdO1xuICAgIHZhciBub3RzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4cHJlc3Npb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb25zW2ldO1xuICAgICAgdmFyIHBzZXVkb3MgPSBleHByZXNzaW9uLnBzZXVkb3M7XG5cbiAgICAgIC8vIGlkIGF3YXJkcyBhIHBvaW50IGluIHRoZSBzZWNvbmQgY29sdW1uXG4gICAgICBpZiAoZXhwcmVzc2lvbi5pZCkgeyBzcGVjWzFdKys7IH1cblxuICAgICAgLy8gY2xhc3NlcyBhbmQgYXR0cmlidXRlcyBhd2FyZCBhIHBvaW50IGVhY2ggaW4gdGhlIHRoaXJkIGNvbHVtblxuICAgICAgaWYgKGV4cHJlc3Npb24uYXR0cmlidXRlcykgeyBzcGVjWzJdICs9IGV4cHJlc3Npb24uYXR0cmlidXRlcy5sZW5ndGg7IH1cbiAgICAgIGlmIChleHByZXNzaW9uLmNsYXNzTGlzdCkgeyBzcGVjWzJdICs9IGV4cHJlc3Npb24uY2xhc3NMaXN0Lmxlbmd0aDsgfVxuXG4gICAgICAvLyB0YWcgYXdhcmRzIGEgcG9pbnQgaW4gdGhlIGZvdXJ0aCBjb2x1bW5cbiAgICAgIGlmIChleHByZXNzaW9uLnRhZyAmJiBleHByZXNzaW9uLnRhZyAhPT0gJyonKSB7IHNwZWNbM10rKzsgfVxuXG4gICAgICAvLyBwc2V1ZG9zIGF3YXJkIGEgcG9pbnQgZWFjaCBpbiB0aGUgZm91cnRoIGNvbHVtblxuICAgICAgaWYgKHBzZXVkb3MpIHtcbiAgICAgICAgc3BlY1szXSArPSBwc2V1ZG9zLmxlbmd0aDtcblxuICAgICAgICBmb3IgKHZhciBwID0gMDsgcCA8IHBzZXVkb3MubGVuZ3RoOyBwKyspIHtcbiAgICAgICAgICBpZiAocHNldWRvc1twXS5uYW1lID09PSAnbm90Jykge1xuICAgICAgICAgICAgbm90cy5wdXNoKHBzZXVkb3NbcF0udmFsdWUpO1xuICAgICAgICAgICAgc3BlY1szXS0tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGlpID0gbm90cy5sZW5ndGg7IGlpLS07KSB7XG4gICAgICB2YXIgbm90ID0gc3BlY2lmaWNpdHkobm90c1tpaV0pO1xuICAgICAgZm9yICh2YXIgamogPSA0OyBqai0tOykgeyBzcGVjW2pqXSArPSBub3RbampdOyB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNwZWM7XG4gIH1cbn07XG5cbi8qKlxuICogUGFyc2VzIGEgc2VsZWN0b3IgYW5kIHJldHVybnMgdGhlIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAqIEBhcGkgcHJpdmF0ZS5cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZSh0ZXh0KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHBhcnNlcih0ZXh0KVswXTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIG1lbnNjaCA9IHJlcXVpcmUoJ21lbnNjaCcpO1xudmFyIG93biA9IHt9Lmhhc093blByb3BlcnR5O1xudmFyIG9zID0gcmVxdWlyZSgnb3MnKTtcbnZhciBTZWxlY3RvciA9IHJlcXVpcmUoJy4vc2VsZWN0b3InKTtcbnZhciBQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vcHJvcGVydHknKTtcblxuZXhwb3J0cy5TZWxlY3RvciA9IFNlbGVjdG9yO1xuZXhwb3J0cy5Qcm9wZXJ0eSA9IFByb3BlcnR5O1xuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHNlbGVjdG9ycy5cbiAqXG4gKiBAbGljZW5zZSBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSAtIE1JVFxuICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yVGV4dCBmcm9tIG1lbnNjaFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5leHBvcnRzLmV4dHJhY3QgPSBmdW5jdGlvbiBleHRyYWN0KHNlbGVjdG9yVGV4dCkge1xuICB2YXIgYXR0ciA9IDA7XG4gIHZhciBzZWxzID0gW107XG4gIHZhciBzZWwgPSAnJztcblxuICBmb3IgKHZhciBpID0gMCwgbCA9IHNlbGVjdG9yVGV4dC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgYyA9IHNlbGVjdG9yVGV4dC5jaGFyQXQoaSk7XG5cbiAgICBpZiAoYXR0cikge1xuICAgICAgaWYgKCddJyA9PT0gYyB8fCAnKScgPT09IGMpIHsgYXR0ci0tOyB9XG4gICAgICBzZWwgKz0gYztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCcsJyA9PT0gYykge1xuICAgICAgICBzZWxzLnB1c2goc2VsKTtcbiAgICAgICAgc2VsID0gJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoJ1snID09PSBjIHx8ICcoJyA9PT0gYykgeyBhdHRyKys7IH1cbiAgICAgICAgaWYgKHNlbC5sZW5ndGggfHwgKGMgIT09ICcsJyAmJiBjICE9PSAnXFxuJyAmJiBjICE9PSAnICcpKSB7IHNlbCArPSBjOyB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHNlbC5sZW5ndGgpIHtcbiAgICBzZWxzLnB1c2goc2VsKTtcbiAgfVxuXG4gIHJldHVybiBzZWxzO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgcGFyc2UgdHJlZSBmb3IgYSBDU1Mgc291cmNlLlxuICogSWYgaXQgZW5jb3VudGVycyBtdWx0aXBsZSBzZWxlY3RvcnMgc2VwYXJhdGVkIGJ5IGEgY29tbWEsIGl0IHNwbGl0cyB0aGVcbiAqIHRyZWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNzcyBzb3VyY2VcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5wYXJzZUNTUyA9IGZ1bmN0aW9uKGNzcykge1xuICB2YXIgcGFyc2VkID0gbWVuc2NoLnBhcnNlKGNzcywge3Bvc2l0aW9uOiB0cnVlLCBjb21tZW50czogdHJ1ZX0pO1xuICB2YXIgcnVsZXMgPSB0eXBlb2YgcGFyc2VkLnN0eWxlc2hlZXQgIT0gJ3VuZGVmaW5lZCcgJiYgcGFyc2VkLnN0eWxlc2hlZXQucnVsZXMgPyBwYXJzZWQuc3R5bGVzaGVldC5ydWxlcyA6IFtdO1xuICB2YXIgcmV0ID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBydWxlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAocnVsZXNbaV0udHlwZSA9PSAncnVsZScpIHtcbiAgICAgIHZhciBydWxlID0gcnVsZXNbaV07XG4gICAgICB2YXIgc2VsZWN0b3JzID0gcnVsZS5zZWxlY3RvcnM7XG5cbiAgICAgIGZvciAodmFyIGlpID0gMCwgbGwgPSBzZWxlY3RvcnMubGVuZ3RoOyBpaSA8IGxsOyBpaSsrKSB7XG4gICAgICAgIHJldC5wdXNoKFtzZWxlY3RvcnNbaWldLCBydWxlLmRlY2xhcmF0aW9uc10pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgcHJlc2VydmVkIHRleHQgZm9yIGEgQ1NTIHNvdXJjZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY3NzIHNvdXJjZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5nZXRQcmVzZXJ2ZWRUZXh0ID0gZnVuY3Rpb24oY3NzLCBvcHRpb25zKSB7XG4gIHZhciBwYXJzZWQgPSBtZW5zY2gucGFyc2UoY3NzLCB7cG9zaXRpb246IHRydWUsIGNvbW1lbnRzOiB0cnVlfSk7XG4gIHZhciBydWxlcyA9IHR5cGVvZiBwYXJzZWQuc3R5bGVzaGVldCAhPSAndW5kZWZpbmVkJyAmJiBwYXJzZWQuc3R5bGVzaGVldC5ydWxlcyA/IHBhcnNlZC5zdHlsZXNoZWV0LnJ1bGVzIDogW107XG4gIHZhciBwcmVzZXJ2ZWQgPSBbXTtcbiAgdmFyIGxhc3RTdGFydCA9IG51bGw7XG5cbiAgZm9yICh2YXIgaSA9IHJ1bGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKChvcHRpb25zLmZvbnRGYWNlcyAmJiBydWxlc1tpXS50eXBlID09PSAnZm9udC1mYWNlJykgfHxcbiAgICAgICAgKG9wdGlvbnMubWVkaWFRdWVyaWVzICYmIHJ1bGVzW2ldLnR5cGUgPT09ICdtZWRpYScpKSB7XG4gICAgICBwcmVzZXJ2ZWQucHVzaChcbiAgICAgICAgbWVuc2NoLnN0cmluZ2lmeShcbiAgICAgICAgICB7IHN0eWxlc2hlZXQ6IHsgcnVsZXM6IFsgcnVsZXNbaV0gXSB9fSxcbiAgICAgICAgICB7IGNvbW1lbnRzOiBmYWxzZSwgaW5kZW50YXRpb246ICcgICcgfVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgICBsYXN0U3RhcnQgPSBydWxlc1tpXS5wb3NpdGlvbi5zdGFydDtcbiAgfVxuXG4gIGlmIChwcmVzZXJ2ZWQubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBvcy5FT0wrcHJlc2VydmVkLmpvaW4ob3MuRU9MKStvcy5FT0w7XG59O1xuXG5leHBvcnRzLm5vcm1hbGl6ZUxpbmVFbmRpbmdzID0gZnVuY3Rpb24odGV4dCkge1xuICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpLnJlcGxhY2UoL1xcbi9nLCAnXFxyXFxuJyk7XG59O1xuXG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIHNwZWNpZmljaXR5IHZlY3RvcnMsIHJldHVybmluZyB0aGUgd2lubmluZyBvbmUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gdmVjdG9yIGFcbiAqIEBwYXJhbSB7QXJyYXl9IHZlY3RvciBiXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZXhwb3J0cy5jb21wYXJlRnVuYyA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgdmFyIG1pbiA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWluOyBpKyspIHtcbiAgICBpZiAoYVtpXSA9PT0gYltpXSkgeyBjb250aW51ZTsgfVxuICAgIGlmIChhW2ldID4gYltpXSkgeyByZXR1cm4gMTsgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIHJldHVybiBhLmxlbmd0aC1iLmxlbmd0aDtcbn07XG5cbmV4cG9ydHMuY29tcGFyZSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGV4cG9ydHMuY29tcGFyZUZ1bmMoYSwgYikgPT0gMSA/IGEgOiBiO1xufTtcblxuZXhwb3J0cy5leHRlbmQgPSBmdW5jdGlvbihvYmosIHNyYykge1xuICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7XG4gICAgaWYgKG93bi5jYWxsKHNyYywga2V5KSkge1xuICAgICAgb2JqW2tleV0gPSBzcmNba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG5cbmV4cG9ydHMuZ2V0RGVmYXVsdE9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gIHZhciByZXN1bHQgPSBleHBvcnRzLmV4dGVuZCh7XG4gICAgZXh0cmFDc3M6ICcnLFxuICAgIGluc2VydFByZXNlcnZlZEV4dHJhQ3NzOiB0cnVlLFxuICAgIGFwcGx5U3R5bGVUYWdzOiB0cnVlLFxuICAgIHJlbW92ZVN0eWxlVGFnczogdHJ1ZSxcbiAgICBwcmVzZXJ2ZU1lZGlhUXVlcmllczogdHJ1ZSxcbiAgICBwcmVzZXJ2ZUZvbnRGYWNlczogdHJ1ZSxcbiAgICBhcHBseVdpZHRoQXR0cmlidXRlczogdHJ1ZSxcbiAgICBhcHBseUhlaWdodEF0dHJpYnV0ZXM6IHRydWUsXG4gICAgYXBwbHlBdHRyaWJ1dGVzVGFibGVFbGVtZW50czogdHJ1ZSxcbiAgICB1cmw6ICcnXG4gIH0sIG9wdGlvbnMpO1xuXG4gIHJlc3VsdC53ZWJSZXNvdXJjZXMgPSByZXN1bHQud2ViUmVzb3VyY2VzIHx8IHt9O1xuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuIiwiLy8ga25vY2tvdXQtc29ydGFibGUgMC4xNS4wIHwgKGMpIDIwMTYgUnlhbiBOaWVtZXllciB8ICBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4hZnVuY3Rpb24oYSl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXCJrbm9ja291dFwiLFwianF1ZXJ5XCIsXCJqcXVlcnktdWkvc29ydGFibGVcIixcImpxdWVyeS11aS9kcmFnZ2FibGVcIl0sYSk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSl7dmFyIGI9cmVxdWlyZShcImtub2Nrb3V0XCIpLGM9cmVxdWlyZShcImpxdWVyeVwiKTtyZXF1aXJlKFwianF1ZXJ5LXVpL3NvcnRhYmxlXCIpLHJlcXVpcmUoXCJqcXVlcnktdWkvZHJhZ2dhYmxlXCIpLGEoYixjKX1lbHNlIGEod2luZG93LmtvLHdpbmRvdy5qUXVlcnkpfShmdW5jdGlvbihhLGIpe3ZhciBjPVwia29fc29ydEl0ZW1cIixkPVwia29fc291cmNlSW5kZXhcIixlPVwia29fc29ydExpc3RcIixmPVwia29fcGFyZW50TGlzdFwiLGc9XCJrb19kcmFnSXRlbVwiLGg9YS51dGlscy51bndyYXBPYnNlcnZhYmxlLGk9YS51dGlscy5kb21EYXRhLmdldCxqPWEudXRpbHMuZG9tRGF0YS5zZXQsaz1iLnVpJiZiLnVpLnZlcnNpb24sbD1rJiZrLmluZGV4T2YoXCIxLjYuXCIpJiZrLmluZGV4T2YoXCIxLjcuXCIpJiYoay5pbmRleE9mKFwiMS44LlwiKXx8XCIxLjguMjRcIj09PWspLG09ZnVuY3Rpb24oYixkKXthLnV0aWxzLmFycmF5Rm9yRWFjaChiLGZ1bmN0aW9uKGEpezE9PT1hLm5vZGVUeXBlJiYoaihhLGMsZCksaihhLGYsaShhLnBhcmVudE5vZGUsZSkpKX0pfSxuPWZ1bmN0aW9uKGIsYyl7dmFyIGQsZT17fSxmPWgoYigpKXx8e307cmV0dXJuIGYuZGF0YT8oZVtjXT1mLmRhdGEsZS5uYW1lPWYudGVtcGxhdGUpOmVbY109YigpLGEudXRpbHMuYXJyYXlGb3JFYWNoKFtcImFmdGVyQWRkXCIsXCJhZnRlclJlbmRlclwiLFwiYXNcIixcImJlZm9yZVJlbW92ZVwiLFwiaW5jbHVkZURlc3Ryb3llZFwiLFwidGVtcGxhdGVFbmdpbmVcIixcInRlbXBsYXRlT3B0aW9uc1wiLFwibm9kZXNcIl0sZnVuY3Rpb24oYil7Zi5oYXNPd25Qcm9wZXJ0eShiKT9lW2JdPWZbYl06YS5iaW5kaW5nSGFuZGxlcnMuc29ydGFibGUuaGFzT3duUHJvcGVydHkoYikmJihlW2JdPWEuYmluZGluZ0hhbmRsZXJzLnNvcnRhYmxlW2JdKX0pLFwiZm9yZWFjaFwiPT09YyYmKGUuYWZ0ZXJSZW5kZXI/KGQ9ZS5hZnRlclJlbmRlcixlLmFmdGVyUmVuZGVyPWZ1bmN0aW9uKGEsYil7bS5jYWxsKGIsYSxiKSxkLmNhbGwoYixhLGIpfSk6ZS5hZnRlclJlbmRlcj1tKSxlfSxvPWZ1bmN0aW9uKGEsYil7dmFyIGM9aChiKTtpZihjKWZvcih2YXIgZD0wO2E+ZDtkKyspY1tkXSYmaChjW2RdLl9kZXN0cm95KSYmYSsrO3JldHVybiBhfSxwPWZ1bmN0aW9uKGMsZCl7dmFyIGUsZjtkPyhmPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGQpLGYmJihlPW5ldyBhLnRlbXBsYXRlU291cmNlcy5kb21FbGVtZW50KGYpLGUudGV4dChiLnRyaW0oZS50ZXh0KCkpKSkpOmIoYykuY29udGVudHMoKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcyYmMSE9PXRoaXMubm9kZVR5cGUmJmMucmVtb3ZlQ2hpbGQodGhpcyl9KX07YS5iaW5kaW5nSGFuZGxlcnMuc29ydGFibGU9e2luaXQ6ZnVuY3Rpb24oayxtLHEscixzKXt2YXIgdCx1LHY9YihrKSx3PWgobSgpKXx8e30seD1uKG0sXCJmb3JlYWNoXCIpLHk9e307cChrLHgubmFtZSksYi5leHRlbmQoITAseSxhLmJpbmRpbmdIYW5kbGVycy5zb3J0YWJsZSksdy5vcHRpb25zJiZ5Lm9wdGlvbnMmJihhLnV0aWxzLmV4dGVuZCh5Lm9wdGlvbnMsdy5vcHRpb25zKSxkZWxldGUgdy5vcHRpb25zKSxhLnV0aWxzLmV4dGVuZCh5LHcpLHkuY29ubmVjdENsYXNzJiYoYS5pc09ic2VydmFibGUoeS5hbGxvd0Ryb3ApfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiB5LmFsbG93RHJvcCk/YS5jb21wdXRlZCh7cmVhZDpmdW5jdGlvbigpe3ZhciBiPWgoeS5hbGxvd0Ryb3ApLGM9XCJmdW5jdGlvblwiPT10eXBlb2YgYj9iLmNhbGwodGhpcyx4LmZvcmVhY2gpOmI7YS51dGlscy50b2dnbGVEb21Ob2RlQ3NzQ2xhc3Moayx5LmNvbm5lY3RDbGFzcyxjKX0sZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkOmt9LHRoaXMpOmEudXRpbHMudG9nZ2xlRG9tTm9kZUNzc0NsYXNzKGsseS5jb25uZWN0Q2xhc3MseS5hbGxvd0Ryb3ApLGEuYmluZGluZ0hhbmRsZXJzLnRlbXBsYXRlLmluaXQoayxmdW5jdGlvbigpe3JldHVybiB4fSxxLHIscyksdD15Lm9wdGlvbnMuc3RhcnQsdT15Lm9wdGlvbnMudXBkYXRlLHkub3B0aW9ucy5oZWxwZXJ8fCh5Lm9wdGlvbnMuaGVscGVyPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGMuaXMoXCJ0clwiKSYmYy5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKXtiKHRoaXMpLndpZHRoKGIodGhpcykud2lkdGgoKSl9KSxjfSk7dmFyIHo9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBtLG49eS5vcHRpb25zLnJlY2VpdmU7di5zb3J0YWJsZShhLnV0aWxzLmV4dGVuZCh5Lm9wdGlvbnMse3N0YXJ0OmZ1bmN0aW9uKGIsYyl7dmFyIGU9Yy5pdGVtWzBdO2ooZSxkLGEudXRpbHMuYXJyYXlJbmRleE9mKGMuaXRlbS5wYXJlbnQoKS5jaGlsZHJlbigpLGUpKSxjLml0ZW0uZmluZChcImlucHV0OmZvY3VzXCIpLmNoYW5nZSgpLHQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZWNlaXZlOmZ1bmN0aW9uKGEsYil7XCJmdW5jdGlvblwiPT10eXBlb2YgbiYmbi5jYWxsKHRoaXMsYSxiKSxtPWkoYi5pdGVtWzBdLGcpLG0mJihtLmNsb25lJiYobT1tLmNsb25lKCkpLHkuZHJhZ2dlZCYmKG09eS5kcmFnZ2VkLmNhbGwodGhpcyxtLGEsYil8fG0pKX0sdXBkYXRlOmZ1bmN0aW9uKGcsayl7dmFyIG4scCxxLHIscyx0PWsuaXRlbVswXSx2PWsuaXRlbS5wYXJlbnQoKVswXSx3PWkodCxjKXx8bTtpZih3fHxiKHQpLnJlbW92ZSgpLG09bnVsbCx3JiZ0aGlzPT09dnx8IWwmJmIuY29udGFpbnModGhpcyx2KSl7aWYobj1pKHQsZikscT1pKHQsZCkscD1pKHQucGFyZW50Tm9kZSxlKSxyPWEudXRpbHMuYXJyYXlJbmRleE9mKGsuaXRlbS5wYXJlbnQoKS5jaGlsZHJlbigpLHQpLHguaW5jbHVkZURlc3Ryb3llZHx8KHE9byhxLG4pLHI9byhyLHApKSwoeS5iZWZvcmVNb3ZlfHx5LmFmdGVyTW92ZSkmJihzPXtpdGVtOncsc291cmNlUGFyZW50Om4sc291cmNlUGFyZW50Tm9kZTpuJiZrLnNlbmRlcnx8dC5wYXJlbnROb2RlLHNvdXJjZUluZGV4OnEsdGFyZ2V0UGFyZW50OnAsdGFyZ2V0SW5kZXg6cixjYW5jZWxEcm9wOiExfSx5LmJlZm9yZU1vdmUmJnkuYmVmb3JlTW92ZS5jYWxsKHRoaXMscyxnLGspKSxuP2Iobj09PXA/dGhpczprLnNlbmRlcnx8dGhpcykuc29ydGFibGUoXCJjYW5jZWxcIik6Yih0KS5yZW1vdmUoKSxzJiZzLmNhbmNlbERyb3ApcmV0dXJuO2lmKHkuaGFzT3duUHJvcGVydHkoXCJzdHJhdGVneU1vdmVcIikmJnkuc3RyYXRlZ3lNb3ZlIT09ITEpe2lmKHI+PTApaWYobilpZihuIT09cCluLnNwbGljZShxLDEpLHAuc3BsaWNlKHIsMCx3KSxqKHQsYyxudWxsKSxrLml0ZW0ucmVtb3ZlKCk7ZWxzZXt2YXIgej1oKG4pO24udmFsdWVXaWxsTXV0YXRlJiZuLnZhbHVlV2lsbE11dGF0ZSgpLHouc3BsaWNlKHEsMSksei5zcGxpY2UociwwLHcpLG4udmFsdWVIYXNNdXRhdGVkJiZuLnZhbHVlSGFzTXV0YXRlZCgpfWVsc2UgcC5zcGxpY2UociwwLHcpLGoodCxjLG51bGwpLGsuaXRlbS5yZW1vdmUoKX1lbHNlIHI+PTAmJihuJiYobi5zcGxpY2UocSwxKSxhLnByb2Nlc3NBbGxEZWZlcnJlZEJpbmRpbmdVcGRhdGVzJiZhLnByb2Nlc3NBbGxEZWZlcnJlZEJpbmRpbmdVcGRhdGVzKCksYS5vcHRpb25zJiZhLm9wdGlvbnMuZGVmZXJVcGRhdGVzJiZhLnRhc2tzLnJ1bkVhcmx5KCkpLHAuc3BsaWNlKHIsMCx3KSksaih0LGMsbnVsbCk7YS5wcm9jZXNzQWxsRGVmZXJyZWRCaW5kaW5nVXBkYXRlcyYmYS5wcm9jZXNzQWxsRGVmZXJyZWRCaW5kaW5nVXBkYXRlcygpLHkuYWZ0ZXJNb3ZlJiZ5LmFmdGVyTW92ZS5jYWxsKHRoaXMscyxnLGspfXUmJnUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjb25uZWN0V2l0aDp5LmNvbm5lY3RDbGFzcz9cIi5cIit5LmNvbm5lY3RDbGFzczohMX0pKSx2b2lkIDAhPT15LmlzRW5hYmxlZCYmYS5jb21wdXRlZCh7cmVhZDpmdW5jdGlvbigpe3Yuc29ydGFibGUoaCh5LmlzRW5hYmxlZCk/XCJlbmFibGVcIjpcImRpc2FibGVcIil9LGRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZDprfSl9LDApO3JldHVybiBhLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2soayxmdW5jdGlvbigpeyh2LmRhdGEoXCJ1aS1zb3J0YWJsZVwiKXx8di5kYXRhKFwic29ydGFibGVcIikpJiZ2LnNvcnRhYmxlKFwiZGVzdHJveVwiKSxhLnV0aWxzLnRvZ2dsZURvbU5vZGVDc3NDbGFzcyhrLHkuY29ubmVjdENsYXNzLCExKSxjbGVhclRpbWVvdXQoeil9KSx7Y29udHJvbHNEZXNjZW5kYW50QmluZGluZ3M6ITB9fSx1cGRhdGU6ZnVuY3Rpb24oYixjLGQsZixnKXt2YXIgaD1uKGMsXCJmb3JlYWNoXCIpO2ooYixlLGguZm9yZWFjaCksYS5iaW5kaW5nSGFuZGxlcnMudGVtcGxhdGUudXBkYXRlKGIsZnVuY3Rpb24oKXtyZXR1cm4gaH0sZCxmLGcpfSxjb25uZWN0Q2xhc3M6XCJrb19jb250YWluZXJcIixhbGxvd0Ryb3A6ITAsYWZ0ZXJNb3ZlOm51bGwsYmVmb3JlTW92ZTpudWxsLG9wdGlvbnM6e319LGEuYmluZGluZ0hhbmRsZXJzLmRyYWdnYWJsZT17aW5pdDpmdW5jdGlvbihjLGQsZSxmLGkpe3ZhciBrPWgoZCgpKXx8e30sbD1rLm9wdGlvbnN8fHt9LG09YS51dGlscy5leHRlbmQoe30sYS5iaW5kaW5nSGFuZGxlcnMuZHJhZ2dhYmxlLm9wdGlvbnMpLG89bihkLFwiZGF0YVwiKSxwPWsuY29ubmVjdENsYXNzfHxhLmJpbmRpbmdIYW5kbGVycy5kcmFnZ2FibGUuY29ubmVjdENsYXNzLHE9dm9pZCAwIT09ay5pc0VuYWJsZWQ/ay5pc0VuYWJsZWQ6YS5iaW5kaW5nSGFuZGxlcnMuZHJhZ2dhYmxlLmlzRW5hYmxlZDtyZXR1cm4gaz1cImRhdGFcImluIGs/ay5kYXRhOmssaihjLGcsayksYS51dGlscy5leHRlbmQobSxsKSxtLmNvbm5lY3RUb1NvcnRhYmxlPXA/XCIuXCIrcDohMSxiKGMpLmRyYWdnYWJsZShtKSx2b2lkIDAhPT1xJiZhLmNvbXB1dGVkKHtyZWFkOmZ1bmN0aW9uKCl7YihjKS5kcmFnZ2FibGUoaChxKT9cImVuYWJsZVwiOlwiZGlzYWJsZVwiKX0sZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkOmN9KSxhLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2soYyxmdW5jdGlvbigpe2IoYykuZHJhZ2dhYmxlKFwiZGVzdHJveVwiKX0pLGEuYmluZGluZ0hhbmRsZXJzLnRlbXBsYXRlLmluaXQoYyxmdW5jdGlvbigpe3JldHVybiBvfSxlLGYsaSl9LHVwZGF0ZTpmdW5jdGlvbihiLGMsZCxlLGYpe3ZhciBnPW4oYyxcImRhdGFcIik7cmV0dXJuIGEuYmluZGluZ0hhbmRsZXJzLnRlbXBsYXRlLnVwZGF0ZShiLGZ1bmN0aW9uKCl7cmV0dXJuIGd9LGQsZSxmKX0sY29ubmVjdENsYXNzOmEuYmluZGluZ0hhbmRsZXJzLnNvcnRhYmxlLmNvbm5lY3RDbGFzcyxvcHRpb25zOntoZWxwZXI6XCJjbG9uZVwifX19KTsiLCIvLyBLbm9ja291dCBVbmRvTWFuYWdlciB2MC4yIHwgKGMpIDIwMTUgU3RlZmFubyBCYWduYXJhXG4vLyBMaWNlbnNlOiBNSVQgKGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UpIFxuLy8gcmVxdWlyZXMgXCJrby53YXRjaFwiIG1ldGhvZCBmcm9tIGtub2Nrb3V0LnJlYWN0b3JcbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAvLyBNb2R1bGUgc3lzdGVtcyBtYWdpYyBkYW5jZS5cbiAgaWYgKHR5cGVvZiByZXF1aXJlID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGV4cG9ydHMgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIikge1xuICAgIC8vIENvbW1vbkpTIG9yIE5vZGU6IGhhcmQtY29kZWQgZGVwZW5kZW5jeSBvbiBcImtub2Nrb3V0XCJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImtub2Nrb3V0XCIpLCByZXF1aXJlKFwia25vY2tvdXRqcy1yZWFjdG9yXCIpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lW1wiYW1kXCJdKSB7XG4gICAgLy8gQU1EIGFub255bW91cyBtb2R1bGUgd2l0aCBoYXJkLWNvZGVkIGRlcGVuZGVuY3kgb24gXCJrbm9ja291dFwiXG4gICAgZGVmaW5lKFtcImtub2Nrb3V0XCIsIFwia25vY2tvdXRqcy1yZWFjdG9yXCIsIFwiZXhwb3J0c1wiXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gPHNjcmlwdD4gdGFnOiB1c2UgdGhlIGdsb2JhbCBga29gIG9iamVjdFxuICAgIGZhY3Rvcnkoa28sIGtvLndhdGNoKTtcbiAgfVxufShmdW5jdGlvbiAoa28sIHJlYWN0b3IpIHsgXG5cbiAgLy8vIDxzdW1tYXJ5PlxuICAvLy8gICAgIFRyYWNrIGxhc3QgXCJsZXZlbHNcIiBjaGFuZ2VzIHdpdGhpbiB0aGUgY2hhaW5lZCBvYnNlcnZhYmxlIGRvd24gdG8gYW55IGdpdmVuIGxldmVsIGFuZFxuICAvLy8gICAgIHN1cHBvcnRzIHVuZG9pbmcvcmVkb2luZyB0aGUgY2hhbmdlcy5cbiAgLy8vIDwvc3VtbWFyeT5cbiAgLy8vIDxwYXJhbSBuYW1lPVwib3B0aW9uc1wiIHR5cGU9XCJvYmplY3RcIj5cbiAgLy8vICAgICB7IGxldmVsczogMiB9IC0+IFJlbWVtYmVyIG9ubHkgbGFzdCBcImxldmVsc1wiIGNoYW5nZXM8YnIvPlxuICAvLy8gICAgIHsgdW5kb0xhYmVsOiBcIlVuZG8gaXQgKCNDT1VOVCkhXCIgfSAtPiBEZWZpbmUgYSBsYWJlbCBmb3IgdGhlIHVuZG8gY29tbWFuZC4gXCIjQ09VTlQjXCIgc2VxdWVuY2Ugd2lsbCBiZSByZXBsYWNlZCB3aXRoIHRoZSBzdGFjayBsZW5ndGguPGJyLz5cbiAgLy8vICAgICB7IHJlZG9MYWJlbDogXCJSZWRvIGl0ICgjQ09VTlQpIVwiIH0gLT4gRGVmaW5lIGEgbGFiZWwgZm9yIHRoZSByZWRvIGNvbW1hbmQuIFwiI0NPVU5UI1wiIHNlcXVlbmNlIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCB0aGUgc3RhY2sgbGVuZ3RoLjxici8+XG4gIC8vLyA8L3BhcmFtPlxuICB2YXIgdW5kb01hbmFnZXIgPSBmdW5jdGlvbiAobW9kZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgdW5kb1N0YWNrID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7XG4gICAgdmFyIHJlZG9TdGFjayA9IGtvLm9ic2VydmFibGVBcnJheSgpO1xuICAgIHZhciBsYXN0UHVzaGVkU3RhY2s7XG4gICAgdmFyIFNUQVRFX0RPSU5HID0gMDtcbiAgICB2YXIgU1RBVEVfVU5ET0lORyA9IDE7XG4gICAgdmFyIFNUQVRFX1JFRE9JTkcgPSAyO1xuICAgIHZhciBzdGF0ZSA9IFNUQVRFX0RPSU5HO1xuXG4gICAgdmFyIE1PREVfTk9STUFMID0gMDsgLy8gYWRkIHRvIHN0YWNrIGV2ZXJ5IGNoYW5nZVxuICAgIHZhciBNT0RFX0lHTk9SRSA9IDE7IC8vIGRvIG5vdCBhZGQgYW55dGhpbmcgdG8gdGhlIHN0YWNrXG4gICAgdmFyIE1PREVfT05DRSA9IDI7IC8vIG9ubHkgb25lIHNlcXVlbnRpYWwgY2hhbmdlIGZvciBlYWNoIHByb3BlcnR5IGlzIGFkZGVkIHRvIHRoZSBzdGFja1xuICAgIHZhciBNT0RFX01FUkdFID0gMzsgLy8gbWVyZ2UgbmV4dCBjaGFuZ2Ugd2l0aCB0aGUgbGFzdCBvbmVcbiAgICB2YXIgbW9kZSA9IE1PREVfTk9STUFMO1xuXG4gICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgbGV2ZWxzOiAxMDAsXG4gICAgICB1bmRvTGFiZWw6IFwidW5kbyAoI0NPVU5UIylcIixcbiAgICAgIHJlZG9MYWJlbDogXCJyZWRvICgjQ09VTlQjKVwiXG4gICAgfTtcbiAgICBcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT0gJ29iamVjdCcpIHtcbiAgICAgIG9wdGlvbnMgPSBrby51dGlscy5leHRlbmQoZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zID0gZGVmYXVsdE9wdGlvbnM7XG4gICAgfVxuICBcbiAgICB2YXIgX3B1c2ggPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAvLyBkdXJhbnRlIFVORE8vUkVETyBsYXZvcmlhbW8gc2VtcHJlIGluIG5vcm1hbGVcbiAgICAgIGlmIChzdGF0ZSA9PSBTVEFURV9VTkRPSU5HKSB7XG4gICAgICAgIF9wdXNoSW50KGFjdGlvbiwgcmVkb1N0YWNrKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gU1RBVEVfUkVET0lORykge1xuICAgICAgICBfcHVzaEludChhY3Rpb24sIHVuZG9TdGFjayk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlID09IFNUQVRFX0RPSU5HKSB7XG4gICAgICAgIF9wdXNoSW50KGFjdGlvbiwgdW5kb1N0YWNrKTtcbiAgICAgICAgcmVkb1N0YWNrLnJlbW92ZUFsbCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdmFyIF90cnlNZXJnZSA9IGZ1bmN0aW9uIChwcmV2LCBuZXdBY3Rpb24pIHtcbiAgICAgIGlmICh0eXBlb2YgcHJldi5tZXJnZWRBY3Rpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBwcmV2Lm1lcmdlZEFjdGlvbihuZXdBY3Rpb24pO1xuICAgICAgfSBlbHNlIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICB2YXIgX3B1c2hJbnQgPSBmdW5jdGlvbiAoYWN0aW9uLCBteVN0YWNrKSB7XG4gICAgICAvKiBnZXN0aW9uZSBkZWwgbWVyZ2UgZGkgYXppb25pOiBzZSBsJ3VsdGltYSBhemlvbmUgbmVsbG8gc3RhY2sgaGEgdW4gbWV0b2RvIFwibWVyZ2VkQWN0aW9uXCJcbiAgICAgICAgIHByb3ZpYW1vIGFkIGludm9jYXJsbyBlIHNlIGNpIHJlc3RpdHVpc2NlIHVuYSBmdW56aW9uZSBsYSB1c2lhbW8gYWwgcG9zdG8gZGkgZW50cmFtYmUgKi9cbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiVVJcIiwgXCJfcHVzaEludFwiLCBteVN0YWNrKCkubGVuZ3RoID4gMCA/IHR5cGVvZiBteVN0YWNrKClbbXlTdGFjaygpLmxlbmd0aCAtIDFdLm1lcmdlZEFjdGlvbiA6IFwiRU1QVFlcIik7XG4gICAgICBpZiAobXlTdGFjaygpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIG1lcmdlZCA9IF90cnlNZXJnZShteVN0YWNrKClbbXlTdGFjaygpLmxlbmd0aCAtIDFdLCBhY3Rpb24pO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlVSXCIsIFwiX3B1c2hJbnQubWVyZ2VkXCIsIG1lcmdlZCwgXCJNVlwiLCB0eXBlb2YgYWN0aW9uLm1lcmdlYWJsZU1vdmUsIFwiTUFcIiwgdHlwZW9mIGFjdGlvbi5tZXJnZWFibGVBY3Rpb24sIFwiTU1cIiwgdHlwZW9mIGFjdGlvbi5tZXJnZU1lKTtcbiAgICAgICAgaWYgKG1lcmdlZCAhPT0gbnVsbCkge1xuICAgICAgICAgIG15U3RhY2soKVtteVN0YWNrKCkubGVuZ3RoIC0gMV0gPSBtZXJnZWQ7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobXlTdGFjaygpLmxlbmd0aCA+PSBvcHRpb25zLmxldmVscykgbXlTdGFjay5zaGlmdCgpO1xuICAgICAgbGFzdFB1c2hlZFN0YWNrID0gbXlTdGFjaztcbiAgICAgIG15U3RhY2sucHVzaChhY3Rpb24pO1xuICAgIH07XG4gICAgXG4gICAgdmFyIF94ZG9Db21tYW5kID0gZnVuY3Rpb24obGFiZWwsIHdvcmtTdGF0ZSwgc3RhY2spIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGxhYmVsKS5yZXBsYWNlKC8jQ09VTlQjLywgc3RhY2soKS5sZW5ndGgpO1xuICAgICAgICB9KSxcbiAgICAgICAgZW5hYmxlZDoga28uY29tcHV0ZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YWNrKCkubGVuZ3RoICE9PSAwO1xuICAgICAgICB9KSxcbiAgICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGFjdGlvbiA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBwcmV2U3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgICAgIHN0YXRlID0gd29ya1N0YXRlO1xuICAgICAgICAgICAgdmFyIG9sZE1vZGUgPSBtb2RlO1xuICAgICAgICAgICAgbW9kZSA9IE1PREVfTUVSR0U7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlhET1wiLCBcImJlZm9yZVwiLCBsYWJlbCk7XG4gICAgICAgICAgICBhY3Rpb24oKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiWERPXCIsIFwiYWZ0ZXJcIiwgbGFiZWwpO1xuICAgICAgICAgICAgX3JlbW92ZU1lcmdlZEFjdGlvbihsYXN0UHVzaGVkU3RhY2spO1xuICAgICAgICAgICAgbW9kZSA9IG9sZE1vZGU7XG4gICAgICAgICAgICBzdGF0ZSA9IHByZXZTdGF0ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfTtcblxuICAgIHZhciBfcmVtb3ZlTWVyZ2VkQWN0aW9uID0gZnVuY3Rpb24obXlTdGFjaykge1xuICAgICAgaWYgKHR5cGVvZiBteVN0YWNrID09ICd1bmRlZmluZWQnKSB0aHJvdyBcIlVuZXhwZWN0ZWQgb3BlcmF0aW9uOiBzdGFjayBjbGVhbmVyIGNhbGxlZCB3aXRoIHVuZGVmaW5lZCBzdGFja1wiO1xuICAgICAgXG4gICAgICBpZiAobXlTdGFjaygpLmxlbmd0aCA+IDAgJiYgdHlwZW9mIG15U3RhY2soKVtteVN0YWNrKCkubGVuZ3RoIC0gMV0ubWVyZ2VkQWN0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlJlbW92aW5nIG1lcmdlZEFjdGlvbiBmcm9tIHN0YWNrXCIpO1xuICAgICAgICBkZWxldGUgbXlTdGFjaygpW215U3RhY2soKS5sZW5ndGggLSAxXS5tZXJnZWRBY3Rpb247XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBfY29tYmluZWRGdW5jdGlvbiA9IGZ1bmN0aW9uKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgIHZhciByZXMgPSAoZnVuY3Rpb24oZjEsIGYyKSB7XG4gICAgICAgIGYxKCk7XG4gICAgICAgIGYyKCk7XG4gICAgICB9KS5iaW5kKHVuZGVmaW5lZCwgZmlyc3QsIHNlY29uZCk7XG4gICAgICBpZiAodHlwZW9mIGZpcnN0Lm1lcmdlZEFjdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmVzLm1lcmdlZEFjdGlvbiA9IGZpcnN0Lm1lcmdlZEFjdGlvbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfTtcblxuICAgIHZhciBleGVjdXRlVW5kb0FjdGlvbiA9IGZ1bmN0aW9uKGNoaWxkLCB2YWx1ZSwgaXRlbSkge1xuICAgICAgLy8gY29uc29sZS5sb2coXCJleGVjdXRlVW5kb0FjdGlvblwiLCBjaGlsZCwgdmFsdWUsIGl0ZW0pO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY2hpbGQodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtLnN0YXR1cyA9PSAnZGVsZXRlZCcpIHtcbiAgICAgICAgICBjaGlsZC5zcGxpY2UoaXRlbS5pbmRleCwgMCwgaXRlbS52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbS5zdGF0dXMgPT0gJ2FkZGVkJykge1xuICAgICAgICAgIGNoaWxkLnNwbGljZShpdGVtLmluZGV4LCAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBcIlVuc3VwcHJvdGVkIGl0ZW0uc3RhdHVzOiBcIitpdGVtLnN0YXR1cztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgXCJVbmV4cGVjdGVkIGNvbmRpdGlvbjogbm8gaXRlbSBhbmQgbm8gY2hpbGQub2xkVmFsdWVzIVwiO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgbWFrZVVuZG9BY3Rpb25EZWZhdWx0ID0gZnVuY3Rpb24odW5kb0Z1bmMsIHBhcmVudHMsIGNoaWxkLCBvbGRWYWwsIGl0ZW0pIHtcbiAgICAgIHJldHVybiB1bmRvRnVuYy5iaW5kKHVuZGVmaW5lZCwgY2hpbGQsIG9sZFZhbCwgaXRlbSk7XG4gICAgfTtcblxuICAgIHZhciBtYWtlVW5kb0FjdGlvbiA9IG1ha2VVbmRvQWN0aW9uRGVmYXVsdDtcblxuICAgIHZhciBjaGFuZ2VQdXNoZXIgPSBmdW5jdGlvbihwYXJlbnRzLCBjaGlsZCwgaXRlbSkge1xuICAgICAgdmFyIG9sZFZhbCA9IHR5cGVvZiBjaGlsZC5vbGRWYWx1ZXMgIT0gJ3VuZGVmaW5lZCcgPyBjaGlsZC5vbGRWYWx1ZXNbMF0gOiB1bmRlZmluZWQ7XG4gICAgICB2YXIgYWN0ID0gbWFrZVVuZG9BY3Rpb24oZXhlY3V0ZVVuZG9BY3Rpb24sIHBhcmVudHMsIGNoaWxkLCBvbGRWYWwsIGl0ZW0pO1xuXG4gICAgICBpZiAobW9kZSA9PSBNT0RFX0lHTk9SRSkgcmV0dXJuO1xuXG4gICAgICBpZiAobW9kZSA9PSBNT0RFX01FUkdFKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiVVJcIiwgXCJtZXJnZW1vZGVcIik7XG4gICAgICAgIGlmICh0eXBlb2YgYWN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGFjdC5tZXJnZWRBY3Rpb24gPSBmdW5jdGlvbihuZXdBY3Rpb24pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3QWN0aW9uLm1lcmdlTWUgIT09ICd1bmRlZmluZWQnICYmIG5ld0FjdGlvbi5tZXJnZU1lKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfY29tYmluZWRGdW5jdGlvbihuZXdBY3Rpb24sIHRoaXMpO1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybiBudWxsO1xuICAgICAgICAgIH07XG4gICAgICAgICAgYWN0Lm1lcmdlTWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodHlwZW9mIGFjdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpZiAoY2hpbGQub2xkVmFsdWVzICYmIG1vZGUgPT0gTU9ERV9PTkNFKSB7XG4gICAgICAgICAgICBhY3QubWVyZ2VkQWN0aW9uID0gZnVuY3Rpb24ob2xkQ2hpbGQsIG9sZEl0ZW0sIG5ld0FjdGlvbikge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIG5ld0FjdGlvbi5tZXJnZWFibGVBY3Rpb24gPT0gJ29iamVjdCcgJiYgb2xkQ2hpbGQgPT0gbmV3QWN0aW9uLm1lcmdlYWJsZUFjdGlvbi5jaGlsZCkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiVVJcIiwgXCJpZ25vcmUgdXBkYXRlIGZvciBwcm9wZXJ0eSBpbiBNT0RFX09OQ0VcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH0uYmluZChhY3QsIGNoaWxkLCBpdGVtKTtcbiAgICAgICAgICAgIGFjdC5tZXJnZWFibGVBY3Rpb24gPSB7IGNoaWxkOiBjaGlsZCwgaXRlbTogaXRlbSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlVSXCIsIFwiaXRlbS5zdGF0dXNcIiwgaXRlbS5zdGF0dXMpO1xuICAgICAgICAgIC8vIFwiaXRlbVwiIGlzIHZhbHVlZCB3aGVuIGFuIGl0ZW0gaXMgYWRkZWQvcmVtb3ZlZC9yZXRlaW5lZCBpbiBhbiBhcnJheVxuICAgICAgICAgIC8vIHNvbWV0aW1lcyBLTyBkZXRlY3QgXCJtb3Zlc1wiIGFuZCBhZGQgYSBcIm1vdmVkXCIgcHJvcGVydHkgd2l0aCB0aGUgaW5kZXggYnV0XG4gICAgICAgICAgLy8gdGhpcyBkb2Vzbid0IGhhcHBlbiBmb3IgZXhhbXBsZSB1c2luZyBrbm9ja291dC1zb3J0YWJsZSBvciB3aGVuIG1vdmluZyBvYmplY3RzXG4gICAgICAgICAgLy8gYmV0d2VlbiBhcnJheXMuXG4gICAgICAgICAgLy8gU28gdGhpcyBlbmRzIHVwIGhhbmRsaW5nIHRoaXMgd2l0aCBcIm1lcmdlYWJsZU1vdmVcIiBhbmQgXCJtZXJnZWRBY3Rpb25cIjogXG4gICAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS5zdGF0dXMgPT0gJ2RlbGV0ZWQnKSB7XG4gICAgICAgICAgICAvLyBUT0RPIHNlIHNvbm8gaW4gTU9ERSA9IE1FUkdFIGRldm8gbWV0dGVlciB1bmEgZnVuemlvbmUgZGkgbWVyZ2UgY2hlIGFjY2V0dGEgdHV0dG8uXG4gICAgICAgICAgICAvLyBhbHRyaW1lbnRpIGxhc2NpbyBxdWVzdGEuXG4gICAgICAgICAgICBhY3QubWVyZ2VkQWN0aW9uID0gZnVuY3Rpb24ob2xkQ2hpbGQsIG9sZEl0ZW0sIG5ld0FjdGlvbikge1xuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlVSXCIsIFwiYWN0Lm1lcmdlZEFjdGlvblwiLCB0eXBlb2YgbmV3QWN0aW9uLm1lcmdlYWJsZU1vdmUpO1xuICAgICAgICAgICAgICAvLyBhIGRlbGV0ZWQgYWN0aW9uIGlzIGFibGUgdG8gbWVyZ2Ugd2l0aCBhIGFkZGVkIGFjdGlvbiBpZiB0aGV5IGFwcGx5IHRvIHRoZSBzYW1lXG4gICAgICAgICAgICAgIC8vIG9iamVjdC5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuZXdBY3Rpb24ubWVyZ2VhYmxlTW92ZSA9PSAnb2JqZWN0JyAmJiBvbGRJdGVtLnZhbHVlID09IG5ld0FjdGlvbi5tZXJnZWFibGVNb3ZlLml0ZW0udmFsdWUpIHtcbiAgICAgICAgICAgICAgICAvLyBpbiB0aGlzIGNhc2UgSSBzaW1wbHkgcmV0dXJuIGEgc2luZ2xlIGFjdGlvbiBydW5uaW5nIGJvdGggYWN0aW9ucyBpbiBzZXF1ZW5jZSxcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHdheSB0aGUgXCJ1bmRvXCIgd2lsbCBuZWVkIHRvIHVuZG8gb25seSBvbmNlIGZvciBhIFwibW92ZVwiIG9wZXJhdGlvbi5cbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbWJpbmVkRnVuY3Rpb24obmV3QWN0aW9uLCB0aGlzKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVSXCIsIFwibm90IG1lcmdlYWJsZVwiLCB0eXBlb2YgbmV3QWN0aW9uLm1lcmdlYWJsZU1vdmUpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9LmJpbmQoYWN0LCBjaGlsZCwgaXRlbSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtICYmIGl0ZW0uc3RhdHVzID09ICdhZGRlZCcpIHtcbiAgICAgICAgICAgIC8vIGFkZCBhIG1lcmdlYWJsZU1vdmUgcHJvcGVydHkgdGhhdCB3aWxsIGJlIHVzZWQgYnkgdGhlIG5leHQgYWN0aW9uIFwibWVyZ2VkQWN0aW9uXCIgdG8gc2VlIGlmIHRoaXMgYWN0aW9uXG4gICAgICAgICAgICAvLyBjYW4gYmUgbWVyZ2VkLlxuICAgICAgICAgICAgYWN0Lm1lcmdlYWJsZU1vdmUgPSB7IGNoaWxkOiBjaGlsZCwgaXRlbTogaXRlbSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBhY3QgIT09ICd1bmRlZmluZWQnKSBfcHVzaChhY3QpO1xuICAgIH07XG5cbiAgICB2YXIgcmVhY3Rvck9wdGlvbnMgPSB7IGRlcHRoOiAtMSwgb2xkVmFsdWVzOiAxLCBtdXRhYmxlOiB0cnVlLCAvKiB0YWdQYXJlbnRzV2l0aE5hbWU6IHRydWUgKi8gdGFnRmllbGRzOiB0cnVlIH07XG5cbiAgICB2YXIgY29udGV4dCA9IHt9O1xuICAgIHZhciByZWFjdCA9IHR5cGVvZiByZWFjdG9yID09ICdmdW5jdGlvbicgPyByZWFjdG9yIDoga28ud2F0Y2g7XG4gICAgdmFyIHJlcyA9IHJlYWN0KG1vZGVsLCByZWFjdG9yT3B0aW9ucywgY2hhbmdlUHVzaGVyLCBjb250ZXh0KTtcblxuICAgIHJldHVybiB7XG4gICAgICBwdXNoOiBfcHVzaCwgXG4gICAgICB1bmRvQ29tbWFuZDogX3hkb0NvbW1hbmQob3B0aW9ucy51bmRvTGFiZWwsIFNUQVRFX1VORE9JTkcsIHVuZG9TdGFjayksXG4gICAgICByZWRvQ29tbWFuZDogX3hkb0NvbW1hbmQob3B0aW9ucy5yZWRvTGFiZWwsIFNUQVRFX1JFRE9JTkcsIHJlZG9TdGFjayksXG4gICAgICByZXNldDogZnVuY3Rpb24oKSB7IHVuZG9TdGFjay5yZW1vdmVBbGwoKTsgcmVkb1N0YWNrLnJlbW92ZUFsbCgpOyB9LFxuICAgICAgLy8gc2V0TW9kZTogZnVuY3Rpb24obmV3TW9kZSkgeyBtb2RlID0gbmV3TW9kZTsgX3JlbW92ZU1lcmdlZEFjdGlvbih1bmRvU3RhY2spOyB9LFxuICAgICAgc2V0TW9kZU9uY2U6IGZ1bmN0aW9uKCkgeyBtb2RlID0gTU9ERV9PTkNFOyBfcmVtb3ZlTWVyZ2VkQWN0aW9uKHVuZG9TdGFjayk7IH0sXG4gICAgICBzZXRNb2RlTWVyZ2U6IGZ1bmN0aW9uKCkgeyBtb2RlID0gTU9ERV9NRVJHRTsgX3JlbW92ZU1lcmdlZEFjdGlvbih1bmRvU3RhY2spOyB9LFxuICAgICAgc2V0TW9kZU5vcm1hbDogZnVuY3Rpb24oKSB7IG1vZGUgPSBNT0RFX05PUk1BTDsgX3JlbW92ZU1lcmdlZEFjdGlvbih1bmRvU3RhY2spOyB9LFxuICAgICAgc2V0TW9kZUlnbm9yZTogZnVuY3Rpb24oKSB7IG1vZGUgPSBNT0RFX0lHTk9SRTsgX3JlbW92ZU1lcmdlZEFjdGlvbih1bmRvU3RhY2spOyB9LFxuICAgICAgc2V0VW5kb0FjdGlvbk1ha2VyOiBmdW5jdGlvbihtYWtlcikgeyBtYWtlVW5kb0FjdGlvbiA9IG1ha2VyOyB9LFxuICAgICAgZGlzcG9zZTogZnVuY3Rpb24oKSB7IC8qIGtvLnVud2F0Y2gobW9kZWwsIHJlYWN0b3JPcHRpb25zLCBjaGFuZ2VQdXNoZXIpOyAqLyByZXMuZGlzcG9zZSgpOyB9XG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gdW5kb01hbmFnZXI7XG4gIFxufSkpOyIsIi8vIEtub2Nrb3V0IEZhc3QgTWFwcGluZyB2MC4xXG4vLyBMaWNlbnNlOiBNSVQgKGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwKVxuXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcblx0Ly8gTW9kdWxlIHN5c3RlbXMgbWFnaWMgZGFuY2UuXG5cblx0aWYgKHR5cGVvZiByZXF1aXJlID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGV4cG9ydHMgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIikge1xuXHRcdC8vIENvbW1vbkpTIG9yIE5vZGU6IGhhcmQtY29kZWQgZGVwZW5kZW5jeSBvbiBcImtub2Nrb3V0XCJcblx0XHRmYWN0b3J5KHJlcXVpcmUoXCJrbm9ja291dFwiKSwgZXhwb3J0cyk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZVtcImFtZFwiXSkge1xuXHRcdC8vIEFNRCBhbm9ueW1vdXMgbW9kdWxlIHdpdGggaGFyZC1jb2RlZCBkZXBlbmRlbmN5IG9uIFwia25vY2tvdXRcIlxuXHRcdGRlZmluZShbXCJrbm9ja291dFwiLCBcImV4cG9ydHNcIl0sIGZhY3RvcnkpO1xuXHR9IGVsc2Uge1xuXHRcdC8vIDxzY3JpcHQ+IHRhZzogdXNlIHRoZSBnbG9iYWwgYGtvYCBvYmplY3QsIGF0dGFjaGluZyBhIGB3cmFwYCBwcm9wZXJ0eVxuXHRcdGZhY3Rvcnkoa28sIGtvLndyYXAgPSB7fSk7XG5cdH1cbn0oZnVuY3Rpb24gKGtvLCBleHBvcnRzKSB7XG4gICAgXG4gICAgLy8gdGhpcyBmdW5jdGlvbiBtaW1pY3Mga28ubWFwcGluZ1xuICAgIGV4cG9ydHMuZnJvbUpTID0gZnVuY3Rpb24oanNPYmplY3QsIGNvbXB1dGVkRnVuY3Rpb25zLCBvYnNlcnZhYmxlT2JqZWN0cylcbiAgICB7XG4gICAgICAgIHJlc2V0KCk7XG5cdHJldHVybiB3cmFwKGpzT2JqZWN0LCBjb21wdXRlZEZ1bmN0aW9ucywgb2JzZXJ2YWJsZU9iamVjdHMpO1xuICAgIH1cblxuICAgIC8vIHRoaXMgZnVuY3Rpb24gdW53cmFwcyB0aGUgb3V0ZXIgZm9yIGFzc2lnbmluZyB0aGUgcmVzdWx0IHRvIGFuIG9ic2VydmFibGVcbiAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1N0ZXZlU2FuZGVyc29uL2tub2Nrb3V0L2lzc3Vlcy81MTdcbiAgICBleHBvcnRzLnVwZGF0ZUZyb21KUyA9IGZ1bmN0aW9uKG9ic2VydmFibGUsIGpzT2JqZWN0LCBjb21wdXRlZEZ1bmN0aW9ucywgb2JzZXJ2YWJsZU9iamVjdHMpXG4gICAge1xuICAgICAgICByZXNldCgpO1xuXHRyZXR1cm4gb2JzZXJ2YWJsZShrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHdyYXAoanNPYmplY3QsIGNvbXB1dGVkRnVuY3Rpb25zLCBvYnNlcnZhYmxlT2JqZWN0cykpKTtcbiAgICB9XG5cbiAgICBleHBvcnRzLmZyb21KU09OID0gZnVuY3Rpb24gKGpzb25TdHJpbmcsIGNvbXB1dGVkRnVuY3Rpb25zLCBvYnNlcnZhYmxlT2JqZWN0cykge1xuXHR2YXIgcGFyc2VkID0ga28udXRpbHMucGFyc2VKc29uKGpzb25TdHJpbmcpO1xuXHRhcmd1bWVudHNbMF0gPSBwYXJzZWQ7XG5cdHJldHVybiBleHBvcnRzLmZyb21KUy5hcHBseSh0aGlzLCBjb21wdXRlZEZ1bmN0aW9ucywgb2JzZXJ2YWJsZU9iamVjdHMpO1xuICAgIH07XG4gICAgXG4gICAgZXhwb3J0cy50b0pTID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHtcblx0cmV0dXJuIHVud3JhcChvYnNlcnZhYmxlKTtcbiAgICB9XG5cbiAgICBleHBvcnRzLnRvSlNPTiA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlKSB7XG5cdHZhciBwbGFpbkphdmFTY3JpcHRPYmplY3QgPSBleHBvcnRzLnRvSlMob2JzZXJ2YWJsZSk7XG5cdHJldHVybiBrby51dGlscy5zdHJpbmdpZnlKc29uKHBsYWluSmF2YVNjcmlwdE9iamVjdCk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHR5cGVPZih2YWx1ZSkge1xuXHR2YXIgcyA9IHR5cGVvZiB2YWx1ZTtcblx0aWYgKHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuY29uc3RydWN0b3IgPT0gRGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgcyA9ICdkYXRlJztcblx0XHRlbHNlIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09ICdbb2JqZWN0IEFycmF5XScpXG4gICAgICAgICAgICAgICAgICAgIHMgPSAnYXJyYXknO1xuICAgICAgICAgICAgfSBlbHNlIHtcblx0XHRzID0gJ251bGwnO1xuICAgICAgICAgICAgfVxuXHR9XG5cdHJldHVybiBzO1xuICAgIH1cblxuICAgIC8vIHVud3JhcHBpbmdcbiAgICBmdW5jdGlvbiB1bndyYXBPYmplY3QobylcbiAgICB7XG5cdHZhciB0ID0ge307XG5cblx0Zm9yICh2YXIgayBpbiBvKVxuXHR7XG5cdCAgICB2YXIgdiA9IG9ba107XG5cblx0ICAgIGlmIChrby5pc0NvbXB1dGVkKHYpKVxuXHRcdGNvbnRpbnVlO1xuXG5cdCAgICB0W2tdID0gdW53cmFwKHYpO1xuXHR9XG5cblx0cmV0dXJuIHQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW53cmFwQXJyYXkoYSlcbiAgICB7XG5cdHZhciByID0gW107XG5cblx0aWYgKCFhIHx8IGEubGVuZ3RoID09IDApXG5cdCAgICByZXR1cm4gcjtcblx0XG5cdGZvciAodmFyIGkgPSAwLCBsID0gYS5sZW5ndGg7IGkgPCBsOyArK2kpXG5cdCAgICByLnB1c2godW53cmFwKGFbaV0pKTtcblxuXHRyZXR1cm4gcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1bndyYXAodilcbiAgICB7XG5cdHZhciBpc09ic2VydmFibGUgPSBrby5pc09ic2VydmFibGUodik7XG5cblx0aWYgKGlzT2JzZXJ2YWJsZSlcblx0e1xuXHQgICAgdmFyIHZhbCA9IHYoKTtcblxuXHQgICAgcmV0dXJuIHVud3JhcCh2YWwpO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHQgICAgaWYgKHR5cGVPZih2KSA9PSBcImFycmF5XCIpXG5cdCAgICB7XG5cdFx0cmV0dXJuIHVud3JhcEFycmF5KHYpO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZiAodHlwZU9mKHYpID09IFwib2JqZWN0XCIpXG5cdCAgICB7XG5cdFx0cmV0dXJuIHVud3JhcE9iamVjdCh2KTtcblx0ICAgIH1cblx0ICAgIGVsc2Vcblx0ICAgIHtcblx0XHRyZXR1cm4gdjtcblx0ICAgIH1cblx0fVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc2V0KClcbiAgICB7XG4gICAgICAgIHBhcmVudHMgPSBbe29iajogbnVsbCwgd3JhcHBlZDogbnVsbCwgbHZsOiBcIlwifV07XG4gICAgfSAgICBcbiAgICBcbiAgICAvLyB3cmFwcGluZ1xuXG4gICAgZnVuY3Rpb24gd3JhcE9iamVjdChvLCBjb21wdXRlZEZ1bmN0aW9ucywgb2JzZXJ2YWJsZU9iamVjdHMpXG4gICAge1xuICAgICAgICAvLyBjaGVjayBmb3IgaW5maW5pdGUgcmVjdXJzaW9uXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHBhcmVudHNbaV0ub2JqID09PSBvKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudHNbaV0ud3JhcHBlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cdHZhciB0ID0ge307XG5cblx0Zm9yICh2YXIgayBpbiBvKVxuXHR7XG5cdCAgICB2YXIgdiA9IG9ba107XG5cbiAgICAgICAgICAgIHBhcmVudHMucHVzaCh7b2JqOiBvLCB3cmFwcGVkOiB0LCBsdmw6IGN1cnJlbnRMdmwoKSArIFwiL1wiICsga30pO1xuXG5cdCAgICB0W2tdID0gd3JhcCh2LCBjb21wdXRlZEZ1bmN0aW9ucywgb2JzZXJ2YWJsZU9iamVjdHMpO1xuXG4gICAgICAgICAgICBwYXJlbnRzLnBvcCgpO1xuXHR9XG5cblx0aWYgKGNvbXB1dGVkRnVuY3Rpb25zICYmIGNvbXB1dGVkRnVuY3Rpb25zW2N1cnJlbnRMdmwoKV0pXG5cdCAgICB0ID0gY29tcHV0ZWRGdW5jdGlvbnNbY3VycmVudEx2bCgpXSh0KTtcblxuICAgICAgICBpZiAoaGFzRVM1UGx1Z2luKCkpXG4gICAgICAgICAgICBrby50cmFjayh0KTtcblxuXHRpZiAob2JzZXJ2YWJsZU9iamVjdHMpIHJldHVybiBrby5vYnNlcnZhYmxlKHQpO1xuXHRyZXR1cm4gdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3cmFwQXJyYXkoYSwgY29tcHV0ZWRGdW5jdGlvbnMsIG9ic2VydmFibGVPYmplY3RzKVxuICAgIHtcblx0dmFyIHIgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTtcblxuXHRpZiAoIWEgfHwgYS5sZW5ndGggPT0gMClcblx0ICAgIHJldHVybiByO1xuXG5cdGZvciAodmFyIGkgPSAwLCBsID0gYS5sZW5ndGg7IGkgPCBsOyArK2kpXG5cdCAgICByLnB1c2god3JhcChhW2ldLCBjb21wdXRlZEZ1bmN0aW9ucywgb2JzZXJ2YWJsZU9iamVjdHMpKTtcblxuXHRyZXR1cm4gcjtcbiAgICB9XG5cbiAgICAvLyBhIHN0YWNrLCB1c2VkIGZvciB0d28gcHVycG9zZXM6XG4gICAgLy8gIC0gY2lyY3VsYXIgcmVmZXJlbmNlIGNoZWNraW5nXG4gICAgLy8gIC0gY29tcHV0ZWQgZnVuY3Rpb25zXG4gICAgdmFyIHBhcmVudHM7XG5cbiAgICBmdW5jdGlvbiBjdXJyZW50THZsKClcbiAgICB7XG5cdHJldHVybiBwYXJlbnRzW3BhcmVudHMubGVuZ3RoLTFdLmx2bDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3cmFwKHYsIGNvbXB1dGVkRnVuY3Rpb25zLCBvYnNlcnZhYmxlT2JqZWN0cylcbiAgICB7XG5cdGlmICh0eXBlT2YodikgPT0gXCJhcnJheVwiKVxuXHR7XG5cdCAgICByZXR1cm4gd3JhcEFycmF5KHYsIGNvbXB1dGVkRnVuY3Rpb25zLCBvYnNlcnZhYmxlT2JqZWN0cyk7XG5cdH1cblx0ZWxzZSBpZiAodHlwZU9mKHYpID09IFwib2JqZWN0XCIpXG5cdHtcblx0ICAgIHJldHVybiB3cmFwT2JqZWN0KHYsIGNvbXB1dGVkRnVuY3Rpb25zLCBvYnNlcnZhYmxlT2JqZWN0cyk7XG5cdH1cblx0ZWxzZVxuXHR7XG4gICAgICAgICAgICBpZiAoIWhhc0VTNVBsdWdpbigpICYmIHR5cGVvZiB2ICE9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAge1xuXHQgICAgICAgIHZhciB0ID0ga28ub2JzZXJ2YWJsZSgpO1xuXHQgICAgICAgIHQodik7XG5cdCAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gdjtcblx0fVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhc0VTNVBsdWdpbigpXG4gICAge1xuICAgICAgICByZXR1cm4ga28udHJhY2sgIT0gbnVsbDtcbiAgICB9XG59KSk7XG4iLCIvLyBEZWVwIG9ic2VydmVyIHBsdWdpbiBmb3IgS25vY2tvdXQgaHR0cDovL2tub2Nrb3V0anMuY29tL1xyXG4vLyAoYykgWmlhZCBKZWVyb2J1cmtoYW5cclxuLy8gTGljZW5zZTogTUlUIChodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocClcclxuLy8gVmVyc2lvbiAxLjMuOFxyXG47IChmdW5jdGlvbiAoZmFjdG9yeSkge1xyXG4gICAgLy8gQ29tbW9uSlNcclxuICAgIGlmICh0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBmYWN0b3J5KHJlcXVpcmUoJ2tub2Nrb3V0JykpO1xyXG4gICAgICAgIC8vIEFNRFxyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICBkZWZpbmUoWydrbm9ja291dCddLCBmYWN0b3J5KTtcclxuICAgICAgICAvLyBOb3JtYWwgc2NyaXB0IHRhZ1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBmYWN0b3J5KHdpbmRvdy5rbyk7XHJcbiAgICB9XHJcbn0oZnVuY3Rpb24gKGtvKSB7XHJcbmtvLnN1YnNjcmliYWJsZS5mblsnd2F0Y2gnXSA9IGZ1bmN0aW9uICh0YXJnZXRPckNhbGxiYWNrLCBvcHRpb25zLCBldmFsdWF0b3JDYWxsYmFjaywgY29udGV4dCkge1xyXG4gICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgLy8vICAgICBUcmFjayBhbmQgbWFuYWdlIGNoYW5nZXMgd2l0aGluIHRoZSBjaGFpbmVkIG9ic2VydmFibGUgZG93biB0byBhbnkgZ2l2ZW4gbGV2ZWwuIFxyXG4gICAgLy8vIDwvc3VtbWFyeT5cclxuICAgIC8vLyA8cGFyYW0gbmFtZT1cInRhcmdldE9yQ2FsbGJhY2tcIj5cclxuICAgIC8vLyAgICAgIFRoZSBzdWJzY3JpcHRpb24gY2FsbGJhY2sgZnVuY3Rpb24gb3IgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN1YnNjcmliYWJsZXMgdG8gYmUgd2F0Y2hlZC5cclxuICAgIC8vLyA8L3BhcmFtPlxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwib3B0aW9uc1wiIHR5cGU9XCJvYmplY3RcIj5cclxuICAgIC8vLyAgICAgZmFsc2UgLT4gRGlzYWJsZXMgdHJhY2tpbmcgb24gdGhlIGNoYWluZWQgb2JzZXJ2YWJsZS5cclxuICAgIC8vLyAgICAgeyBkZXB0aDogMiB9IC0+IFRyYWNrIGFsbCBuZXN0ZWQgc3Vic2NyaWJhYmxlcyBkb3duIHRvIHRoZSAybmQgbGV2ZWwoZGVmYXVsdCBpcyAxKS48YnIvPlxyXG4gICAgLy8vICAgICB7IGRlcHRoOiAtMSB9IC0+IFRyYWNrIGFsbCBuZXN0ZWQgc3Vic2NyaWJhYmxlcy48YnIvPlxyXG4gICAgLy8vICAgICB7IGhpZGU6IFsuLi5dIH0gLT4gUHJvcGVydHkgb3IgYXJyYXkgb2YgcHJvcGVydGllcyB0byBiZSBpZ25vcmVkLjxici8+XHJcbiAgICAvLy8gICAgIHsgaGlkZUFycmF5czogdHJ1ZSB9IC0+IElnbm9yZSBhbGwgbmVzdGVkIGFycmF5cy48YnIvPlxyXG4gICAgLy8vICAgICB7IGhpZGVXcmFwcGVkVmFsdWVzOiB0cnVlIH0gLT4gSWdub3JlIG9ic2VydmFibGVzIHdyYXBwZWQgdW5kZXIgeWV0IGFub3RoZXIgcGFyZW50IG9ic2VydmFibGUuPGJyLz5cclxuICAgIC8vLyAgICAgeyBtdXRhYmxlOiB0cnVlIH0gLT4gRHluYW1pY2FsbHkgYWRhcHQgdG8gY2hhbmdlcyBtYWRlIHRvIHRoZSB0YXJnZXQgc3RydWN0dXJlIHRocm91Z2ggYW55IHN1YnNjcmliYWJsZS48YnIvPlxyXG4gICAgLy8vICAgICB7IHdhdGNoZWRPbmx5OiB0cnVlIH0gLT4gV2F0Y2ggb25seSBzdWJzY3JpYmFibGVzIHRhZ2dlZCB3aXRoIC53YXRjaCgpLjxici8+XHJcbiAgICAvLy8gICAgIHsgYmVmb3JlV2F0Y2g6IGZ1bmN0aW9uKHBhcmVudHMsIGNoaWxkKSB7Li4ufSB9IC0+IEZ1bmN0aW9uIGNhbGxlZCBwcmlvciB0byBjcmVhdGluZyBhIHN1YnNjcmlwdGlvbi4gUmV0dXJuaW5nIGZhbHNlIGFib3J0cyB0aGUgb3BlcmF0aW9uIGFuZCBpZ25vcmVzIGl0cyBjaGlsZHJlbi48YnIvPlxyXG4gICAgLy8vICAgICB7IHdyYXA6IHRydWUgfSAtPiBXcmFwIGFsbCBmaWVsZHMgaW50byBvYnNlcnZhYmxlcy4gVGhpcyBoYXBwZW5zIG9uIHRoZSBmbHkgZm9yIG5ldyBhcnJheSBpdGVtcyhvciBjaGlsZCBvYmplY3RzIHdoZW4gbXV0YWJsZSBpcyBzZXQgdG8gdHJ1ZSkuPGJyLz5cclxuICAgIC8vLyAgICAgeyBiZWZvcmVXcmFwOiBmdW5jdGlvbihwYXJlbnRzLCBmaWVsZCwgdmFsdWUpIHsuLi59IH0gLT4gRnVuY3Rpb24gY2FsbGVkIHByaW9yIHRvIHdyYXBwaW5nIGEgdmFsdWUgaW50byBhbiBvYnNlcnZhYmxlLiBSZXR1cm5pbmcgZmFsc2UgbGVhdmVzIGl0IGFzIGl0IGlzLjxici8+XHJcbiAgICAvLy8gICAgIHsgdGFnRmllbGRzOiB0cnVlIH0gLT4gQWRkIHRoZSBwcm9wZXJ0eSAnX2ZpZWxkTmFtZScgdW5kZXIgZWFjaCBwcm9wZXJ0eSBmb3IgdGV4dHVhbCBpZGVudGlmaWNhdGlvbi48YnIvPlxyXG4gICAgLy8vICAgICB7IHRhZ0ZpZWxkczogJ3BhcmVudHNPbmx5JyB9IC0+IFNhbWUgYXMgYWJvdmUgZXhjZXB0IHRoYXQgaXQgaXMgbGltaXRlZCB0byBwYXJlbnQgcHJvcGVydGllcyBvbmx5Ljxici8+XHJcbiAgICAvLy8gICAgIHsgb2xkVmFsdWVzOiAzIH0gLT4gS2VlcCB0aGUgbGFzdCB0aHJlZSB2YWx1ZXMgZm9yIGVhY2ggc3Vic2NyaWJhYmxlIHVuZGVyIHRoZSBwcm9wZXJ0eSAnb2xkVmFsdWVzJy48YnIvPlxyXG4gICAgLy8vICAgICB7IHNlYWw6IHRydWUgfSAtPiBQcmV2ZW50IGFueSBzdWJzZXF1ZW50IHdhdGNoZXIgZnJvbSB3YXRjaGluZyB0aGUgdGFyZ2V0IGFnYWluLjxici8+XHJcbiAgICAvLy8gICAgIHsgdW5sb29wOiB0cnVlIH0gLT4gQXZvaWQgY2lyY3VsYXIgcGF0aHMgdGhyb3VnaCB0aGUgdXNlIG9mIGEgYnJlYWRjcnVtYiBwcm9wZXJ0eSAnX3dhdGNoZXInIHNldCBhdCBlYWNoIG5vZGUgbGV2ZWwuPGJyLz5cclxuICAgIC8vLyA8L3BhcmFtPlxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiZXZhbHVhdG9yQ2FsbGJhY2tcIiB0eXBlPVwiZnVuY3Rpb25cIj5cclxuICAgIC8vLyAgICAgVGhlICBjYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgZHVyaW5nIGNoYW5nZXMuIEFueSByZXR1cm4gdmFsdWUgaXMgYXNzaWduZWQgdG8gdGhlIGNoYWluZWQgb2JzZXJ2YWJsZS5cclxuICAgIC8vLyA8L3BhcmFtPlxyXG5cclxuICAgIHZhciB0YXJnZXRUeXBlID0gdHlwZW9mIHRhcmdldE9yQ2FsbGJhY2s7XHJcblxyXG4gICAgaWYgKHRhcmdldFR5cGUgPT09ICdib29sZWFuJyB8fCB0YXJnZXRUeXBlID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIC8vIFR1cm4gb24gb3Igb2ZmIHRoZSB3YXRjaGVyIGZvciB0aGUgc3BlY2lmaWVkIHRhcmdldCBhbG9uZyB3aXRoIGFueSBvZiBpdHMgY2hpbGRyZW4uXHJcbiAgICAgICAga28ud2F0Y2godGhpcywgeyBlbmFibGVkOiB0YXJnZXRPckNhbGxiYWNrICE9PSBmYWxzZSB9KTtcclxuICAgIH0gZWxzZSBpZiAodGFyZ2V0VHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiAha28uaXNTdWJzY3JpYmFibGUodGFyZ2V0T3JDYWxsYmFjaykpIHtcclxuICAgICAgICAvLyBUYXJnZXQgdGhlIGNoYWluZWQgc3Vic2NyaWJhYmxlIGl0c2VsZiBpZiBubyB0YXJnZXQgc3Vic2NyaWJhYmxlIG9yIG9iamVjdCB3YXMgcGFzc2VkLlxyXG4gICAgICAgIGtvLndhdGNoKHRoaXMsIG9wdGlvbnMgfHwge30sIHRhcmdldE9yQ2FsbGJhY2ssIGNvbnRleHQgfHwgdGhpcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGtvLndhdGNoKHRhcmdldE9yQ2FsbGJhY2ssIG9wdGlvbnMsIGV2YWx1YXRvckNhbGxiYWNrLCBjb250ZXh0IHx8IHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxua29bJ3dhdGNoJ10gPSBmdW5jdGlvbiAodGFyZ2V0LCBvcHRpb25zLCBldmFsdWF0b3JDYWxsYmFjaywgY29udGV4dCkge1xyXG4gICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgLy8vICAgICBUcmFjayBhbmQgbWFuYWdlIGNoYW5nZXMgd2l0aGluIGEgc3BlY2lmaWMgdGFyZ2V0IG9iamVjdCBkb3duIHRvIGFueSBnaXZlbiBsZXZlbC5cclxuICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJ0YXJnZXRcIj5cclxuICAgIC8vLyAgICAgQW4gb2JqZWN0IG9yIGZ1bmN0aW9uIGNvbnRhaW5pbmcgdGhlIHRhcmdldGVkIHN1YnNjcmliYWJsZShzKS5cclxuICAgIC8vLyA8L3BhcmFtPlxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwib3B0aW9uc1wiIHR5cGU9XCJvYmplY3RcIj5cclxuICAgIC8vLyAgICAgeyBkZXB0aDogMiB9IC0+IFRyYWNrIGFsbCBuZXN0ZWQgc3Vic2NyaWJhYmxlcyBkb3duIHRvIHRoZSAybmQgbGV2ZWwoZGVmYXVsdCBpcyAxKS48YnIvPlxyXG4gICAgLy8vICAgICB7IGRlcHRoOiAtMSB9IC0+IFRyYWNrIGFsbCBuZXN0ZWQgc3Vic2NyaWJhYmxlcy48YnIvPlxyXG4gICAgLy8vICAgICB7IGhpZGU6IFsuLi5dIH0gLT4gUHJvcGVydHkgb3IgYXJyYXkgb2YgcHJvcGVydGllcyB0byBiZSBpZ25vcmVkLjxici8+XHJcbiAgICAvLy8gICAgIHsgaGlkZUFycmF5czogdHJ1ZSB9IC0+IElnbm9yZSBhbGwgbmVzdGVkIGFycmF5cy48YnIvPlxyXG4gICAgLy8vICAgICB7IGhpZGVXcmFwcGVkVmFsdWVzOiB0cnVlIH0gLT4gSWdub3JlIG9ic2VydmFibGVzIHdyYXBwZWQgdW5kZXIgeWV0IGFub3RoZXIgcGFyZW50IG9ic2VydmFibGUuPGJyLz5cclxuICAgIC8vLyAgICAgeyBtdXRhYmxlOiB0cnVlIH0gLT4gRHluYW1pY2FsbHkgYWRhcHQgdG8gY2hhbmdlcyBtYWRlIHRvIHRoZSB0YXJnZXQgc3RydWN0dXJlIHRocm91Z2ggYW55IHN1YnNjcmliYWJsZS48YnIvPlxyXG4gICAgLy8vICAgICB7IHdhdGNoZWRPbmx5OiB0cnVlIH0gLT4gV2F0Y2ggb25seSBzdWJzY3JpYmFibGVzIHRhZ2dlZCB3aXRoIC53YXRjaCgpLjxici8+XHJcbiAgICAvLy8gICAgIHsgYmVmb3JlV2F0Y2g6IGZ1bmN0aW9uKHBhcmVudHMsIGNoaWxkKSB7Li4ufSB9IC0+IEZ1bmN0aW9uIGNhbGxlZCBwcmlvciB0byBjcmVhdGluZyBhIHN1YnNjcmlwdGlvbi4gUmV0dXJuaW5nIGZhbHNlIGFib3J0cyB0aGUgb3BlcmF0aW9uIGFuZCBpZ25vcmVzIGl0cyBjaGlsZHJlbi48YnIvPlxyXG4gICAgLy8vICAgICB7IHdyYXA6IHRydWUgfSAtPiBXcmFwIGFsbCBmaWVsZHMgaW50byBvYnNlcnZhYmxlcy4gVGhpcyBoYXBwZW5zIG9uIHRoZSBmbHkgZm9yIG5ldyBhcnJheSBpdGVtcyhvciBjaGlsZCBvYmplY3RzIHdoZW4gbXV0YWJsZSBpcyBzZXQgdG8gdHJ1ZSkuPGJyLz5cclxuICAgIC8vLyAgICAgeyBiZWZvcmVXcmFwOiBmdW5jdGlvbihwYXJlbnRzLCBmaWVsZCwgdmFsdWUpIHsuLi59IH0gLT4gRnVuY3Rpb24gY2FsbGVkIHByaW9yIHRvIHdyYXBwaW5nIGEgdmFsdWUgaW50byBhbiBvYnNlcnZhYmxlLiBSZXR1cm5pbmcgZmFsc2UgbGVhdmVzIGl0IGFzIGl0IGlzLjxici8+XHJcbiAgICAvLy8gICAgIHsgdGFnRmllbGRzOiB0cnVlIH0gLT4gQWRkIHRoZSBwcm9wZXJ0eSAnX2ZpZWxkTmFtZScgdW5kZXIgZWFjaCBwcm9wZXJ0eSBmb3IgdGV4dHVhbCBpZGVudGlmaWNhdGlvbi48YnIvPlxyXG4gICAgLy8vICAgICB7IHRhZ0ZpZWxkczogJ3BhcmVudHNPbmx5JyB9IC0+IFNhbWUgYXMgYWJvdmUgZXhjZXB0IHRoYXQgaXQgaXMgbGltaXRlZCB0byBwYXJlbnQgcHJvcGVydGllcyBvbmx5Ljxici8+XHJcbiAgICAvLy8gICAgIHsgb2xkVmFsdWVzOiAzIH0gLT4gS2VlcCB0aGUgbGFzdCB0aHJlZSB2YWx1ZXMgZm9yIGVhY2ggc3Vic2NyaWJhYmxlIHVuZGVyIHRoZSBwcm9wZXJ0eSAnb2xkVmFsdWVzJy48YnIvPlxyXG4gICAgLy8vICAgICB7IHNlYWw6IHRydWUgfSAtPiBQcmV2ZW50IGFueSBzdWJzZXF1ZW50IHdhdGNoZXIgZnJvbSB3YXRjaGluZyB0aGUgdGFyZ2V0IGFnYWluLjxici8+XHJcbiAgICAvLy8gICAgIHsgdW5sb29wOiB0cnVlIH0gLT4gQXZvaWQgY2lyY3VsYXIgcGF0aHMgdGhyb3VnaCB0aGUgdXNlIG9mIGEgYnJlYWRjcnVtYiBwcm9wZXJ0eSAnX3dhdGNoZXInIHNldCBhdCBlYWNoIG5vZGUgbGV2ZWwuPGJyLz5cclxuICAgIC8vLyAgICAgeyBnZXR0ZXI6IGZ1bmN0aW9uKHBhcmVudHMsIGNoaWxkLCBwcm9wZXJ0eSkgey4uLn0gfSAtPiBGdW5jdGlvbiB1c2VkIHRvIHJldHJpZXZlIHRoZSBwcm9wZXJ0eSB2YWx1ZSBmcm9tIHRoZSBnaXZlbiBjaGlsZC4gRmFsc2UgY2FuIGJlIHJldHVybmVkIHRvIGlnbm9yZSB0aGUgcHJvcGVydHkuPGJyLz5cclxuICAgIC8vLyA8L3BhcmFtPlxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiZXZhbHVhdG9yQ2FsbGJhY2tcIiB0eXBlPVwiZnVuY3Rpb25cIj5cclxuICAgIC8vLyAgICAgVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBkdXJpbmcgY2hhbmdlcy5cclxuICAgIC8vLyA8L3BhcmFtPlxyXG5cclxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IGV2YWx1YXRvckNhbGxiYWNrO1xyXG4gICAgICAgIGV2YWx1YXRvckNhbGxiYWNrID0gb3B0aW9ucztcclxuICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgY29udGV4dCA9IGNvbnRleHQgfHwgdGhpcztcclxuXHJcbiAgICBmdW5jdGlvbiB3YXRjaENoaWxkcmVuKGNoaWxkLCBwYXJlbnQsIGdyYW5kUGFyZW50cywgdW53YXRjaCwga2VlcE9mZlBhcmVudExpc3QsIGZpZWxkTmFtZSkge1xyXG4gICAgICAgIGlmIChjaGlsZCAmJiBvcHRpb25zLmRlcHRoICE9PSAwICYmIChvcHRpb25zLmRlcHRoID09PSAtMSB8fCBncmFuZFBhcmVudHMubGVuZ3RoIDwgKG9wdGlvbnMuZGVwdGggfHwgMSkpKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9jZWVkIG9uIHdhdGNoZWQgY2hpbGRyZW4gb25seSB3aGVuIGluIHdhdGNoZWQtb25seSBtb2RlLlxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy53YXRjaGVkT25seSAmJiAhY2hpbGQud2F0Y2hhYmxlICYmIGNoaWxkICE9IHRhcmdldClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIC8vIFNldHRpbmcgdGhlIHRhcmdldCBhcyBmYWxzZSBwcmV2ZW50cyBpdCBmcm9tIGJlaW5nIHdhdGNoZWQgbGF0ZXIgb24uXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmVuYWJsZWQgPT09IGZhbHNlIHx8IG9wdGlvbnMuZW5hYmxlZCA9PT0gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIGNoaWxkLndhdGNoYWJsZSA9IG9wdGlvbnMuZW5hYmxlZDtcclxuXHJcbiAgICAgICAgICAgIC8vIElnbm9yZSB3YXRjaC1kaXNhYmxlZCBvYmplY3RzLlxyXG4gICAgICAgICAgICBpZiAoY2hpbGQud2F0Y2hhYmxlID09PSBmYWxzZSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIC8vIFByZXZlbnQgc3Vic2VxdWVudCB3YXRjaGVycyBmcm9tIHdhdGNoaW5nIHRoZSB0YXJnZXQgd2hlbiBzZWFsZWQuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNlYWwgPT09IHRydWUpXHJcbiAgICAgICAgICAgICAgICBjaGlsZC53YXRjaGFibGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0eXBlID0gdHlwZW9mIGNoaWxkO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdvYmplY3QnIHx8IHR5cGUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIC8vIEJ5cGFzcyBjaXJjdWxhciByZWZlcmVuY2VzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLl93YXRjaGVyID09PSBjb250ZXh0KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmUgaGlkZGVuIG9iamVjdHMuIEFsc28gYXBwbGllcyB0byBhbnkgb2YgdGhlaXIgY2hpbGRyZW4uXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5oaWRlKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrby51dGlscy5hcnJheUluZGV4T2Yob3B0aW9ucy5oaWRlLCBjaGlsZCkgPiAtMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1lcmdlIHBhcmVudHMuIFVzaW5nIGEgZnJlc2ggYXJyYXkgc28gaXQgaXMgbm90IHJlZmVyZW5jZWQgaW4gdGhlIG5leHQgcmVjdXJzaW9uIGlmIGFueS5cclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRzID0gW10uY29uY2F0KGdyYW5kUGFyZW50cywgcGFyZW50ICYmIHBhcmVudCAhPT0gdGFyZ2V0ID8gcGFyZW50IDogW10pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjaGlsZFsnbm90aWZ5U3Vic2NyaWJlcnMnXSA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRhcmdldCBpcyBhIHN1YnNjcmliYWJsZS4gV2F0Y2ggaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmFsdWF0b3JDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlZCA9PT0gdHJ1ZSAmJiBjaGlsZC53YXRjaGFibGUgPT09IGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgd2FraW5nIHVwIGFuIGV4aXN0aW5nIHdhdGNoZXIuIExldCdzIG5vdCBhZGQgYW5vdGhlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVud2F0Y2ggfHwgIW9wdGlvbnMuYmVmb3JlV2F0Y2ggfHwgb3B0aW9ucy5iZWZvcmVXYXRjaC5jYWxsKGNvbnRleHQsIHBhcmVudHMsIGNoaWxkLCBmaWVsZE5hbWUpICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0FycmF5ID0gdHlwZW9mIGNoaWxkLnBvcCA9PT0gJ2Z1bmN0aW9uJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVud2F0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcG9zZVdhdGNoZXIoY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbldhdGNoZXIoY2hpbGQsIGlzQXJyYXksIHBhcmVudHMsIGtlZXBPZmZQYXJlbnRMaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoQ2hpbGRyZW4oY2hpbGQoKSwga2VlcE9mZlBhcmVudExpc3QgPyBudWxsIDogY2hpbGQsIHBhcmVudHMsIHVud2F0Y2gsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5oaWRlV3JhcHBlZFZhbHVlcyAhPT0gdHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3YXRjaENoaWxkcmVuKGNoaWxkKCksIGtlZXBPZmZQYXJlbnRMaXN0ID8gbnVsbCA6IGNoaWxkLCBwYXJlbnRzLCB1bndhdGNoLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoY2hpbGQpID09PSAnW29iamVjdCBPYmplY3RdJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrby51dGlscy5vYmplY3RGb3JFYWNoKGNoaWxkLCBmdW5jdGlvbiAocHJvcGVydHksIHN1Yikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViID0gb3B0aW9ucy5nZXR0ZXIgPyBvcHRpb25zLmdldHRlci5jYWxsKGNvbnRleHQsIHBhcmVudHMsIGNoaWxkLCBwcm9wZXJ0eSkgOiBzdWI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMud3JhcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXcmFwIHNpbXBsZSBvYmplY3RzIGFuZCBhcnJheXMgaW50byBvYnNlcnZhYmxlcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3ViKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgIT09ICdbb2JqZWN0IEZ1bmN0aW9uXScgJiYgdHlwZSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5iZWZvcmVXcmFwIHx8IG9wdGlvbnMuYmVmb3JlV3JhcC5jYWxsKGNvbnRleHQsIHBhcmVudHMsIGNoaWxkLCBzdWIpICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YiA9IGNoaWxkW3Byb3BlcnR5XSA9IHR5cGUgPT09ICdbb2JqZWN0IEFycmF5XSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBrby5vYnNlcnZhYmxlQXJyYXkoc3ViKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGtvLm9ic2VydmFibGUoc3ViKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudW5sb29wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWIuX3dhdGNoZXIgPSB1bndhdGNoID8gdW5kZWZpbmVkIDogY29udGV4dDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhc0NoaWxkcmVuID0gd2F0Y2hDaGlsZHJlbihzdWIsIGtlZXBPZmZQYXJlbnRMaXN0ID8gbnVsbCA6IGNoaWxkLCBwYXJlbnRzLCB1bndhdGNoLCBudWxsLCBwcm9wZXJ0eSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnRhZ0ZpZWxkcyAmJiBzdWIuX2ZpZWxkTmFtZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzQ2hpbGRyZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IChvcHRpb25zLnRhZ0ZpZWxkcyAhPT0gJ3BhcmVudHNPbmx5JyAmJiB0eXBlb2Ygc3ViID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBzdWIgPT09ICdvYmplY3QnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yi5fZmllbGROYW1lID0gcHJvcGVydHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vICdbb2JqZWN0IEFycmF5XSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGlkZUFycmF5cyAhPT0gdHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGQubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hDaGlsZHJlbihjaGlsZFtpXSwga2VlcE9mZlBhcmVudExpc3QgPyBudWxsIDogY2hpbGQsIHBhcmVudHMsIHVud2F0Y2gpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3Vic2NyaXB0aW9ucyBhcmUgc3RvcmVkIHVuZGVyIGVpdGhlciB0aGUgX3N1YnNjcmlwdGlvbnMgZmllbGQgZm9yIHRoZSBkZWJ1ZyB2ZXJzaW9uXHJcbiAgICAvLyBvciB0aGUgRiwgSCBvciBNIGZpZWxkcyB3aGVuIG1pbmlmaWVkIGRlcGVuZGluZyBvbiB0aGUgdmVyc2lvbiB1c2VkLlxyXG4gICAgLy8gTk9URTogd2UgdXNlZCB0byB1c2Uga28uREVCVUcgdG8gZGV0ZWN0IHRoZSBkZWJ1ZyB2ZXJzaW9uYnV0IGl0IHdhcyByZW1vdmVkIGluIDMuNC4wKyxcclxuICAgIC8vICAgICAgIHNvIHdlIG5vdyBjaGVjayB0aGUgZXhpc3RlbmNlIG9mIGEgXCJzdWJzY3JpcHRpb25cIiBmdW5jdGlvbi5cclxuICAgIHZhciBzdWJzY3JpcHRpb25zRmllbGQ7XHJcbiAgICBzd2l0Y2ggKHR5cGVvZiBrby5zdWJzY3JpcHRpb24gPT0gJ2Z1bmN0aW9uJyB8fCBrby52ZXJzaW9uKSB7XHJcbiAgICAgICAgY2FzZSB0cnVlOiBzdWJzY3JpcHRpb25zRmllbGQgPSAnX3N1YnNjcmlwdGlvbnMnOyBicmVhaztcclxuICAgICAgICBjYXNlIFwiMy4wLjBcIjogc3Vic2NyaXB0aW9uc0ZpZWxkID0gJ0YnOyBicmVhaztcclxuICAgICAgICBjYXNlIFwiMy4xLjBcIjogc3Vic2NyaXB0aW9uc0ZpZWxkID0gJ0gnOyBicmVhaztcclxuICAgICAgICBjYXNlIFwiMy4yLjBcIjogc3Vic2NyaXB0aW9uc0ZpZWxkID0gJ00nOyBicmVhaztcclxuICAgICAgICBjYXNlIFwiMy4zLjBcIjogc3Vic2NyaXB0aW9uc0ZpZWxkID0gJ0cnOyBicmVhaztcclxuICAgICAgICBjYXNlIFwiMy40LjBcIjogc3Vic2NyaXB0aW9uc0ZpZWxkID0gJ0snOyBicmVhaztcclxuICAgICAgICBjYXNlIFwiMy40LjFcIjogc3Vic2NyaXB0aW9uc0ZpZWxkID0gJ0snOyBicmVhaztcclxuICAgICAgICBkZWZhdWx0OiB0aHJvdyBcIlVuc3VwcG9ydGVkIEtub2Nrb3V0IHZlcnNpb24uIE9ubHkgdjMuMC4wIHRvIHYzLjQuMSBhcmUgc3VwcG9ydGVkIHdoZW4gbWluaWZpZWQuIEN1cnJlbnQgdmVyc2lvbiBpcyBcIiArIGtvLnZlcnNpb247XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGlzcG9zZVdhdGNoZXIoY2hpbGQpIHtcclxuICAgICAgICB2YXIgc3Vic2MgPSBjaGlsZFtzdWJzY3JpcHRpb25zRmllbGRdO1xyXG5cclxuICAgICAgICBpZiAoc3Vic2MpIHtcclxuICAgICAgICAgICAgaWYgKHN1YnNjLmNoYW5nZSlcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdWJzYy5jaGFuZ2UubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjLmNoYW5nZVtpXS5fd2F0Y2hlciA9PT0gY29udGV4dClcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2MuY2hhbmdlW2ldLmRpc3Bvc2UoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdWJzYy5iZWZvcmVDaGFuZ2UgJiYgKG9wdGlvbnMubXV0YWJsZSB8fCBvcHRpb25zLm9sZFZhbHVlcyA+IDApKVxyXG4gICAgICAgICAgICAgICAgLy8gQWxzbyBjbGVhbiB1cCBhbnkgYmVmb3JlLWNoYW5nZSBzdWJzY3JpcHRpb25zIHVzZWQgZm9yIHRyYWNraW5nIG9sZCB2YWx1ZXMuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gc3Vic2MuYmVmb3JlQ2hhbmdlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWJzYy5iZWZvcmVDaGFuZ2VbaV0uX3dhdGNoZXIgPT09IGNvbnRleHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjLmJlZm9yZUNoYW5nZVtpXS5kaXNwb3NlKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc3Vic2MuYXJyYXlDaGFuZ2UpXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gc3Vic2MuYXJyYXlDaGFuZ2UubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjLmFycmF5Q2hhbmdlW2ldLl93YXRjaGVyID09PSBjb250ZXh0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzYy5hcnJheUNoYW5nZVtpXS5kaXNwb3NlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJTdWJzY3JpcHRpb25zIGZpZWxkICguXCIgKyBzdWJzY3JpcHRpb25zRmllbGQgKyBcIikgbm90IGRlZmluZWQgZm9yIG9ic2VydmFibGUgY2hpbGQgXCIgKyAoY2hpbGQuX2ZpZWxkTmFtZSB8fCBcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYXNzaWduV2F0Y2hlcihjaGlsZCwgaXNBcnJheSwgcGFyZW50cywga2VlcE9mZlBhcmVudExpc3QpIHtcclxuICAgICAgICBpZiAoaXNBcnJheSkge1xyXG4gICAgICAgICAgICAvLyBDaGlsZCBpcyBhbiBvYnNlcnZhYmxlIGFycmF5LiBXYXRjaCBhbGwgY2hhbmdlcyB3aXRoaW4gaXQuXHJcbiAgICAgICAgICAgIGNoaWxkLnN1YnNjcmliZShmdW5jdGlvbiAoY2hhbmdlcykge1xyXG4gICAgICAgICAgICAgICAga28udXRpbHMuYXJyYXlGb3JFYWNoKGNoYW5nZXMsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlID0gZXZhbHVhdG9yQ2FsbGJhY2suY2FsbChjb250ZXh0LCBwYXJlbnRzLCBjaGlsZCwgaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldHVyblZhbHVlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQocmV0dXJuVmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0ubW92ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlZCBvciBicmFuZCBuZXcgaXRlbS4gVW53YXRjaCBvciB3YXRjaCBpdCBhY2NvcmRpbmdseS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXRjaENoaWxkcmVuKGl0ZW0udmFsdWUsIChrZWVwT2ZmUGFyZW50TGlzdCA/IG51bGwgOiBjaGlsZCksIHBhcmVudHMsIGl0ZW0uc3RhdHVzID09PSAnZGVsZXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwgdW5kZWZpbmVkLCAnYXJyYXlDaGFuZ2UnKS5fd2F0Y2hlciA9IGNvbnRleHQ7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNoaWxkLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQud2F0Y2hhYmxlICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IGV2YWx1YXRvckNhbGxiYWNrLmNhbGwoY29udGV4dCwgcGFyZW50cywgY2hpbGQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuVmFsdWUgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dChyZXR1cm5WYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm11dGFibGUgJiYgdHlwZW9mIGNoaWxkKCkgPT09ICdvYmplY3QnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXYXRjaCB0aGUgbmV3IGNvbWVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXRjaENoaWxkcmVuKGNoaWxkKCksIChrZWVwT2ZmUGFyZW50TGlzdCA/IG51bGwgOiBjaGlsZCksIHBhcmVudHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSwgbnVsbCwgJ2NoYW5nZScpLl93YXRjaGVyID0gY29udGV4dDtcclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm9sZFZhbHVlcyA+IDAgfHwgb3B0aW9ucy5tdXRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5zdWJzY3JpYmUoZnVuY3Rpb24gKG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub2xkVmFsdWVzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgb2xkIHZhbHVlIHRvIGhpc3RvcnkgbGlzdCBiZWZvcmUgZXZlcnkgdXBkYXRlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVzID0gKGNoaWxkWydvbGRWYWx1ZXMnXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjaGlsZFsnb2xkVmFsdWVzJ11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY2hpbGRbJ29sZFZhbHVlcyddID0gW10pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnVuc2hpZnQob2xkVmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHZhbHVlcy5sZW5ndGggPiBvcHRpb25zLm9sZFZhbHVlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm11dGFibGUgJiYgdHlwZW9mIG9sZFZhbHVlID09PSAnb2JqZWN0JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgYWxsIHN1YnNjcmlwdGlvbnMgZm9yIHRoZSBvbGQgY2hpbGQgb2JqZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXRjaENoaWxkcmVuKG9sZFZhbHVlLCAoa2VlcE9mZlBhcmVudExpc3QgPyBudWxsIDogY2hpbGQpLCBwYXJlbnRzLCBmYWxzZSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgbnVsbCwgJ2JlZm9yZUNoYW5nZScpLl93YXRjaGVyID0gY29udGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBVc2UgYSBjb21wdXRlZCB3aGVuIHRhcmdldGluZyBhIG5vbi13YXRjaGFibGUgZnVuY3Rpb24uXHJcbiAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJyAmJiAha28uaXNTdWJzY3JpYmFibGUodGFyZ2V0KSlcclxuICAgICAgICByZXR1cm4ga28uY29tcHV0ZWQodGFyZ2V0LCBldmFsdWF0b3JDYWxsYmFjaywgb3B0aW9ucyk7XHJcblxyXG4gICAgd2F0Y2hDaGlsZHJlbih0YXJnZXQsIG51bGwsIFtdKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgd2F0Y2hDaGlsZHJlbih0YXJnZXQsIG51bGwsIFtdLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59O1xyXG5cclxufSkpOyIsIm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGxleCAgOiByZXF1aXJlKCcuL2xpYi9sZXhlcicpLFxuICAgIHBhcnNlOiByZXF1aXJlKCcuL2xpYi9wYXJzZXInKSxcbiAgICBzdHJpbmdpZnk6IHJlcXVpcmUoJy4vbGliL3N0cmluZ2lmeScpXG59O1xuIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZGVidWc7XG5cbmZ1bmN0aW9uIGRlYnVnKGxhYmVsKSB7XG4gIHJldHVybiBfZGVidWcuYmluZChudWxsLCBsYWJlbCk7XG59XG5cbmZ1bmN0aW9uIF9kZWJ1ZyhsYWJlbCkge1xuICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgYXJncy51bnNoaWZ0KCdbJyArIGxhYmVsICsgJ10nKTtcbiAgcHJvY2Vzcy5zdGRlcnIud3JpdGUoYXJncy5qb2luKCcgJykgKyAnXFxuJyk7XG59IiwidmFyIERFQlVHID0gZmFsc2U7IC8vIGB0cnVlYCB0byBwcmludCBkZWJ1Z2dpbmcgaW5mby5cbnZhciBUSU1FUiA9IGZhbHNlOyAvLyBgdHJ1ZWAgdG8gdGltZSBjYWxscyB0byBgbGV4KClgIGFuZCBwcmludCB0aGUgcmVzdWx0cy5cblxudmFyIGRlYnVnID0gcmVxdWlyZSgnLi9kZWJ1ZycpKCdsZXgnKTtcblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gbGV4O1xuXG4vKipcbiAqIENvbnZlcnQgYSBDU1Mgc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgbGV4aWNhbCB0b2tlbnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNzcyBDU1NcbiAqIEByZXR1cm5zIHtBcnJheX0gbGV4aWNhbCB0b2tlbnNcbiAqL1xuZnVuY3Rpb24gbGV4KGNzcykge1xuICB2YXIgc3RhcnQ7IC8vIERlYnVnIHRpbWVyIHN0YXJ0LlxuXG4gIHZhciBidWZmZXIgPSAnJzsgICAgICAvLyBDaGFyYWN0ZXIgYWNjdW11bGF0b3JcbiAgdmFyIGNoOyAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgY2hhcmFjdGVyXG4gIHZhciBjb2x1bW4gPSAwOyAgICAgICAvLyBDdXJyZW50IHNvdXJjZSBjb2x1bW4gbnVtYmVyXG4gIHZhciBjdXJzb3IgPSAtMTsgICAgICAvLyBDdXJyZW50IHNvdXJjZSBjdXJzb3IgcG9zaXRpb25cbiAgdmFyIGRlcHRoID0gMDsgICAgICAgIC8vIEN1cnJlbnQgbmVzdGluZyBkZXB0aFxuICB2YXIgbGluZSA9IDE7ICAgICAgICAgLy8gQ3VycmVudCBzb3VyY2UgbGluZSBudW1iZXJcbiAgdmFyIHN0YXRlID0gJ2JlZm9yZS1zZWxlY3Rvcic7IC8vIEN1cnJlbnQgc3RhdGVcbiAgdmFyIHN0YWNrID0gW3N0YXRlXTsgIC8vIFN0YXRlIHN0YWNrXG4gIHZhciB0b2tlbiA9IHt9OyAgICAgICAvLyBDdXJyZW50IHRva2VuXG4gIHZhciB0b2tlbnMgPSBbXTsgICAgICAvLyBUb2tlbiBhY2N1bXVsYXRvclxuXG4gIC8vIFN1cHBvcnRlZCBALXJ1bGVzLCBpbiByb3VnaGx5IGRlc2NlbmRpbmcgb3JkZXIgb2YgdXNhZ2UgcHJvYmFiaWxpdHkuXG4gIHZhciBhdFJ1bGVzID0gW1xuICAgICdtZWRpYScsXG4gICAgJ2tleWZyYW1lcycsXG4gICAgeyBuYW1lOiAnLXdlYmtpdC1rZXlmcmFtZXMnLCB0eXBlOiAna2V5ZnJhbWVzJywgcHJlZml4OiAnLXdlYmtpdC0nIH0sXG4gICAgeyBuYW1lOiAnLW1vei1rZXlmcmFtZXMnLCB0eXBlOiAna2V5ZnJhbWVzJywgcHJlZml4OiAnLW1vei0nIH0sXG4gICAgeyBuYW1lOiAnLW1zLWtleWZyYW1lcycsIHR5cGU6ICdrZXlmcmFtZXMnLCBwcmVmaXg6ICctbXMtJyB9LFxuICAgIHsgbmFtZTogJy1vLWtleWZyYW1lcycsIHR5cGU6ICdrZXlmcmFtZXMnLCBwcmVmaXg6ICctby0nIH0sXG4gICAgJ2ZvbnQtZmFjZScsXG4gICAgeyBuYW1lOiAnaW1wb3J0Jywgc3RhdGU6ICdiZWZvcmUtYXQtdmFsdWUnIH0sXG4gICAgeyBuYW1lOiAnY2hhcnNldCcsIHN0YXRlOiAnYmVmb3JlLWF0LXZhbHVlJyB9LFxuICAgICdzdXBwb3J0cycsXG4gICAgJ3ZpZXdwb3J0JyxcbiAgICB7IG5hbWU6ICduYW1lc3BhY2UnLCBzdGF0ZTogJ2JlZm9yZS1hdC12YWx1ZScgfSxcbiAgICAnZG9jdW1lbnQnLFxuICAgIHsgbmFtZTogJy1tb3otZG9jdW1lbnQnLCB0eXBlOiAnZG9jdW1lbnQnLCBwcmVmaXg6ICctbW96LScgfSxcbiAgICAncGFnZSdcbiAgXTtcblxuICAvLyAtLSBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLyoqXG4gICAqIEFkdmFuY2UgdGhlIGNoYXJhY3RlciBjdXJzb3IgYW5kIHJldHVybiB0aGUgbmV4dCBjaGFyYWN0ZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBuZXh0IGNoYXJhY3Rlci5cbiAgICovXG4gIGZ1bmN0aW9uIGdldENoKCkge1xuICAgIHNraXAoKTtcbiAgICByZXR1cm4gY3NzW2N1cnNvcl07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBzdGF0ZSBhdCB0aGUgZ2l2ZW4gaW5kZXggaW4gdGhlIHN0YWNrLlxuICAgKiBUaGUgc3RhY2sgaXMgTElGTyBzbyBpbmRleGluZyBpcyBmcm9tIHRoZSByaWdodC5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtpbmRleD0wXSBJbmRleCB0byByZXR1cm4uXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHN0YXRlXG4gICAqL1xuICBmdW5jdGlvbiBnZXRTdGF0ZShpbmRleCkge1xuICAgIHJldHVybiBpbmRleCA/IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDEgLSBpbmRleF0gOiBzdGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb29rIGFoZWFkIGZvciBhIHN0cmluZyBiZWdpbm5pbmcgZnJvbSB0aGUgbmV4dCBwb3NpdGlvbi4gVGhlIHN0cmluZ1xuICAgKiBiZWluZyBsb29rZWQgZm9yIG11c3Qgc3RhcnQgYXQgdGhlIG5leHQgcG9zaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBsb29rIGZvci5cbiAgICogQHJldHVybnMge0Jvb2xlYW59IFdoZXRoZXIgdGhlIHN0cmluZyB3YXMgZm91bmQuXG4gICAqL1xuICBmdW5jdGlvbiBpc05leHRTdHJpbmcoc3RyKSB7XG4gICAgdmFyIHN0YXJ0ID0gY3Vyc29yICsgMTtcbiAgICByZXR1cm4gKHN0ciA9PT0gY3NzLnNsaWNlKHN0YXJ0LCBzdGFydCArIHN0ci5sZW5ndGgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIHRoZSBzdGFydCBwb3NpdGlvbiBvZiBhIHN1YnN0cmluZyBiZWdpbm5pbmcgZnJvbSB0aGUgbmV4dFxuICAgKiBwb3NpdGlvbi4gVGhlIHN0cmluZyBiZWluZyBsb29rZWQgZm9yIG1heSBiZWdpbiBhbnl3aGVyZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3Vic3RyaW5nIHRvIGxvb2sgZm9yLlxuICAgKiBAcmV0dXJucyB7TnVtYmVyfGZhbHNlfSBUaGUgcG9zaXRpb24sIG9yIGBmYWxzZWAgaWYgbm90IGZvdW5kLlxuICAgKi9cbiAgZnVuY3Rpb24gZmluZChzdHIpIHtcbiAgICB2YXIgcG9zID0gY3NzLnNsaWNlKGN1cnNvcikuaW5kZXhPZihzdHIpO1xuXG4gICAgcmV0dXJuIHBvcyA+IDAgPyBwb3MgOiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgd2hldGhlciBhIGNoYXJhY3RlciBpcyBuZXh0LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2ggQ2hhcmFjdGVyLlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gV2hldGhlciB0aGUgY2hhcmFjdGVyIGlzIG5leHQuXG4gICAqL1xuICBmdW5jdGlvbiBpc05leHRDaGFyKGNoKSB7XG4gICAgcmV0dXJuIGNoID09PSBwZWVrKDEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgY2hhcmFjdGVyIGF0IHRoZSBnaXZlbiBjdXJzb3Igb2Zmc2V0LiBUaGUgb2Zmc2V0IGlzIHJlbGF0aXZlXG4gICAqIHRvIHRoZSBjdXJzb3IsIHNvIG5lZ2F0aXZlIHZhbHVlcyBtb3ZlIGJhY2t3YXJkcy5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvZmZzZXQ9MV0gQ3Vyc29yIG9mZnNldC5cbiAgICogQHJldHVybnMge1N0cmluZ30gQ2hhcmFjdGVyLlxuICAgKi9cbiAgZnVuY3Rpb24gcGVlayhvZmZzZXQpIHtcbiAgICByZXR1cm4gY3NzW2N1cnNvciArIChvZmZzZXQgfHwgMSldO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgY3VycmVudCBzdGF0ZSBmcm9tIHRoZSBzdGFjayBhbmQgc2V0IHRoZSBuZXcgY3VycmVudCBzdGF0ZS5cbiAgICpcbiAgICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlbW92ZWQgc3RhdGUuXG4gICAqL1xuICBmdW5jdGlvbiBwb3BTdGF0ZSgpIHtcbiAgICB2YXIgcmVtb3ZlZCA9IHN0YWNrLnBvcCgpO1xuICAgIHN0YXRlID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG5cbiAgICByZXR1cm4gcmVtb3ZlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGN1cnJlbnQgc3RhdGUgYW5kIGFkZCBpdCB0byB0aGUgc3RhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuZXdTdGF0ZSBUaGUgbmV3IHN0YXRlLlxuICAgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbmV3IHN0YWNrIGxlbmd0aC5cbiAgICovXG4gIGZ1bmN0aW9uIHB1c2hTdGF0ZShuZXdTdGF0ZSkge1xuICAgIHN0YXRlID0gbmV3U3RhdGU7XG4gICAgc3RhY2sucHVzaChzdGF0ZSk7XG5cbiAgICByZXR1cm4gc3RhY2subGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgdGhlIGN1cnJlbnQgc3RhdGUgd2l0aCBhIG5ldyBzdGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5ld1N0YXRlIFRoZSBuZXcgc3RhdGUuXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSByZXBsYWNlZCBzdGF0ZS5cbiAgICovXG4gIGZ1bmN0aW9uIHJlcGxhY2VTdGF0ZShuZXdTdGF0ZSkge1xuICAgIHZhciBwcmV2aW91c1N0YXRlID0gc3RhdGU7XG4gICAgc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0gPSBzdGF0ZSA9IG5ld1N0YXRlO1xuXG4gICAgcmV0dXJuIHByZXZpb3VzU3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogTW92ZSB0aGUgY2hhcmFjdGVyIGN1cnNvci4gUG9zaXRpdmUgbnVtYmVycyBtb3ZlIHRoZSBjdXJzb3IgZm9yd2FyZC5cbiAgICogTmVnYXRpdmUgbnVtYmVycyBhcmUgbm90IHN1cHBvcnRlZCFcbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtuPTFdIE51bWJlciBvZiBjaGFyYWN0ZXJzIHRvIHNraXAuXG4gICAqL1xuICBmdW5jdGlvbiBza2lwKG4pIHtcbiAgICBpZiAoKG4gfHwgMSkgPT0gMSkge1xuICAgICAgaWYgKGNzc1tjdXJzb3JdID09ICdcXG4nKSB7XG4gICAgICAgIGxpbmUrKztcbiAgICAgICAgY29sdW1uID0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbHVtbisrO1xuICAgICAgfVxuICAgICAgY3Vyc29yKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBza2lwU3RyID0gY3NzLnNsaWNlKGN1cnNvciwgY3Vyc29yICsgbikuc3BsaXQoJ1xcbicpO1xuICAgICAgaWYgKHNraXBTdHIubGVuZ3RoID4gMSkge1xuICAgICAgICBsaW5lICs9IHNraXBTdHIubGVuZ3RoIC0gMTtcbiAgICAgICAgY29sdW1uID0gMTtcbiAgICAgIH1cbiAgICAgIGNvbHVtbiArPSBza2lwU3RyW3NraXBTdHIubGVuZ3RoIC0gMV0ubGVuZ3RoO1xuICAgICAgY3Vyc29yID0gY3Vyc29yICsgbjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIHRoZSBjdXJyZW50IHRva2VuIHRvIHRoZSBwaWxlIGFuZCByZXNldCB0aGUgYnVmZmVyLlxuICAgKi9cbiAgZnVuY3Rpb24gYWRkVG9rZW4oKSB7XG4gICAgdG9rZW4uZW5kID0ge1xuICAgICAgbGluZTogbGluZSxcbiAgICAgIGNvbDogY29sdW1uXG4gICAgfTtcblxuICAgIERFQlVHICYmIGRlYnVnKCdhZGRUb2tlbjonLCBKU09OLnN0cmluZ2lmeSh0b2tlbiwgbnVsbCwgMikpO1xuXG4gICAgdG9rZW5zLnB1c2godG9rZW4pO1xuXG4gICAgYnVmZmVyID0gJyc7XG4gICAgdG9rZW4gPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGN1cnJlbnQgdG9rZW4uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRva2VuIHR5cGUuXG4gICAqL1xuICBmdW5jdGlvbiBpbml0aWFsaXplVG9rZW4odHlwZSkge1xuICAgIHRva2VuID0ge1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIHN0YXJ0OiB7XG4gICAgICAgIGxpbmU6IGxpbmUsXG4gICAgICAgIGNvbCA6IGNvbHVtblxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyAtLSBNYWluIExvb3AgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLypcbiAgVGhlIG1haW4gbG9vcCBpcyBhIHN0YXRlIG1hY2hpbmUgdGhhdCByZWFkcyBpbiBvbmUgY2hhcmFjdGVyIGF0IGEgdGltZSxcbiAgYW5kIGRldGVybWluZXMgd2hhdCB0byBkbyBiYXNlZCBvbiB0aGUgY3VycmVudCBzdGF0ZSBhbmQgY2hhcmFjdGVyLlxuICBUaGlzIGlzIGltcGxlbWVudGVkIGFzIGEgc2VyaWVzIG9mIG5lc3RlZCBgc3dpdGNoYCBzdGF0ZW1lbnRzIGFuZCB0aGVcbiAgY2FzZSBvcmRlcnMgaGF2ZSBiZWVuIG1pbGRseSBvcHRpbWl6ZWQgYmFzZWQgb24gcm91Z2ggcHJvYmFiaWxpdGllc1xuICBjYWxjdWxhdGVkIGJ5IHByb2Nlc3NpbmcgYSBzbWFsbCBzYW1wbGUgb2YgcmVhbC13b3JsZCBDU1MuXG5cbiAgRnVydGhlciBvcHRpbWl6YXRpb24gKHN1Y2ggYXMgYSBkaXNwYXRjaCB0YWJsZSkgc2hvdWxkbid0IGJlIG5lY2Vzc2FyeVxuICBzaW5jZSB0aGUgdG90YWwgbnVtYmVyIG9mIGNhc2VzIGlzIHZlcnkgbG93LlxuICAqL1xuXG4gIFRJTUVSICYmIChzdGFydCA9IERhdGUubm93KCkpO1xuXG4gIHdoaWxlIChjaCA9IGdldENoKCkpIHtcbiAgICBERUJVRyAmJiBkZWJ1ZyhjaCwgZ2V0U3RhdGUoKSk7XG5cbiAgICAvLyBjb2x1bW4gKz0gMTtcblxuICAgIHN3aXRjaCAoY2gpIHtcbiAgICAvLyBTcGFjZVxuICAgIGNhc2UgJyAnOlxuICAgICAgc3dpdGNoIChnZXRTdGF0ZSgpKSB7XG4gICAgICBjYXNlICdzZWxlY3Rvcic6XG4gICAgICBjYXNlICd2YWx1ZSc6XG4gICAgICBjYXNlICd2YWx1ZS1wYXJlbic6XG4gICAgICBjYXNlICdhdC1ncm91cCc6XG4gICAgICBjYXNlICdhdC12YWx1ZSc6XG4gICAgICBjYXNlICdjb21tZW50JzpcbiAgICAgIGNhc2UgJ2RvdWJsZS1zdHJpbmcnOlxuICAgICAgY2FzZSAnc2luZ2xlLXN0cmluZyc6XG4gICAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIC8vIE5ld2xpbmUgb3IgdGFiXG4gICAgY2FzZSAnXFxuJzpcbiAgICBjYXNlICdcXHQnOlxuICAgIGNhc2UgJ1xccic6XG4gICAgY2FzZSAnXFxmJzpcbiAgICAgIHN3aXRjaCAoZ2V0U3RhdGUoKSkge1xuICAgICAgY2FzZSAndmFsdWUnOlxuICAgICAgY2FzZSAndmFsdWUtcGFyZW4nOlxuICAgICAgY2FzZSAnYXQtZ3JvdXAnOlxuICAgICAgY2FzZSAnY29tbWVudCc6XG4gICAgICBjYXNlICdzaW5nbGUtc3RyaW5nJzpcbiAgICAgIGNhc2UgJ2RvdWJsZS1zdHJpbmcnOlxuICAgICAgY2FzZSAnc2VsZWN0b3InOlxuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdhdC12YWx1ZSc6XG4gICAgICAgIC8vIFRva2VuaXplIGFuIEAtcnVsZSBpZiBhIHNlbWktY29sb24gd2FzIG9taXR0ZWQuXG4gICAgICAgIGlmICgnXFxuJyA9PT0gY2gpIHtcbiAgICAgICAgICB0b2tlbi52YWx1ZSA9IGJ1ZmZlci50cmltKCk7XG4gICAgICAgICAgYWRkVG9rZW4oKTtcbiAgICAgICAgICBwb3BTdGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBpZiAoJ1xcbicgPT09IGNoKSB7XG4gICAgICAvLyAgIGNvbHVtbiA9IDA7XG4gICAgICAvLyAgIGxpbmUgKz0gMTtcbiAgICAgIC8vIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnOic6XG4gICAgICBzd2l0Y2ggKGdldFN0YXRlKCkpIHtcbiAgICAgIGNhc2UgJ25hbWUnOlxuICAgICAgICB0b2tlbi5uYW1lID0gYnVmZmVyLnRyaW0oKTtcbiAgICAgICAgYnVmZmVyID0gJyc7XG5cbiAgICAgICAgcmVwbGFjZVN0YXRlKCdiZWZvcmUtdmFsdWUnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2JlZm9yZS1zZWxlY3Rvcic6XG4gICAgICAgIGJ1ZmZlciArPSBjaDtcblxuICAgICAgICBpbml0aWFsaXplVG9rZW4oJ3NlbGVjdG9yJyk7XG4gICAgICAgIHB1c2hTdGF0ZSgnc2VsZWN0b3InKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2JlZm9yZS12YWx1ZSc6XG4gICAgICAgIHJlcGxhY2VTdGF0ZSgndmFsdWUnKTtcbiAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnOyc6XG4gICAgICBzd2l0Y2ggKGdldFN0YXRlKCkpIHtcbiAgICAgIGNhc2UgJ25hbWUnOlxuICAgICAgY2FzZSAnYmVmb3JlLXZhbHVlJzpcbiAgICAgIGNhc2UgJ3ZhbHVlJzpcbiAgICAgICAgLy8gVG9rZW5pemUgYSBkZWNsYXJhdGlvblxuICAgICAgICAvLyBpZiB2YWx1ZSBpcyBlbXB0eSBza2lwIHRoZSBkZWNsYXJhdGlvblxuICAgICAgICBpZiAoYnVmZmVyLnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdG9rZW4udmFsdWUgPSBidWZmZXIudHJpbSgpLFxuICAgICAgICAgIGFkZFRva2VuKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVwbGFjZVN0YXRlKCdiZWZvcmUtbmFtZScpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAndmFsdWUtcGFyZW4nOlxuICAgICAgICAvLyBJbnNpZ25pZmljYW50IHNlbWktY29sb25cbiAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYXQtdmFsdWUnOlxuICAgICAgICAvLyBUb2tlbml6ZSBhbiBALXJ1bGVcbiAgICAgICAgdG9rZW4udmFsdWUgPSBidWZmZXIudHJpbSgpO1xuICAgICAgICBhZGRUb2tlbigpO1xuICAgICAgICBwb3BTdGF0ZSgpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYmVmb3JlLW5hbWUnOlxuICAgICAgICAvLyBFeHRyYW5lb3VzIHNlbWktY29sb25cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3snOlxuICAgICAgc3dpdGNoIChnZXRTdGF0ZSgpKSB7XG4gICAgICBjYXNlICdzZWxlY3Rvcic6XG4gICAgICAgIC8vIElmIHRoZSBzZXF1ZW5jZSBpcyBgXFx7YCB0aGVuIGFzc3VtZSB0aGF0IHRoZSBicmFjZSBzaG91bGQgYmUgZXNjYXBlZC5cbiAgICAgICAgaWYgKHBlZWsoLTEpID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVG9rZW5pemUgYSBzZWxlY3RvclxuICAgICAgICB0b2tlbi50ZXh0ID0gYnVmZmVyLnRyaW0oKTtcbiAgICAgICAgYWRkVG9rZW4oKTtcbiAgICAgICAgcmVwbGFjZVN0YXRlKCdiZWZvcmUtbmFtZScpO1xuICAgICAgICBkZXB0aCA9IGRlcHRoICsgMTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2F0LWdyb3VwJzpcbiAgICAgICAgLy8gVG9rZW5pemUgYW4gQC1ncm91cFxuICAgICAgICB0b2tlbi5uYW1lID0gYnVmZmVyLnRyaW0oKTtcblxuICAgICAgICAvLyBYWFg6IEAtcnVsZXMgYXJlIHN0YXJ0aW5nIHRvIGdldCBoYWlyeVxuICAgICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnZm9udC1mYWNlJzpcbiAgICAgICAgY2FzZSAndmlld3BvcnQnIDpcbiAgICAgICAgY2FzZSAncGFnZScgICAgIDpcbiAgICAgICAgICBwdXNoU3RhdGUoJ2JlZm9yZS1uYW1lJyk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwdXNoU3RhdGUoJ2JlZm9yZS1zZWxlY3RvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWRkVG9rZW4oKTtcbiAgICAgICAgZGVwdGggPSBkZXB0aCArIDE7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICduYW1lJzpcbiAgICAgIGNhc2UgJ2F0LXJ1bGUnOlxuICAgICAgICAvLyBUb2tlbml6ZSBhIGRlY2xhcmF0aW9uIG9yIGFuIEAtcnVsZVxuICAgICAgICB0b2tlbi5uYW1lID0gYnVmZmVyLnRyaW0oKTtcbiAgICAgICAgYWRkVG9rZW4oKTtcbiAgICAgICAgcHVzaFN0YXRlKCdiZWZvcmUtbmFtZScpO1xuICAgICAgICBkZXB0aCA9IGRlcHRoICsgMTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgY2FzZSAnZG91YmxlLXN0cmluZyc6XG4gICAgICBjYXNlICdzaW5nbGUtc3RyaW5nJzpcbiAgICAgICAgLy8gSWdub3JlIGJyYWNlcyBpbiBjb21tZW50cyBhbmQgc3RyaW5nc1xuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYmVmb3JlLXZhbHVlJzpcbiAgICAgICAgcmVwbGFjZVN0YXRlKCd2YWx1ZScpO1xuICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ30nOlxuICAgICAgc3dpdGNoIChnZXRTdGF0ZSgpKSB7XG4gICAgICBjYXNlICdiZWZvcmUtbmFtZSc6XG4gICAgICBjYXNlICduYW1lJzpcbiAgICAgIGNhc2UgJ2JlZm9yZS12YWx1ZSc6XG4gICAgICBjYXNlICd2YWx1ZSc6XG4gICAgICAgIC8vIElmIHRoZSBidWZmZXIgY29udGFpbnMgYW55dGhpbmcsIGl0IGlzIGEgdmFsdWVcbiAgICAgICAgaWYgKGJ1ZmZlcikge1xuICAgICAgICAgIHRva2VuLnZhbHVlID0gYnVmZmVyLnRyaW0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSBjdXJyZW50IHRva2VuIGhhcyBhIG5hbWUgYW5kIGEgdmFsdWUgaXQgc2hvdWxkIGJlIHRva2VuaXplZC5cbiAgICAgICAgaWYgKHRva2VuLm5hbWUgJiYgdG9rZW4udmFsdWUpIHtcbiAgICAgICAgICBhZGRUb2tlbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTGVhdmUgdGhlIGJsb2NrXG4gICAgICAgIGluaXRpYWxpemVUb2tlbignZW5kJyk7XG4gICAgICAgIGFkZFRva2VuKCk7XG4gICAgICAgIHBvcFN0YXRlKCk7XG5cbiAgICAgICAgLy8gV2UgbWlnaHQgbmVlZCB0byBsZWF2ZSBhZ2Fpbi5cbiAgICAgICAgLy8gWFhYOiBXaGF0IGFib3V0IDMgbGV2ZWxzIGRlZXA/XG4gICAgICAgIGlmICgnYXQtZ3JvdXAnID09PSBnZXRTdGF0ZSgpKSB7XG4gICAgICAgICAgaW5pdGlhbGl6ZVRva2VuKCdhdC1ncm91cC1lbmQnKTtcbiAgICAgICAgICBhZGRUb2tlbigpO1xuICAgICAgICAgIHBvcFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChkZXB0aCA+IDApIHtcbiAgICAgICAgICBkZXB0aCA9IGRlcHRoIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdhdC1ncm91cCc6XG4gICAgICBjYXNlICdiZWZvcmUtc2VsZWN0b3InOlxuICAgICAgY2FzZSAnc2VsZWN0b3InOlxuICAgICAgICAvLyBJZiB0aGUgc2VxdWVuY2UgaXMgYFxcfWAgdGhlbiBhc3N1bWUgdGhhdCB0aGUgYnJhY2Ugc2hvdWxkIGJlIGVzY2FwZWQuXG4gICAgICAgIGlmIChwZWVrKC0xKSA9PT0gJ1xcXFwnKSB7XG4gICAgICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkZXB0aCA+IDApIHtcbiAgICAgICAgICAvLyBMZWF2ZSBibG9jayBpZiBpbiBhbiBhdC1ncm91cFxuICAgICAgICAgIGlmICgnYXQtZ3JvdXAnID09PSBnZXRTdGF0ZSgxKSkge1xuICAgICAgICAgICAgaW5pdGlhbGl6ZVRva2VuKCdhdC1ncm91cC1lbmQnKTtcbiAgICAgICAgICAgIGFkZFRva2VuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRlcHRoID4gMSkge1xuICAgICAgICAgIHBvcFN0YXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGVwdGggPiAwKSB7XG4gICAgICAgICAgZGVwdGggPSBkZXB0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2RvdWJsZS1zdHJpbmcnOlxuICAgICAgY2FzZSAnc2luZ2xlLXN0cmluZyc6XG4gICAgICBjYXNlICdjb21tZW50JzpcbiAgICAgICAgLy8gSWdub3JlIGJyYWNlcyBpbiBjb21tZW50cyBhbmQgc3RyaW5ncy5cbiAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG5cbiAgICAvLyBTdHJpbmdzXG4gICAgY2FzZSAnXCInOlxuICAgIGNhc2UgXCInXCI6XG4gICAgICBzd2l0Y2ggKGdldFN0YXRlKCkpIHtcbiAgICAgIGNhc2UgJ2RvdWJsZS1zdHJpbmcnOlxuICAgICAgICBpZiAoJ1wiJyA9PT0gY2ggJiYgJ1xcXFwnICE9PSBwZWVrKC0xKSkge1xuICAgICAgICAgIHBvcFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3NpbmdsZS1zdHJpbmcnOlxuICAgICAgICBpZiAoXCInXCIgPT09IGNoICYmICdcXFxcJyAhPT0gcGVlaygtMSkpIHtcbiAgICAgICAgICBwb3BTdGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdiZWZvcmUtYXQtdmFsdWUnOlxuICAgICAgICByZXBsYWNlU3RhdGUoJ2F0LXZhbHVlJyk7XG4gICAgICAgIHB1c2hTdGF0ZSgnXCInID09PSBjaCA/ICdkb3VibGUtc3RyaW5nJyA6ICdzaW5nbGUtc3RyaW5nJyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdiZWZvcmUtdmFsdWUnOlxuICAgICAgICByZXBsYWNlU3RhdGUoJ3ZhbHVlJyk7XG4gICAgICAgIHB1c2hTdGF0ZSgnXCInID09PSBjaCA/ICdkb3VibGUtc3RyaW5nJyA6ICdzaW5nbGUtc3RyaW5nJyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdjb21tZW50JzpcbiAgICAgICAgLy8gSWdub3JlIHN0cmluZ3Mgd2l0aGluIGNvbW1lbnRzLlxuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKCdcXFxcJyAhPT0gcGVlaygtMSkpIHtcbiAgICAgICAgICBwdXNoU3RhdGUoJ1wiJyA9PT0gY2ggPyAnZG91YmxlLXN0cmluZycgOiAnc2luZ2xlLXN0cmluZycpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gQ29tbWVudHNcbiAgICBjYXNlICcvJzpcbiAgICAgIHN3aXRjaCAoZ2V0U3RhdGUoKSkge1xuICAgICAgY2FzZSAnY29tbWVudCc6XG4gICAgICBjYXNlICdkb3VibGUtc3RyaW5nJzpcbiAgICAgIGNhc2UgJ3NpbmdsZS1zdHJpbmcnOlxuICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYmVmb3JlLXZhbHVlJzpcbiAgICAgIGNhc2UgJ3NlbGVjdG9yJzpcbiAgICAgIGNhc2UgJ25hbWUnOlxuICAgICAgY2FzZSAndmFsdWUnOlxuICAgICAgICBpZiAoaXNOZXh0Q2hhcignKicpKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGNvbW1lbnRzIGluIHNlbGVjdG9ycywgcHJvcGVydGllcyBhbmQgdmFsdWVzLiBUaGV5IGFyZVxuICAgICAgICAgIC8vIGRpZmZpY3VsdCB0byByZXByZXNlbnQgaW4gdGhlIEFTVC5cbiAgICAgICAgICB2YXIgcG9zID0gZmluZCgnKi8nKTtcblxuICAgICAgICAgIGlmIChwb3MpIHtcbiAgICAgICAgICAgIHNraXAocG9zICsgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChnZXRTdGF0ZSgpID09ICdiZWZvcmUtdmFsdWUnKSByZXBsYWNlU3RhdGUoJ3ZhbHVlJyk7XG4gICAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaXNOZXh0Q2hhcignKicpKSB7XG4gICAgICAgICAgLy8gQ3JlYXRlIGEgY29tbWVudCB0b2tlblxuICAgICAgICAgIGluaXRpYWxpemVUb2tlbignY29tbWVudCcpO1xuICAgICAgICAgIHB1c2hTdGF0ZSgnY29tbWVudCcpO1xuICAgICAgICAgIHNraXAoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIC8vIENvbW1lbnQgZW5kIG9yIHVuaXZlcnNhbCBzZWxlY3RvclxuICAgIGNhc2UgJyonOlxuICAgICAgc3dpdGNoIChnZXRTdGF0ZSgpKSB7XG4gICAgICBjYXNlICdjb21tZW50JzpcbiAgICAgICAgaWYgKGlzTmV4dENoYXIoJy8nKSkge1xuICAgICAgICAgIC8vIFRva2VuaXplIGEgY29tbWVudFxuICAgICAgICAgIHRva2VuLnRleHQgPSBidWZmZXI7IC8vIERvbid0IHRyaW0oKSFcbiAgICAgICAgICBza2lwKCk7XG4gICAgICAgICAgYWRkVG9rZW4oKTtcbiAgICAgICAgICBwb3BTdGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYmVmb3JlLXNlbGVjdG9yJzpcbiAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICBpbml0aWFsaXplVG9rZW4oJ3NlbGVjdG9yJyk7XG4gICAgICAgIHB1c2hTdGF0ZSgnc2VsZWN0b3InKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2JlZm9yZS12YWx1ZSc6XG4gICAgICAgIHJlcGxhY2VTdGF0ZSgndmFsdWUnKTtcbiAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICAvLyBALXJ1bGVzXG4gICAgY2FzZSAnQCc6XG4gICAgICBzd2l0Y2ggKGdldFN0YXRlKCkpIHtcbiAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgY2FzZSAnZG91YmxlLXN0cmluZyc6XG4gICAgICBjYXNlICdzaW5nbGUtc3RyaW5nJzpcbiAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2JlZm9yZS12YWx1ZSc6XG4gICAgICAgIHJlcGxhY2VTdGF0ZSgndmFsdWUnKTtcbiAgICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSBzdXBwb3J0ZWQgQC1ydWxlcyBhbmQgYXR0ZW1wdCB0byB0b2tlbml6ZSBvbmUuXG4gICAgICAgIHZhciB0b2tlbml6ZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIG5hbWU7XG4gICAgICAgIHZhciBydWxlO1xuXG4gICAgICAgIGZvciAodmFyIGogPSAwLCBsZW4gPSBhdFJ1bGVzLmxlbmd0aDsgIXRva2VuaXplZCAmJiBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgICBydWxlID0gYXRSdWxlc1tqXTtcbiAgICAgICAgICBuYW1lID0gcnVsZS5uYW1lIHx8IHJ1bGU7XG5cbiAgICAgICAgICBpZiAoIWlzTmV4dFN0cmluZyhuYW1lKSkgeyBjb250aW51ZTsgfVxuXG4gICAgICAgICAgdG9rZW5pemVkID0gdHJ1ZTtcblxuICAgICAgICAgIGluaXRpYWxpemVUb2tlbihuYW1lKTtcbiAgICAgICAgICBwdXNoU3RhdGUocnVsZS5zdGF0ZSB8fCAnYXQtZ3JvdXAnKTtcbiAgICAgICAgICBza2lwKG5hbWUubGVuZ3RoKTtcblxuICAgICAgICAgIGlmIChydWxlLnByZWZpeCkge1xuICAgICAgICAgICAgdG9rZW4ucHJlZml4ID0gcnVsZS5wcmVmaXg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJ1bGUudHlwZSkge1xuICAgICAgICAgICAgdG9rZW4udHlwZSA9IHJ1bGUudHlwZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRva2VuaXplZCkge1xuICAgICAgICAgIC8vIEtlZXAgb24gdHJ1Y2tpbicgQW1lcmljYSFcbiAgICAgICAgICBidWZmZXIgKz0gY2g7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIC8vIFBhcmVudGhlc2VzIGFyZSB0cmFja2VkIHRvIGRpc2FtYmlndWF0ZSBzZW1pLWNvbG9ucywgc3VjaCBhcyB3aXRoaW4gYVxuICAgIC8vIGRhdGEgVVJJLlxuICAgIGNhc2UgJygnOlxuICAgICAgc3dpdGNoIChnZXRTdGF0ZSgpKSB7XG4gICAgICBjYXNlICd2YWx1ZSc6XG4gICAgICAgIHB1c2hTdGF0ZSgndmFsdWUtcGFyZW4nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdiZWZvcmUtdmFsdWUnOlxuICAgICAgICByZXBsYWNlU3RhdGUoJ3ZhbHVlJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBidWZmZXIgKz0gY2g7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJyknOlxuICAgICAgc3dpdGNoIChnZXRTdGF0ZSgpKSB7XG4gICAgICBjYXNlICd2YWx1ZS1wYXJlbic6XG4gICAgICAgIHBvcFN0YXRlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYmVmb3JlLXZhbHVlJzpcbiAgICAgICAgcmVwbGFjZVN0YXRlKCd2YWx1ZScpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgYnVmZmVyICs9IGNoO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgc3dpdGNoIChnZXRTdGF0ZSgpKSB7XG4gICAgICBjYXNlICdiZWZvcmUtc2VsZWN0b3InOlxuICAgICAgICBpbml0aWFsaXplVG9rZW4oJ3NlbGVjdG9yJyk7XG4gICAgICAgIHB1c2hTdGF0ZSgnc2VsZWN0b3InKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2JlZm9yZS1uYW1lJzpcbiAgICAgICAgaW5pdGlhbGl6ZVRva2VuKCdwcm9wZXJ0eScpO1xuICAgICAgICByZXBsYWNlU3RhdGUoJ25hbWUnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2JlZm9yZS12YWx1ZSc6XG4gICAgICAgIHJlcGxhY2VTdGF0ZSgndmFsdWUnKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2JlZm9yZS1hdC12YWx1ZSc6XG4gICAgICAgIHJlcGxhY2VTdGF0ZSgnYXQtdmFsdWUnKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGJ1ZmZlciArPSBjaDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIFRJTUVSICYmIGRlYnVnKCdyYW4gaW4nLCAoRGF0ZS5ub3coKSAtIHN0YXJ0KSArICdtcycpO1xuXG4gIHJldHVybiB0b2tlbnM7XG59XG4iLCJ2YXIgREVCVUcgPSBmYWxzZTsgLy8gYHRydWVgIHRvIHByaW50IGRlYnVnZ2luZyBpbmZvLlxudmFyIFRJTUVSID0gZmFsc2U7IC8vIGB0cnVlYCB0byB0aW1lIGNhbGxzIHRvIGBwYXJzZSgpYCBhbmQgcHJpbnQgdGhlIHJlc3VsdHMuXG5cbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJy4vZGVidWcnKSgncGFyc2UnKTtcbnZhciBsZXggPSByZXF1aXJlKCcuL2xleGVyJyk7XG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHBhcnNlO1xuXG52YXIgX2NvbW1lbnRzOyAgIC8vIFdoZXRoZXIgY29tbWVudHMgYXJlIGFsbG93ZWQuXG52YXIgX2RlcHRoOyAgICAgIC8vIEN1cnJlbnQgYmxvY2sgbmVzdGluZyBkZXB0aC5cbnZhciBfcG9zaXRpb247ICAgLy8gV2hldGhlciB0byBpbmNsdWRlIGxpbmUvY29sdW1uIHBvc2l0aW9uLlxudmFyIF90b2tlbnM7ICAgICAvLyBBcnJheSBvZiBsZXhpY2FsIHRva2Vucy5cblxuLyoqXG4gKiBDb252ZXJ0IGEgQ1NTIHN0cmluZyBvciBhcnJheSBvZiBsZXhpY2FsIHRva2VucyBpbnRvIGEgYHN0cmluZ2lmeWAtYWJsZSBBU1QuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNzcyBDU1Mgc3RyaW5nIG9yIGFycmF5IG9mIGxleGljYWwgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuY29tbWVudHM9ZmFsc2VdIGFsbG93IGNvbW1lbnQgbm9kZXMgaW4gdGhlIEFTVFxuICogQHJldHVybnMge09iamVjdH0gYHN0cmluZ2lmeWAtYWJsZSBBU1RcbiAqL1xuZnVuY3Rpb24gcGFyc2UoY3NzLCBvcHRpb25zKSB7XG4gIHZhciBzdGFydDsgLy8gRGVidWcgdGltZXIgc3RhcnQuXG5cbiAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgX2NvbW1lbnRzID0gISFvcHRpb25zLmNvbW1lbnRzO1xuICBfcG9zaXRpb24gPSAhIW9wdGlvbnMucG9zaXRpb247XG5cbiAgX2RlcHRoID0gMDtcblxuICAvLyBPcGVyYXRlIG9uIGEgY29weSBvZiB0aGUgZ2l2ZW4gdG9rZW5zLCBvciB0aGUgbGV4KCknZCBDU1Mgc3RyaW5nLlxuICBfdG9rZW5zID0gQXJyYXkuaXNBcnJheShjc3MpID8gY3NzLnNsaWNlKCkgOiBsZXgoY3NzKTtcblxuICB2YXIgcnVsZTtcbiAgdmFyIHJ1bGVzID0gW107XG4gIHZhciB0b2tlbjtcblxuICBUSU1FUiAmJiAoc3RhcnQgPSBEYXRlLm5vdygpKTtcblxuICB3aGlsZSAoKHRva2VuID0gbmV4dCgpKSkge1xuICAgIHJ1bGUgPSBwYXJzZVRva2VuKHRva2VuKTtcbiAgICBydWxlICYmIHJ1bGVzLnB1c2gocnVsZSk7XG4gIH1cblxuICBUSU1FUiAmJiBkZWJ1ZygncmFuIGluJywgKERhdGUubm93KCkgLSBzdGFydCkgKyAnbXMnKTtcblxuICByZXR1cm4ge1xuICAgIHR5cGU6IFwic3R5bGVzaGVldFwiLFxuICAgIHN0eWxlc2hlZXQ6IHtcbiAgICAgIHJ1bGVzOiBydWxlc1xuICAgIH1cbiAgfTtcbn1cblxuLy8gLS0gRnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQnVpbGQgYW4gQVNUIG5vZGUgZnJvbSBhIGxleGljYWwgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuIGxleGljYWwgdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3ZlcnJpZGVdIG9iamVjdCBoYXNoIG9mIHByb3BlcnRpZXMgdGhhdCBvdmVycmlkZSB0aG9zZVxuICogICBhbHJlYWR5IGluIHRoZSB0b2tlbiwgb3IgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHRoZSB0b2tlbi5cbiAqIEByZXR1cm5zIHtPYmplY3R9IEFTVCBub2RlXG4gKi9cbmZ1bmN0aW9uIGFzdE5vZGUodG9rZW4sIG92ZXJyaWRlKSB7XG4gIG92ZXJyaWRlIHx8IChvdmVycmlkZSA9IHt9KTtcblxuICB2YXIga2V5O1xuICB2YXIga2V5cyA9IFsndHlwZScsICduYW1lJywgJ3ZhbHVlJ107XG4gIHZhciBub2RlID0ge307XG5cbiAgLy8gQXZvaWRpbmcgW10uZm9yRWFjaCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAga2V5ID0ga2V5c1tpXTtcblxuICAgIGlmICh0b2tlbltrZXldKSB7XG4gICAgICBub2RlW2tleV0gPSBvdmVycmlkZVtrZXldIHx8IHRva2VuW2tleV07XG4gICAgfVxuICB9XG5cbiAga2V5cyA9IE9iamVjdC5rZXlzKG92ZXJyaWRlKTtcblxuICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgIGtleSA9IGtleXNbaV07XG5cbiAgICBpZiAoIW5vZGVba2V5XSkge1xuICAgICAgbm9kZVtrZXldID0gb3ZlcnJpZGVba2V5XTtcbiAgICB9XG4gIH1cblxuICBpZiAoX3Bvc2l0aW9uKSB7XG4gICAgbm9kZS5wb3NpdGlvbiA9IHtcbiAgICAgIHN0YXJ0OiB0b2tlbi5zdGFydCxcbiAgICAgIGVuZDogdG9rZW4uZW5kXG4gICAgfTtcbiAgfVxuXG4gIERFQlVHICYmIGRlYnVnKCdhc3ROb2RlOicsIEpTT04uc3RyaW5naWZ5KG5vZGUsIG51bGwsIDIpKTtcblxuICByZXR1cm4gbm9kZTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYSBsZXhpY2FsIHRva2VuIGZyb20gdGhlIHN0YWNrIGFuZCByZXR1cm4gdGhlIHJlbW92ZWQgdG9rZW4uXG4gKlxuICogQHJldHVybnMge09iamVjdH0gbGV4aWNhbCB0b2tlblxuICovXG5mdW5jdGlvbiBuZXh0KCkge1xuICB2YXIgdG9rZW4gPSBfdG9rZW5zLnNoaWZ0KCk7XG4gIERFQlVHICYmIGRlYnVnKCduZXh0OicsIEpTT04uc3RyaW5naWZ5KHRva2VuLCBudWxsLCAyKSk7XG4gIHJldHVybiB0b2tlbjtcbn1cblxuLy8gLS0gUGFyc2UqIEZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBDb252ZXJ0IGFuIEAtZ3JvdXAgbGV4aWNhbCB0b2tlbiB0byBhbiBBU1Qgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW4gQC1ncm91cCBsZXhpY2FsIHRva2VuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBALWdyb3VwIEFTVCBub2RlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQXRHcm91cCh0b2tlbikge1xuICBfZGVwdGggPSBfZGVwdGggKyAxO1xuXG4gIC8vIEFzIHRoZSBALWdyb3VwIHRva2VuIGlzIGFzc2VtYmxlZCwgcmVsZXZhbnQgdG9rZW4gdmFsdWVzIGFyZSBjYXB0dXJlZCBoZXJlXG4gIC8vIHRlbXBvcmFyaWx5LiBUaGV5IHdpbGwgbGF0ZXIgYmUgdXNlZCBhcyBgdG9rZW5pemUoKWAgb3ZlcnJpZGVzLlxuICB2YXIgb3ZlcnJpZGVzID0ge307XG5cbiAgc3dpdGNoICh0b2tlbi50eXBlKSB7XG4gIGNhc2UgJ2ZvbnQtZmFjZSc6XG4gIGNhc2UgJ3ZpZXdwb3J0JyA6XG4gICAgb3ZlcnJpZGVzLmRlY2xhcmF0aW9ucyA9IHBhcnNlRGVjbGFyYXRpb25zKCk7XG4gICAgYnJlYWs7XG5cbiAgY2FzZSAncGFnZSc6XG4gICAgb3ZlcnJpZGVzLnByZWZpeCA9IHRva2VuLnByZWZpeDtcbiAgICBvdmVycmlkZXMuZGVjbGFyYXRpb25zID0gcGFyc2VEZWNsYXJhdGlvbnMoKTtcbiAgICBicmVhaztcblxuICBkZWZhdWx0OlxuICAgIG92ZXJyaWRlcy5wcmVmaXggPSB0b2tlbi5wcmVmaXg7XG4gICAgb3ZlcnJpZGVzLnJ1bGVzID0gcGFyc2VSdWxlcygpO1xuICB9XG5cbiAgcmV0dXJuIGFzdE5vZGUodG9rZW4sIG92ZXJyaWRlcyk7XG59XG5cbi8qKlxuICogQ29udmVydCBhbiBAaW1wb3J0IGxleGljYWwgdG9rZW4gdG8gYW4gQVNUIG5vZGUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuIEBpbXBvcnQgbGV4aWNhbCB0b2tlblxuICogQHJldHVybnMge09iamVjdH0gQGltcG9ydCBBU1Qgbm9kZVxuICovXG5mdW5jdGlvbiBwYXJzZUF0SW1wb3J0KHRva2VuKSB7XG4gIHJldHVybiBhc3ROb2RlKHRva2VuKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGFuIEBjaGFyc2V0IHRva2VuIHRvIGFuIEFTVCBub2RlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlbiBAY2hhcnNldCBsZXhpY2FsIHRva2VuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBAY2hhcnNldCBub2RlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQ2hhcnNldCh0b2tlbikge1xuICByZXR1cm4gYXN0Tm9kZSh0b2tlbik7XG59XG5cbi8qKlxuICogQ29udmVydCBhIGNvbW1lbnQgdG9rZW4gdG8gYW4gQVNUIE5vZGUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuIGNvbW1lbnQgbGV4aWNhbCB0b2tlblxuICogQHJldHVybnMge09iamVjdH0gY29tbWVudCBub2RlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQ29tbWVudCh0b2tlbikge1xuICByZXR1cm4gYXN0Tm9kZSh0b2tlbiwge3RleHQ6IHRva2VuLnRleHR9KTtcbn1cblxuZnVuY3Rpb24gcGFyc2VOYW1lc3BhY2UodG9rZW4pIHtcbiAgcmV0dXJuIGFzdE5vZGUodG9rZW4pO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBwcm9wZXJ0eSBsZXhpY2FsIHRva2VuIHRvIGEgcHJvcGVydHkgQVNUIG5vZGUuXG4gKlxuICogQHJldHVybnMge09iamVjdH0gcHJvcGVydHkgbm9kZVxuICovXG5mdW5jdGlvbiBwYXJzZVByb3BlcnR5KHRva2VuKSB7XG4gIHJldHVybiBhc3ROb2RlKHRva2VuKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgc2VsZWN0b3IgbGV4aWNhbCB0b2tlbiB0byBhIHNlbGVjdG9yIEFTVCBub2RlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlbiBzZWxlY3RvciBsZXhpY2FsIHRva2VuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBzZWxlY3RvciBub2RlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2VsZWN0b3IodG9rZW4pIHtcbiAgZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgICByZXR1cm4gc3RyLnRyaW0oKTtcbiAgfVxuXG4gIHJldHVybiBhc3ROb2RlKHRva2VuLCB7XG4gICAgdHlwZTogJ3J1bGUnLFxuICAgIHNlbGVjdG9yczogdG9rZW4udGV4dC5zcGxpdCgnLCcpLm1hcCh0cmltKSxcbiAgICBkZWNsYXJhdGlvbnM6IHBhcnNlRGVjbGFyYXRpb25zKHRva2VuKVxuICB9KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgbGV4aWNhbCB0b2tlbiB0byBhbiBBU1Qgbm9kZS5cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fHVuZGVmaW5lZH0gQVNUIG5vZGVcbiAqL1xuZnVuY3Rpb24gcGFyc2VUb2tlbih0b2tlbikge1xuICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgLy8gQ2FzZXMgYXJlIGxpc3RlZCBpbiByb3VnaGx5IGRlc2NlbmRpbmcgb3JkZXIgb2YgcHJvYmFiaWxpdHkuXG4gIGNhc2UgJ3Byb3BlcnR5JzogcmV0dXJuIHBhcnNlUHJvcGVydHkodG9rZW4pO1xuXG4gIGNhc2UgJ3NlbGVjdG9yJzogcmV0dXJuIHBhcnNlU2VsZWN0b3IodG9rZW4pO1xuXG4gIGNhc2UgJ2F0LWdyb3VwLWVuZCc6IF9kZXB0aCA9IF9kZXB0aCAtIDE7IHJldHVybjtcblxuICBjYXNlICdtZWRpYScgICAgIDpcbiAgY2FzZSAna2V5ZnJhbWVzJyA6cmV0dXJuIHBhcnNlQXRHcm91cCh0b2tlbik7XG5cbiAgY2FzZSAnY29tbWVudCc6IGlmIChfY29tbWVudHMpIHsgcmV0dXJuIHBhcnNlQ29tbWVudCh0b2tlbik7IH0gYnJlYWs7XG5cbiAgY2FzZSAnY2hhcnNldCc6IHJldHVybiBwYXJzZUNoYXJzZXQodG9rZW4pO1xuICBjYXNlICdpbXBvcnQnOiByZXR1cm4gcGFyc2VBdEltcG9ydCh0b2tlbik7XG5cbiAgY2FzZSAnbmFtZXNwYWNlJzogcmV0dXJuIHBhcnNlTmFtZXNwYWNlKHRva2VuKTtcblxuICBjYXNlICdmb250LWZhY2UnOlxuICBjYXNlICdzdXBwb3J0cycgOlxuICBjYXNlICd2aWV3cG9ydCcgOlxuICBjYXNlICdkb2N1bWVudCcgOlxuICBjYXNlICdwYWdlJyAgICAgOiByZXR1cm4gcGFyc2VBdEdyb3VwKHRva2VuKTtcbiAgfVxuXG4gIERFQlVHICYmIGRlYnVnKCdwYXJzZVRva2VuOiB1bmV4cGVjdGVkIHRva2VuOicsIEpTT04uc3RyaW5naWZ5KHRva2VuKSk7XG59XG5cbi8vIC0tIFBhcnNlIEhlbHBlciBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogSXRlcmF0aXZlbHkgcGFyc2VzIGxleGljYWwgdG9rZW5zIGZyb20gdGhlIHN0YWNrIGludG8gQVNUIG5vZGVzIHVudGlsIGFcbiAqIGNvbmRpdGlvbmFsIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCwgYXQgd2hpY2ggcG9pbnQgaXRlcmF0aW9uIHRlcm1pbmF0ZXNcbiAqIGFuZCBhbnkgQVNUIG5vZGVzIGNvbGxlY3RlZCBhcmUgcmV0dXJuZWQuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY29uZGl0aW9uRm5cbiAqICAgQHBhcmFtIHtPYmplY3R9IHRva2VuIHRoZSBsZXhpY2FsIHRva2VuIGJlaW5nIHBhcnNlZFxuICogICBAcmV0dXJucyB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSB0b2tlbiBzaG91bGQgYmUgcGFyc2VkLCBgZmFsc2VgIG90aGVyd2lzZVxuICogQHJldHVybiB7QXJyYXl9IEFTVCBub2Rlc1xuICovXG5mdW5jdGlvbiBwYXJzZVRva2Vuc1doaWxlKGNvbmRpdGlvbkZuKSB7XG4gIHZhciBub2RlO1xuICB2YXIgbm9kZXMgPSBbXTtcbiAgdmFyIHRva2VuO1xuXG4gIHdoaWxlICgodG9rZW4gPSBuZXh0KCkpICYmIChjb25kaXRpb25GbiAmJiBjb25kaXRpb25Gbih0b2tlbikpKSB7XG4gICAgbm9kZSA9IHBhcnNlVG9rZW4odG9rZW4pO1xuICAgIG5vZGUgJiYgbm9kZXMucHVzaChub2RlKTtcbiAgfVxuXG4gIC8vIFBsYWNlIGFuIHVudXNlZCBub24tYGVuZGAgbGV4aWNhbCB0b2tlbiBiYWNrIG9udG8gdGhlIHN0YWNrLlxuICBpZiAodG9rZW4gJiYgdG9rZW4udHlwZSAhPT0gJ2VuZCcpIHtcbiAgICBfdG9rZW5zLnVuc2hpZnQodG9rZW4pO1xuICB9XG5cbiAgcmV0dXJuIG5vZGVzO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBzZXJpZXMgb2YgdG9rZW5zIGludG8gYSBzZXF1ZW5jZSBvZiBkZWNsYXJhdGlvbiBBU1Qgbm9kZXMuXG4gKlxuICogQHJldHVybnMge0FycmF5fSBkZWNsYXJhdGlvbiBub2Rlc1xuICovXG5mdW5jdGlvbiBwYXJzZURlY2xhcmF0aW9ucygpIHtcbiAgcmV0dXJuIHBhcnNlVG9rZW5zV2hpbGUoZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgcmV0dXJuICh0b2tlbi50eXBlID09PSAncHJvcGVydHknIHx8IHRva2VuLnR5cGUgPT09ICdjb21tZW50Jyk7XG4gIH0pO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBzZXJpZXMgb2YgdG9rZW5zIGludG8gYSBzZXF1ZW5jZSBvZiBydWxlIG5vZGVzLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheX0gcnVsZSBub2Rlc1xuICovXG5mdW5jdGlvbiBwYXJzZVJ1bGVzKCkge1xuICByZXR1cm4gcGFyc2VUb2tlbnNXaGlsZShmdW5jdGlvbiAoKSB7IHJldHVybiBfZGVwdGg7IH0pO1xufVxuIiwidmFyIERFQlVHID0gZmFsc2U7IC8vIGB0cnVlYCB0byBwcmludCBkZWJ1Z2dpbmcgaW5mby5cbnZhciBUSU1FUiA9IGZhbHNlOyAvLyBgdHJ1ZWAgdG8gdGltZSBjYWxscyB0byBgc3RyaW5naWZ5KClgIGFuZCBwcmludCB0aGUgcmVzdWx0cy5cblxudmFyIGRlYnVnID0gcmVxdWlyZSgnLi9kZWJ1ZycpKCdzdHJpbmdpZnknKTtcblxudmFyIF9jb21tZW50czsgICAgICAvLyBXaGV0aGVyIGNvbW1lbnRzIGFyZSBhbGxvd2VkIGluIHRoZSBzdHJpbmdpZmllZCBDU1MuXG52YXIgX2NvbXByZXNzOyAgICAgIC8vIFdoZXRoZXIgdGhlIHN0cmluZ2lmaWVkIENTUyBzaG91bGQgYmUgY29tcHJlc3NlZC5cbnZhciBfaW5kZW50YXRpb247ICAgLy8gSW5kZW50YXRpb24gb3B0aW9uIHZhbHVlLlxudmFyIF9uOyAgICAgICAgICAgICAvLyBDb21wcmVzc2lvbi1hd2FyZSBuZXdsaW5lIGNoYXJhY3Rlci5cbnZhciBfczsgICAgICAgICAgICAgLy8gQ29tcHJlc3Npb24tYXdhcmUgc3BhY2UgY2hhcmFjdGVyLlxuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBzdHJpbmdpZnk7XG5cbi8qKlxuICogQ29udmVydCBhIGBzdHJpbmdpZnlgLWFibGUgQVNUIGludG8gYSBDU1Mgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBgc3RyaW5naWZ5YC1hYmxlIEFTVFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5jb21tZW50cz1mYWxzZV0gYWxsb3cgY29tbWVudHMgaW4gdGhlIENTU1xuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5jb21wcmVzcz1mYWxzZV0gY29tcHJlc3Mgd2hpdGVzcGFjZVxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLmluZGVudGF0aW9uPScnXSBpbmRlbnRhdGlvbiBzZXF1ZW5jZVxuICogQHJldHVybnMge1N0cmluZ30gQ1NTXG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeShhc3QsIG9wdGlvbnMpIHtcbiAgdmFyIHN0YXJ0OyAvLyBEZWJ1ZyB0aW1lciBzdGFydC5cblxuICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICBfaW5kZW50YXRpb24gPSBvcHRpb25zLmluZGVudGF0aW9uIHx8ICcnO1xuICBfY29tcHJlc3MgPSAhIW9wdGlvbnMuY29tcHJlc3M7XG4gIF9jb21tZW50cyA9ICEhb3B0aW9ucy5jb21tZW50cztcblxuICBpZiAoX2NvbXByZXNzKSB7XG4gICAgX24gPSBfcyA9ICcnO1xuICB9IGVsc2Uge1xuICAgIF9uID0gJ1xcbic7XG4gICAgX3MgPSAnICc7XG4gIH1cblxuICBUSU1FUiAmJiAoc3RhcnQgPSBEYXRlLm5vdygpKTtcblxuICB2YXIgY3NzID0gcmVkdWNlKGFzdC5zdHlsZXNoZWV0LnJ1bGVzLCBzdHJpbmdpZnlOb2RlKS5qb2luKCdcXG4nKS50cmltKCk7XG5cbiAgVElNRVIgJiYgZGVidWcoJ3JhbiBpbicsIChEYXRlLm5vdygpIC0gc3RhcnQpICsgJ21zJyk7XG5cbiAgcmV0dXJuIGNzcztcbn1cblxuLy8gLS0gRnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogTW9kaWZ5IHRoZSBpbmRlbnRhdGlvbiBsZXZlbCwgb3IgcmV0dXJuIGEgY29tcHJlc3Npb24tYXdhcmUgc2VxdWVuY2Ugb2ZcbiAqIHNwYWNlcyBlcXVhbCB0byB0aGUgY3VycmVudCBpbmRlbnRhdGlvbiBsZXZlbC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gW2xldmVsPXVuZGVmaW5lZF0gaW5kZW50YXRpb24gbGV2ZWwgbW9kaWZpZXJcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHNlcXVlbmNlIG9mIHNwYWNlc1xuICovXG5mdW5jdGlvbiBpbmRlbnQobGV2ZWwpIHtcbiAgdGhpcy5sZXZlbCB8fCAodGhpcy5sZXZlbCA9IDEpO1xuXG4gIGlmIChsZXZlbCkge1xuICAgIHRoaXMubGV2ZWwgKz0gbGV2ZWw7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKF9jb21wcmVzcykgeyByZXR1cm4gJyc7IH1cblxuICByZXR1cm4gQXJyYXkodGhpcy5sZXZlbCkuam9pbihfaW5kZW50YXRpb24gfHwgJycpO1xufVxuXG4vLyAtLSBTdHJpbmdpZnkgRnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIFN0cmluZ2lmeSBhbiBALXJ1bGUgQVNUIG5vZGUuXG4gKlxuICogVXNlIGBzdHJpbmdpZnlBdEdyb3VwKClgIHdoZW4gZGVhbGluZyB3aXRoIEAtZ3JvdXBzIHRoYXQgbWF5IGNvbnRhaW4gYmxvY2tzXG4gKiBzdWNoIGFzIEBtZWRpYS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBALXJ1bGUgdHlwZS4gRS5nLiwgaW1wb3J0LCBjaGFyc2V0XG4gKiBAcmV0dXJucyB7U3RyaW5nfSBTdHJpbmdpZmllZCBALXJ1bGVcbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5QXRSdWxlKG5vZGUpIHtcbiAgcmV0dXJuICdAJyArIG5vZGUudHlwZSArICcgJyArIG5vZGUudmFsdWUgKyAnOycgKyBfbjtcbn1cblxuLyoqXG4gKiBTdHJpbmdpZnkgYW4gQC1ncm91cCBBU1Qgbm9kZS5cbiAqXG4gKiBVc2UgYHN0cmluZ2lmeUF0UnVsZSgpYCB3aGVuIGRlYWxpbmcgd2l0aCBALXJ1bGVzIHRoYXQgbWF5IG5vdCBjb250YWluIGJsb2Nrc1xuICogc3VjaCBhcyBAaW1wb3J0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBub2RlIEAtZ3JvdXAgQVNUIG5vZGVcbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeUF0R3JvdXAobm9kZSkge1xuICB2YXIgbGFiZWwgPSAnJztcbiAgdmFyIHByZWZpeCA9IG5vZGUucHJlZml4IHx8ICcnO1xuXG4gIGlmIChub2RlLm5hbWUpIHtcbiAgICBsYWJlbCA9ICcgJyArIG5vZGUubmFtZTtcbiAgfVxuXG4gIC8vIEZJWE1FOiBALXJ1bGUgY29uZGl0aW9uYWwgbG9naWMgaXMgbGVha2luZyBldmVyeXdoZXJlLlxuICB2YXIgY2hvbXAgPSBub2RlLnR5cGUgIT09ICdwYWdlJztcblxuICByZXR1cm4gJ0AnICsgcHJlZml4ICsgbm9kZS50eXBlICsgbGFiZWwgKyBfcyArIHN0cmluZ2lmeUJsb2NrKG5vZGUsIGNob21wKSArIF9uO1xufVxuXG4vKipcbiAqIFN0cmluZ2lmeSBhIGNvbW1lbnQgQVNUIG5vZGUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG5vZGUgY29tbWVudCBBU1Qgbm9kZVxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5Q29tbWVudChub2RlKSB7XG4gIGlmICghX2NvbW1lbnRzKSB7IHJldHVybiAnJzsgfVxuXG4gIHJldHVybiAnLyonICsgKG5vZGUudGV4dCB8fCAnJykgKyAnKi8nICsgX247XG59XG5cbi8qKlxuICogU3RyaW5naWZ5IGEgcnVsZSBBU1Qgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbm9kZSBydWxlIEFTVCBub2RlXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBzdHJpbmdpZnlSdWxlKG5vZGUpIHtcbiAgdmFyIGxhYmVsO1xuXG4gIGlmIChub2RlLnNlbGVjdG9ycykge1xuICAgIGxhYmVsID0gbm9kZS5zZWxlY3RvcnMuam9pbignLCcgKyBfbik7XG4gIH0gZWxzZSB7XG4gICAgbGFiZWwgPSAnQCcgKyBub2RlLnR5cGU7XG4gICAgbGFiZWwgKz0gbm9kZS5uYW1lID8gJyAnICsgbm9kZS5uYW1lIDogJyc7XG4gIH1cblxuICByZXR1cm4gaW5kZW50KCkgKyBsYWJlbCArIF9zICsgc3RyaW5naWZ5QmxvY2sobm9kZSkgKyBfbjtcbn1cblxuXG4vLyAtLSBTdHJpbmdpZnkgSGVscGVyIEZ1bmN0aW9ucyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIFJlZHVjZSBhbiBhcnJheSBieSBhcHBseWluZyBhIGZ1bmN0aW9uIHRvIGVhY2ggaXRlbSBhbmQgcmV0YWluaW5nIHRoZSB0cnV0aHlcbiAqIHJlc3VsdHMuXG4gKlxuICogV2hlbiBgaXRlbS50eXBlYCBpcyBgJ2NvbW1lbnQnYCBgc3RyaW5naWZ5Q29tbWVudGAgd2lsbCBiZSBhcHBsaWVkIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gaXRlbXMgYXJyYXkgdG8gcmVkdWNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBmdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGl0ZW0gaW4gdGhlIGFycmF5XG4gKiAgIEByZXR1cm5zIHtNaXhlZH0gVHJ1dGh5IHZhbHVlcyB3aWxsIGJlIHJldGFpbmVkLCBmYWxzeSB2YWx1ZXMgb21pdHRlZFxuICogQHJldHVybnMge0FycmF5fSByZXRhaW5lZCByZXN1bHRzXG4gKi9cbmZ1bmN0aW9uIHJlZHVjZShpdGVtcywgZm4pIHtcbiAgcmV0dXJuIGl0ZW1zLnJlZHVjZShmdW5jdGlvbiAocmVzdWx0cywgaXRlbSkge1xuICAgIHZhciByZXN1bHQgPSAoaXRlbS50eXBlID09PSAnY29tbWVudCcpID8gc3RyaW5naWZ5Q29tbWVudChpdGVtKSA6IGZuKGl0ZW0pO1xuICAgIHJlc3VsdCAmJiByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfSwgW10pO1xufVxuXG4vKipcbiAqIFN0cmluZ2lmeSBhbiBBU1Qgbm9kZSB3aXRoIHRoZSBhc3N1bXB0aW9uIHRoYXQgaXQgcmVwcmVzZW50cyBhIGJsb2NrIG9mXG4gKiBkZWNsYXJhdGlvbnMgb3Igb3RoZXIgQC1ncm91cCBjb250ZW50cy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbm9kZSBBU1Qgbm9kZVxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xuLy8gRklYTUU6IGNob21wIHNob3VsZCBub3QgYmUgYSBtYWdpYyBib29sZWFuIHBhcmFtZXRlclxuZnVuY3Rpb24gc3RyaW5naWZ5QmxvY2sobm9kZSwgY2hvbXApIHtcbiAgdmFyIGNoaWxkcmVuID0gbm9kZS5kZWNsYXJhdGlvbnM7XG4gIHZhciBmbiA9IHN0cmluZ2lmeURlY2xhcmF0aW9uO1xuXG4gIGlmIChub2RlLnJ1bGVzKSB7XG4gICAgY2hpbGRyZW4gPSBub2RlLnJ1bGVzO1xuICAgIGZuID0gc3RyaW5naWZ5UnVsZTtcbiAgfVxuXG4gIGNoaWxkcmVuID0gc3RyaW5naWZ5Q2hpbGRyZW4oY2hpbGRyZW4sIGZuKTtcbiAgY2hpbGRyZW4gJiYgKGNoaWxkcmVuID0gX24gKyBjaGlsZHJlbiArIChjaG9tcCA/ICcnIDogX24pKTtcblxuICByZXR1cm4gJ3snICsgY2hpbGRyZW4gKyBpbmRlbnQoKSArICd9Jztcbn1cblxuLyoqXG4gKiBTdHJpbmdpZnkgYW4gYXJyYXkgb2YgY2hpbGQgQVNUIG5vZGVzIGJ5IGNhbGxpbmcgdGhlIGdpdmVuIHN0cmluZ2lmeSBmdW5jdGlvblxuICogb25jZSBmb3IgZWFjaCBjaGlsZCwgYW5kIGNvbmNhdGVuYXRpbmcgdGhlIHJlc3VsdHMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gY2hpbGRyZW4gYG5vZGUucnVsZXNgIG9yIGBub2RlLmRlY2xhcmF0aW9uc2BcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIHN0cmluZ2lmeSBmdW5jdGlvblxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5Q2hpbGRyZW4oY2hpbGRyZW4sIGZuKSB7XG4gIGlmICghY2hpbGRyZW4pIHsgcmV0dXJuICcnOyB9XG5cbiAgaW5kZW50KDEpO1xuICB2YXIgcmVzdWx0cyA9IHJlZHVjZShjaGlsZHJlbiwgZm4pO1xuICBpbmRlbnQoLTEpO1xuXG4gIGlmICghcmVzdWx0cy5sZW5ndGgpIHsgcmV0dXJuICcnOyB9XG5cbiAgcmV0dXJuIHJlc3VsdHMuam9pbihfbik7XG59XG5cbi8qKlxuICogU3RyaW5naWZ5IGEgZGVjbGFyYXRpb24gQVNUIG5vZGUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG5vZGUgZGVjbGFyYXRpb24gQVNUIG5vZGVcbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeURlY2xhcmF0aW9uKG5vZGUpIHtcbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3Byb3BlcnR5Jykge1xuICAgIHJldHVybiBzdHJpbmdpZnlQcm9wZXJ0eShub2RlKTtcbiAgfVxuXG4gIERFQlVHICYmIGRlYnVnKCdzdHJpbmdpZnlEZWNsYXJhdGlvbjogdW5leHBlY3RlZCBub2RlOicsIEpTT04uc3RyaW5naWZ5KG5vZGUpKTtcbn1cblxuLyoqXG4gKiBTdHJpbmdpZnkgYW4gQVNUIG5vZGUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG5vZGUgQVNUIG5vZGVcbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeU5vZGUobm9kZSkge1xuICBzd2l0Y2ggKG5vZGUudHlwZSkge1xuICAvLyBDYXNlcyBhcmUgbGlzdGVkIGluIHJvdWdobHkgZGVzY2VuZGluZyBvcmRlciBvZiBwcm9iYWJpbGl0eS5cbiAgY2FzZSAncnVsZSc6IHJldHVybiBzdHJpbmdpZnlSdWxlKG5vZGUpO1xuXG4gIGNhc2UgJ21lZGlhJyAgICA6XG4gIGNhc2UgJ2tleWZyYW1lcyc6IHJldHVybiBzdHJpbmdpZnlBdEdyb3VwKG5vZGUpO1xuXG4gIGNhc2UgJ2NvbW1lbnQnOiByZXR1cm4gc3RyaW5naWZ5Q29tbWVudChub2RlKTtcblxuICBjYXNlICdpbXBvcnQnICAgOlxuICBjYXNlICdjaGFyc2V0JyAgOlxuICBjYXNlICduYW1lc3BhY2UnOiByZXR1cm4gc3RyaW5naWZ5QXRSdWxlKG5vZGUpO1xuXG4gIGNhc2UgJ2ZvbnQtZmFjZSc6XG4gIGNhc2UgJ3N1cHBvcnRzJyA6XG4gIGNhc2UgJ3ZpZXdwb3J0JyA6XG4gIGNhc2UgJ2RvY3VtZW50JyA6XG4gIGNhc2UgJ3BhZ2UnICAgICA6IHJldHVybiBzdHJpbmdpZnlBdEdyb3VwKG5vZGUpO1xuICB9XG5cbiAgREVCVUcgJiYgZGVidWcoJ3N0cmluZ2lmeU5vZGU6IHVuZXhwZWN0ZWQgbm9kZTogJyArIEpTT04uc3RyaW5naWZ5KG5vZGUpKTtcbn1cblxuLyoqXG4gKiBTdHJpbmdpZnkgYW4gQVNUIHByb3BlcnR5IG5vZGUuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG5vZGUgQVNUIHByb3BlcnR5IG5vZGVcbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeVByb3BlcnR5KG5vZGUpIHtcbiAgdmFyIG5hbWUgPSBub2RlLm5hbWUgPyBub2RlLm5hbWUgKyAnOicgKyBfcyA6ICcnO1xuXG4gIHJldHVybiBpbmRlbnQoKSArIG5hbWUgKyBub2RlLnZhbHVlICsgJzsnO1xufVxuIiwiLypcblNsaWNrIFBhcnNlclxuIC0gb3JpZ2luYWxseSBjcmVhdGVkIGJ5IHRoZSBhbG1pZ2h0eSBUaG9tYXMgQXlsb3R0IDxAc3VidGxlZ3JhZGllbnQ+IChodHRwOi8vc3VidGxlZ3JhZGllbnQuY29tKVxuKi9cInVzZSBzdHJpY3RcIlxuXG4vLyBOb3RhYmxlIGNoYW5nZXMgZnJvbSBTbGljay5QYXJzZXIgMS4wLnhcblxuLy8gVGhlIHBhcnNlciBub3cgdXNlcyAyIGNsYXNzZXM6IEV4cHJlc3Npb25zIGFuZCBFeHByZXNzaW9uXG4vLyBgbmV3IEV4cHJlc3Npb25zYCBwcm9kdWNlcyBhbiBhcnJheS1saWtlIG9iamVjdCBjb250YWluaW5nIGEgbGlzdCBvZiBFeHByZXNzaW9uIG9iamVjdHNcbi8vIC0gRXhwcmVzc2lvbnM6OnRvU3RyaW5nKCkgcHJvZHVjZXMgYSBjbGVhbmVkIHVwIGV4cHJlc3Npb25zIHN0cmluZ1xuLy8gYG5ldyBFeHByZXNzaW9uYCBwcm9kdWNlcyBhbiBhcnJheS1saWtlIG9iamVjdFxuLy8gLSBFeHByZXNzaW9uOjp0b1N0cmluZygpIHByb2R1Y2VzIGEgY2xlYW5lZCB1cCBleHByZXNzaW9uIHN0cmluZ1xuLy8gVGhlIG9ubHkgZXhwb3NlZCBtZXRob2QgaXMgcGFyc2UsIHdoaWNoIHByb2R1Y2VzIGEgKGNhY2hlZCkgYG5ldyBFeHByZXNzaW9uc2AgaW5zdGFuY2Vcbi8vIHBhcnNlZC5yYXcgaXMgbm8gbG9uZ2VyIHByZXNlbnQsIHVzZSAudG9TdHJpbmcoKVxuLy8gcGFyc2VkLmV4cHJlc3Npb24gaXMgbm93IHVzZWxlc3MsIGp1c3QgdXNlIHRoZSBpbmRpY2VzXG4vLyBwYXJzZWQucmV2ZXJzZSgpIGhhcyBiZWVuIHJlbW92ZWQgZm9yIG5vdywgZHVlIHRvIGl0cyBhcHBhcmVudCB1c2VsZXNzbmVzc1xuLy8gT3RoZXIgY2hhbmdlcyBpbiB0aGUgRXhwcmVzc2lvbnMgb2JqZWN0OlxuLy8gLSBjbGFzc05hbWVzIGFyZSBub3cgdW5pcXVlLCBhbmQgc2F2ZSBib3RoIGVzY2FwZWQgYW5kIHVuZXNjYXBlZCB2YWx1ZXNcbi8vIC0gYXR0cmlidXRlcyBub3cgc2F2ZSBib3RoIGVzY2FwZWQgYW5kIHVuZXNjYXBlZCB2YWx1ZXNcbi8vIC0gcHNldWRvcyBub3cgc2F2ZSBib3RoIGVzY2FwZWQgYW5kIHVuZXNjYXBlZCB2YWx1ZXNcblxudmFyIGVzY2FwZVJlICAgPSAvKFstLiorP14ke30oKXxbXFxdXFwvXFxcXF0pL2csXG4gICAgdW5lc2NhcGVSZSA9IC9cXFxcL2dcblxudmFyIGVzY2FwZSA9IGZ1bmN0aW9uKHN0cmluZyl7XG4gICAgLy8gWFJlZ0V4cCB2Mi4wLjAtYmV0YS0zXG4gICAgLy8gwqsgaHR0cHM6Ly9naXRodWIuY29tL3NsZXZpdGhhbi9YUmVnRXhwL2Jsb2IvbWFzdGVyL3NyYy94cmVnZXhwLmpzXG4gICAgcmV0dXJuIChzdHJpbmcgKyBcIlwiKS5yZXBsYWNlKGVzY2FwZVJlLCAnXFxcXCQxJylcbn1cblxudmFyIHVuZXNjYXBlID0gZnVuY3Rpb24oc3RyaW5nKXtcbiAgICByZXR1cm4gKHN0cmluZyArIFwiXCIpLnJlcGxhY2UodW5lc2NhcGVSZSwgJycpXG59XG5cbnZhciBzbGlja1JlID0gUmVnRXhwKFxuLypcbiMhL3Vzci9iaW4vZW52IHJ1YnlcbnB1dHMgXCJcXHRcXHRcIiArIERBVEEucmVhZC5nc3ViKC9cXChcXD94XFwpfFxccysjLiokfFxccyt8XFxcXCR8XFxcXG4vLCcnKVxuX19FTkRfX1xuICAgIFwiKD94KV4oPzpcXFxuICAgICAgXFxcXHMqICggLCApIFxcXFxzKiAgICAgICAgICAgICAgICMgU2VwYXJhdG9yICAgICAgICAgIFxcblxcXG4gICAgfCBcXFxccyogKCA8Y29tYmluYXRvcj4rICkgXFxcXHMqICAgIyBDb21iaW5hdG9yICAgICAgICAgXFxuXFxcbiAgICB8ICAgICAgKCBcXFxccysgKSAgICAgICAgICAgICAgICAgIyBDb21iaW5hdG9yQ2hpbGRyZW4gXFxuXFxcbiAgICB8ICAgICAgKCA8dW5pY29kZT4rIHwgXFxcXCogKSAgICAgIyBUYWcgICAgICAgICAgICAgICAgXFxuXFxcbiAgICB8IFxcXFwjICAoIDx1bmljb2RlPisgICAgICAgKSAgICAgIyBJRCAgICAgICAgICAgICAgICAgXFxuXFxcbiAgICB8IFxcXFwuICAoIDx1bmljb2RlPisgICAgICAgKSAgICAgIyBDbGFzc05hbWUgICAgICAgICAgXFxuXFxcbiAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgQXR0cmlidXRlICAgICAgICAgIFxcblxcXG4gICAgXFxcXFsgIFxcXG4gICAgICAgIFxcXFxzKiAoPHVuaWNvZGUxPispICAoPzogIFxcXG4gICAgICAgICAgICBcXFxccyogKFsqXiQhfnxdPz0pICAoPzogIFxcXG4gICAgICAgICAgICAgICAgXFxcXHMqICg/OlxcXG4gICAgICAgICAgICAgICAgICAgIChbXFxcIiddPykoLio/KVxcXFw5IFxcXG4gICAgICAgICAgICAgICAgKVxcXG4gICAgICAgICAgICApICBcXFxuICAgICAgICApPyAgXFxcXHMqICBcXFxuICAgIFxcXFxdKD8hXFxcXF0pIFxcblxcXG4gICAgfCAgIDorICggPHVuaWNvZGU+KyApKD86XFxcbiAgICBcXFxcKCAoPzpcXFxuICAgICAgICAoPzooW1xcXCInXSkoW15cXFxcMTJdKilcXFxcMTIpfCgoPzpcXFxcKFteKV0rXFxcXCl8W14oKV0qKSspXFxcbiAgICApIFxcXFwpXFxcbiAgICApP1xcXG4gICAgKVwiXG4qL1xuXCJeKD86XFxcXHMqKCwpXFxcXHMqfFxcXFxzKig8Y29tYmluYXRvcj4rKVxcXFxzKnwoXFxcXHMrKXwoPHVuaWNvZGU+K3xcXFxcKil8XFxcXCMoPHVuaWNvZGU+Kyl8XFxcXC4oPHVuaWNvZGU+Kyl8XFxcXFtcXFxccyooPHVuaWNvZGUxPispKD86XFxcXHMqKFsqXiQhfnxdPz0pKD86XFxcXHMqKD86KFtcXFwiJ10/KSguKj8pXFxcXDkpKSk/XFxcXHMqXFxcXF0oPyFcXFxcXSl8KDorKSg8dW5pY29kZT4rKSg/OlxcXFwoKD86KD86KFtcXFwiJ10pKFteXFxcXDEzXSopXFxcXDEzKXwoKD86XFxcXChbXildK1xcXFwpfFteKCldKikrKSlcXFxcKSk/KVwiXG4gICAgLnJlcGxhY2UoLzxjb21iaW5hdG9yPi8sICdbJyArIGVzY2FwZShcIj4rfmAhQCQlXiY9e31cXFxcOzwvXCIpICsgJ10nKVxuICAgIC5yZXBsYWNlKC88dW5pY29kZT4vZywgJyg/OltcXFxcd1xcXFx1MDBhMS1cXFxcdUZGRkYtXXxcXFxcXFxcXFteXFxcXHMwLTlhLWZdKScpXG4gICAgLnJlcGxhY2UoLzx1bmljb2RlMT4vZywgJyg/Ols6XFxcXHdcXFxcdTAwYTEtXFxcXHVGRkZGLV18XFxcXFxcXFxbXlxcXFxzMC05YS1mXSknKVxuKVxuXG4vLyBQYXJ0XG5cbnZhciBQYXJ0ID0gZnVuY3Rpb24gUGFydChjb21iaW5hdG9yKXtcbiAgICB0aGlzLmNvbWJpbmF0b3IgPSBjb21iaW5hdG9yIHx8IFwiIFwiXG4gICAgdGhpcy50YWcgPSBcIipcIlxufVxuXG5QYXJ0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCl7XG5cbiAgICBpZiAoIXRoaXMucmF3KXtcblxuICAgICAgICB2YXIgeHByID0gXCJcIiwgaywgcGFydFxuXG4gICAgICAgIHhwciArPSB0aGlzLnRhZyB8fCBcIipcIlxuICAgICAgICBpZiAodGhpcy5pZCkgeHByICs9IFwiI1wiICsgdGhpcy5pZFxuICAgICAgICBpZiAodGhpcy5jbGFzc2VzKSB4cHIgKz0gXCIuXCIgKyB0aGlzLmNsYXNzTGlzdC5qb2luKFwiLlwiKVxuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGVzKSBmb3IgKGsgPSAwOyBwYXJ0ID0gdGhpcy5hdHRyaWJ1dGVzW2srK107KXtcbiAgICAgICAgICAgIHhwciArPSBcIltcIiArIHBhcnQubmFtZSArIChwYXJ0Lm9wZXJhdG9yID8gcGFydC5vcGVyYXRvciArICdcIicgKyBwYXJ0LnZhbHVlICsgJ1wiJyA6ICcnKSArIFwiXVwiXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHNldWRvcykgZm9yIChrID0gMDsgcGFydCA9IHRoaXMucHNldWRvc1trKytdOyl7XG4gICAgICAgICAgICB4cHIgKz0gXCI6XCIgKyBwYXJ0Lm5hbWVcbiAgICAgICAgICAgIGlmIChwYXJ0LnZhbHVlKSB4cHIgKz0gXCIoXCIgKyBwYXJ0LnZhbHVlICsgXCIpXCJcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmF3ID0geHByXG5cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yYXdcbn1cblxuLy8gRXhwcmVzc2lvblxuXG52YXIgRXhwcmVzc2lvbiA9IGZ1bmN0aW9uIEV4cHJlc3Npb24oKXtcbiAgICB0aGlzLmxlbmd0aCA9IDBcbn1cblxuRXhwcmVzc2lvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpe1xuXG4gICAgaWYgKCF0aGlzLnJhdyl7XG5cbiAgICAgICAgdmFyIHhwciA9IFwiXCJcblxuICAgICAgICBmb3IgKHZhciBqID0gMCwgYml0OyBiaXQgPSB0aGlzW2orK107KXtcbiAgICAgICAgICAgIGlmIChqICE9PSAxKSB4cHIgKz0gXCIgXCJcbiAgICAgICAgICAgIGlmIChiaXQuY29tYmluYXRvciAhPT0gXCIgXCIpIHhwciArPSBiaXQuY29tYmluYXRvciArIFwiIFwiXG4gICAgICAgICAgICB4cHIgKz0gYml0XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJhdyA9IHhwclxuXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmF3XG59XG5cbnZhciByZXBsYWNlciA9IGZ1bmN0aW9uKFxuICAgIHJhd01hdGNoLFxuXG4gICAgc2VwYXJhdG9yLFxuICAgIGNvbWJpbmF0b3IsXG4gICAgY29tYmluYXRvckNoaWxkcmVuLFxuXG4gICAgdGFnTmFtZSxcbiAgICBpZCxcbiAgICBjbGFzc05hbWUsXG5cbiAgICBhdHRyaWJ1dGVLZXksXG4gICAgYXR0cmlidXRlT3BlcmF0b3IsXG4gICAgYXR0cmlidXRlUXVvdGUsXG4gICAgYXR0cmlidXRlVmFsdWUsXG5cbiAgICBwc2V1ZG9NYXJrZXIsXG4gICAgcHNldWRvQ2xhc3MsXG4gICAgcHNldWRvUXVvdGUsXG4gICAgcHNldWRvQ2xhc3NRdW90ZWRWYWx1ZSxcbiAgICBwc2V1ZG9DbGFzc1ZhbHVlXG4pe1xuXG4gICAgdmFyIGV4cHJlc3Npb24sIGN1cnJlbnRcblxuICAgIGlmIChzZXBhcmF0b3IgfHwgIXRoaXMubGVuZ3RoKXtcbiAgICAgICAgZXhwcmVzc2lvbiA9IHRoaXNbdGhpcy5sZW5ndGgrK10gPSBuZXcgRXhwcmVzc2lvblxuICAgICAgICBpZiAoc2VwYXJhdG9yKSByZXR1cm4gJydcbiAgICB9XG5cbiAgICBpZiAoIWV4cHJlc3Npb24pIGV4cHJlc3Npb24gPSB0aGlzW3RoaXMubGVuZ3RoIC0gMV1cblxuICAgIGlmIChjb21iaW5hdG9yIHx8IGNvbWJpbmF0b3JDaGlsZHJlbiB8fCAhZXhwcmVzc2lvbi5sZW5ndGgpe1xuICAgICAgICBjdXJyZW50ID0gZXhwcmVzc2lvbltleHByZXNzaW9uLmxlbmd0aCsrXSA9IG5ldyBQYXJ0KGNvbWJpbmF0b3IpXG4gICAgfVxuXG4gICAgaWYgKCFjdXJyZW50KSBjdXJyZW50ID0gZXhwcmVzc2lvbltleHByZXNzaW9uLmxlbmd0aCAtIDFdXG5cbiAgICBpZiAodGFnTmFtZSl7XG5cbiAgICAgICAgY3VycmVudC50YWcgPSB1bmVzY2FwZSh0YWdOYW1lKVxuXG4gICAgfSBlbHNlIGlmIChpZCl7XG5cbiAgICAgICAgY3VycmVudC5pZCA9IHVuZXNjYXBlKGlkKVxuXG4gICAgfSBlbHNlIGlmIChjbGFzc05hbWUpe1xuXG4gICAgICAgIHZhciB1bmVzY2FwZWQgPSB1bmVzY2FwZShjbGFzc05hbWUpXG5cbiAgICAgICAgdmFyIGNsYXNzZXMgPSBjdXJyZW50LmNsYXNzZXMgfHwgKGN1cnJlbnQuY2xhc3NlcyA9IHt9KVxuICAgICAgICBpZiAoIWNsYXNzZXNbdW5lc2NhcGVkXSl7XG4gICAgICAgICAgICBjbGFzc2VzW3VuZXNjYXBlZF0gPSBlc2NhcGUoY2xhc3NOYW1lKVxuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IGN1cnJlbnQuY2xhc3NMaXN0IHx8IChjdXJyZW50LmNsYXNzTGlzdCA9IFtdKVxuICAgICAgICAgICAgY2xhc3NMaXN0LnB1c2godW5lc2NhcGVkKVxuICAgICAgICAgICAgY2xhc3NMaXN0LnNvcnQoKVxuICAgICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKHBzZXVkb0NsYXNzKXtcblxuICAgICAgICBwc2V1ZG9DbGFzc1ZhbHVlID0gcHNldWRvQ2xhc3NWYWx1ZSB8fCBwc2V1ZG9DbGFzc1F1b3RlZFZhbHVlXG5cbiAgICAgICAgOyhjdXJyZW50LnBzZXVkb3MgfHwgKGN1cnJlbnQucHNldWRvcyA9IFtdKSkucHVzaCh7XG4gICAgICAgICAgICB0eXBlICAgICAgICAgOiBwc2V1ZG9NYXJrZXIubGVuZ3RoID09IDEgPyAnY2xhc3MnIDogJ2VsZW1lbnQnLFxuICAgICAgICAgICAgbmFtZSAgICAgICAgIDogdW5lc2NhcGUocHNldWRvQ2xhc3MpLFxuICAgICAgICAgICAgZXNjYXBlZE5hbWUgIDogZXNjYXBlKHBzZXVkb0NsYXNzKSxcbiAgICAgICAgICAgIHZhbHVlICAgICAgICA6IHBzZXVkb0NsYXNzVmFsdWUgPyB1bmVzY2FwZShwc2V1ZG9DbGFzc1ZhbHVlKSA6IG51bGwsXG4gICAgICAgICAgICBlc2NhcGVkVmFsdWUgOiBwc2V1ZG9DbGFzc1ZhbHVlID8gZXNjYXBlKHBzZXVkb0NsYXNzVmFsdWUpIDogbnVsbFxuICAgICAgICB9KVxuXG4gICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVLZXkpe1xuXG4gICAgICAgIGF0dHJpYnV0ZVZhbHVlID0gYXR0cmlidXRlVmFsdWUgPyBlc2NhcGUoYXR0cmlidXRlVmFsdWUpIDogbnVsbFxuXG4gICAgICAgIDsoY3VycmVudC5hdHRyaWJ1dGVzIHx8IChjdXJyZW50LmF0dHJpYnV0ZXMgPSBbXSkpLnB1c2goe1xuICAgICAgICAgICAgb3BlcmF0b3IgICAgIDogYXR0cmlidXRlT3BlcmF0b3IsXG4gICAgICAgICAgICBuYW1lICAgICAgICAgOiB1bmVzY2FwZShhdHRyaWJ1dGVLZXkpLFxuICAgICAgICAgICAgZXNjYXBlZE5hbWUgIDogZXNjYXBlKGF0dHJpYnV0ZUtleSksXG4gICAgICAgICAgICB2YWx1ZSAgICAgICAgOiBhdHRyaWJ1dGVWYWx1ZSA/IHVuZXNjYXBlKGF0dHJpYnV0ZVZhbHVlKSA6IG51bGwsXG4gICAgICAgICAgICBlc2NhcGVkVmFsdWUgOiBhdHRyaWJ1dGVWYWx1ZSA/IGVzY2FwZShhdHRyaWJ1dGVWYWx1ZSkgOiBudWxsXG4gICAgICAgIH0pXG5cbiAgICB9XG5cbiAgICByZXR1cm4gJydcblxufVxuXG4vLyBFeHByZXNzaW9uc1xuXG52YXIgRXhwcmVzc2lvbnMgPSBmdW5jdGlvbiBFeHByZXNzaW9ucyhleHByZXNzaW9uKXtcbiAgICB0aGlzLmxlbmd0aCA9IDBcblxuICAgIHZhciBzZWxmID0gdGhpc1xuXG4gICAgdmFyIG9yaWdpbmFsID0gZXhwcmVzc2lvbiwgcmVwbGFjZWRcblxuICAgIHdoaWxlIChleHByZXNzaW9uKXtcbiAgICAgICAgcmVwbGFjZWQgPSBleHByZXNzaW9uLnJlcGxhY2Uoc2xpY2tSZSwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiByZXBsYWNlci5hcHBseShzZWxmLCBhcmd1bWVudHMpXG4gICAgICAgIH0pXG4gICAgICAgIGlmIChyZXBsYWNlZCA9PT0gZXhwcmVzc2lvbikgdGhyb3cgbmV3IEVycm9yKG9yaWdpbmFsICsgJyBpcyBhbiBpbnZhbGlkIGV4cHJlc3Npb24nKVxuICAgICAgICBleHByZXNzaW9uID0gcmVwbGFjZWRcbiAgICB9XG59XG5cbkV4cHJlc3Npb25zLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCl7XG4gICAgaWYgKCF0aGlzLnJhdyl7XG4gICAgICAgIHZhciBleHByZXNzaW9ucyA9IFtdXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBleHByZXNzaW9uOyBleHByZXNzaW9uID0gdGhpc1tpKytdOykgZXhwcmVzc2lvbnMucHVzaChleHByZXNzaW9uKVxuICAgICAgICB0aGlzLnJhdyA9IGV4cHJlc3Npb25zLmpvaW4oXCIsIFwiKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJhd1xufVxuXG52YXIgY2FjaGUgPSB7fVxuXG52YXIgcGFyc2UgPSBmdW5jdGlvbihleHByZXNzaW9uKXtcbiAgICBpZiAoZXhwcmVzc2lvbiA9PSBudWxsKSByZXR1cm4gbnVsbFxuICAgIGV4cHJlc3Npb24gPSAoJycgKyBleHByZXNzaW9uKS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbiAgICByZXR1cm4gY2FjaGVbZXhwcmVzc2lvbl0gfHwgKGNhY2hlW2V4cHJlc3Npb25dID0gbmV3IEV4cHJlc3Npb25zKGV4cHJlc3Npb24pKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlXG4iLCIvLyBUaW55Q29sb3IgdjEuNC4xXG4vLyBodHRwczovL2dpdGh1Yi5jb20vYmdyaW5zL1RpbnlDb2xvclxuLy8gQnJpYW4gR3JpbnN0ZWFkLCBNSVQgTGljZW5zZVxuXG4oZnVuY3Rpb24oTWF0aCkge1xuXG52YXIgdHJpbUxlZnQgPSAvXlxccysvLFxuICAgIHRyaW1SaWdodCA9IC9cXHMrJC8sXG4gICAgdGlueUNvdW50ZXIgPSAwLFxuICAgIG1hdGhSb3VuZCA9IE1hdGgucm91bmQsXG4gICAgbWF0aE1pbiA9IE1hdGgubWluLFxuICAgIG1hdGhNYXggPSBNYXRoLm1heCxcbiAgICBtYXRoUmFuZG9tID0gTWF0aC5yYW5kb207XG5cbmZ1bmN0aW9uIHRpbnljb2xvciAoY29sb3IsIG9wdHMpIHtcblxuICAgIGNvbG9yID0gKGNvbG9yKSA/IGNvbG9yIDogJyc7XG4gICAgb3B0cyA9IG9wdHMgfHwgeyB9O1xuXG4gICAgLy8gSWYgaW5wdXQgaXMgYWxyZWFkeSBhIHRpbnljb2xvciwgcmV0dXJuIGl0c2VsZlxuICAgIGlmIChjb2xvciBpbnN0YW5jZW9mIHRpbnljb2xvcikge1xuICAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9XG4gICAgLy8gSWYgd2UgYXJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLCBjYWxsIHVzaW5nIG5ldyBpbnN0ZWFkXG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIHRpbnljb2xvcikpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aW55Y29sb3IoY29sb3IsIG9wdHMpO1xuICAgIH1cblxuICAgIHZhciByZ2IgPSBpbnB1dFRvUkdCKGNvbG9yKTtcbiAgICB0aGlzLl9vcmlnaW5hbElucHV0ID0gY29sb3IsXG4gICAgdGhpcy5fciA9IHJnYi5yLFxuICAgIHRoaXMuX2cgPSByZ2IuZyxcbiAgICB0aGlzLl9iID0gcmdiLmIsXG4gICAgdGhpcy5fYSA9IHJnYi5hLFxuICAgIHRoaXMuX3JvdW5kQSA9IG1hdGhSb3VuZCgxMDAqdGhpcy5fYSkgLyAxMDAsXG4gICAgdGhpcy5fZm9ybWF0ID0gb3B0cy5mb3JtYXQgfHwgcmdiLmZvcm1hdDtcbiAgICB0aGlzLl9ncmFkaWVudFR5cGUgPSBvcHRzLmdyYWRpZW50VHlwZTtcblxuICAgIC8vIERvbid0IGxldCB0aGUgcmFuZ2Ugb2YgWzAsMjU1XSBjb21lIGJhY2sgaW4gWzAsMV0uXG4gICAgLy8gUG90ZW50aWFsbHkgbG9zZSBhIGxpdHRsZSBiaXQgb2YgcHJlY2lzaW9uIGhlcmUsIGJ1dCB3aWxsIGZpeCBpc3N1ZXMgd2hlcmVcbiAgICAvLyAuNSBnZXRzIGludGVycHJldGVkIGFzIGhhbGYgb2YgdGhlIHRvdGFsLCBpbnN0ZWFkIG9mIGhhbGYgb2YgMVxuICAgIC8vIElmIGl0IHdhcyBzdXBwb3NlZCB0byBiZSAxMjgsIHRoaXMgd2FzIGFscmVhZHkgdGFrZW4gY2FyZSBvZiBieSBgaW5wdXRUb1JnYmBcbiAgICBpZiAodGhpcy5fciA8IDEpIHsgdGhpcy5fciA9IG1hdGhSb3VuZCh0aGlzLl9yKTsgfVxuICAgIGlmICh0aGlzLl9nIDwgMSkgeyB0aGlzLl9nID0gbWF0aFJvdW5kKHRoaXMuX2cpOyB9XG4gICAgaWYgKHRoaXMuX2IgPCAxKSB7IHRoaXMuX2IgPSBtYXRoUm91bmQodGhpcy5fYik7IH1cblxuICAgIHRoaXMuX29rID0gcmdiLm9rO1xuICAgIHRoaXMuX3RjX2lkID0gdGlueUNvdW50ZXIrKztcbn1cblxudGlueWNvbG9yLnByb3RvdHlwZSA9IHtcbiAgICBpc0Rhcms6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRCcmlnaHRuZXNzKCkgPCAxMjg7XG4gICAgfSxcbiAgICBpc0xpZ2h0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzRGFyaygpO1xuICAgIH0sXG4gICAgaXNWYWxpZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vaztcbiAgICB9LFxuICAgIGdldE9yaWdpbmFsSW5wdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX29yaWdpbmFsSW5wdXQ7XG4gICAgfSxcbiAgICBnZXRGb3JtYXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybWF0O1xuICAgIH0sXG4gICAgZ2V0QWxwaGE6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYTtcbiAgICB9LFxuICAgIGdldEJyaWdodG5lc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvL2h0dHA6Ly93d3cudzMub3JnL1RSL0FFUlQjY29sb3ItY29udHJhc3RcbiAgICAgICAgdmFyIHJnYiA9IHRoaXMudG9SZ2IoKTtcbiAgICAgICAgcmV0dXJuIChyZ2IuciAqIDI5OSArIHJnYi5nICogNTg3ICsgcmdiLmIgKiAxMTQpIC8gMTAwMDtcbiAgICB9LFxuICAgIGdldEx1bWluYW5jZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vaHR0cDovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMtV0NBRzIwLTIwMDgxMjExLyNyZWxhdGl2ZWx1bWluYW5jZWRlZlxuICAgICAgICB2YXIgcmdiID0gdGhpcy50b1JnYigpO1xuICAgICAgICB2YXIgUnNSR0IsIEdzUkdCLCBCc1JHQiwgUiwgRywgQjtcbiAgICAgICAgUnNSR0IgPSByZ2Iuci8yNTU7XG4gICAgICAgIEdzUkdCID0gcmdiLmcvMjU1O1xuICAgICAgICBCc1JHQiA9IHJnYi5iLzI1NTtcblxuICAgICAgICBpZiAoUnNSR0IgPD0gMC4wMzkyOCkge1IgPSBSc1JHQiAvIDEyLjkyO30gZWxzZSB7UiA9IE1hdGgucG93KCgoUnNSR0IgKyAwLjA1NSkgLyAxLjA1NSksIDIuNCk7fVxuICAgICAgICBpZiAoR3NSR0IgPD0gMC4wMzkyOCkge0cgPSBHc1JHQiAvIDEyLjkyO30gZWxzZSB7RyA9IE1hdGgucG93KCgoR3NSR0IgKyAwLjA1NSkgLyAxLjA1NSksIDIuNCk7fVxuICAgICAgICBpZiAoQnNSR0IgPD0gMC4wMzkyOCkge0IgPSBCc1JHQiAvIDEyLjkyO30gZWxzZSB7QiA9IE1hdGgucG93KCgoQnNSR0IgKyAwLjA1NSkgLyAxLjA1NSksIDIuNCk7fVxuICAgICAgICByZXR1cm4gKDAuMjEyNiAqIFIpICsgKDAuNzE1MiAqIEcpICsgKDAuMDcyMiAqIEIpO1xuICAgIH0sXG4gICAgc2V0QWxwaGE6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2EgPSBib3VuZEFscGhhKHZhbHVlKTtcbiAgICAgICAgdGhpcy5fcm91bmRBID0gbWF0aFJvdW5kKDEwMCp0aGlzLl9hKSAvIDEwMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICB0b0hzdjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBoc3YgPSByZ2JUb0hzdih0aGlzLl9yLCB0aGlzLl9nLCB0aGlzLl9iKTtcbiAgICAgICAgcmV0dXJuIHsgaDogaHN2LmggKiAzNjAsIHM6IGhzdi5zLCB2OiBoc3YudiwgYTogdGhpcy5fYSB9O1xuICAgIH0sXG4gICAgdG9Ic3ZTdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaHN2ID0gcmdiVG9Ic3YodGhpcy5fciwgdGhpcy5fZywgdGhpcy5fYik7XG4gICAgICAgIHZhciBoID0gbWF0aFJvdW5kKGhzdi5oICogMzYwKSwgcyA9IG1hdGhSb3VuZChoc3YucyAqIDEwMCksIHYgPSBtYXRoUm91bmQoaHN2LnYgKiAxMDApO1xuICAgICAgICByZXR1cm4gKHRoaXMuX2EgPT0gMSkgP1xuICAgICAgICAgIFwiaHN2KFwiICArIGggKyBcIiwgXCIgKyBzICsgXCIlLCBcIiArIHYgKyBcIiUpXCIgOlxuICAgICAgICAgIFwiaHN2YShcIiArIGggKyBcIiwgXCIgKyBzICsgXCIlLCBcIiArIHYgKyBcIiUsIFwiKyB0aGlzLl9yb3VuZEEgKyBcIilcIjtcbiAgICB9LFxuICAgIHRvSHNsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGhzbCA9IHJnYlRvSHNsKHRoaXMuX3IsIHRoaXMuX2csIHRoaXMuX2IpO1xuICAgICAgICByZXR1cm4geyBoOiBoc2wuaCAqIDM2MCwgczogaHNsLnMsIGw6IGhzbC5sLCBhOiB0aGlzLl9hIH07XG4gICAgfSxcbiAgICB0b0hzbFN0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBoc2wgPSByZ2JUb0hzbCh0aGlzLl9yLCB0aGlzLl9nLCB0aGlzLl9iKTtcbiAgICAgICAgdmFyIGggPSBtYXRoUm91bmQoaHNsLmggKiAzNjApLCBzID0gbWF0aFJvdW5kKGhzbC5zICogMTAwKSwgbCA9IG1hdGhSb3VuZChoc2wubCAqIDEwMCk7XG4gICAgICAgIHJldHVybiAodGhpcy5fYSA9PSAxKSA/XG4gICAgICAgICAgXCJoc2woXCIgICsgaCArIFwiLCBcIiArIHMgKyBcIiUsIFwiICsgbCArIFwiJSlcIiA6XG4gICAgICAgICAgXCJoc2xhKFwiICsgaCArIFwiLCBcIiArIHMgKyBcIiUsIFwiICsgbCArIFwiJSwgXCIrIHRoaXMuX3JvdW5kQSArIFwiKVwiO1xuICAgIH0sXG4gICAgdG9IZXg6IGZ1bmN0aW9uKGFsbG93M0NoYXIpIHtcbiAgICAgICAgcmV0dXJuIHJnYlRvSGV4KHRoaXMuX3IsIHRoaXMuX2csIHRoaXMuX2IsIGFsbG93M0NoYXIpO1xuICAgIH0sXG4gICAgdG9IZXhTdHJpbmc6IGZ1bmN0aW9uKGFsbG93M0NoYXIpIHtcbiAgICAgICAgcmV0dXJuICcjJyArIHRoaXMudG9IZXgoYWxsb3czQ2hhcik7XG4gICAgfSxcbiAgICB0b0hleDg6IGZ1bmN0aW9uKGFsbG93NENoYXIpIHtcbiAgICAgICAgcmV0dXJuIHJnYmFUb0hleCh0aGlzLl9yLCB0aGlzLl9nLCB0aGlzLl9iLCB0aGlzLl9hLCBhbGxvdzRDaGFyKTtcbiAgICB9LFxuICAgIHRvSGV4OFN0cmluZzogZnVuY3Rpb24oYWxsb3c0Q2hhcikge1xuICAgICAgICByZXR1cm4gJyMnICsgdGhpcy50b0hleDgoYWxsb3c0Q2hhcik7XG4gICAgfSxcbiAgICB0b1JnYjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7IHI6IG1hdGhSb3VuZCh0aGlzLl9yKSwgZzogbWF0aFJvdW5kKHRoaXMuX2cpLCBiOiBtYXRoUm91bmQodGhpcy5fYiksIGE6IHRoaXMuX2EgfTtcbiAgICB9LFxuICAgIHRvUmdiU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9hID09IDEpID9cbiAgICAgICAgICBcInJnYihcIiAgKyBtYXRoUm91bmQodGhpcy5fcikgKyBcIiwgXCIgKyBtYXRoUm91bmQodGhpcy5fZykgKyBcIiwgXCIgKyBtYXRoUm91bmQodGhpcy5fYikgKyBcIilcIiA6XG4gICAgICAgICAgXCJyZ2JhKFwiICsgbWF0aFJvdW5kKHRoaXMuX3IpICsgXCIsIFwiICsgbWF0aFJvdW5kKHRoaXMuX2cpICsgXCIsIFwiICsgbWF0aFJvdW5kKHRoaXMuX2IpICsgXCIsIFwiICsgdGhpcy5fcm91bmRBICsgXCIpXCI7XG4gICAgfSxcbiAgICB0b1BlcmNlbnRhZ2VSZ2I6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4geyByOiBtYXRoUm91bmQoYm91bmQwMSh0aGlzLl9yLCAyNTUpICogMTAwKSArIFwiJVwiLCBnOiBtYXRoUm91bmQoYm91bmQwMSh0aGlzLl9nLCAyNTUpICogMTAwKSArIFwiJVwiLCBiOiBtYXRoUm91bmQoYm91bmQwMSh0aGlzLl9iLCAyNTUpICogMTAwKSArIFwiJVwiLCBhOiB0aGlzLl9hIH07XG4gICAgfSxcbiAgICB0b1BlcmNlbnRhZ2VSZ2JTdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuX2EgPT0gMSkgP1xuICAgICAgICAgIFwicmdiKFwiICArIG1hdGhSb3VuZChib3VuZDAxKHRoaXMuX3IsIDI1NSkgKiAxMDApICsgXCIlLCBcIiArIG1hdGhSb3VuZChib3VuZDAxKHRoaXMuX2csIDI1NSkgKiAxMDApICsgXCIlLCBcIiArIG1hdGhSb3VuZChib3VuZDAxKHRoaXMuX2IsIDI1NSkgKiAxMDApICsgXCIlKVwiIDpcbiAgICAgICAgICBcInJnYmEoXCIgKyBtYXRoUm91bmQoYm91bmQwMSh0aGlzLl9yLCAyNTUpICogMTAwKSArIFwiJSwgXCIgKyBtYXRoUm91bmQoYm91bmQwMSh0aGlzLl9nLCAyNTUpICogMTAwKSArIFwiJSwgXCIgKyBtYXRoUm91bmQoYm91bmQwMSh0aGlzLl9iLCAyNTUpICogMTAwKSArIFwiJSwgXCIgKyB0aGlzLl9yb3VuZEEgKyBcIilcIjtcbiAgICB9LFxuICAgIHRvTmFtZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9hID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc3BhcmVudFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2EgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaGV4TmFtZXNbcmdiVG9IZXgodGhpcy5fciwgdGhpcy5fZywgdGhpcy5fYiwgdHJ1ZSldIHx8IGZhbHNlO1xuICAgIH0sXG4gICAgdG9GaWx0ZXI6IGZ1bmN0aW9uKHNlY29uZENvbG9yKSB7XG4gICAgICAgIHZhciBoZXg4U3RyaW5nID0gJyMnICsgcmdiYVRvQXJnYkhleCh0aGlzLl9yLCB0aGlzLl9nLCB0aGlzLl9iLCB0aGlzLl9hKTtcbiAgICAgICAgdmFyIHNlY29uZEhleDhTdHJpbmcgPSBoZXg4U3RyaW5nO1xuICAgICAgICB2YXIgZ3JhZGllbnRUeXBlID0gdGhpcy5fZ3JhZGllbnRUeXBlID8gXCJHcmFkaWVudFR5cGUgPSAxLCBcIiA6IFwiXCI7XG5cbiAgICAgICAgaWYgKHNlY29uZENvbG9yKSB7XG4gICAgICAgICAgICB2YXIgcyA9IHRpbnljb2xvcihzZWNvbmRDb2xvcik7XG4gICAgICAgICAgICBzZWNvbmRIZXg4U3RyaW5nID0gJyMnICsgcmdiYVRvQXJnYkhleChzLl9yLCBzLl9nLCBzLl9iLCBzLl9hKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBcInByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChcIitncmFkaWVudFR5cGUrXCJzdGFydENvbG9yc3RyPVwiK2hleDhTdHJpbmcrXCIsZW5kQ29sb3JzdHI9XCIrc2Vjb25kSGV4OFN0cmluZytcIilcIjtcbiAgICB9LFxuICAgIHRvU3RyaW5nOiBmdW5jdGlvbihmb3JtYXQpIHtcbiAgICAgICAgdmFyIGZvcm1hdFNldCA9ICEhZm9ybWF0O1xuICAgICAgICBmb3JtYXQgPSBmb3JtYXQgfHwgdGhpcy5fZm9ybWF0O1xuXG4gICAgICAgIHZhciBmb3JtYXR0ZWRTdHJpbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIGhhc0FscGhhID0gdGhpcy5fYSA8IDEgJiYgdGhpcy5fYSA+PSAwO1xuICAgICAgICB2YXIgbmVlZHNBbHBoYUZvcm1hdCA9ICFmb3JtYXRTZXQgJiYgaGFzQWxwaGEgJiYgKGZvcm1hdCA9PT0gXCJoZXhcIiB8fCBmb3JtYXQgPT09IFwiaGV4NlwiIHx8IGZvcm1hdCA9PT0gXCJoZXgzXCIgfHwgZm9ybWF0ID09PSBcImhleDRcIiB8fCBmb3JtYXQgPT09IFwiaGV4OFwiIHx8IGZvcm1hdCA9PT0gXCJuYW1lXCIpO1xuXG4gICAgICAgIGlmIChuZWVkc0FscGhhRm9ybWF0KSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIFwidHJhbnNwYXJlbnRcIiwgYWxsIG90aGVyIG5vbi1hbHBoYSBmb3JtYXRzXG4gICAgICAgICAgICAvLyB3aWxsIHJldHVybiByZ2JhIHdoZW4gdGhlcmUgaXMgdHJhbnNwYXJlbmN5LlxuICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gXCJuYW1lXCIgJiYgdGhpcy5fYSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvTmFtZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9SZ2JTdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm9ybWF0ID09PSBcInJnYlwiKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgPSB0aGlzLnRvUmdiU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gXCJwcmdiXCIpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9QZXJjZW50YWdlUmdiU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gXCJoZXhcIiB8fCBmb3JtYXQgPT09IFwiaGV4NlwiKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgPSB0aGlzLnRvSGV4U3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gXCJoZXgzXCIpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9IZXhTdHJpbmcodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gXCJoZXg0XCIpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9IZXg4U3RyaW5nKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb3JtYXQgPT09IFwiaGV4OFwiKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgPSB0aGlzLnRvSGV4OFN0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb3JtYXQgPT09IFwibmFtZVwiKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgPSB0aGlzLnRvTmFtZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmb3JtYXQgPT09IFwiaHNsXCIpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9Ic2xTdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm9ybWF0ID09PSBcImhzdlwiKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgPSB0aGlzLnRvSHN2U3RyaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9ybWF0dGVkU3RyaW5nIHx8IHRoaXMudG9IZXhTdHJpbmcoKTtcbiAgICB9LFxuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRpbnljb2xvcih0aGlzLnRvU3RyaW5nKCkpO1xuICAgIH0sXG5cbiAgICBfYXBwbHlNb2RpZmljYXRpb246IGZ1bmN0aW9uKGZuLCBhcmdzKSB7XG4gICAgICAgIHZhciBjb2xvciA9IGZuLmFwcGx5KG51bGwsIFt0aGlzXS5jb25jYXQoW10uc2xpY2UuY2FsbChhcmdzKSkpO1xuICAgICAgICB0aGlzLl9yID0gY29sb3IuX3I7XG4gICAgICAgIHRoaXMuX2cgPSBjb2xvci5fZztcbiAgICAgICAgdGhpcy5fYiA9IGNvbG9yLl9iO1xuICAgICAgICB0aGlzLnNldEFscGhhKGNvbG9yLl9hKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBsaWdodGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGxpZ2h0ZW4sIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgICBicmlnaHRlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihicmlnaHRlbiwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIGRhcmtlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihkYXJrZW4sIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgICBkZXNhdHVyYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKGRlc2F0dXJhdGUsIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgICBzYXR1cmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihzYXR1cmF0ZSwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIGdyZXlzY2FsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihncmV5c2NhbGUsIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgICBzcGluOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5TW9kaWZpY2F0aW9uKHNwaW4sIGFyZ3VtZW50cyk7XG4gICAgfSxcblxuICAgIF9hcHBseUNvbWJpbmF0aW9uOiBmdW5jdGlvbihmbiwgYXJncykge1xuICAgICAgICByZXR1cm4gZm4uYXBwbHkobnVsbCwgW3RoaXNdLmNvbmNhdChbXS5zbGljZS5jYWxsKGFyZ3MpKSk7XG4gICAgfSxcbiAgICBhbmFsb2dvdXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihhbmFsb2dvdXMsIGFyZ3VtZW50cyk7XG4gICAgfSxcbiAgICBjb21wbGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24oY29tcGxlbWVudCwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIG1vbm9jaHJvbWF0aWM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbihtb25vY2hyb21hdGljLCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgc3BsaXRjb21wbGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24oc3BsaXRjb21wbGVtZW50LCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgdHJpYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbih0cmlhZCwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIHRldHJhZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseUNvbWJpbmF0aW9uKHRldHJhZCwgYXJndW1lbnRzKTtcbiAgICB9XG59O1xuXG4vLyBJZiBpbnB1dCBpcyBhbiBvYmplY3QsIGZvcmNlIDEgaW50byBcIjEuMFwiIHRvIGhhbmRsZSByYXRpb3MgcHJvcGVybHlcbi8vIFN0cmluZyBpbnB1dCByZXF1aXJlcyBcIjEuMFwiIGFzIGlucHV0LCBzbyAxIHdpbGwgYmUgdHJlYXRlZCBhcyAxXG50aW55Y29sb3IuZnJvbVJhdGlvID0gZnVuY3Rpb24oY29sb3IsIG9wdHMpIHtcbiAgICBpZiAodHlwZW9mIGNvbG9yID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIG5ld0NvbG9yID0ge307XG4gICAgICAgIGZvciAodmFyIGkgaW4gY29sb3IpIHtcbiAgICAgICAgICAgIGlmIChjb2xvci5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgICAgIGlmIChpID09PSBcImFcIikge1xuICAgICAgICAgICAgICAgICAgICBuZXdDb2xvcltpXSA9IGNvbG9yW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3JbaV0gPSBjb252ZXJ0VG9QZXJjZW50YWdlKGNvbG9yW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29sb3IgPSBuZXdDb2xvcjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yLCBvcHRzKTtcbn07XG5cbi8vIEdpdmVuIGEgc3RyaW5nIG9yIG9iamVjdCwgY29udmVydCB0aGF0IGlucHV0IHRvIFJHQlxuLy8gUG9zc2libGUgc3RyaW5nIGlucHV0czpcbi8vXG4vLyAgICAgXCJyZWRcIlxuLy8gICAgIFwiI2YwMFwiIG9yIFwiZjAwXCJcbi8vICAgICBcIiNmZjAwMDBcIiBvciBcImZmMDAwMFwiXG4vLyAgICAgXCIjZmYwMDAwMDBcIiBvciBcImZmMDAwMDAwXCJcbi8vICAgICBcInJnYiAyNTUgMCAwXCIgb3IgXCJyZ2IgKDI1NSwgMCwgMClcIlxuLy8gICAgIFwicmdiIDEuMCAwIDBcIiBvciBcInJnYiAoMSwgMCwgMClcIlxuLy8gICAgIFwicmdiYSAoMjU1LCAwLCAwLCAxKVwiIG9yIFwicmdiYSAyNTUsIDAsIDAsIDFcIlxuLy8gICAgIFwicmdiYSAoMS4wLCAwLCAwLCAxKVwiIG9yIFwicmdiYSAxLjAsIDAsIDAsIDFcIlxuLy8gICAgIFwiaHNsKDAsIDEwMCUsIDUwJSlcIiBvciBcImhzbCAwIDEwMCUgNTAlXCJcbi8vICAgICBcImhzbGEoMCwgMTAwJSwgNTAlLCAxKVwiIG9yIFwiaHNsYSAwIDEwMCUgNTAlLCAxXCJcbi8vICAgICBcImhzdigwLCAxMDAlLCAxMDAlKVwiIG9yIFwiaHN2IDAgMTAwJSAxMDAlXCJcbi8vXG5mdW5jdGlvbiBpbnB1dFRvUkdCKGNvbG9yKSB7XG5cbiAgICB2YXIgcmdiID0geyByOiAwLCBnOiAwLCBiOiAwIH07XG4gICAgdmFyIGEgPSAxO1xuICAgIHZhciBzID0gbnVsbDtcbiAgICB2YXIgdiA9IG51bGw7XG4gICAgdmFyIGwgPSBudWxsO1xuICAgIHZhciBvayA9IGZhbHNlO1xuICAgIHZhciBmb3JtYXQgPSBmYWxzZTtcblxuICAgIGlmICh0eXBlb2YgY29sb3IgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb2xvciA9IHN0cmluZ0lucHV0VG9PYmplY3QoY29sb3IpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgY29sb3IgPT0gXCJvYmplY3RcIikge1xuICAgICAgICBpZiAoaXNWYWxpZENTU1VuaXQoY29sb3IucikgJiYgaXNWYWxpZENTU1VuaXQoY29sb3IuZykgJiYgaXNWYWxpZENTU1VuaXQoY29sb3IuYikpIHtcbiAgICAgICAgICAgIHJnYiA9IHJnYlRvUmdiKGNvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmIpO1xuICAgICAgICAgICAgb2sgPSB0cnVlO1xuICAgICAgICAgICAgZm9ybWF0ID0gU3RyaW5nKGNvbG9yLnIpLnN1YnN0cigtMSkgPT09IFwiJVwiID8gXCJwcmdiXCIgOiBcInJnYlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzVmFsaWRDU1NVbml0KGNvbG9yLmgpICYmIGlzVmFsaWRDU1NVbml0KGNvbG9yLnMpICYmIGlzVmFsaWRDU1NVbml0KGNvbG9yLnYpKSB7XG4gICAgICAgICAgICBzID0gY29udmVydFRvUGVyY2VudGFnZShjb2xvci5zKTtcbiAgICAgICAgICAgIHYgPSBjb252ZXJ0VG9QZXJjZW50YWdlKGNvbG9yLnYpO1xuICAgICAgICAgICAgcmdiID0gaHN2VG9SZ2IoY29sb3IuaCwgcywgdik7XG4gICAgICAgICAgICBvayA9IHRydWU7XG4gICAgICAgICAgICBmb3JtYXQgPSBcImhzdlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzVmFsaWRDU1NVbml0KGNvbG9yLmgpICYmIGlzVmFsaWRDU1NVbml0KGNvbG9yLnMpICYmIGlzVmFsaWRDU1NVbml0KGNvbG9yLmwpKSB7XG4gICAgICAgICAgICBzID0gY29udmVydFRvUGVyY2VudGFnZShjb2xvci5zKTtcbiAgICAgICAgICAgIGwgPSBjb252ZXJ0VG9QZXJjZW50YWdlKGNvbG9yLmwpO1xuICAgICAgICAgICAgcmdiID0gaHNsVG9SZ2IoY29sb3IuaCwgcywgbCk7XG4gICAgICAgICAgICBvayA9IHRydWU7XG4gICAgICAgICAgICBmb3JtYXQgPSBcImhzbFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbG9yLmhhc093blByb3BlcnR5KFwiYVwiKSkge1xuICAgICAgICAgICAgYSA9IGNvbG9yLmE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhID0gYm91bmRBbHBoYShhKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIG9rOiBvayxcbiAgICAgICAgZm9ybWF0OiBjb2xvci5mb3JtYXQgfHwgZm9ybWF0LFxuICAgICAgICByOiBtYXRoTWluKDI1NSwgbWF0aE1heChyZ2IuciwgMCkpLFxuICAgICAgICBnOiBtYXRoTWluKDI1NSwgbWF0aE1heChyZ2IuZywgMCkpLFxuICAgICAgICBiOiBtYXRoTWluKDI1NSwgbWF0aE1heChyZ2IuYiwgMCkpLFxuICAgICAgICBhOiBhXG4gICAgfTtcbn1cblxuXG4vLyBDb252ZXJzaW9uIEZ1bmN0aW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gYHJnYlRvSHNsYCwgYHJnYlRvSHN2YCwgYGhzbFRvUmdiYCwgYGhzdlRvUmdiYCBtb2RpZmllZCBmcm9tOlxuLy8gPGh0dHA6Ly9tamlqYWNrc29uLmNvbS8yMDA4LzAyL3JnYi10by1oc2wtYW5kLXJnYi10by1oc3YtY29sb3ItbW9kZWwtY29udmVyc2lvbi1hbGdvcml0aG1zLWluLWphdmFzY3JpcHQ+XG5cbi8vIGByZ2JUb1JnYmBcbi8vIEhhbmRsZSBib3VuZHMgLyBwZXJjZW50YWdlIGNoZWNraW5nIHRvIGNvbmZvcm0gdG8gQ1NTIGNvbG9yIHNwZWNcbi8vIDxodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLWNvbG9yLz5cbi8vICpBc3N1bWVzOiogciwgZywgYiBpbiBbMCwgMjU1XSBvciBbMCwgMV1cbi8vICpSZXR1cm5zOiogeyByLCBnLCBiIH0gaW4gWzAsIDI1NV1cbmZ1bmN0aW9uIHJnYlRvUmdiKHIsIGcsIGIpe1xuICAgIHJldHVybiB7XG4gICAgICAgIHI6IGJvdW5kMDEociwgMjU1KSAqIDI1NSxcbiAgICAgICAgZzogYm91bmQwMShnLCAyNTUpICogMjU1LFxuICAgICAgICBiOiBib3VuZDAxKGIsIDI1NSkgKiAyNTVcbiAgICB9O1xufVxuXG4vLyBgcmdiVG9Ic2xgXG4vLyBDb252ZXJ0cyBhbiBSR0IgY29sb3IgdmFsdWUgdG8gSFNMLlxuLy8gKkFzc3VtZXM6KiByLCBnLCBhbmQgYiBhcmUgY29udGFpbmVkIGluIFswLCAyNTVdIG9yIFswLCAxXVxuLy8gKlJldHVybnM6KiB7IGgsIHMsIGwgfSBpbiBbMCwxXVxuZnVuY3Rpb24gcmdiVG9Ic2wociwgZywgYikge1xuXG4gICAgciA9IGJvdW5kMDEociwgMjU1KTtcbiAgICBnID0gYm91bmQwMShnLCAyNTUpO1xuICAgIGIgPSBib3VuZDAxKGIsIDI1NSk7XG5cbiAgICB2YXIgbWF4ID0gbWF0aE1heChyLCBnLCBiKSwgbWluID0gbWF0aE1pbihyLCBnLCBiKTtcbiAgICB2YXIgaCwgcywgbCA9IChtYXggKyBtaW4pIC8gMjtcblxuICAgIGlmKG1heCA9PSBtaW4pIHtcbiAgICAgICAgaCA9IHMgPSAwOyAvLyBhY2hyb21hdGljXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgZCA9IG1heCAtIG1pbjtcbiAgICAgICAgcyA9IGwgPiAwLjUgPyBkIC8gKDIgLSBtYXggLSBtaW4pIDogZCAvIChtYXggKyBtaW4pO1xuICAgICAgICBzd2l0Y2gobWF4KSB7XG4gICAgICAgICAgICBjYXNlIHI6IGggPSAoZyAtIGIpIC8gZCArIChnIDwgYiA/IDYgOiAwKTsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGc6IGggPSAoYiAtIHIpIC8gZCArIDI7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBiOiBoID0gKHIgLSBnKSAvIGQgKyA0OyBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGggLz0gNjtcbiAgICB9XG5cbiAgICByZXR1cm4geyBoOiBoLCBzOiBzLCBsOiBsIH07XG59XG5cbi8vIGBoc2xUb1JnYmBcbi8vIENvbnZlcnRzIGFuIEhTTCBjb2xvciB2YWx1ZSB0byBSR0IuXG4vLyAqQXNzdW1lczoqIGggaXMgY29udGFpbmVkIGluIFswLCAxXSBvciBbMCwgMzYwXSBhbmQgcyBhbmQgbCBhcmUgY29udGFpbmVkIFswLCAxXSBvciBbMCwgMTAwXVxuLy8gKlJldHVybnM6KiB7IHIsIGcsIGIgfSBpbiB0aGUgc2V0IFswLCAyNTVdXG5mdW5jdGlvbiBoc2xUb1JnYihoLCBzLCBsKSB7XG4gICAgdmFyIHIsIGcsIGI7XG5cbiAgICBoID0gYm91bmQwMShoLCAzNjApO1xuICAgIHMgPSBib3VuZDAxKHMsIDEwMCk7XG4gICAgbCA9IGJvdW5kMDEobCwgMTAwKTtcblxuICAgIGZ1bmN0aW9uIGh1ZTJyZ2IocCwgcSwgdCkge1xuICAgICAgICBpZih0IDwgMCkgdCArPSAxO1xuICAgICAgICBpZih0ID4gMSkgdCAtPSAxO1xuICAgICAgICBpZih0IDwgMS82KSByZXR1cm4gcCArIChxIC0gcCkgKiA2ICogdDtcbiAgICAgICAgaWYodCA8IDEvMikgcmV0dXJuIHE7XG4gICAgICAgIGlmKHQgPCAyLzMpIHJldHVybiBwICsgKHEgLSBwKSAqICgyLzMgLSB0KSAqIDY7XG4gICAgICAgIHJldHVybiBwO1xuICAgIH1cblxuICAgIGlmKHMgPT09IDApIHtcbiAgICAgICAgciA9IGcgPSBiID0gbDsgLy8gYWNocm9tYXRpY1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHEgPSBsIDwgMC41ID8gbCAqICgxICsgcykgOiBsICsgcyAtIGwgKiBzO1xuICAgICAgICB2YXIgcCA9IDIgKiBsIC0gcTtcbiAgICAgICAgciA9IGh1ZTJyZ2IocCwgcSwgaCArIDEvMyk7XG4gICAgICAgIGcgPSBodWUycmdiKHAsIHEsIGgpO1xuICAgICAgICBiID0gaHVlMnJnYihwLCBxLCBoIC0gMS8zKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyByOiByICogMjU1LCBnOiBnICogMjU1LCBiOiBiICogMjU1IH07XG59XG5cbi8vIGByZ2JUb0hzdmBcbi8vIENvbnZlcnRzIGFuIFJHQiBjb2xvciB2YWx1ZSB0byBIU1Zcbi8vICpBc3N1bWVzOiogciwgZywgYW5kIGIgYXJlIGNvbnRhaW5lZCBpbiB0aGUgc2V0IFswLCAyNTVdIG9yIFswLCAxXVxuLy8gKlJldHVybnM6KiB7IGgsIHMsIHYgfSBpbiBbMCwxXVxuZnVuY3Rpb24gcmdiVG9Ic3YociwgZywgYikge1xuXG4gICAgciA9IGJvdW5kMDEociwgMjU1KTtcbiAgICBnID0gYm91bmQwMShnLCAyNTUpO1xuICAgIGIgPSBib3VuZDAxKGIsIDI1NSk7XG5cbiAgICB2YXIgbWF4ID0gbWF0aE1heChyLCBnLCBiKSwgbWluID0gbWF0aE1pbihyLCBnLCBiKTtcbiAgICB2YXIgaCwgcywgdiA9IG1heDtcblxuICAgIHZhciBkID0gbWF4IC0gbWluO1xuICAgIHMgPSBtYXggPT09IDAgPyAwIDogZCAvIG1heDtcblxuICAgIGlmKG1heCA9PSBtaW4pIHtcbiAgICAgICAgaCA9IDA7IC8vIGFjaHJvbWF0aWNcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN3aXRjaChtYXgpIHtcbiAgICAgICAgICAgIGNhc2UgcjogaCA9IChnIC0gYikgLyBkICsgKGcgPCBiID8gNiA6IDApOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZzogaCA9IChiIC0gcikgLyBkICsgMjsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGI6IGggPSAociAtIGcpIC8gZCArIDQ7IGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGggLz0gNjtcbiAgICB9XG4gICAgcmV0dXJuIHsgaDogaCwgczogcywgdjogdiB9O1xufVxuXG4vLyBgaHN2VG9SZ2JgXG4vLyBDb252ZXJ0cyBhbiBIU1YgY29sb3IgdmFsdWUgdG8gUkdCLlxuLy8gKkFzc3VtZXM6KiBoIGlzIGNvbnRhaW5lZCBpbiBbMCwgMV0gb3IgWzAsIDM2MF0gYW5kIHMgYW5kIHYgYXJlIGNvbnRhaW5lZCBpbiBbMCwgMV0gb3IgWzAsIDEwMF1cbi8vICpSZXR1cm5zOiogeyByLCBnLCBiIH0gaW4gdGhlIHNldCBbMCwgMjU1XVxuIGZ1bmN0aW9uIGhzdlRvUmdiKGgsIHMsIHYpIHtcblxuICAgIGggPSBib3VuZDAxKGgsIDM2MCkgKiA2O1xuICAgIHMgPSBib3VuZDAxKHMsIDEwMCk7XG4gICAgdiA9IGJvdW5kMDEodiwgMTAwKTtcblxuICAgIHZhciBpID0gTWF0aC5mbG9vcihoKSxcbiAgICAgICAgZiA9IGggLSBpLFxuICAgICAgICBwID0gdiAqICgxIC0gcyksXG4gICAgICAgIHEgPSB2ICogKDEgLSBmICogcyksXG4gICAgICAgIHQgPSB2ICogKDEgLSAoMSAtIGYpICogcyksXG4gICAgICAgIG1vZCA9IGkgJSA2LFxuICAgICAgICByID0gW3YsIHEsIHAsIHAsIHQsIHZdW21vZF0sXG4gICAgICAgIGcgPSBbdCwgdiwgdiwgcSwgcCwgcF1bbW9kXSxcbiAgICAgICAgYiA9IFtwLCBwLCB0LCB2LCB2LCBxXVttb2RdO1xuXG4gICAgcmV0dXJuIHsgcjogciAqIDI1NSwgZzogZyAqIDI1NSwgYjogYiAqIDI1NSB9O1xufVxuXG4vLyBgcmdiVG9IZXhgXG4vLyBDb252ZXJ0cyBhbiBSR0IgY29sb3IgdG8gaGV4XG4vLyBBc3N1bWVzIHIsIGcsIGFuZCBiIGFyZSBjb250YWluZWQgaW4gdGhlIHNldCBbMCwgMjU1XVxuLy8gUmV0dXJucyBhIDMgb3IgNiBjaGFyYWN0ZXIgaGV4XG5mdW5jdGlvbiByZ2JUb0hleChyLCBnLCBiLCBhbGxvdzNDaGFyKSB7XG5cbiAgICB2YXIgaGV4ID0gW1xuICAgICAgICBwYWQyKG1hdGhSb3VuZChyKS50b1N0cmluZygxNikpLFxuICAgICAgICBwYWQyKG1hdGhSb3VuZChnKS50b1N0cmluZygxNikpLFxuICAgICAgICBwYWQyKG1hdGhSb3VuZChiKS50b1N0cmluZygxNikpXG4gICAgXTtcblxuICAgIC8vIFJldHVybiBhIDMgY2hhcmFjdGVyIGhleCBpZiBwb3NzaWJsZVxuICAgIGlmIChhbGxvdzNDaGFyICYmIGhleFswXS5jaGFyQXQoMCkgPT0gaGV4WzBdLmNoYXJBdCgxKSAmJiBoZXhbMV0uY2hhckF0KDApID09IGhleFsxXS5jaGFyQXQoMSkgJiYgaGV4WzJdLmNoYXJBdCgwKSA9PSBoZXhbMl0uY2hhckF0KDEpKSB7XG4gICAgICAgIHJldHVybiBoZXhbMF0uY2hhckF0KDApICsgaGV4WzFdLmNoYXJBdCgwKSArIGhleFsyXS5jaGFyQXQoMCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhleC5qb2luKFwiXCIpO1xufVxuXG4vLyBgcmdiYVRvSGV4YFxuLy8gQ29udmVydHMgYW4gUkdCQSBjb2xvciBwbHVzIGFscGhhIHRyYW5zcGFyZW5jeSB0byBoZXhcbi8vIEFzc3VtZXMgciwgZywgYiBhcmUgY29udGFpbmVkIGluIHRoZSBzZXQgWzAsIDI1NV0gYW5kXG4vLyBhIGluIFswLCAxXS4gUmV0dXJucyBhIDQgb3IgOCBjaGFyYWN0ZXIgcmdiYSBoZXhcbmZ1bmN0aW9uIHJnYmFUb0hleChyLCBnLCBiLCBhLCBhbGxvdzRDaGFyKSB7XG5cbiAgICB2YXIgaGV4ID0gW1xuICAgICAgICBwYWQyKG1hdGhSb3VuZChyKS50b1N0cmluZygxNikpLFxuICAgICAgICBwYWQyKG1hdGhSb3VuZChnKS50b1N0cmluZygxNikpLFxuICAgICAgICBwYWQyKG1hdGhSb3VuZChiKS50b1N0cmluZygxNikpLFxuICAgICAgICBwYWQyKGNvbnZlcnREZWNpbWFsVG9IZXgoYSkpXG4gICAgXTtcblxuICAgIC8vIFJldHVybiBhIDQgY2hhcmFjdGVyIGhleCBpZiBwb3NzaWJsZVxuICAgIGlmIChhbGxvdzRDaGFyICYmIGhleFswXS5jaGFyQXQoMCkgPT0gaGV4WzBdLmNoYXJBdCgxKSAmJiBoZXhbMV0uY2hhckF0KDApID09IGhleFsxXS5jaGFyQXQoMSkgJiYgaGV4WzJdLmNoYXJBdCgwKSA9PSBoZXhbMl0uY2hhckF0KDEpICYmIGhleFszXS5jaGFyQXQoMCkgPT0gaGV4WzNdLmNoYXJBdCgxKSkge1xuICAgICAgICByZXR1cm4gaGV4WzBdLmNoYXJBdCgwKSArIGhleFsxXS5jaGFyQXQoMCkgKyBoZXhbMl0uY2hhckF0KDApICsgaGV4WzNdLmNoYXJBdCgwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGV4LmpvaW4oXCJcIik7XG59XG5cbi8vIGByZ2JhVG9BcmdiSGV4YFxuLy8gQ29udmVydHMgYW4gUkdCQSBjb2xvciB0byBhbiBBUkdCIEhleDggc3RyaW5nXG4vLyBSYXJlbHkgdXNlZCwgYnV0IHJlcXVpcmVkIGZvciBcInRvRmlsdGVyKClcIlxuZnVuY3Rpb24gcmdiYVRvQXJnYkhleChyLCBnLCBiLCBhKSB7XG5cbiAgICB2YXIgaGV4ID0gW1xuICAgICAgICBwYWQyKGNvbnZlcnREZWNpbWFsVG9IZXgoYSkpLFxuICAgICAgICBwYWQyKG1hdGhSb3VuZChyKS50b1N0cmluZygxNikpLFxuICAgICAgICBwYWQyKG1hdGhSb3VuZChnKS50b1N0cmluZygxNikpLFxuICAgICAgICBwYWQyKG1hdGhSb3VuZChiKS50b1N0cmluZygxNikpXG4gICAgXTtcblxuICAgIHJldHVybiBoZXguam9pbihcIlwiKTtcbn1cblxuLy8gYGVxdWFsc2Bcbi8vIENhbiBiZSBjYWxsZWQgd2l0aCBhbnkgdGlueWNvbG9yIGlucHV0XG50aW55Y29sb3IuZXF1YWxzID0gZnVuY3Rpb24gKGNvbG9yMSwgY29sb3IyKSB7XG4gICAgaWYgKCFjb2xvcjEgfHwgIWNvbG9yMikgeyByZXR1cm4gZmFsc2U7IH1cbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yMSkudG9SZ2JTdHJpbmcoKSA9PSB0aW55Y29sb3IoY29sb3IyKS50b1JnYlN0cmluZygpO1xufTtcblxudGlueWNvbG9yLnJhbmRvbSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aW55Y29sb3IuZnJvbVJhdGlvKHtcbiAgICAgICAgcjogbWF0aFJhbmRvbSgpLFxuICAgICAgICBnOiBtYXRoUmFuZG9tKCksXG4gICAgICAgIGI6IG1hdGhSYW5kb20oKVxuICAgIH0pO1xufTtcblxuXG4vLyBNb2RpZmljYXRpb24gRnVuY3Rpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUaGFua3MgdG8gbGVzcy5qcyBmb3Igc29tZSBvZiB0aGUgYmFzaWNzIGhlcmVcbi8vIDxodHRwczovL2dpdGh1Yi5jb20vY2xvdWRoZWFkL2xlc3MuanMvYmxvYi9tYXN0ZXIvbGliL2xlc3MvZnVuY3Rpb25zLmpzPlxuXG5mdW5jdGlvbiBkZXNhdHVyYXRlKGNvbG9yLCBhbW91bnQpIHtcbiAgICBhbW91bnQgPSAoYW1vdW50ID09PSAwKSA/IDAgOiAoYW1vdW50IHx8IDEwKTtcbiAgICB2YXIgaHNsID0gdGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO1xuICAgIGhzbC5zIC09IGFtb3VudCAvIDEwMDtcbiAgICBoc2wucyA9IGNsYW1wMDEoaHNsLnMpO1xuICAgIHJldHVybiB0aW55Y29sb3IoaHNsKTtcbn1cblxuZnVuY3Rpb24gc2F0dXJhdGUoY29sb3IsIGFtb3VudCkge1xuICAgIGFtb3VudCA9IChhbW91bnQgPT09IDApID8gMCA6IChhbW91bnQgfHwgMTApO1xuICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgaHNsLnMgKz0gYW1vdW50IC8gMTAwO1xuICAgIGhzbC5zID0gY2xhbXAwMShoc2wucyk7XG4gICAgcmV0dXJuIHRpbnljb2xvcihoc2wpO1xufVxuXG5mdW5jdGlvbiBncmV5c2NhbGUoY29sb3IpIHtcbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5kZXNhdHVyYXRlKDEwMCk7XG59XG5cbmZ1bmN0aW9uIGxpZ2h0ZW4gKGNvbG9yLCBhbW91bnQpIHtcbiAgICBhbW91bnQgPSAoYW1vdW50ID09PSAwKSA/IDAgOiAoYW1vdW50IHx8IDEwKTtcbiAgICB2YXIgaHNsID0gdGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO1xuICAgIGhzbC5sICs9IGFtb3VudCAvIDEwMDtcbiAgICBoc2wubCA9IGNsYW1wMDEoaHNsLmwpO1xuICAgIHJldHVybiB0aW55Y29sb3IoaHNsKTtcbn1cblxuZnVuY3Rpb24gYnJpZ2h0ZW4oY29sb3IsIGFtb3VudCkge1xuICAgIGFtb3VudCA9IChhbW91bnQgPT09IDApID8gMCA6IChhbW91bnQgfHwgMTApO1xuICAgIHZhciByZ2IgPSB0aW55Y29sb3IoY29sb3IpLnRvUmdiKCk7XG4gICAgcmdiLnIgPSBtYXRoTWF4KDAsIG1hdGhNaW4oMjU1LCByZ2IuciAtIG1hdGhSb3VuZCgyNTUgKiAtIChhbW91bnQgLyAxMDApKSkpO1xuICAgIHJnYi5nID0gbWF0aE1heCgwLCBtYXRoTWluKDI1NSwgcmdiLmcgLSBtYXRoUm91bmQoMjU1ICogLSAoYW1vdW50IC8gMTAwKSkpKTtcbiAgICByZ2IuYiA9IG1hdGhNYXgoMCwgbWF0aE1pbigyNTUsIHJnYi5iIC0gbWF0aFJvdW5kKDI1NSAqIC0gKGFtb3VudCAvIDEwMCkpKSk7XG4gICAgcmV0dXJuIHRpbnljb2xvcihyZ2IpO1xufVxuXG5mdW5jdGlvbiBkYXJrZW4gKGNvbG9yLCBhbW91bnQpIHtcbiAgICBhbW91bnQgPSAoYW1vdW50ID09PSAwKSA/IDAgOiAoYW1vdW50IHx8IDEwKTtcbiAgICB2YXIgaHNsID0gdGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO1xuICAgIGhzbC5sIC09IGFtb3VudCAvIDEwMDtcbiAgICBoc2wubCA9IGNsYW1wMDEoaHNsLmwpO1xuICAgIHJldHVybiB0aW55Y29sb3IoaHNsKTtcbn1cblxuLy8gU3BpbiB0YWtlcyBhIHBvc2l0aXZlIG9yIG5lZ2F0aXZlIGFtb3VudCB3aXRoaW4gWy0zNjAsIDM2MF0gaW5kaWNhdGluZyB0aGUgY2hhbmdlIG9mIGh1ZS5cbi8vIFZhbHVlcyBvdXRzaWRlIG9mIHRoaXMgcmFuZ2Ugd2lsbCBiZSB3cmFwcGVkIGludG8gdGhpcyByYW5nZS5cbmZ1bmN0aW9uIHNwaW4oY29sb3IsIGFtb3VudCkge1xuICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgdmFyIGh1ZSA9IChoc2wuaCArIGFtb3VudCkgJSAzNjA7XG4gICAgaHNsLmggPSBodWUgPCAwID8gMzYwICsgaHVlIDogaHVlO1xuICAgIHJldHVybiB0aW55Y29sb3IoaHNsKTtcbn1cblxuLy8gQ29tYmluYXRpb24gRnVuY3Rpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRoYW5rcyB0byBqUXVlcnkgeENvbG9yIGZvciBzb21lIG9mIHRoZSBpZGVhcyBiZWhpbmQgdGhlc2Vcbi8vIDxodHRwczovL2dpdGh1Yi5jb20vaW5mdXNpb24valF1ZXJ5LXhjb2xvci9ibG9iL21hc3Rlci9qcXVlcnkueGNvbG9yLmpzPlxuXG5mdW5jdGlvbiBjb21wbGVtZW50KGNvbG9yKSB7XG4gICAgdmFyIGhzbCA9IHRpbnljb2xvcihjb2xvcikudG9Ic2woKTtcbiAgICBoc2wuaCA9IChoc2wuaCArIDE4MCkgJSAzNjA7XG4gICAgcmV0dXJuIHRpbnljb2xvcihoc2wpO1xufVxuXG5mdW5jdGlvbiB0cmlhZChjb2xvcikge1xuICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgdmFyIGggPSBoc2wuaDtcbiAgICByZXR1cm4gW1xuICAgICAgICB0aW55Y29sb3IoY29sb3IpLFxuICAgICAgICB0aW55Y29sb3IoeyBoOiAoaCArIDEyMCkgJSAzNjAsIHM6IGhzbC5zLCBsOiBoc2wubCB9KSxcbiAgICAgICAgdGlueWNvbG9yKHsgaDogKGggKyAyNDApICUgMzYwLCBzOiBoc2wucywgbDogaHNsLmwgfSlcbiAgICBdO1xufVxuXG5mdW5jdGlvbiB0ZXRyYWQoY29sb3IpIHtcbiAgICB2YXIgaHNsID0gdGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO1xuICAgIHZhciBoID0gaHNsLmg7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgdGlueWNvbG9yKGNvbG9yKSxcbiAgICAgICAgdGlueWNvbG9yKHsgaDogKGggKyA5MCkgJSAzNjAsIHM6IGhzbC5zLCBsOiBoc2wubCB9KSxcbiAgICAgICAgdGlueWNvbG9yKHsgaDogKGggKyAxODApICUgMzYwLCBzOiBoc2wucywgbDogaHNsLmwgfSksXG4gICAgICAgIHRpbnljb2xvcih7IGg6IChoICsgMjcwKSAlIDM2MCwgczogaHNsLnMsIGw6IGhzbC5sIH0pXG4gICAgXTtcbn1cblxuZnVuY3Rpb24gc3BsaXRjb21wbGVtZW50KGNvbG9yKSB7XG4gICAgdmFyIGhzbCA9IHRpbnljb2xvcihjb2xvcikudG9Ic2woKTtcbiAgICB2YXIgaCA9IGhzbC5oO1xuICAgIHJldHVybiBbXG4gICAgICAgIHRpbnljb2xvcihjb2xvciksXG4gICAgICAgIHRpbnljb2xvcih7IGg6IChoICsgNzIpICUgMzYwLCBzOiBoc2wucywgbDogaHNsLmx9KSxcbiAgICAgICAgdGlueWNvbG9yKHsgaDogKGggKyAyMTYpICUgMzYwLCBzOiBoc2wucywgbDogaHNsLmx9KVxuICAgIF07XG59XG5cbmZ1bmN0aW9uIGFuYWxvZ291cyhjb2xvciwgcmVzdWx0cywgc2xpY2VzKSB7XG4gICAgcmVzdWx0cyA9IHJlc3VsdHMgfHwgNjtcbiAgICBzbGljZXMgPSBzbGljZXMgfHwgMzA7XG5cbiAgICB2YXIgaHNsID0gdGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO1xuICAgIHZhciBwYXJ0ID0gMzYwIC8gc2xpY2VzO1xuICAgIHZhciByZXQgPSBbdGlueWNvbG9yKGNvbG9yKV07XG5cbiAgICBmb3IgKGhzbC5oID0gKChoc2wuaCAtIChwYXJ0ICogcmVzdWx0cyA+PiAxKSkgKyA3MjApICUgMzYwOyAtLXJlc3VsdHM7ICkge1xuICAgICAgICBoc2wuaCA9IChoc2wuaCArIHBhcnQpICUgMzYwO1xuICAgICAgICByZXQucHVzaCh0aW55Y29sb3IoaHNsKSk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIG1vbm9jaHJvbWF0aWMoY29sb3IsIHJlc3VsdHMpIHtcbiAgICByZXN1bHRzID0gcmVzdWx0cyB8fCA2O1xuICAgIHZhciBoc3YgPSB0aW55Y29sb3IoY29sb3IpLnRvSHN2KCk7XG4gICAgdmFyIGggPSBoc3YuaCwgcyA9IGhzdi5zLCB2ID0gaHN2LnY7XG4gICAgdmFyIHJldCA9IFtdO1xuICAgIHZhciBtb2RpZmljYXRpb24gPSAxIC8gcmVzdWx0cztcblxuICAgIHdoaWxlIChyZXN1bHRzLS0pIHtcbiAgICAgICAgcmV0LnB1c2godGlueWNvbG9yKHsgaDogaCwgczogcywgdjogdn0pKTtcbiAgICAgICAgdiA9ICh2ICsgbW9kaWZpY2F0aW9uKSAlIDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbn1cblxuLy8gVXRpbGl0eSBGdW5jdGlvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG50aW55Y29sb3IubWl4ID0gZnVuY3Rpb24oY29sb3IxLCBjb2xvcjIsIGFtb3VudCkge1xuICAgIGFtb3VudCA9IChhbW91bnQgPT09IDApID8gMCA6IChhbW91bnQgfHwgNTApO1xuXG4gICAgdmFyIHJnYjEgPSB0aW55Y29sb3IoY29sb3IxKS50b1JnYigpO1xuICAgIHZhciByZ2IyID0gdGlueWNvbG9yKGNvbG9yMikudG9SZ2IoKTtcblxuICAgIHZhciBwID0gYW1vdW50IC8gMTAwO1xuXG4gICAgdmFyIHJnYmEgPSB7XG4gICAgICAgIHI6ICgocmdiMi5yIC0gcmdiMS5yKSAqIHApICsgcmdiMS5yLFxuICAgICAgICBnOiAoKHJnYjIuZyAtIHJnYjEuZykgKiBwKSArIHJnYjEuZyxcbiAgICAgICAgYjogKChyZ2IyLmIgLSByZ2IxLmIpICogcCkgKyByZ2IxLmIsXG4gICAgICAgIGE6ICgocmdiMi5hIC0gcmdiMS5hKSAqIHApICsgcmdiMS5hXG4gICAgfTtcblxuICAgIHJldHVybiB0aW55Y29sb3IocmdiYSk7XG59O1xuXG5cbi8vIFJlYWRhYmlsaXR5IEZ1bmN0aW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyA8aHR0cDovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMtV0NBRzIwLTIwMDgxMjExLyNjb250cmFzdC1yYXRpb2RlZiAoV0NBRyBWZXJzaW9uIDIpXG5cbi8vIGBjb250cmFzdGBcbi8vIEFuYWx5emUgdGhlIDIgY29sb3JzIGFuZCByZXR1cm5zIHRoZSBjb2xvciBjb250cmFzdCBkZWZpbmVkIGJ5IChXQ0FHIFZlcnNpb24gMilcbnRpbnljb2xvci5yZWFkYWJpbGl0eSA9IGZ1bmN0aW9uKGNvbG9yMSwgY29sb3IyKSB7XG4gICAgdmFyIGMxID0gdGlueWNvbG9yKGNvbG9yMSk7XG4gICAgdmFyIGMyID0gdGlueWNvbG9yKGNvbG9yMik7XG4gICAgcmV0dXJuIChNYXRoLm1heChjMS5nZXRMdW1pbmFuY2UoKSxjMi5nZXRMdW1pbmFuY2UoKSkrMC4wNSkgLyAoTWF0aC5taW4oYzEuZ2V0THVtaW5hbmNlKCksYzIuZ2V0THVtaW5hbmNlKCkpKzAuMDUpO1xufTtcblxuLy8gYGlzUmVhZGFibGVgXG4vLyBFbnN1cmUgdGhhdCBmb3JlZ3JvdW5kIGFuZCBiYWNrZ3JvdW5kIGNvbG9yIGNvbWJpbmF0aW9ucyBtZWV0IFdDQUcyIGd1aWRlbGluZXMuXG4vLyBUaGUgdGhpcmQgYXJndW1lbnQgaXMgYW4gb3B0aW9uYWwgT2JqZWN0LlxuLy8gICAgICB0aGUgJ2xldmVsJyBwcm9wZXJ0eSBzdGF0ZXMgJ0FBJyBvciAnQUFBJyAtIGlmIG1pc3Npbmcgb3IgaW52YWxpZCwgaXQgZGVmYXVsdHMgdG8gJ0FBJztcbi8vICAgICAgdGhlICdzaXplJyBwcm9wZXJ0eSBzdGF0ZXMgJ2xhcmdlJyBvciAnc21hbGwnIC0gaWYgbWlzc2luZyBvciBpbnZhbGlkLCBpdCBkZWZhdWx0cyB0byAnc21hbGwnLlxuLy8gSWYgdGhlIGVudGlyZSBvYmplY3QgaXMgYWJzZW50LCBpc1JlYWRhYmxlIGRlZmF1bHRzIHRvIHtsZXZlbDpcIkFBXCIsc2l6ZTpcInNtYWxsXCJ9LlxuXG4vLyAqRXhhbXBsZSpcbi8vICAgIHRpbnljb2xvci5pc1JlYWRhYmxlKFwiIzAwMFwiLCBcIiMxMTFcIikgPT4gZmFsc2Vcbi8vICAgIHRpbnljb2xvci5pc1JlYWRhYmxlKFwiIzAwMFwiLCBcIiMxMTFcIix7bGV2ZWw6XCJBQVwiLHNpemU6XCJsYXJnZVwifSkgPT4gZmFsc2VcbnRpbnljb2xvci5pc1JlYWRhYmxlID0gZnVuY3Rpb24oY29sb3IxLCBjb2xvcjIsIHdjYWcyKSB7XG4gICAgdmFyIHJlYWRhYmlsaXR5ID0gdGlueWNvbG9yLnJlYWRhYmlsaXR5KGNvbG9yMSwgY29sb3IyKTtcbiAgICB2YXIgd2NhZzJQYXJtcywgb3V0O1xuXG4gICAgb3V0ID0gZmFsc2U7XG5cbiAgICB3Y2FnMlBhcm1zID0gdmFsaWRhdGVXQ0FHMlBhcm1zKHdjYWcyKTtcbiAgICBzd2l0Y2ggKHdjYWcyUGFybXMubGV2ZWwgKyB3Y2FnMlBhcm1zLnNpemUpIHtcbiAgICAgICAgY2FzZSBcIkFBc21hbGxcIjpcbiAgICAgICAgY2FzZSBcIkFBQWxhcmdlXCI6XG4gICAgICAgICAgICBvdXQgPSByZWFkYWJpbGl0eSA+PSA0LjU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkFBbGFyZ2VcIjpcbiAgICAgICAgICAgIG91dCA9IHJlYWRhYmlsaXR5ID49IDM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkFBQXNtYWxsXCI6XG4gICAgICAgICAgICBvdXQgPSByZWFkYWJpbGl0eSA+PSA3O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG5cbn07XG5cbi8vIGBtb3N0UmVhZGFibGVgXG4vLyBHaXZlbiBhIGJhc2UgY29sb3IgYW5kIGEgbGlzdCBvZiBwb3NzaWJsZSBmb3JlZ3JvdW5kIG9yIGJhY2tncm91bmRcbi8vIGNvbG9ycyBmb3IgdGhhdCBiYXNlLCByZXR1cm5zIHRoZSBtb3N0IHJlYWRhYmxlIGNvbG9yLlxuLy8gT3B0aW9uYWxseSByZXR1cm5zIEJsYWNrIG9yIFdoaXRlIGlmIHRoZSBtb3N0IHJlYWRhYmxlIGNvbG9yIGlzIHVucmVhZGFibGUuXG4vLyAqRXhhbXBsZSpcbi8vICAgIHRpbnljb2xvci5tb3N0UmVhZGFibGUodGlueWNvbG9yLm1vc3RSZWFkYWJsZShcIiMxMjNcIiwgW1wiIzEyNFwiLCBcIiMxMjVcIl0se2luY2x1ZGVGYWxsYmFja0NvbG9yczpmYWxzZX0pLnRvSGV4U3RyaW5nKCk7IC8vIFwiIzExMjI1NVwiXG4vLyAgICB0aW55Y29sb3IubW9zdFJlYWRhYmxlKHRpbnljb2xvci5tb3N0UmVhZGFibGUoXCIjMTIzXCIsIFtcIiMxMjRcIiwgXCIjMTI1XCJdLHtpbmNsdWRlRmFsbGJhY2tDb2xvcnM6dHJ1ZX0pLnRvSGV4U3RyaW5nKCk7ICAvLyBcIiNmZmZmZmZcIlxuLy8gICAgdGlueWNvbG9yLm1vc3RSZWFkYWJsZShcIiNhODAxNWFcIiwgW1wiI2ZhZjNmM1wiXSx7aW5jbHVkZUZhbGxiYWNrQ29sb3JzOnRydWUsbGV2ZWw6XCJBQUFcIixzaXplOlwibGFyZ2VcIn0pLnRvSGV4U3RyaW5nKCk7IC8vIFwiI2ZhZjNmM1wiXG4vLyAgICB0aW55Y29sb3IubW9zdFJlYWRhYmxlKFwiI2E4MDE1YVwiLCBbXCIjZmFmM2YzXCJdLHtpbmNsdWRlRmFsbGJhY2tDb2xvcnM6dHJ1ZSxsZXZlbDpcIkFBQVwiLHNpemU6XCJzbWFsbFwifSkudG9IZXhTdHJpbmcoKTsgLy8gXCIjZmZmZmZmXCJcbnRpbnljb2xvci5tb3N0UmVhZGFibGUgPSBmdW5jdGlvbihiYXNlQ29sb3IsIGNvbG9yTGlzdCwgYXJncykge1xuICAgIHZhciBiZXN0Q29sb3IgPSBudWxsO1xuICAgIHZhciBiZXN0U2NvcmUgPSAwO1xuICAgIHZhciByZWFkYWJpbGl0eTtcbiAgICB2YXIgaW5jbHVkZUZhbGxiYWNrQ29sb3JzLCBsZXZlbCwgc2l6ZSA7XG4gICAgYXJncyA9IGFyZ3MgfHwge307XG4gICAgaW5jbHVkZUZhbGxiYWNrQ29sb3JzID0gYXJncy5pbmNsdWRlRmFsbGJhY2tDb2xvcnMgO1xuICAgIGxldmVsID0gYXJncy5sZXZlbDtcbiAgICBzaXplID0gYXJncy5zaXplO1xuXG4gICAgZm9yICh2YXIgaT0gMDsgaSA8IGNvbG9yTGlzdC5sZW5ndGggOyBpKyspIHtcbiAgICAgICAgcmVhZGFiaWxpdHkgPSB0aW55Y29sb3IucmVhZGFiaWxpdHkoYmFzZUNvbG9yLCBjb2xvckxpc3RbaV0pO1xuICAgICAgICBpZiAocmVhZGFiaWxpdHkgPiBiZXN0U2NvcmUpIHtcbiAgICAgICAgICAgIGJlc3RTY29yZSA9IHJlYWRhYmlsaXR5O1xuICAgICAgICAgICAgYmVzdENvbG9yID0gdGlueWNvbG9yKGNvbG9yTGlzdFtpXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGlueWNvbG9yLmlzUmVhZGFibGUoYmFzZUNvbG9yLCBiZXN0Q29sb3IsIHtcImxldmVsXCI6bGV2ZWwsXCJzaXplXCI6c2l6ZX0pIHx8ICFpbmNsdWRlRmFsbGJhY2tDb2xvcnMpIHtcbiAgICAgICAgcmV0dXJuIGJlc3RDb2xvcjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFyZ3MuaW5jbHVkZUZhbGxiYWNrQ29sb3JzPWZhbHNlO1xuICAgICAgICByZXR1cm4gdGlueWNvbG9yLm1vc3RSZWFkYWJsZShiYXNlQ29sb3IsW1wiI2ZmZlwiLCBcIiMwMDBcIl0sYXJncyk7XG4gICAgfVxufTtcblxuXG4vLyBCaWcgTGlzdCBvZiBDb2xvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gPGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtY29sb3IvI3N2Zy1jb2xvcj5cbnZhciBuYW1lcyA9IHRpbnljb2xvci5uYW1lcyA9IHtcbiAgICBhbGljZWJsdWU6IFwiZjBmOGZmXCIsXG4gICAgYW50aXF1ZXdoaXRlOiBcImZhZWJkN1wiLFxuICAgIGFxdWE6IFwiMGZmXCIsXG4gICAgYXF1YW1hcmluZTogXCI3ZmZmZDRcIixcbiAgICBhenVyZTogXCJmMGZmZmZcIixcbiAgICBiZWlnZTogXCJmNWY1ZGNcIixcbiAgICBiaXNxdWU6IFwiZmZlNGM0XCIsXG4gICAgYmxhY2s6IFwiMDAwXCIsXG4gICAgYmxhbmNoZWRhbG1vbmQ6IFwiZmZlYmNkXCIsXG4gICAgYmx1ZTogXCIwMGZcIixcbiAgICBibHVldmlvbGV0OiBcIjhhMmJlMlwiLFxuICAgIGJyb3duOiBcImE1MmEyYVwiLFxuICAgIGJ1cmx5d29vZDogXCJkZWI4ODdcIixcbiAgICBidXJudHNpZW5uYTogXCJlYTdlNWRcIixcbiAgICBjYWRldGJsdWU6IFwiNWY5ZWEwXCIsXG4gICAgY2hhcnRyZXVzZTogXCI3ZmZmMDBcIixcbiAgICBjaG9jb2xhdGU6IFwiZDI2OTFlXCIsXG4gICAgY29yYWw6IFwiZmY3ZjUwXCIsXG4gICAgY29ybmZsb3dlcmJsdWU6IFwiNjQ5NWVkXCIsXG4gICAgY29ybnNpbGs6IFwiZmZmOGRjXCIsXG4gICAgY3JpbXNvbjogXCJkYzE0M2NcIixcbiAgICBjeWFuOiBcIjBmZlwiLFxuICAgIGRhcmtibHVlOiBcIjAwMDA4YlwiLFxuICAgIGRhcmtjeWFuOiBcIjAwOGI4YlwiLFxuICAgIGRhcmtnb2xkZW5yb2Q6IFwiYjg4NjBiXCIsXG4gICAgZGFya2dyYXk6IFwiYTlhOWE5XCIsXG4gICAgZGFya2dyZWVuOiBcIjAwNjQwMFwiLFxuICAgIGRhcmtncmV5OiBcImE5YTlhOVwiLFxuICAgIGRhcmtraGFraTogXCJiZGI3NmJcIixcbiAgICBkYXJrbWFnZW50YTogXCI4YjAwOGJcIixcbiAgICBkYXJrb2xpdmVncmVlbjogXCI1NTZiMmZcIixcbiAgICBkYXJrb3JhbmdlOiBcImZmOGMwMFwiLFxuICAgIGRhcmtvcmNoaWQ6IFwiOTkzMmNjXCIsXG4gICAgZGFya3JlZDogXCI4YjAwMDBcIixcbiAgICBkYXJrc2FsbW9uOiBcImU5OTY3YVwiLFxuICAgIGRhcmtzZWFncmVlbjogXCI4ZmJjOGZcIixcbiAgICBkYXJrc2xhdGVibHVlOiBcIjQ4M2Q4YlwiLFxuICAgIGRhcmtzbGF0ZWdyYXk6IFwiMmY0ZjRmXCIsXG4gICAgZGFya3NsYXRlZ3JleTogXCIyZjRmNGZcIixcbiAgICBkYXJrdHVycXVvaXNlOiBcIjAwY2VkMVwiLFxuICAgIGRhcmt2aW9sZXQ6IFwiOTQwMGQzXCIsXG4gICAgZGVlcHBpbms6IFwiZmYxNDkzXCIsXG4gICAgZGVlcHNreWJsdWU6IFwiMDBiZmZmXCIsXG4gICAgZGltZ3JheTogXCI2OTY5NjlcIixcbiAgICBkaW1ncmV5OiBcIjY5Njk2OVwiLFxuICAgIGRvZGdlcmJsdWU6IFwiMWU5MGZmXCIsXG4gICAgZmlyZWJyaWNrOiBcImIyMjIyMlwiLFxuICAgIGZsb3JhbHdoaXRlOiBcImZmZmFmMFwiLFxuICAgIGZvcmVzdGdyZWVuOiBcIjIyOGIyMlwiLFxuICAgIGZ1Y2hzaWE6IFwiZjBmXCIsXG4gICAgZ2FpbnNib3JvOiBcImRjZGNkY1wiLFxuICAgIGdob3N0d2hpdGU6IFwiZjhmOGZmXCIsXG4gICAgZ29sZDogXCJmZmQ3MDBcIixcbiAgICBnb2xkZW5yb2Q6IFwiZGFhNTIwXCIsXG4gICAgZ3JheTogXCI4MDgwODBcIixcbiAgICBncmVlbjogXCIwMDgwMDBcIixcbiAgICBncmVlbnllbGxvdzogXCJhZGZmMmZcIixcbiAgICBncmV5OiBcIjgwODA4MFwiLFxuICAgIGhvbmV5ZGV3OiBcImYwZmZmMFwiLFxuICAgIGhvdHBpbms6IFwiZmY2OWI0XCIsXG4gICAgaW5kaWFucmVkOiBcImNkNWM1Y1wiLFxuICAgIGluZGlnbzogXCI0YjAwODJcIixcbiAgICBpdm9yeTogXCJmZmZmZjBcIixcbiAgICBraGFraTogXCJmMGU2OGNcIixcbiAgICBsYXZlbmRlcjogXCJlNmU2ZmFcIixcbiAgICBsYXZlbmRlcmJsdXNoOiBcImZmZjBmNVwiLFxuICAgIGxhd25ncmVlbjogXCI3Y2ZjMDBcIixcbiAgICBsZW1vbmNoaWZmb246IFwiZmZmYWNkXCIsXG4gICAgbGlnaHRibHVlOiBcImFkZDhlNlwiLFxuICAgIGxpZ2h0Y29yYWw6IFwiZjA4MDgwXCIsXG4gICAgbGlnaHRjeWFuOiBcImUwZmZmZlwiLFxuICAgIGxpZ2h0Z29sZGVucm9keWVsbG93OiBcImZhZmFkMlwiLFxuICAgIGxpZ2h0Z3JheTogXCJkM2QzZDNcIixcbiAgICBsaWdodGdyZWVuOiBcIjkwZWU5MFwiLFxuICAgIGxpZ2h0Z3JleTogXCJkM2QzZDNcIixcbiAgICBsaWdodHBpbms6IFwiZmZiNmMxXCIsXG4gICAgbGlnaHRzYWxtb246IFwiZmZhMDdhXCIsXG4gICAgbGlnaHRzZWFncmVlbjogXCIyMGIyYWFcIixcbiAgICBsaWdodHNreWJsdWU6IFwiODdjZWZhXCIsXG4gICAgbGlnaHRzbGF0ZWdyYXk6IFwiNzg5XCIsXG4gICAgbGlnaHRzbGF0ZWdyZXk6IFwiNzg5XCIsXG4gICAgbGlnaHRzdGVlbGJsdWU6IFwiYjBjNGRlXCIsXG4gICAgbGlnaHR5ZWxsb3c6IFwiZmZmZmUwXCIsXG4gICAgbGltZTogXCIwZjBcIixcbiAgICBsaW1lZ3JlZW46IFwiMzJjZDMyXCIsXG4gICAgbGluZW46IFwiZmFmMGU2XCIsXG4gICAgbWFnZW50YTogXCJmMGZcIixcbiAgICBtYXJvb246IFwiODAwMDAwXCIsXG4gICAgbWVkaXVtYXF1YW1hcmluZTogXCI2NmNkYWFcIixcbiAgICBtZWRpdW1ibHVlOiBcIjAwMDBjZFwiLFxuICAgIG1lZGl1bW9yY2hpZDogXCJiYTU1ZDNcIixcbiAgICBtZWRpdW1wdXJwbGU6IFwiOTM3MGRiXCIsXG4gICAgbWVkaXVtc2VhZ3JlZW46IFwiM2NiMzcxXCIsXG4gICAgbWVkaXVtc2xhdGVibHVlOiBcIjdiNjhlZVwiLFxuICAgIG1lZGl1bXNwcmluZ2dyZWVuOiBcIjAwZmE5YVwiLFxuICAgIG1lZGl1bXR1cnF1b2lzZTogXCI0OGQxY2NcIixcbiAgICBtZWRpdW12aW9sZXRyZWQ6IFwiYzcxNTg1XCIsXG4gICAgbWlkbmlnaHRibHVlOiBcIjE5MTk3MFwiLFxuICAgIG1pbnRjcmVhbTogXCJmNWZmZmFcIixcbiAgICBtaXN0eXJvc2U6IFwiZmZlNGUxXCIsXG4gICAgbW9jY2FzaW46IFwiZmZlNGI1XCIsXG4gICAgbmF2YWpvd2hpdGU6IFwiZmZkZWFkXCIsXG4gICAgbmF2eTogXCIwMDAwODBcIixcbiAgICBvbGRsYWNlOiBcImZkZjVlNlwiLFxuICAgIG9saXZlOiBcIjgwODAwMFwiLFxuICAgIG9saXZlZHJhYjogXCI2YjhlMjNcIixcbiAgICBvcmFuZ2U6IFwiZmZhNTAwXCIsXG4gICAgb3JhbmdlcmVkOiBcImZmNDUwMFwiLFxuICAgIG9yY2hpZDogXCJkYTcwZDZcIixcbiAgICBwYWxlZ29sZGVucm9kOiBcImVlZThhYVwiLFxuICAgIHBhbGVncmVlbjogXCI5OGZiOThcIixcbiAgICBwYWxldHVycXVvaXNlOiBcImFmZWVlZVwiLFxuICAgIHBhbGV2aW9sZXRyZWQ6IFwiZGI3MDkzXCIsXG4gICAgcGFwYXlhd2hpcDogXCJmZmVmZDVcIixcbiAgICBwZWFjaHB1ZmY6IFwiZmZkYWI5XCIsXG4gICAgcGVydTogXCJjZDg1M2ZcIixcbiAgICBwaW5rOiBcImZmYzBjYlwiLFxuICAgIHBsdW06IFwiZGRhMGRkXCIsXG4gICAgcG93ZGVyYmx1ZTogXCJiMGUwZTZcIixcbiAgICBwdXJwbGU6IFwiODAwMDgwXCIsXG4gICAgcmViZWNjYXB1cnBsZTogXCI2NjMzOTlcIixcbiAgICByZWQ6IFwiZjAwXCIsXG4gICAgcm9zeWJyb3duOiBcImJjOGY4ZlwiLFxuICAgIHJveWFsYmx1ZTogXCI0MTY5ZTFcIixcbiAgICBzYWRkbGVicm93bjogXCI4YjQ1MTNcIixcbiAgICBzYWxtb246IFwiZmE4MDcyXCIsXG4gICAgc2FuZHlicm93bjogXCJmNGE0NjBcIixcbiAgICBzZWFncmVlbjogXCIyZThiNTdcIixcbiAgICBzZWFzaGVsbDogXCJmZmY1ZWVcIixcbiAgICBzaWVubmE6IFwiYTA1MjJkXCIsXG4gICAgc2lsdmVyOiBcImMwYzBjMFwiLFxuICAgIHNreWJsdWU6IFwiODdjZWViXCIsXG4gICAgc2xhdGVibHVlOiBcIjZhNWFjZFwiLFxuICAgIHNsYXRlZ3JheTogXCI3MDgwOTBcIixcbiAgICBzbGF0ZWdyZXk6IFwiNzA4MDkwXCIsXG4gICAgc25vdzogXCJmZmZhZmFcIixcbiAgICBzcHJpbmdncmVlbjogXCIwMGZmN2ZcIixcbiAgICBzdGVlbGJsdWU6IFwiNDY4MmI0XCIsXG4gICAgdGFuOiBcImQyYjQ4Y1wiLFxuICAgIHRlYWw6IFwiMDA4MDgwXCIsXG4gICAgdGhpc3RsZTogXCJkOGJmZDhcIixcbiAgICB0b21hdG86IFwiZmY2MzQ3XCIsXG4gICAgdHVycXVvaXNlOiBcIjQwZTBkMFwiLFxuICAgIHZpb2xldDogXCJlZTgyZWVcIixcbiAgICB3aGVhdDogXCJmNWRlYjNcIixcbiAgICB3aGl0ZTogXCJmZmZcIixcbiAgICB3aGl0ZXNtb2tlOiBcImY1ZjVmNVwiLFxuICAgIHllbGxvdzogXCJmZjBcIixcbiAgICB5ZWxsb3dncmVlbjogXCI5YWNkMzJcIlxufTtcblxuLy8gTWFrZSBpdCBlYXN5IHRvIGFjY2VzcyBjb2xvcnMgdmlhIGBoZXhOYW1lc1toZXhdYFxudmFyIGhleE5hbWVzID0gdGlueWNvbG9yLmhleE5hbWVzID0gZmxpcChuYW1lcyk7XG5cblxuLy8gVXRpbGl0aWVzXG4vLyAtLS0tLS0tLS1cblxuLy8gYHsgJ25hbWUxJzogJ3ZhbDEnIH1gIGJlY29tZXMgYHsgJ3ZhbDEnOiAnbmFtZTEnIH1gXG5mdW5jdGlvbiBmbGlwKG8pIHtcbiAgICB2YXIgZmxpcHBlZCA9IHsgfTtcbiAgICBmb3IgKHZhciBpIGluIG8pIHtcbiAgICAgICAgaWYgKG8uaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgIGZsaXBwZWRbb1tpXV0gPSBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmbGlwcGVkO1xufVxuXG4vLyBSZXR1cm4gYSB2YWxpZCBhbHBoYSB2YWx1ZSBbMCwxXSB3aXRoIGFsbCBpbnZhbGlkIHZhbHVlcyBiZWluZyBzZXQgdG8gMVxuZnVuY3Rpb24gYm91bmRBbHBoYShhKSB7XG4gICAgYSA9IHBhcnNlRmxvYXQoYSk7XG5cbiAgICBpZiAoaXNOYU4oYSkgfHwgYSA8IDAgfHwgYSA+IDEpIHtcbiAgICAgICAgYSA9IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG59XG5cbi8vIFRha2UgaW5wdXQgZnJvbSBbMCwgbl0gYW5kIHJldHVybiBpdCBhcyBbMCwgMV1cbmZ1bmN0aW9uIGJvdW5kMDEobiwgbWF4KSB7XG4gICAgaWYgKGlzT25lUG9pbnRaZXJvKG4pKSB7IG4gPSBcIjEwMCVcIjsgfVxuXG4gICAgdmFyIHByb2Nlc3NQZXJjZW50ID0gaXNQZXJjZW50YWdlKG4pO1xuICAgIG4gPSBtYXRoTWluKG1heCwgbWF0aE1heCgwLCBwYXJzZUZsb2F0KG4pKSk7XG5cbiAgICAvLyBBdXRvbWF0aWNhbGx5IGNvbnZlcnQgcGVyY2VudGFnZSBpbnRvIG51bWJlclxuICAgIGlmIChwcm9jZXNzUGVyY2VudCkge1xuICAgICAgICBuID0gcGFyc2VJbnQobiAqIG1heCwgMTApIC8gMTAwO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBmbG9hdGluZyBwb2ludCByb3VuZGluZyBlcnJvcnNcbiAgICBpZiAoKE1hdGguYWJzKG4gLSBtYXgpIDwgMC4wMDAwMDEpKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIC8vIENvbnZlcnQgaW50byBbMCwgMV0gcmFuZ2UgaWYgaXQgaXNuJ3QgYWxyZWFkeVxuICAgIHJldHVybiAobiAlIG1heCkgLyBwYXJzZUZsb2F0KG1heCk7XG59XG5cbi8vIEZvcmNlIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMVxuZnVuY3Rpb24gY2xhbXAwMSh2YWwpIHtcbiAgICByZXR1cm4gbWF0aE1pbigxLCBtYXRoTWF4KDAsIHZhbCkpO1xufVxuXG4vLyBQYXJzZSBhIGJhc2UtMTYgaGV4IHZhbHVlIGludG8gYSBiYXNlLTEwIGludGVnZXJcbmZ1bmN0aW9uIHBhcnNlSW50RnJvbUhleCh2YWwpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodmFsLCAxNik7XG59XG5cbi8vIE5lZWQgdG8gaGFuZGxlIDEuMCBhcyAxMDAlLCBzaW5jZSBvbmNlIGl0IGlzIGEgbnVtYmVyLCB0aGVyZSBpcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaXQgYW5kIDFcbi8vIDxodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc0MjIwNzIvamF2YXNjcmlwdC1ob3ctdG8tZGV0ZWN0LW51bWJlci1hcy1hLWRlY2ltYWwtaW5jbHVkaW5nLTEtMD5cbmZ1bmN0aW9uIGlzT25lUG9pbnRaZXJvKG4pIHtcbiAgICByZXR1cm4gdHlwZW9mIG4gPT0gXCJzdHJpbmdcIiAmJiBuLmluZGV4T2YoJy4nKSAhPSAtMSAmJiBwYXJzZUZsb2F0KG4pID09PSAxO1xufVxuXG4vLyBDaGVjayB0byBzZWUgaWYgc3RyaW5nIHBhc3NlZCBpbiBpcyBhIHBlcmNlbnRhZ2VcbmZ1bmN0aW9uIGlzUGVyY2VudGFnZShuKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBuID09PSBcInN0cmluZ1wiICYmIG4uaW5kZXhPZignJScpICE9IC0xO1xufVxuXG4vLyBGb3JjZSBhIGhleCB2YWx1ZSB0byBoYXZlIDIgY2hhcmFjdGVyc1xuZnVuY3Rpb24gcGFkMihjKSB7XG4gICAgcmV0dXJuIGMubGVuZ3RoID09IDEgPyAnMCcgKyBjIDogJycgKyBjO1xufVxuXG4vLyBSZXBsYWNlIGEgZGVjaW1hbCB3aXRoIGl0J3MgcGVyY2VudGFnZSB2YWx1ZVxuZnVuY3Rpb24gY29udmVydFRvUGVyY2VudGFnZShuKSB7XG4gICAgaWYgKG4gPD0gMSkge1xuICAgICAgICBuID0gKG4gKiAxMDApICsgXCIlXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIG47XG59XG5cbi8vIENvbnZlcnRzIGEgZGVjaW1hbCB0byBhIGhleCB2YWx1ZVxuZnVuY3Rpb24gY29udmVydERlY2ltYWxUb0hleChkKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQocGFyc2VGbG9hdChkKSAqIDI1NSkudG9TdHJpbmcoMTYpO1xufVxuLy8gQ29udmVydHMgYSBoZXggdmFsdWUgdG8gYSBkZWNpbWFsXG5mdW5jdGlvbiBjb252ZXJ0SGV4VG9EZWNpbWFsKGgpIHtcbiAgICByZXR1cm4gKHBhcnNlSW50RnJvbUhleChoKSAvIDI1NSk7XG59XG5cbnZhciBtYXRjaGVycyA9IChmdW5jdGlvbigpIHtcblxuICAgIC8vIDxodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXZhbHVlcy8jaW50ZWdlcnM+XG4gICAgdmFyIENTU19JTlRFR0VSID0gXCJbLVxcXFwrXT9cXFxcZCslP1wiO1xuXG4gICAgLy8gPGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtdmFsdWVzLyNudW1iZXItdmFsdWU+XG4gICAgdmFyIENTU19OVU1CRVIgPSBcIlstXFxcXCtdP1xcXFxkKlxcXFwuXFxcXGQrJT9cIjtcblxuICAgIC8vIEFsbG93IHBvc2l0aXZlL25lZ2F0aXZlIGludGVnZXIvbnVtYmVyLiAgRG9uJ3QgY2FwdHVyZSB0aGUgZWl0aGVyL29yLCBqdXN0IHRoZSBlbnRpcmUgb3V0Y29tZS5cbiAgICB2YXIgQ1NTX1VOSVQgPSBcIig/OlwiICsgQ1NTX05VTUJFUiArIFwiKXwoPzpcIiArIENTU19JTlRFR0VSICsgXCIpXCI7XG5cbiAgICAvLyBBY3R1YWwgbWF0Y2hpbmcuXG4gICAgLy8gUGFyZW50aGVzZXMgYW5kIGNvbW1hcyBhcmUgb3B0aW9uYWwsIGJ1dCBub3QgcmVxdWlyZWQuXG4gICAgLy8gV2hpdGVzcGFjZSBjYW4gdGFrZSB0aGUgcGxhY2Ugb2YgY29tbWFzIG9yIG9wZW5pbmcgcGFyZW5cbiAgICB2YXIgUEVSTUlTU0lWRV9NQVRDSDMgPSBcIltcXFxcc3xcXFxcKF0rKFwiICsgQ1NTX1VOSVQgKyBcIilbLHxcXFxcc10rKFwiICsgQ1NTX1VOSVQgKyBcIilbLHxcXFxcc10rKFwiICsgQ1NTX1VOSVQgKyBcIilcXFxccypcXFxcKT9cIjtcbiAgICB2YXIgUEVSTUlTU0lWRV9NQVRDSDQgPSBcIltcXFxcc3xcXFxcKF0rKFwiICsgQ1NTX1VOSVQgKyBcIilbLHxcXFxcc10rKFwiICsgQ1NTX1VOSVQgKyBcIilbLHxcXFxcc10rKFwiICsgQ1NTX1VOSVQgKyBcIilbLHxcXFxcc10rKFwiICsgQ1NTX1VOSVQgKyBcIilcXFxccypcXFxcKT9cIjtcblxuICAgIHJldHVybiB7XG4gICAgICAgIENTU19VTklUOiBuZXcgUmVnRXhwKENTU19VTklUKSxcbiAgICAgICAgcmdiOiBuZXcgUmVnRXhwKFwicmdiXCIgKyBQRVJNSVNTSVZFX01BVENIMyksXG4gICAgICAgIHJnYmE6IG5ldyBSZWdFeHAoXCJyZ2JhXCIgKyBQRVJNSVNTSVZFX01BVENINCksXG4gICAgICAgIGhzbDogbmV3IFJlZ0V4cChcImhzbFwiICsgUEVSTUlTU0lWRV9NQVRDSDMpLFxuICAgICAgICBoc2xhOiBuZXcgUmVnRXhwKFwiaHNsYVwiICsgUEVSTUlTU0lWRV9NQVRDSDQpLFxuICAgICAgICBoc3Y6IG5ldyBSZWdFeHAoXCJoc3ZcIiArIFBFUk1JU1NJVkVfTUFUQ0gzKSxcbiAgICAgICAgaHN2YTogbmV3IFJlZ0V4cChcImhzdmFcIiArIFBFUk1JU1NJVkVfTUFUQ0g0KSxcbiAgICAgICAgaGV4MzogL14jPyhbMC05YS1mQS1GXXsxfSkoWzAtOWEtZkEtRl17MX0pKFswLTlhLWZBLUZdezF9KSQvLFxuICAgICAgICBoZXg2OiAvXiM/KFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pJC8sXG4gICAgICAgIGhleDQ6IC9eIz8oWzAtOWEtZkEtRl17MX0pKFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkoWzAtOWEtZkEtRl17MX0pJC8sXG4gICAgICAgIGhleDg6IC9eIz8oWzAtOWEtZkEtRl17Mn0pKFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pJC9cbiAgICB9O1xufSkoKTtcblxuLy8gYGlzVmFsaWRDU1NVbml0YFxuLy8gVGFrZSBpbiBhIHNpbmdsZSBzdHJpbmcgLyBudW1iZXIgYW5kIGNoZWNrIHRvIHNlZSBpZiBpdCBsb29rcyBsaWtlIGEgQ1NTIHVuaXRcbi8vIChzZWUgYG1hdGNoZXJzYCBhYm92ZSBmb3IgZGVmaW5pdGlvbikuXG5mdW5jdGlvbiBpc1ZhbGlkQ1NTVW5pdChjb2xvcikge1xuICAgIHJldHVybiAhIW1hdGNoZXJzLkNTU19VTklULmV4ZWMoY29sb3IpO1xufVxuXG4vLyBgc3RyaW5nSW5wdXRUb09iamVjdGBcbi8vIFBlcm1pc3NpdmUgc3RyaW5nIHBhcnNpbmcuICBUYWtlIGluIGEgbnVtYmVyIG9mIGZvcm1hdHMsIGFuZCBvdXRwdXQgYW4gb2JqZWN0XG4vLyBiYXNlZCBvbiBkZXRlY3RlZCBmb3JtYXQuICBSZXR1cm5zIGB7IHIsIGcsIGIgfWAgb3IgYHsgaCwgcywgbCB9YCBvciBgeyBoLCBzLCB2fWBcbmZ1bmN0aW9uIHN0cmluZ0lucHV0VG9PYmplY3QoY29sb3IpIHtcblxuICAgIGNvbG9yID0gY29sb3IucmVwbGFjZSh0cmltTGVmdCwnJykucmVwbGFjZSh0cmltUmlnaHQsICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhciBuYW1lZCA9IGZhbHNlO1xuICAgIGlmIChuYW1lc1tjb2xvcl0pIHtcbiAgICAgICAgY29sb3IgPSBuYW1lc1tjb2xvcl07XG4gICAgICAgIG5hbWVkID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29sb3IgPT0gJ3RyYW5zcGFyZW50Jykge1xuICAgICAgICByZXR1cm4geyByOiAwLCBnOiAwLCBiOiAwLCBhOiAwLCBmb3JtYXQ6IFwibmFtZVwiIH07XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIG1hdGNoIHN0cmluZyBpbnB1dCB1c2luZyByZWd1bGFyIGV4cHJlc3Npb25zLlxuICAgIC8vIEtlZXAgbW9zdCBvZiB0aGUgbnVtYmVyIGJvdW5kaW5nIG91dCBvZiB0aGlzIGZ1bmN0aW9uIC0gZG9uJ3Qgd29ycnkgYWJvdXQgWzAsMV0gb3IgWzAsMTAwXSBvciBbMCwzNjBdXG4gICAgLy8gSnVzdCByZXR1cm4gYW4gb2JqZWN0IGFuZCBsZXQgdGhlIGNvbnZlcnNpb24gZnVuY3Rpb25zIGhhbmRsZSB0aGF0LlxuICAgIC8vIFRoaXMgd2F5IHRoZSByZXN1bHQgd2lsbCBiZSB0aGUgc2FtZSB3aGV0aGVyIHRoZSB0aW55Y29sb3IgaXMgaW5pdGlhbGl6ZWQgd2l0aCBzdHJpbmcgb3Igb2JqZWN0LlxuICAgIHZhciBtYXRjaDtcbiAgICBpZiAoKG1hdGNoID0gbWF0Y2hlcnMucmdiLmV4ZWMoY29sb3IpKSkge1xuICAgICAgICByZXR1cm4geyByOiBtYXRjaFsxXSwgZzogbWF0Y2hbMl0sIGI6IG1hdGNoWzNdIH07XG4gICAgfVxuICAgIGlmICgobWF0Y2ggPSBtYXRjaGVycy5yZ2JhLmV4ZWMoY29sb3IpKSkge1xuICAgICAgICByZXR1cm4geyByOiBtYXRjaFsxXSwgZzogbWF0Y2hbMl0sIGI6IG1hdGNoWzNdLCBhOiBtYXRjaFs0XSB9O1xuICAgIH1cbiAgICBpZiAoKG1hdGNoID0gbWF0Y2hlcnMuaHNsLmV4ZWMoY29sb3IpKSkge1xuICAgICAgICByZXR1cm4geyBoOiBtYXRjaFsxXSwgczogbWF0Y2hbMl0sIGw6IG1hdGNoWzNdIH07XG4gICAgfVxuICAgIGlmICgobWF0Y2ggPSBtYXRjaGVycy5oc2xhLmV4ZWMoY29sb3IpKSkge1xuICAgICAgICByZXR1cm4geyBoOiBtYXRjaFsxXSwgczogbWF0Y2hbMl0sIGw6IG1hdGNoWzNdLCBhOiBtYXRjaFs0XSB9O1xuICAgIH1cbiAgICBpZiAoKG1hdGNoID0gbWF0Y2hlcnMuaHN2LmV4ZWMoY29sb3IpKSkge1xuICAgICAgICByZXR1cm4geyBoOiBtYXRjaFsxXSwgczogbWF0Y2hbMl0sIHY6IG1hdGNoWzNdIH07XG4gICAgfVxuICAgIGlmICgobWF0Y2ggPSBtYXRjaGVycy5oc3ZhLmV4ZWMoY29sb3IpKSkge1xuICAgICAgICByZXR1cm4geyBoOiBtYXRjaFsxXSwgczogbWF0Y2hbMl0sIHY6IG1hdGNoWzNdLCBhOiBtYXRjaFs0XSB9O1xuICAgIH1cbiAgICBpZiAoKG1hdGNoID0gbWF0Y2hlcnMuaGV4OC5leGVjKGNvbG9yKSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHI6IHBhcnNlSW50RnJvbUhleChtYXRjaFsxXSksXG4gICAgICAgICAgICBnOiBwYXJzZUludEZyb21IZXgobWF0Y2hbMl0pLFxuICAgICAgICAgICAgYjogcGFyc2VJbnRGcm9tSGV4KG1hdGNoWzNdKSxcbiAgICAgICAgICAgIGE6IGNvbnZlcnRIZXhUb0RlY2ltYWwobWF0Y2hbNF0pLFxuICAgICAgICAgICAgZm9ybWF0OiBuYW1lZCA/IFwibmFtZVwiIDogXCJoZXg4XCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKChtYXRjaCA9IG1hdGNoZXJzLmhleDYuZXhlYyhjb2xvcikpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByOiBwYXJzZUludEZyb21IZXgobWF0Y2hbMV0pLFxuICAgICAgICAgICAgZzogcGFyc2VJbnRGcm9tSGV4KG1hdGNoWzJdKSxcbiAgICAgICAgICAgIGI6IHBhcnNlSW50RnJvbUhleChtYXRjaFszXSksXG4gICAgICAgICAgICBmb3JtYXQ6IG5hbWVkID8gXCJuYW1lXCIgOiBcImhleFwiXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICgobWF0Y2ggPSBtYXRjaGVycy5oZXg0LmV4ZWMoY29sb3IpKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcjogcGFyc2VJbnRGcm9tSGV4KG1hdGNoWzFdICsgJycgKyBtYXRjaFsxXSksXG4gICAgICAgICAgICBnOiBwYXJzZUludEZyb21IZXgobWF0Y2hbMl0gKyAnJyArIG1hdGNoWzJdKSxcbiAgICAgICAgICAgIGI6IHBhcnNlSW50RnJvbUhleChtYXRjaFszXSArICcnICsgbWF0Y2hbM10pLFxuICAgICAgICAgICAgYTogY29udmVydEhleFRvRGVjaW1hbChtYXRjaFs0XSArICcnICsgbWF0Y2hbNF0pLFxuICAgICAgICAgICAgZm9ybWF0OiBuYW1lZCA/IFwibmFtZVwiIDogXCJoZXg4XCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKChtYXRjaCA9IG1hdGNoZXJzLmhleDMuZXhlYyhjb2xvcikpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByOiBwYXJzZUludEZyb21IZXgobWF0Y2hbMV0gKyAnJyArIG1hdGNoWzFdKSxcbiAgICAgICAgICAgIGc6IHBhcnNlSW50RnJvbUhleChtYXRjaFsyXSArICcnICsgbWF0Y2hbMl0pLFxuICAgICAgICAgICAgYjogcGFyc2VJbnRGcm9tSGV4KG1hdGNoWzNdICsgJycgKyBtYXRjaFszXSksXG4gICAgICAgICAgICBmb3JtYXQ6IG5hbWVkID8gXCJuYW1lXCIgOiBcImhleFwiXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVdDQUcyUGFybXMocGFybXMpIHtcbiAgICAvLyByZXR1cm4gdmFsaWQgV0NBRzIgcGFybXMgZm9yIGlzUmVhZGFibGUuXG4gICAgLy8gSWYgaW5wdXQgcGFybXMgYXJlIGludmFsaWQsIHJldHVybiB7XCJsZXZlbFwiOlwiQUFcIiwgXCJzaXplXCI6XCJzbWFsbFwifVxuICAgIHZhciBsZXZlbCwgc2l6ZTtcbiAgICBwYXJtcyA9IHBhcm1zIHx8IHtcImxldmVsXCI6XCJBQVwiLCBcInNpemVcIjpcInNtYWxsXCJ9O1xuICAgIGxldmVsID0gKHBhcm1zLmxldmVsIHx8IFwiQUFcIikudG9VcHBlckNhc2UoKTtcbiAgICBzaXplID0gKHBhcm1zLnNpemUgfHwgXCJzbWFsbFwiKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsZXZlbCAhPT0gXCJBQVwiICYmIGxldmVsICE9PSBcIkFBQVwiKSB7XG4gICAgICAgIGxldmVsID0gXCJBQVwiO1xuICAgIH1cbiAgICBpZiAoc2l6ZSAhPT0gXCJzbWFsbFwiICYmIHNpemUgIT09IFwibGFyZ2VcIikge1xuICAgICAgICBzaXplID0gXCJzbWFsbFwiO1xuICAgIH1cbiAgICByZXR1cm4ge1wibGV2ZWxcIjpsZXZlbCwgXCJzaXplXCI6c2l6ZX07XG59XG5cbi8vIE5vZGU6IEV4cG9ydCBmdW5jdGlvblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHRpbnljb2xvcjtcbn1cbi8vIEFNRC9yZXF1aXJlanM6IERlZmluZSB0aGUgbW9kdWxlXG5lbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24gKCkge3JldHVybiB0aW55Y29sb3I7fSk7XG59XG4vLyBCcm93c2VyOiBFeHBvc2UgdG8gd2luZG93XG5lbHNlIHtcbiAgICB3aW5kb3cudGlueWNvbG9yID0gdGlueWNvbG9yO1xufVxuXG59KShNYXRoKTtcbiIsIi8qXG4gKiBUb2FzdHJcbiAqIENvcHlyaWdodCAyMDEyLTIwMTVcbiAqIEF1dGhvcnM6IEpvaG4gUGFwYSwgSGFucyBGasOkbGxlbWFyaywgYW5kIFRpbSBGZXJyZWxsLlxuICogQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFVzZSwgcmVwcm9kdWN0aW9uLCBkaXN0cmlidXRpb24sIGFuZCBtb2RpZmljYXRpb24gb2YgdGhpcyBjb2RlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZFxuICogY29uZGl0aW9ucyBvZiB0aGUgTUlUIGxpY2Vuc2UsIGF2YWlsYWJsZSBhdCBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICpcbiAqIEFSSUEgU3VwcG9ydDogR3JldGEgS3JhZnNpZ1xuICpcbiAqIFByb2plY3Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9Db2RlU2V2ZW4vdG9hc3RyXG4gKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cbihmdW5jdGlvbiAoZGVmaW5lKSB7XG4gICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZ1bmN0aW9uICgkKSB7XG4gICAgICAgIHJldHVybiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRjb250YWluZXI7XG4gICAgICAgICAgICB2YXIgbGlzdGVuZXI7XG4gICAgICAgICAgICB2YXIgdG9hc3RJZCA9IDA7XG4gICAgICAgICAgICB2YXIgdG9hc3RUeXBlID0ge1xuICAgICAgICAgICAgICAgIGVycm9yOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIGluZm86ICdpbmZvJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgd2FybmluZzogJ3dhcm5pbmcnXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgdG9hc3RyID0ge1xuICAgICAgICAgICAgICAgIGNsZWFyOiBjbGVhcixcbiAgICAgICAgICAgICAgICByZW1vdmU6IHJlbW92ZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgZ2V0Q29udGFpbmVyOiBnZXRDb250YWluZXIsXG4gICAgICAgICAgICAgICAgaW5mbzogaW5mbyxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmU6IHN1YnNjcmliZSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzLFxuICAgICAgICAgICAgICAgIHZlcnNpb246ICcyLjEuMycsXG4gICAgICAgICAgICAgICAgd2FybmluZzogd2FybmluZ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHByZXZpb3VzVG9hc3Q7XG5cbiAgICAgICAgICAgIHJldHVybiB0b2FzdHI7XG5cbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IobWVzc2FnZSwgdGl0bGUsIG9wdGlvbnNPdmVycmlkZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0b2FzdFR5cGUuZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzczogZ2V0T3B0aW9ucygpLmljb25DbGFzc2VzLmVycm9yLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zT3ZlcnJpZGU6IG9wdGlvbnNPdmVycmlkZSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldENvbnRhaW5lcihvcHRpb25zLCBjcmVhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMpIHsgb3B0aW9ucyA9IGdldE9wdGlvbnMoKTsgfVxuICAgICAgICAgICAgICAgICRjb250YWluZXIgPSAkKCcjJyArIG9wdGlvbnMuY29udGFpbmVySWQpO1xuICAgICAgICAgICAgICAgIGlmICgkY29udGFpbmVyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGNvbnRhaW5lcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNyZWF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAkY29udGFpbmVyID0gY3JlYXRlQ29udGFpbmVyKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gJGNvbnRhaW5lcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gaW5mbyhtZXNzYWdlLCB0aXRsZSwgb3B0aW9uc092ZXJyaWRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRvYXN0VHlwZS5pbmZvLFxuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3M6IGdldE9wdGlvbnMoKS5pY29uQ2xhc3Nlcy5pbmZvLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zT3ZlcnJpZGU6IG9wdGlvbnNPdmVycmlkZSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1YnNjcmliZShjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyID0gY2FsbGJhY2s7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MobWVzc2FnZSwgdGl0bGUsIG9wdGlvbnNPdmVycmlkZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0b2FzdFR5cGUuc3VjY2VzcyxcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzOiBnZXRPcHRpb25zKCkuaWNvbkNsYXNzZXMuc3VjY2VzcyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc092ZXJyaWRlOiBvcHRpb25zT3ZlcnJpZGUsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zT3ZlcnJpZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdG9hc3RUeXBlLndhcm5pbmcsXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzczogZ2V0T3B0aW9ucygpLmljb25DbGFzc2VzLndhcm5pbmcsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNPdmVycmlkZTogb3B0aW9uc092ZXJyaWRlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXIoJHRvYXN0RWxlbWVudCwgY2xlYXJPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBnZXRPcHRpb25zKCk7XG4gICAgICAgICAgICAgICAgaWYgKCEkY29udGFpbmVyKSB7IGdldENvbnRhaW5lcihvcHRpb25zKTsgfVxuICAgICAgICAgICAgICAgIGlmICghY2xlYXJUb2FzdCgkdG9hc3RFbGVtZW50LCBvcHRpb25zLCBjbGVhck9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyQ29udGFpbmVyKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlKCR0b2FzdEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGdldE9wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBpZiAoISRjb250YWluZXIpIHsgZ2V0Q29udGFpbmVyKG9wdGlvbnMpOyB9XG4gICAgICAgICAgICAgICAgaWYgKCR0b2FzdEVsZW1lbnQgJiYgJCgnOmZvY3VzJywgJHRvYXN0RWxlbWVudCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVRvYXN0KCR0b2FzdEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkY29udGFpbmVyLmNoaWxkcmVuKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICRjb250YWluZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpbnRlcm5hbCBmdW5jdGlvbnNcblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJDb250YWluZXIgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9hc3RzVG9DbGVhciA9ICRjb250YWluZXIuY2hpbGRyZW4oKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gdG9hc3RzVG9DbGVhci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRvYXN0KCQodG9hc3RzVG9DbGVhcltpXSksIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJUb2FzdCAoJHRvYXN0RWxlbWVudCwgb3B0aW9ucywgY2xlYXJPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvcmNlID0gY2xlYXJPcHRpb25zICYmIGNsZWFyT3B0aW9ucy5mb3JjZSA/IGNsZWFyT3B0aW9ucy5mb3JjZSA6IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICgkdG9hc3RFbGVtZW50ICYmIChmb3JjZSB8fCAkKCc6Zm9jdXMnLCAkdG9hc3RFbGVtZW50KS5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnRbb3B0aW9ucy5oaWRlTWV0aG9kXSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5oaWRlRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IG9wdGlvbnMuaGlkZUVhc2luZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7IHJlbW92ZVRvYXN0KCR0b2FzdEVsZW1lbnQpOyB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVDb250YWluZXIob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICRjb250YWluZXIgPSAkKCc8ZGl2Lz4nKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaWQnLCBvcHRpb25zLmNvbnRhaW5lcklkKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3Mob3B0aW9ucy5wb3NpdGlvbkNsYXNzKTtcblxuICAgICAgICAgICAgICAgICRjb250YWluZXIuYXBwZW5kVG8oJChvcHRpb25zLnRhcmdldCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiAkY29udGFpbmVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXREZWZhdWx0cygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0YXBUb0Rpc21pc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0Q2xhc3M6ICd0b2FzdCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiAndG9hc3QtY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICAgICAgZGVidWc6IGZhbHNlLFxuXG4gICAgICAgICAgICAgICAgICAgIHNob3dNZXRob2Q6ICdmYWRlSW4nLCAvL2ZhZGVJbiwgc2xpZGVEb3duLCBhbmQgc2hvdyBhcmUgYnVpbHQgaW50byBqUXVlcnlcbiAgICAgICAgICAgICAgICAgICAgc2hvd0R1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgICAgICAgICAgIHNob3dFYXNpbmc6ICdzd2luZycsIC8vc3dpbmcgYW5kIGxpbmVhciBhcmUgYnVpbHQgaW50byBqUXVlcnlcbiAgICAgICAgICAgICAgICAgICAgb25TaG93bjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBoaWRlTWV0aG9kOiAnZmFkZU91dCcsXG4gICAgICAgICAgICAgICAgICAgIGhpZGVEdXJhdGlvbjogMTAwMCxcbiAgICAgICAgICAgICAgICAgICAgaGlkZUVhc2luZzogJ3N3aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgb25IaWRkZW46IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VNZXRob2Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZUR1cmF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VFYXNpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZU9uSG92ZXI6IHRydWUsXG5cbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kZWRUaW1lT3V0OiAxMDAwLFxuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3Nlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICd0b2FzdC1lcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvOiAndG9hc3QtaW5mbycsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiAndG9hc3Qtc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuaW5nOiAndG9hc3Qtd2FybmluZydcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzOiAndG9hc3QtaW5mbycsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uQ2xhc3M6ICd0b2FzdC10b3AtcmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICB0aW1lT3V0OiA1MDAwLCAvLyBTZXQgdGltZU91dCBhbmQgZXh0ZW5kZWRUaW1lT3V0IHRvIDAgdG8gbWFrZSBpdCBzdGlja3lcbiAgICAgICAgICAgICAgICAgICAgdGl0bGVDbGFzczogJ3RvYXN0LXRpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUNsYXNzOiAndG9hc3QtbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgICAgIGVzY2FwZUh0bWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6ICdib2R5JyxcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VIdG1sOiAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCI+JnRpbWVzOzwvYnV0dG9uPicsXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlQ2xhc3M6ICd0b2FzdC1jbG9zZS1idXR0b24nLFxuICAgICAgICAgICAgICAgICAgICBuZXdlc3RPblRvcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudER1cGxpY2F0ZXM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0JhcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQ2xhc3M6ICd0b2FzdC1wcm9ncmVzcycsXG4gICAgICAgICAgICAgICAgICAgIHJ0bDogZmFsc2VcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBwdWJsaXNoKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxpc3RlbmVyKSB7IHJldHVybjsgfVxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKGFyZ3MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBub3RpZnkobWFwKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBnZXRPcHRpb25zKCk7XG4gICAgICAgICAgICAgICAgdmFyIGljb25DbGFzcyA9IG1hcC5pY29uQ2xhc3MgfHwgb3B0aW9ucy5pY29uQ2xhc3M7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChtYXAub3B0aW9uc092ZXJyaWRlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKG9wdGlvbnMsIG1hcC5vcHRpb25zT3ZlcnJpZGUpO1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3MgPSBtYXAub3B0aW9uc092ZXJyaWRlLmljb25DbGFzcyB8fCBpY29uQ2xhc3M7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZEV4aXQob3B0aW9ucywgbWFwKSkgeyByZXR1cm47IH1cblxuICAgICAgICAgICAgICAgIHRvYXN0SWQrKztcblxuICAgICAgICAgICAgICAgICRjb250YWluZXIgPSBnZXRDb250YWluZXIob3B0aW9ucywgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJ2YWxJZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyICR0b2FzdEVsZW1lbnQgPSAkKCc8ZGl2Lz4nKTtcbiAgICAgICAgICAgICAgICB2YXIgJHRpdGxlRWxlbWVudCA9ICQoJzxkaXYvPicpO1xuICAgICAgICAgICAgICAgIHZhciAkbWVzc2FnZUVsZW1lbnQgPSAkKCc8ZGl2Lz4nKTtcbiAgICAgICAgICAgICAgICB2YXIgJHByb2dyZXNzRWxlbWVudCA9ICQoJzxkaXYvPicpO1xuICAgICAgICAgICAgICAgIHZhciAkY2xvc2VFbGVtZW50ID0gJChvcHRpb25zLmNsb3NlSHRtbCk7XG4gICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzQmFyID0ge1xuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbElkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBoaWRlRXRhOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtYXhIaWRlVGltZTogbnVsbFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdElkOiB0b2FzdElkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogJ3Zpc2libGUnLFxuICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIG1hcDogbWFwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHBlcnNvbmFsaXplVG9hc3QoKTtcblxuICAgICAgICAgICAgICAgIGRpc3BsYXlUb2FzdCgpO1xuXG4gICAgICAgICAgICAgICAgaGFuZGxlRXZlbnRzKCk7XG5cbiAgICAgICAgICAgICAgICBwdWJsaXNoKHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRlYnVnICYmIGNvbnNvbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiAkdG9hc3RFbGVtZW50O1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZXNjYXBlSHRtbChzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzb3VyY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8mL2csICcmYW1wOycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCAnJiMzOTsnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwZXJzb25hbGl6ZVRvYXN0KCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRJY29uKCk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpdGxlKCk7XG4gICAgICAgICAgICAgICAgICAgIHNldE1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0Q2xvc2VCdXR0b24oKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0UHJvZ3Jlc3NCYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0UlRMKCk7XG4gICAgICAgICAgICAgICAgICAgIHNldFNlcXVlbmNlKCk7XG4gICAgICAgICAgICAgICAgICAgIHNldEFyaWEoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRBcmlhKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJpYVZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWFwLmljb25DbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndG9hc3Qtc3VjY2Vzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0b2FzdC1pbmZvJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhVmFsdWUgPSAgJ3BvbGl0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWFWYWx1ZSA9ICdhc3NlcnRpdmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQuYXR0cignYXJpYS1saXZlJywgYXJpYVZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVFdmVudHMoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNsb3NlT25Ib3Zlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5ob3ZlcihzdGlja0Fyb3VuZCwgZGVsYXllZEhpZGVUb2FzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMub25jbGljayAmJiBvcHRpb25zLnRhcFRvRGlzbWlzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5jbGljayhoaWRlVG9hc3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2xvc2VCdXR0b24gJiYgJGNsb3NlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNsb3NlRWxlbWVudC5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY2FuY2VsQnViYmxlICE9PSB1bmRlZmluZWQgJiYgZXZlbnQuY2FuY2VsQnViYmxlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25DbG9zZUNsaWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMub25DbG9zZUNsaWNrKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlVG9hc3QodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uY2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vbmNsaWNrKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlVG9hc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZGlzcGxheVRvYXN0KCkge1xuICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50W29wdGlvbnMuc2hvd01ldGhvZF0oXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZHVyYXRpb246IG9wdGlvbnMuc2hvd0R1cmF0aW9uLCBlYXNpbmc6IG9wdGlvbnMuc2hvd0Vhc2luZywgY29tcGxldGU6IG9wdGlvbnMub25TaG93bn1cbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50aW1lT3V0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWxJZCA9IHNldFRpbWVvdXQoaGlkZVRvYXN0LCBvcHRpb25zLnRpbWVPdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXIubWF4SGlkZVRpbWUgPSBwYXJzZUZsb2F0KG9wdGlvbnMudGltZU91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0Jhci5oaWRlRXRhID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBwcm9ncmVzc0Jhci5tYXhIaWRlVGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnByb2dyZXNzQmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXIuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKHVwZGF0ZVByb2dyZXNzLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRJY29uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFwLmljb25DbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5hZGRDbGFzcyhvcHRpb25zLnRvYXN0Q2xhc3MpLmFkZENsYXNzKGljb25DbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRTZXF1ZW5jZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubmV3ZXN0T25Ub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250YWluZXIucHJlcGVuZCgkdG9hc3RFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250YWluZXIuYXBwZW5kKCR0b2FzdEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0VGl0bGUoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXAudGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWZmaXggPSBtYXAudGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lc2NhcGVIdG1sKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VmZml4ID0gZXNjYXBlSHRtbChtYXAudGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJHRpdGxlRWxlbWVudC5hcHBlbmQoc3VmZml4KS5hZGRDbGFzcyhvcHRpb25zLnRpdGxlQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5hcHBlbmQoJHRpdGxlRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRNZXNzYWdlKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFwLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWZmaXggPSBtYXAubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVzY2FwZUh0bWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWZmaXggPSBlc2NhcGVIdG1sKG1hcC5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlRWxlbWVudC5hcHBlbmQoc3VmZml4KS5hZGRDbGFzcyhvcHRpb25zLm1lc3NhZ2VDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LmFwcGVuZCgkbWVzc2FnZUVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0Q2xvc2VCdXR0b24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNsb3NlQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY2xvc2VFbGVtZW50LmFkZENsYXNzKG9wdGlvbnMuY2xvc2VDbGFzcykuYXR0cigncm9sZScsICdidXR0b24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQucHJlcGVuZCgkY2xvc2VFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldFByb2dyZXNzQmFyKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wcm9ncmVzc0Jhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHByb2dyZXNzRWxlbWVudC5hZGRDbGFzcyhvcHRpb25zLnByb2dyZXNzQ2xhc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5wcmVwZW5kKCRwcm9ncmVzc0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0UlRMKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5ydGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQuYWRkQ2xhc3MoJ3J0bCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2hvdWxkRXhpdChvcHRpb25zLCBtYXApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucHJldmVudER1cGxpY2F0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXAubWVzc2FnZSA9PT0gcHJldmlvdXNUb2FzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1RvYXN0ID0gbWFwLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhpZGVUb2FzdChvdmVycmlkZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWV0aG9kID0gb3ZlcnJpZGUgJiYgb3B0aW9ucy5jbG9zZU1ldGhvZCAhPT0gZmFsc2UgPyBvcHRpb25zLmNsb3NlTWV0aG9kIDogb3B0aW9ucy5oaWRlTWV0aG9kO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBvdmVycmlkZSAmJiBvcHRpb25zLmNsb3NlRHVyYXRpb24gIT09IGZhbHNlID9cbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY2xvc2VEdXJhdGlvbiA6IG9wdGlvbnMuaGlkZUR1cmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWFzaW5nID0gb3ZlcnJpZGUgJiYgb3B0aW9ucy5jbG9zZUVhc2luZyAhPT0gZmFsc2UgPyBvcHRpb25zLmNsb3NlRWFzaW5nIDogb3B0aW9ucy5oaWRlRWFzaW5nO1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnOmZvY3VzJywgJHRvYXN0RWxlbWVudCkubGVuZ3RoICYmICFvdmVycmlkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChwcm9ncmVzc0Jhci5pbnRlcnZhbElkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0b2FzdEVsZW1lbnRbbWV0aG9kXSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2luZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVG9hc3QoJHRvYXN0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGludGVydmFsSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uSGlkZGVuICYmIHJlc3BvbnNlLnN0YXRlICE9PSAnaGlkZGVuJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLm9uSGlkZGVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXRlID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZW5kVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGlzaChyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGF5ZWRIaWRlVG9hc3QoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnRpbWVPdXQgPiAwIHx8IG9wdGlvbnMuZXh0ZW5kZWRUaW1lT3V0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWxJZCA9IHNldFRpbWVvdXQoaGlkZVRvYXN0LCBvcHRpb25zLmV4dGVuZGVkVGltZU91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0Jhci5tYXhIaWRlVGltZSA9IHBhcnNlRmxvYXQob3B0aW9ucy5leHRlbmRlZFRpbWVPdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXIuaGlkZUV0YSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgcHJvZ3Jlc3NCYXIubWF4SGlkZVRpbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdGlja0Fyb3VuZCgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGludGVydmFsSWQpO1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0Jhci5oaWRlRXRhID0gMDtcbiAgICAgICAgICAgICAgICAgICAgJHRvYXN0RWxlbWVudC5zdG9wKHRydWUsIHRydWUpW29wdGlvbnMuc2hvd01ldGhvZF0oXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZHVyYXRpb246IG9wdGlvbnMuc2hvd0R1cmF0aW9uLCBlYXNpbmc6IG9wdGlvbnMuc2hvd0Vhc2luZ31cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcygpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSAoKHByb2dyZXNzQmFyLmhpZGVFdGEgLSAobmV3IERhdGUoKS5nZXRUaW1lKCkpKSAvIHByb2dyZXNzQmFyLm1heEhpZGVUaW1lKSAqIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgJHByb2dyZXNzRWxlbWVudC53aWR0aChwZXJjZW50YWdlICsgJyUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE9wdGlvbnMoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHt9LCBnZXREZWZhdWx0cygpLCB0b2FzdHIub3B0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZVRvYXN0KCR0b2FzdEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoISRjb250YWluZXIpIHsgJGNvbnRhaW5lciA9IGdldENvbnRhaW5lcigpOyB9XG4gICAgICAgICAgICAgICAgaWYgKCR0b2FzdEVsZW1lbnQuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkdG9hc3RFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICR0b2FzdEVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICgkY29udGFpbmVyLmNoaWxkcmVuKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICRjb250YWluZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzVG9hc3QgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pKCk7XG4gICAgfSk7XG59KHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSA6IGZ1bmN0aW9uIChkZXBzLCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7IC8vTm9kZVxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy50b2FzdHIgPSBmYWN0b3J5KHdpbmRvdy5qUXVlcnkpO1xuICAgIH1cbn0pKTtcbiIsInZhciB0ZW1wbGF0ZVN5c3RlbSA9IHJlcXVpcmUoJy4uL3NyYy9qcy9iaW5kaW5ncy9jaG9vc2UtdGVtcGxhdGUuanMnKTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbihldmVudCkge1xudGVtcGxhdGVTeXN0ZW0uYWRkVGVtcGxhdGUoXCJhcnJheVwiLCBcIjwhLS0ga28gZm9yZWFjaDogJGRhdGEgLS0+PCEtLSBrbyBibG9jazogJGRhdGEgLS0+PCEtLSAva28gLS0+PCEtLSAva28gLS0+XCIpO1xudGVtcGxhdGVTeXN0ZW0uYWRkVGVtcGxhdGUoXCJibG9jay1zaG93XCIsIFwiPCEtLSBrbyBibG9jazogJGRhdGEsIHNjcm9sbEludG9WaWV3OiAkcm9vdC5zZWxlY3RlZEJsb2NrKCkgPT09ICRkYXRhIC0tPjwhLS0gL2tvIC0tPlwiKTtcbnRlbXBsYXRlU3lzdGVtLmFkZFRlbXBsYXRlKFwiYmxvY2std3lzaXd5Z1wiLCBcIjxkaXYgY2xhc3M9XFx4MjJlZGl0YWJsZSBibG9ja1xceDIyIGRhdGEtZHJvcC1jb250ZW50PVxceDIyRHJvcCBoZXJlXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyAnZGF0YS1kcm9wLWNvbnRlbnQnOiAkcm9vdC50KCdEcm9wIGhlcmUnKSB9LCBjbGljazogZnVuY3Rpb24ob2JqLCBldnQpIHsgJHJvb3Quc2VsZWN0QmxvY2sob2JqKTsgcmV0dXJuIHRydWUgfSwgY2xpY2tCdWJibGU6IGZhbHNlLCBjc3M6IHsgc2VsZWN0ZWQ6ICRyb290LnNlbGVjdGVkQmxvY2soKSA9PT0gJGRhdGEgfSwgc2Nyb2xsSW50b1ZpZXc6ICRyb290LnNlbGVjdGVkQmxvY2soKSA9PT0gJGRhdGFcXHgyMj4gIDxkaXYgY2xhc3M9XFx4MjJtby1ibG9ja3NlbGVjdGlvbmhlbHBlclxceDIyPjwvZGl2PiAgPGRpdiBjbGFzcz1cXHgyMnRvb2xzXFx4MjIgZGF0YS1iaW5kPVxceDIydG9vbHRpcHM6IHt9XFx4MjI+ICAgIDwhLS0ga28gaWY6IHR5cGVvZiAkaW5kZXggIT0gJ3VuZGVmaW5lZCcgLS0+ICAgIDxkaXYgdGl0bGU9XFx4MjJEcmFnIHRoaXMgaGFuZGxlIHRvIG1vdmUgdGhlIGJsb2NrXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnRHJhZyB0aGlzIGhhbmRsZSB0byBtb3ZlIHRoZSBibG9jaycpIH1cXHgyMiBjbGFzcz1cXHgyMnRvb2wgaGFuZGxlXFx4MjI+PGkgY2xhc3M9XFx4MjJmYSBmYS1mdyBmYS1zb3J0XFx4MjI+PC9pPjwvZGl2PiAgICA8IS0tIGtvIGlmOiAkaW5kZXgoKSA+IDAgLS0+ICAgIDxkaXYgdGl0bGU9XFx4MjJNb3ZlIHRoaXMgYmxvY2sgdXBzaWRlXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnTW92ZSB0aGlzIGJsb2NrIHVwc2lkZScpIH1cXHgyMiBjbGFzcz1cXHgyMnRvb2wgbW92ZXVwXFx4MjI+PGkgY2xhc3M9XFx4MjJmYSBmYS1mdyBmYS1zb3J0LWFzY1xceDIyIGRhdGEtYmluZD0nY2xpY2s6ICRyb290Lm1vdmVCbG9jay5iaW5kKCRlbGVtZW50LCAkaW5kZXgsICRwYXJlbnQsIHRydWUpJz48L2k+PC9kaXY+ICAgIDwhLS0gL2tvIC0tPiAgICA8IS0tIGtvIGlmOiAkaW5kZXgoKSA8ICRwYXJlbnQuYmxvY2tzKCkubGVuZ3RoIC0xIC0tPiAgICA8ZGl2IHRpdGxlPVxceDIyTW92ZSB0aGlzIGJsb2NrIGRvd25zaWRlXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnTW92ZSB0aGlzIGJsb2NrIGRvd25zaWRlJykgfVxceDIyIGNsYXNzPVxceDIydG9vbCBtb3ZlZG93blxceDIyPjxpIGNsYXNzPVxceDIyZmEgZmEtZncgZmEtc29ydC1kZXNjXFx4MjIgZGF0YS1iaW5kPSdjbGljazogJHJvb3QubW92ZUJsb2NrLmJpbmQoJGVsZW1lbnQsICRpbmRleCwgJHBhcmVudCwgZmFsc2UpJz48L2k+PC9kaXY+ICAgIDwhLS0gL2tvIC0tPiAgICA8ZGl2IHRpdGxlPVxceDIyRGVsZXRlIGJsb2NrXFx4MjIgY2xhc3M9XFx4MjJ0b29sIGRlbGV0ZVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ0RlbGV0ZSBibG9jaycpIH0sIGNsaWNrOiAkcm9vdC5yZW1vdmVCbG9jay5iaW5kKCRlbGVtZW50LCAkcmF3RGF0YSwgJHBhcmVudClcXHgyMj48aSBjbGFzcz1cXHgyMmZhIGZhLWZ3IGZhLXRyYXNoLW9cXHgyMj48L2k+PC9kaXY+ICAgIDxkaXYgdGl0bGU9XFx4MjJEdXBsaWNhdGUgYmxvY2tcXHgyMiBjbGFzcz1cXHgyMnRvb2wgY2xvbmVcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdEdXBsaWNhdGUgYmxvY2snKSB9LCBjbGljazogJHJvb3QuZHVwbGljYXRlQmxvY2suYmluZCgkZWxlbWVudCwgJGluZGV4LCAkcGFyZW50KVxceDIyPjxpIGNsYXNzPVxceDIyZmEgZmEtZncgZmEtZmlsZXMtb1xceDIyPjwvaT48L2Rpdj4gICAgPCEtLSAva28gLS0+ICAgIDwhLS0ga28gaWY6IHR5cGVvZiAkZGF0YS5fbmV4dFZhcmlhbnQgIT0gJ3VuZGVmaW5lZCcgLS0+PGRpdiB0aXRsZT1cXHgyMlN3aXRjaCBibG9jayB2YXJpYW50XFx4MjIgY2xhc3M9XFx4MjJ0b29sIHZhcmlhbnRcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdTd2l0Y2ggYmxvY2sgdmFyaWFudCcpIH0sIGNsaWNrOiAkZGF0YS5fbmV4dFZhcmlhbnRcXHgyMj48aSBjbGFzcz1cXHgyMmZhIGZhLWZ3IGZhLW1hZ2ljXFx4MjI+PC9pPjwvZGl2PjwhLS0gL2tvIC0tPiAgPC9kaXY+ICA8IS0tIGtvIGJsb2NrOiAkZGF0YSAtLT48IS0tIC9rbyAtLT48L2Rpdj5cIik7XG50ZW1wbGF0ZVN5c3RlbS5hZGRUZW1wbGF0ZShcImJsb2Nrcy1zaG93XCIsIFwiPCEtLSBrbyB0ZW1wbGF0ZTogeyBuYW1lOiAnYmxvY2stc2hvdycsIGZvcmVhY2g6IGJsb2NrcyB9IC0tPjwhLS0gL2tvIC0tPlwiKTtcbnRlbXBsYXRlU3lzdGVtLmFkZFRlbXBsYXRlKFwiYmxvY2tzLXd5c2l3eWdcIiwgXCI8ZGl2IGNsYXNzPVxceDIyc29ydGFibGUtYmxvY2tzLWVkaXRcXHgyMiBkYXRhLWRyb3AtY29udGVudD1cXHgyMkRyb3AgaGVyZVxceDIyIGRhdGEtZW1wdHktY29udGVudD1cXHgyMkRyb3AgaGVyZSBibG9ja3MgZnJvbSB0aGUgQmxvY2tzIHRhYlxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgJ2RhdGEtZHJvcC1jb250ZW50JzogJHJvb3QudCgnRHJvcCBoZXJlJyksICdkYXRhLWVtcHR5LWNvbnRlbnQnOiAkcm9vdC50KCdEcm9wIGhlcmUgYmxvY2tzIGZyb20gdGhlICZxdW90O0Jsb2NrcyZxdW90OyB0YWInKSB9LCBjc3M6IHsgJ2VtcHR5Jzoga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShibG9ja3MpLmxlbmd0aCA9PSAwIH0sIGV4dHNvcnRhYmxlOiB7IGNvbm5lY3RDbGFzczogJ3NvcnRhYmxlLWJsb2Nrcy1lZGl0JywgdGVtcGxhdGU6ICdibG9jay13eXNpd3lnJywgZGF0YTogYmxvY2tzLCBkcmFnZ2luZzogJHJvb3QuZHJhZ2dpbmcsIGJlZm9yZU1vdmU6ICRyb290LnN0YXJ0TXVsdGlwbGUsIGFmdGVyTW92ZTogJHJvb3Quc3RvcE11bHRpcGxlLCBvcHRpb25zOiB7IGhhbmRsZTogJy5oYW5kbGUnLCBwbGFjZWhvbGRlcjogJHJvb3QucGxhY2Vob2xkZXJIZWxwZXIgfSB9XFx4MjI+PC9kaXY+XCIpO1xudGVtcGxhdGVTeXN0ZW0uYWRkVGVtcGxhdGUoXCJjdXN0b21zdHlsZVwiLCBcIjxkaXYgY2xhc3M9XFx4MjJjdXN0b21TdHlsZUhlbHBcXHgyMj48L2Rpdj5cIik7XG50ZW1wbGF0ZVN5c3RlbS5hZGRUZW1wbGF0ZShcImVtcHR5XCIsIFwiXCIpO1xudGVtcGxhdGVTeXN0ZW0uYWRkVGVtcGxhdGUoXCJlcnJvclwiLCBcIls8ZGl2IHN0eWxlPVxceDIyYmFja2dyb3VuZC1jb2xvcjogI2ZmZjBmMFxceDIyIGRhdGEtYmluZD1cXHgyMnRleHQ6IGtvLnRvSlMoJGRhdGEpXFx4MjI+PC9kaXY+XVwiKTtcbnRlbXBsYXRlU3lzdGVtLmFkZFRlbXBsYXRlKFwiZ2FsbGVyeS1pbWFnZXNcIiwgXCI8ZGl2IGRhdGEtYmluZD1cXHgyMmZvcmVhY2g6IGl0ZW1zLmN1cnJlbnRQYWdlRGF0YVxceDIyPiAgPGRpdiBjbGFzcz1cXHgyMmRyYWdnYWJsZS1pdGVtXFx4MjIgZGF0YS1iaW5kPVxceDIyaWY6IHR5cGVvZiB0aHVtYm5haWxVcmwgIT0gJ3VuZGVmaW5lZCdcXHgyMj4gICAgPGRpdiBjbGFzcz1cXHgyMmRyYWdnYWJsZSBpbWFnZVxceDIyIGRhdGEtYmluZD1cXHgyMmNsaWNrOiAkcm9vdC5hZGRJbWFnZSwgZXh0ZHJhZ2dhYmxlOiB7IGRhdGE6ICRkYXRhLCBkcm9wQ29udGFpbmVyOiAnI21haW4td3lzaXd5Zy1hcmVhJywgZHJhZ2dpbmc6ICRyb290LmRyYWdnaW5nSW1hZ2UsICdvcHRpb25zJzogeyAnYXBwZW5kVG8nOiAnLmNvbnRhaW5lci1tYWluJyB9IH0sIHN0eWxlOiB7IGJhY2tncm91bmRJbWFnZTogJ3VybChcXFxcJycgKyB0aHVtYm5haWxVcmwgKyAnXFxcXCcpJyB9XFx4MjI+ICAgICAgPGltZyB0aXRsZT1cXHgyMkRyYWcgdGhpcyBpbWFnZSBhbmQgZHJvcCBpdCBvbiBhbnkgdGVtcGxhdGUgaW1hZ2UgcGxhY2Vob2xkZXJcXHgyMiBzdHlsZT1cXHgyMmRpc3BsYXk6IGJsb2NrO1xceDIyIGRhdGEtYmluZD1cXHgyMnRvb2x0aXBzOiB7fSwgYXR0cjogeyBzcmM6IHRodW1ibmFpbFVybCwgJ3RpdGxlJzogJHJvb3QudCgnRHJhZyB0aGlzIGltYWdlIGFuZCBkcm9wIGl0IG9uIGFueSB0ZW1wbGF0ZSBpbWFnZSBwbGFjZWhvbGRlcicpIH1cXHgyMi8+ICAgIDwvZGl2PiAgPC9kaXY+PC9kaXY+PCEtLSBrbyBpZjogaXRlbXMucGFnZUNvdW50KCkgPiAxIC0tPjxkaXYgY2xhc3M9XFx4MjJnYWxsZXJ5UGFnZXJcXHgyMiBkYXRhLWJpbmQ9XFx4MjJidXR0b25zZXQ6IHt9XFx4MjI+ICA8YSBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyY2xpY2s6IGl0ZW1zLm1vdmVGaXJzdCwgYnV0dG9uOiB7IGRpc2FibGVkOiBpdGVtcy5jdXJyZW50UGFnZSgpID09IDEsIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1mYXN0LWJhY2t3YXJkJyB9LCB0ZXh0OiBmYWxzZSB9XFx4MjI+Rmlyc3Q8L2E+ICA8YSBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyY2xpY2s6IGl0ZW1zLm1vdmVQcmV2aW91cywgYnV0dG9uOiB7IGRpc2FibGVkOiBpdGVtcy5jdXJyZW50UGFnZSgpID09IDEsIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1iYWNrd2FyZCcgfSwgdGV4dDogZmFsc2UgfVxceDIyPlByZXZpb3VzPC9hPiAgPHNwYW4gZGF0YS1iaW5kPVxceDIyYnV0dG9uOiB7IGRpc2FibGVkOiB0cnVlLCB0ZXh0OiB0cnVlLCBsYWJlbDogJyAnK2l0ZW1zLmN1cnJlbnRQYWdlKCkrJyBvZiAnK2l0ZW1zLnBhZ2VDb3VudCgpKycgJyB9XFx4MjI+IFggb2YgWSA8L3NwYW4+ICA8YSBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyY2xpY2s6IGl0ZW1zLm1vdmVOZXh0LCBidXR0b246IHsgZGlzYWJsZWQ6IGl0ZW1zLmN1cnJlbnRQYWdlKCkgPT0gaXRlbXMucGFnZUNvdW50KCksIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1mb3J3YXJkJyB9LCB0ZXh0OiBmYWxzZSB9XFx4MjI+TmV4dDwvYT4gIDxhIGhyZWY9XFx4MjJqYXZhc2NyaXB0OnZvaWQoMClcXHgyMiBkYXRhLWJpbmQ9XFx4MjJjbGljazogaXRlbXMubW92ZUxhc3QsIGJ1dHRvbjogeyBkaXNhYmxlZDogaXRlbXMuY3VycmVudFBhZ2UoKSA9PSBpdGVtcy5wYWdlQ291bnQoKSwgaWNvbnM6IHsgcHJpbWFyeTogJ2ZhIGZhLWZhc3QtZm9yd2FyZCcgfSwgdGV4dDogZmFsc2UgfVxceDIyPkxhc3Q8L2E+PC9kaXY+PCEtLSAva28gLS0+XCIpO1xudGVtcGxhdGVTeXN0ZW0uYWRkVGVtcGxhdGUoXCJpbWctd3lzaXd5Z1wiLCBcIjx0YWJsZSB0YWJmb2N1cz1cXHgyMjBcXHgyMiBjZWxsc3BhY2luZz1cXHgyMjBcXHgyMiBjZWxscGFkZGluZz1cXHgyMjBcXHgyMiBkYXRhLWRyb3AtY29udGVudD1cXHgyMkRyb3AgaGVyZVxceDIyIGRhdGEtYmluZD1cXHgyMnN0eWxlOiBfc3R5bGViaW5kLCBjbGljazogZnVuY3Rpb24ob2JqLCBldnQpIHsgJHJvb3Quc2VsZWN0SXRlbShfaXRlbSwgX2RhdGEpOyByZXR1cm4gdHJ1ZTsgfSwgY2xpY2tCdWJibGU6IGZhbHNlLCBmdWRyb3BwYWJsZTogeyBhY3RpdmVDbGFzczogJ3VpLXN0YXRlLWhpZ2hsaWdodCcsIGhvdmVyQ2xhc3M6ICd1aS1zdGF0ZS1kcmFnaG92ZXInIH0sIGRyb3BwYWJsZTogeyBvcHRpb25zOiB7IGFjY2VwdDogJy5pbWFnZScsIGFjdGl2ZUNsYXNzOiAndWktc3RhdGUtaGlnaGxpZ2h0JywgaG92ZXJDbGFzczogJ3VpLXN0YXRlLWRyYWdob3ZlcicgfSwgZGF0YTogX3NyYywgZHJhZ2dlZDogJHJvb3QuZmlsZVRvSW1hZ2UgfSwgY3NzOiB7IHNlbGVjdGVkaXRlbTogJHJvb3QuaXNTZWxlY3RlZEl0ZW0oX2l0ZW0pIH0sIHNjcm9sbEludG9WaWV3OiAkcm9vdC5pc1NlbGVjdGVkSXRlbShfaXRlbSksIGF0dHI6IHsgJ2RhdGEtZHJvcC1jb250ZW50JzogJHJvb3QudCgnRHJvcCBoZXJlJyksIHdpZHRoOiBfd2lkdGgsIGhlaWdodDogX2hlaWdodCwgYWxpZ246IF9hbGlnbiB9XFx4MjIgIGNsYXNzPVxceDIyaW1nLXd5c2l3eWcgc2VsZWN0YWJsZS1pbWdcXHgyMiBzdHlsZT1cXHgyMmRpc3BsYXk6IHRhYmxlO1xceDIyPjx0cj48dGQgY2xhc3M9XFx4MjJ1cGxvYWR6b25lXFx4MjI+ICA8ZGl2IGNsYXNzPVxceDIybW8taW1nc2VsZWN0aW9uaGVscGVyXFx4MjI+PC9kaXY+ICA8ZGl2IGNsYXNzPVxceDIybW8tdXBsb2Fkem9uZVxceDIyPjwvZGl2PiAgPGRpdiBjbGFzcz1cXHgyMmltZy1zaXplXFx4MjIgZGF0YS1iaW5kPVxceDIydGV4dDogX3NpemVcXHgyMj5zaXplPC9kaXY+ICA8ZGl2IGNsYXNzPVxceDIybWlkdG9vbHNcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ0b29sdGlwczoge31cXHgyMj4gICAgPCEtLSBrbyBpZjogX3NyYygpICE9ICcnIC0tPiAgICA8ZGl2IHRpdGxlPVxceDIyUmVtb3ZlIGltYWdlXFx4MjIgY2xhc3M9XFx4MjJ0b29sIGRlbGV0ZVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1JlbW92ZSBpbWFnZScpIH0sIGNsaWNrOiBfc3JjLmJpbmQoX3NyYywgJycpLCBjbGlja0J1YmJsZTogZmFsc2VcXHgyMj48aSBjbGFzcz1cXHgyMmZhIGZhLWZ3IGZhLXRyYXNoLW9cXHgyMj48L2k+PC9kaXY+ICAgIDxkaXYgdGl0bGU9XFx4MjJPcGVuIHRoZSBpbWFnZSBlZGl0aW5nIHRvb2xcXHgyMiBjbGFzcz1cXHgyMnRvb2wgZWRpdFxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ09wZW4gdGhlIGltYWdlIGVkaXRpbmcgdG9vbCcpIH0sIGNsaWNrOiAkcm9vdC5lZGl0SW1hZ2UuYmluZCgkZWxlbWVudCwgX3NyYyksIGNsaWNrQnViYmxlOiBmYWxzZVxceDIyPjxpIGNsYXNzPVxceDIyZmEgZmEtZncgZmEtcGVuY2lsXFx4MjI+PC9pPjwvZGl2PiAgICA8IS0tIC9rbyAtLT4gICAgPCEtLSBrbyBpZjogX3NyYygpID09ICcnIC0tPiAgICA8ZGl2IHRpdGxlPVxceDIyVXBsb2FkIGEgbmV3IGltYWdlXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnVXBsb2FkIGEgbmV3IGltYWdlJykgfVxceDIyIGNsYXNzPVxceDIydG9vbCB1cGxvYWRcXHgyMiBzdHlsZT1cXHgyMnBvc2l0aW9uOiByZWxhdGl2ZTsgb3ZlcmZsb3c6IGhpZGRlbjtcXHgyMj48aSBjbGFzcz1cXHgyMmZhIGZhLWZ3IGZhLXVwbG9hZFxceDIyPjwvaT4gICAgICA8aW5wdXQgY2xhc3M9XFx4MjJmaWxldXBsb2FkIG5vZmlsZVxceDIyIHR5cGU9XFx4MjJmaWxlXFx4MjIgbmFtZT1cXHgyMmZpbGVzW11cXHgyMiBkYXRhLWJpbmQ9XFx4MjJmaWxldXBsb2FkOiB7IGRhdGE6IF9zcmMsIG9uZXJyb3I6ICRyb290Lm5vdGlmaWVyLmVycm9yLCBvbmZpbGU6ICRyb290LmxvYWRJbWFnZSwgY2FudmFzUHJldmlldzogdHJ1ZSB9XFx4MjIgc3R5bGU9XFx4MjJ6LWluZGV4OiAyMDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHJpZ2h0OiAwOyBib3R0b206IDA7IG1pbi13aWR0aDogMTAwJTsgbWluLWhlaWdodDogMTAwJTsgZm9udC1zaXplOiA5OTlweDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZpbHRlcjogYWxwaGEob3BhY2l0eT0wKTsgb3BhY2l0eTogMDsgb3V0bGluZTogbm9uZTsgY3Vyc29yOiBpbmhlcml0OyBkaXNwbGF5OiBibG9ja1xceDIyPiAgICA8L2Rpdj4gICAgPCEtLSAva28gLS0+ICA8L2Rpdj4gIDwhLS0ga28gdGVtcGxhdGU6IF90ZW1wbGF0ZSAtLT48IS0tIC9rbyAtLT4gIDwhLS0ga28gaWY6IF9zcmMoKSA9PSAnJyAtLT4gICAgPCEtLSAgICA8aW1nIHN0eWxlPVxceDIyZGlzcGxheTogYmxvY2s7XFx4MjIgY2xhc3M9XFx4MjJpbWdwbGFjZWhvbGRlclxceDIyIHdpZHRoPVxceDIyMjAwXFx4MjIgc3JjPVxceDIyXFx4MjIgYWx0PVxceDIySW5zZXJ0IGFuIGltYWdlIGhlcmVcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ3eXNpd3lnU3JjOiB7IHNyYzogX3NyYy5wcmVsb2FkZWQsIHBsYWNlaG9sZGVyOiBfcGxhY2Vob2xkZXJzcmMsIHdpZHRoOiBfd2lkdGgsIGhlaWdodDogX2hlaWdodCwgbWV0aG9kOiBfbWV0aG9kIH1cXHgyMiAvPiAgICAtLT4gICAgPHNwYW4gY2xhc3M9XFx4MjJmaWxldXBsb2FkdGV4dFxceDIyIHN0eWxlPVxceDIydGV4dC1hbGlnbjogY2VudGVyOyBkaXNwbGF5OiAtbXMtZmxleGJveDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZmxleC1hbGlnbjogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgcGFkZGluZzogMWVtOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IGJvdHRvbTogMDtcXHgyMj48c3BhbiBjbGFzcz1cXHgyMnRleHRNaWRkbGVcXHgyMiBzdHlsZT1cXHgyMiB0ZXh0LXNoYWRvdzogMXB4IDFweCAwICNGRkZGRkYsIDAgMCAxMHB4ICNGRkZGRkY7IGZvbnQtd2VpZ2h0OiBib2xkO1xceDIyIGRhdGEtYmluZD1cXHgyMnRleHQ6ICRyb290LnQoJ0Ryb3AgYW4gaW1hZ2UgaGVyZScpXFx4MjI+RHJvcCBhbiBpbWFnZSBoZXJlPC9zcGFuPjwvc3Bhbj4gIDwhLS0gL2tvIC0tPiAgPCEtLSBrbyBpZjogX3NyYygpICE9ICcnIC0tPiAgPCEtLSAgICA8aW1nIHN0eWxlPVxceDIyZGlzcGxheTogYmxvY2s7XFx4MjIgd2lkdGg9XFx4MjIyMDBcXHgyMiBzcmM9XFx4MjJcXHgyMiBkYXRhLWJpbmQ9XFx4MjJwcmVsb2FkZXI6IF9zcmMsIHd5c2l3eWdTcmM6IHsgc3JjOiBfc3JjLnByZWxvYWRlZCwgcGxhY2Vob2xkZXI6IF9wbGFjZWhvbGRlcnNyYywgd2lkdGg6IF93aWR0aCwgaGVpZ2h0OiBfaGVpZ2h0LCBtZXRob2Q6IF9tZXRob2QgfVxceDIyIC8+ICAgIC0tPiAgPCEtLSAva28gLS0+ICA8IS0tIHB1bHNhbnRlIHBlciBsYSBjYW5jZWxsYXppb25lIC0tPiAgPGRpdiB0aXRsZT1cXHgyMkRyb3AgYW4gaW1hZ2UgaGVyZSBvciBjbGljayB0aGUgdXBsb2FkIGJ1dHRvblxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ0Ryb3AgYW4gaW1hZ2UgaGVyZSBvciBjbGljayB0aGUgdXBsb2FkIGJ1dHRvbicpIH0sIHRvb2x0aXBzOiB7fVxceDIyIGNsYXNzPVxceDIyd29ya3pvbmVcXHgyMiBzdHlsZT1cXHgyMnBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyByaWdodDogMDsgYm90dG9tOiAwOyBvdmVyZmxvdzogaGlkZGVuO1xceDIyPiAgICA8IS0tIGtvIGlmOiBfc3JjLnByZWxvYWRlZCAmJiBfc3JjKCkgIT0gX3NyYy5wcmVsb2FkZWQoKSAtLT5QUkVMT0FESU5HLi4uLjwhLS0gL2tvIC0tPiAgICA8IS0tIGtvIGlmOiBfc3JjKCkgIT0gJycgLS0+ICAgICAgPGlucHV0IGNsYXNzPVxceDIyZmlsZXVwbG9hZCB3aXRoZmlsZVxceDIyIHR5cGU9XFx4MjJmaWxlXFx4MjIgbmFtZT1cXHgyMmZpbGVzW11cXHgyMiBkYXRhLWJpbmQ9XFx4MjJmaWxldXBsb2FkOiB7IGRhdGE6IF9zcmMsIG9uZXJyb3I6ICRyb290Lm5vdGlmaWVyLmVycm9yLCBvbmZpbGU6ICRyb290LmdhbGxlcnlSZWNlbnQudW5zaGlmdC5iaW5kKCRyb290LmdhbGxlcnlSZWNlbnQpLCBjYW52YXNQcmV2aWV3OiB0cnVlIH1cXHgyMiBzdHlsZT1cXHgyMnotaW5kZXg6IC0yMDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHJpZ2h0OiAwOyBib3R0b206IDA7IG1pbi13aWR0aDogMTAwJTsgbWluLWhlaWdodDogMTAwJTsgZm9udC16aWU6IDk5OXB4OyB0ZXh0LWFsaWduOiByaWdodDsgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTApOyBvcGFjaXR5OiAwOyBvdXRsaW5lOiBub25lOyBjdXJzb3I6IGluaGVyaXQ7IGRpc3BsYXk6IGJsb2NrXFx4MjI+ICAgIDwhLS0gL2tvIC0tPiAgICA8ZGl2IGNsYXNzPVxceDIycHJvZ3Jlc3NcXHgyMiBzdHlsZT1cXHgyMm9wYWNpdHk6IC41OyB3aWR0aDogODAlOyBtYXJnaW4tbGVmdDogMTAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IGJvdHRvbTogMzAlOyBoZWlnaHQ6IDIwcHg7IGJvcmRlcjogMnB4IHNvbGlkIGJsYWNrO1xceDIyPiAgICAgIDxkaXYgY2xhc3M9XFx4MjJwcm9ncmVzcy1iYXIgcHJvZ3Jlc3MtYmFyLXN1Y2Nlc3NcXHgyMiBzdHlsZT1cXHgyMmhlaWdodDogMjBweDsgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7IFxceDIyPjwvZGl2PiAgICA8L2Rpdj4gIDwvZGl2PjwvdGFibGU+XCIpO1xudGVtcGxhdGVTeXN0ZW0uYWRkVGVtcGxhdGUoXCJtYWluXCIsIFwiPGRpdiBjbGFzcz1cXHgyMnRpbnlNQ0UtY2FyZFxceDIyPiAgPGRpdiBjbGFzcz1cXHgyMnRpbnlNQ0UtY2FyZF9fY29udGVudFxceDIyPiAgICA8ZGl2IGNsYXNzPVxceDIydGlueU1DRS1oZWFkZXJcXHgyMj4gICAgICA8c3BhbiBjbGFzcz1cXHgyMnVuZG8tcmVkb1xceDIyIGRhdGEtYmluZD1cXHgyMmJ1dHRvbnNldDogeyB9XFx4MjI+ICAgICAgICA8YSB0aXRsZT1cXHgyMlVuZG8gbGFzdCBvcGVyYXRpb25cXHgyMiBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnVW5kbyBsYXN0IG9wZXJhdGlvbicpIH0sIGNsaWNrOiAkcm9vdC51bmRvLmV4ZWN1dGUsIGNsaWNrQnViYmxlOiBmYWxzZSwgYnV0dG9uOiB7IGRpc2FibGVkOiAhJHJvb3QudW5kby5lbmFibGVkKCksIGljb25zOiB7IHByaW1hcnk6ICdtY2UtaWNvIG1jZS1pLXVuZG8nIH19XFx4MjI+PC9hPiAgICAgICAgPGEgdGl0bGU9XFx4MjJSZWRvIGxhc3Qgb3BlcmF0aW9uXFx4MjIgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dm9pZCgwKVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1JlZG8gbGFzdCBvcGVyYXRpb24nKSB9LCBjbGljazogJHJvb3QucmVkby5leGVjdXRlLCBjbGlja0J1YmJsZTogZmFsc2UsIGJ1dHRvbjogeyBkaXNhYmxlZDogISRyb290LnJlZG8uZW5hYmxlZCgpLCBpY29uczogeyBwcmltYXJ5OiAnbWNlLWljbyBtY2UtaS1yZWRvJyB9fVxceDIyPjwvYT4gICAgICA8L3NwYW4+ICAgIDwvZGl2PiAgICA8ZGl2IGlkPVxceDIybWFpbi1lZGl0LWFyZWFcXHgyMiBkYXRhLWJpbmQ9XFx4MjJjbGljazogZnVuY3Rpb24ob2JqLCBldnQpIHsgJHJvb3Quc2VsZWN0QmxvY2sobnVsbCk7IHJldHVybiB0cnVlOyB9LCBjbGlja0J1YmJsZTogZmFsc2VcXHgyMj4gICAgICA8IS0tIGtvIHdpdGhQcm9wZXJ0aWVzOiB7IHRlbXBsYXRlTW9kZTogJ3d5c2l3eWcnLCB0ZW1wbGF0ZU1vZGVGYWxsYmFjazogJ3Nob3cnIH0gLS0+ICAgICAgPGRpdiBpZD1cXHgyMm1haW4td3lzaXd5Zy1hcmVhXFx4MjIgZGF0YS1iaW5kPVxceDIyd3lzaXd5Z1Njcm9sbGZpeDogdHJ1ZSwgc2Nyb2xsYWJsZTogdHJ1ZSwgZnVkcm9wcGFibGU6IHsgYWN0aXZlOiBkcmFnZ2luZ0ltYWdlIH0sIGNzczogeyBpc2RyYWdnaW5nOiBkcmFnZ2luZywgaXNkcmFnZ2luZ2ltZzogZHJhZ2dpbmdJbWFnZSB9LCBibG9jazogY29udGVudFxceDIyPjwvZGl2PiAgICAgIDwhLS0gL2tvIC0tPiAgICA8L2Rpdj4gIDwvZGl2PjwvZGl2PjxkaXYgaWQ9XFx4MjJwYWdlXFx4MjIgc3R5bGU9XFx4MjJkaXNwbGF5OiBub25lO1xceDIyIGRhdGEtYmluZD1cXHgyMnZpc2libGU6IHRydWUsIGNzczogeyB3aXRoVG9vbGJveDogJHJvb3Quc2hvd1Rvb2xib3gsIHdpdGhQcmV2aWV3RnJhbWU6IHNob3dQcmV2aWV3RnJhbWUgfVxceDIyPiAgPGRpdiBpZD1cXHgyMnRvb2xiYXJcXHgyMiBjbGFzcz1cXHgyMm1vXFx4MjIgZGF0YS1iaW5kPVxceDIydG9vbHRpcHM6IHt9XFx4MjI+ICAgIDwhLS0ga28gaWY6IHR5cGVvZiAkcm9vdC51bmRvICE9ICd1bmRlZmluZWQnIC0tPiAgICAgICAgPCEtLSBrbyBpZjogJHJvb3QuZGVidWcgLS0+ICAgIDxhIGhyZWY9XFx4MjJqYXZhc2NyaXB0OnZvaWQoMClcXHgyMiBkYXRhLWJpbmQ9XFx4MjJjbGljazogJHJvb3QudW5kb1Jlc2V0LCBjbGlja0J1YmJsZTogZmFsc2UsIGJ1dHRvbjogeyBkaXNhYmxlZDogISRyb290LnVuZG8uZW5hYmxlZCgpICYmICEkcm9vdC5yZWRvLmVuYWJsZWQoKSwgbGFiZWw6ICdyZXNldCcsIHRleHQ6IHRydWUgfVxceDIyPlJFU0VUPC9hPiAgICA8IS0tIC9rbyAtLT4gICAgPCEtLSAva28gLS0+ICAgIDxzcGFuPiAgICA8aW5wdXQgaWQ9XFx4MjJzaG93R2FsbGVyeVxceDIyIHR5cGU9XFx4MjJjaGVja2JveFxceDIyIGRhdGEtYmluZD1cXHgyMmNoZWNrZWQ6ICRyb290LnNob3dHYWxsZXJ5LCBidXR0b246IHsgcmVmcmVzaE9uOiAkcm9vdC5zaG93R2FsbGVyeSwgICAgIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1mdyBmYS1waWN0dXJlLW8nLCBzZWNvbmRhcnk6IG51bGwgfSwgdGV4dDogdHJ1ZSwgbGFiZWw6ICRyb290LnQoJ0dhbGxlcnknKSB9XFx4MjI+PGxhYmVsIHRpdGxlPVxceDIyU2hvdyBpbWFnZSBnYWxsZXJ5XFx4MjIgZm9yPVxceDIyc2hvd0dhbGxlcnlcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdTaG93IGltYWdlIGdhbGxlcnknKSB9XFx4MjI+c2hvdyBnYWxsZXJ5PC9sYWJlbD48L2lucHV0PiAgICA8L3NwYW4+ICAgIDxpbnB1dCBpZD1cXHgyMnByZXZpZXdGcmFtZVRvZ2dsZVxceDIyIHR5cGU9XFx4MjJjaGVja2JveFxceDIyIGRhdGEtYmluZD1cXHgyMmNoZWNrZWQ6ICRyb290LnNob3dQcmV2aWV3RnJhbWUsIGJ1dHRvbjogeyByZWZyZXNoT246ICRyb290LnNob3dQcmV2aWV3RnJhbWUsIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1mdyBmYS10YWJsZXQnLCBzZWNvbmRhcnk6IG51bGwgfSwgdGV4dDogZmFsc2UsIGxhYmVsOiAkcm9vdC50KCdQcmV2aWV3JykgfVxceDIyPjxsYWJlbCB0aXRsZT1cXHgyMlNob3cgbGl2ZSBwcmV2aWV3XFx4MjIgZm9yPVxceDIycHJldmlld0ZyYW1lVG9nZ2xlXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnU2hvdyBsaXZlIHByZXZpZXcnKSB9XFx4MjI+UFJFVklFVzwvbGFiZWw+PC9pbnB1dD4gICAgPCEtLSBrbyBpZjogJHJvb3QuZGVidWcgLS0+ICAgIDxhIGhyZWY9XFx4MjJqYXZhc2NyaXB0OnZvaWQoMClcXHgyMiBkYXRhLWJpbmQ9XFx4MjJjbGljazogJHJvb3QuZXhwb3J0LCBjbGlja0J1YmJsZTogZmFsc2UsIGJ1dHRvbjogeyBsYWJlbDogJ2V4cG9ydCcsIHRleHQ6IHRydWUgfVxceDIyPkVYUE9SVDwvYT4gICAgPGlucHV0IHR5cGU9XFx4MjJjaGVja2JveFxceDIyIGRhdGEtYmluZD1cXHgyMmNoZWNrZWQ6ICRyb290LmRlYnVnXFx4MjIgLz4gZGVidWcgICAgPGEgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dm9pZCgwKVxceDIyIGRhdGEtYmluZD1cXHgyMmNsaWNrOiAkcm9vdC5sb2FkRGVmYXVsdEJsb2NrcywgY2xpY2tCdWJibGU6IGZhbHNlLCBidXR0b246IHsgaWNvbnM6IHsgcHJpbWFyeTogJ2ZhIGZhLWZ3IGZhLXVwbG9hZCcgfSwgbGFiZWw6ICdEZWZhdWx0JywgdGV4dDogdHJ1ZSB9XFx4MjI+TE9BRCBCTE9DS1M8L2E+ICAgIFs8YSBpZD1cXHgyMnN1YnNjcmlwdGlvbnNDb3VudFxceDIyIGhyZWY9XFx4MjJqYXZhc2NyaXB0OnZpZXdNb2RlbC5sb29wU3Vic2NyaXB0aW9uc0NvdW50KClcXHgyMj5zdWJzPC9hPl0gICAgPCEtLSAva28gLS0+ICAgIDxzcGFuIGRhdGEtYmluZD1cXHgyMnZpc2libGU6IGZhbHNlXFx4MjI+ICAgIDxpbnB1dCB0eXBlPVxceDIyY2hlY2tib3hcXHgyMiBkYXRhLWJpbmQ9XFx4MjJjaGVja2VkOiAkcm9vdC5zaG93VG9vbGJveFxceDIyIC8+IHRvb2xib3ggICAgPC9zcGFuPiAgICA8ZGl2IGNsYXNzPVxceDIycmlnaHRCdXR0b25zXFx4MjI+ICAgIDwhLS0ga28gaWY6IHR5cGVvZiAkcm9vdC5zYXZlICE9PSAndW5kZWZpbmVkJyAtLT4gICAgPGEgdGl0bGU9XFx4MjJTYXZlIHRlbXBsYXRlXFx4MjIgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dm9pZCgwKVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1NhdmUgdGVtcGxhdGUnKSB9LCBjbGljazogJHJvb3Quc2F2ZS5leGVjdXRlLCBjbGlja0J1YmJsZTogZmFsc2UsIGJ1dHRvbjogeyBkaXNhYmxlZDogISRyb290LnNhdmUuZW5hYmxlZCgpLCBpY29uczogeyBwcmltYXJ5OiAnZmEgZmEtZncgZmEtY2xvdWQtdXBsb2FkJyB9LCBsYWJlbDogJHJvb3QudCgkcm9vdC5zYXZlLm5hbWUpLCB0ZXh0OiB0cnVlIH1cXHgyMj5TQUxWQTwvYT4gICAgPCEtLSAva28gLS0+ICAgIDwhLS0ga28gaWY6IHR5cGVvZiAkcm9vdC50ZXN0ICE9PSAndW5kZWZpbmVkJyAtLT4gICAgPGEgdGl0bGU9XFx4MjJTaG93IHByZXZpZXcgYW5kIHNlbmQgdGVzdFxceDIyIGhyZWY9XFx4MjJqYXZhc2NyaXB0OnZvaWQoMClcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdTaG93IHByZXZpZXcgYW5kIHNlbmQgdGVzdCcpIH0sIGNsaWNrOiAkcm9vdC50ZXN0LmV4ZWN1dGUsIGNsaWNrQnViYmxlOiBmYWxzZSwgYnV0dG9uOiB7IGRpc2FibGVkOiAhJHJvb3QudGVzdC5lbmFibGVkKCksIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1mdyBmYS1wYXBlci1wbGFuZScgfSwgbGFiZWw6ICRyb290LnQoJHJvb3QudGVzdC5uYW1lKSwgdGV4dDogdHJ1ZSB9XFx4MjI+VEVTVDwvYT4gICAgPCEtLSAva28gLS0+ICAgIDwhLS0ga28gaWY6IHR5cGVvZiAkcm9vdC5kb3dubG9hZCAhPT0gJ3VuZGVmaW5lZCcgLS0+ICAgIDxmb3JtIGlkPVxceDIyZG93bmxvYWRGb3JtXFx4MjIgYWN0aW9uPVxceDIyI1xceDIyIG1ldGhvZD1cXHgyMlBPU1RcXHgyMj4gICAgPGlucHV0IHR5cGU9XFx4MjJoaWRkZW5cXHgyMiBuYW1lPVxceDIyYWN0aW9uXFx4MjIgdmFsdWU9XFx4MjJkb3dubG9hZFxceDIyIC8+ICAgIDxpbnB1dCB0eXBlPVxceDIyaGlkZGVuXFx4MjIgbmFtZT1cXHgyMmZpbGVuYW1lXFx4MjIgdmFsdWU9XFx4MjJlbWFpbC5odG1sXFx4MjIgLz4gICAgPGlucHV0IHR5cGU9XFx4MjJoaWRkZW5cXHgyMiBuYW1lPVxceDIyaHRtbFxceDIyIGlkPVxceDIyZG93bmxvYWRIdG1sVGV4dGFyZWFcXHgyMiAvPiAgICA8YSB0aXRsZT1cXHgyMkRvd25sb2FkIHRlbXBsYXRlXFx4MjIgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dm9pZCgwKVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ0Rvd25sb2FkIHRlbXBsYXRlJykgfSwgY2xpY2s6ICRyb290LmRvd25sb2FkLmV4ZWN1dGUsIGNsaWNrQnViYmxlOiBmYWxzZSwgYnV0dG9uOiB7IGRpc2FibGVkOiAhJHJvb3QuZG93bmxvYWQuZW5hYmxlZCgpLCBpY29uczogeyBwcmltYXJ5OiAnZmEgZmEtZncgZmEtZG93bmxvYWQnIH0sIGxhYmVsOiAkcm9vdC50KCRyb290LmRvd25sb2FkLm5hbWUpLCB0ZXh0OiB0cnVlIH1cXHgyMj5ET1dOTE9BRDwvYT4gICAgPC9mb3JtPiAgICA8IS0tIC9rbyAtLT4gICAgPC9kaXY+ICA8L2Rpdj4gIDwhLS0ga28gaWY6ICRyb290LnNob3dUb29sYm94IC0tPiAgPGRpdiBpZD1cXHgyMm1haW4tdG9vbGJveFxceDIyIGNsYXNzPVxceDIybW9cXHgyMiBkYXRhLWJpbmQ9XFx4MjJzY3JvbGxhYmxlOiB0cnVlLCB3aXRoUHJvcGVydGllczogeyB0ZW1wbGF0ZU1vZGU6ICdlZGl0JyB9XFx4MjI+ICAgIDxkaXYgZGF0YS1iaW5kPVxceDIydGVtcGxhdGU6IHsgbmFtZTogJ3Rvb2xib3gnIH1cXHgyMj48L2Rpdj4gIDwvZGl2PiAgPCEtLSAva28gLS0+ICAgIDxkaXYgaWQ9XFx4MjJtYWluLXByZXZpZXdcXHgyMiBjbGFzcz1cXHgyMm1vXFx4MjIgZGF0YS1iaW5kPVxceDIyc2Nyb2xsYWJsZTogdHJ1ZSwgaWY6ICRyb290LnNob3dQcmV2aWV3RnJhbWVcXHgyMj4gICAgPGRpdiBpZD1cXHgyMnByZXZpZXctdG9vbGJhclxceDIyPiAgICAgIDxkaXYgZGF0YS1iaW5kPVxceDIydmlzaWJsZTogJHJvb3Quc2hvd1ByZXZpZXdGcmFtZSwgYnV0dG9uc2V0OiB7IH1cXHgyMiBzdHlsZT1cXHgyMmRpc3BsYXk6IGlubGluZS1ibG9ja1xceDIyPiAgICAgICAgPGlucHV0IGlkPVxceDIycHJldmlld0xhcmdlXFx4MjIgdHlwZT1cXHgyMnJhZGlvXFx4MjIgbmFtZT1cXHgyMnByZXZpZXdNb2RlXFx4MjIgdmFsdWU9XFx4MjJsYXJnZVxceDIyIGRhdGEtYmluZD1cXHgyMmNoZWNrZWQ6ICRyb290LnByZXZpZXdNb2RlLCBidXR0b246IHsgdGV4dDogZmFsc2UsIGxhYmVsOiAnbGFyZ2UnLCBpY29uczogeyBwcmltYXJ5OiAnZmEgZmEtZncgZmEtZGVza3RvcCcgfSB9XFx4MjIgLz4gICAgICAgIDxsYWJlbCBmb3I9XFx4MjJwcmV2aWV3TGFyZ2VcXHgyMiB0aXRsZT1cXHgyMkxhcmdlIHNjcmVlblxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ0xhcmdlIHNjcmVlbicpIH1cXHgyMj5MYXJnZSBzY3JlZW48L2xhYmVsPiAgICAgICAgPGlucHV0IGlkPVxceDIycHJldmlld0Rlc2t0b3BcXHgyMiB0eXBlPVxceDIycmFkaW9cXHgyMiBuYW1lPVxceDIycHJldmlld01vZGVcXHgyMiB2YWx1ZT1cXHgyMmRlc2t0b3BcXHgyMiBkYXRhLWJpbmQ9XFx4MjJjaGVja2VkOiAkcm9vdC5wcmV2aWV3TW9kZSwgYnV0dG9uOiB7IHRleHQ6IGZhbHNlLCBsYWJlbDogJ2Rlc2t0b3AnLCBpY29uczogeyBwcmltYXJ5OiAnZmEgZmEtZncgZmEtdGFibGV0JyB9IH1cXHgyMiAvPiAgICAgICAgPGxhYmVsIGZvcj1cXHgyMnByZXZpZXdEZXNrdG9wXFx4MjIgdGl0bGU9XFx4MjJUYWJsZXRcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdUYWJsZXQnKSB9XFx4MjI+VGFibGV0PC9sYWJlbD4gICAgICAgIDxpbnB1dCBpZD1cXHgyMnByZXZpZXdNb2JpbGVcXHgyMiB0eXBlPVxceDIycmFkaW9cXHgyMiBuYW1lPVxceDIycHJldmlld01vZGVcXHgyMiB2YWx1ZT1cXHgyMm1vYmlsZVxceDIyIGRhdGEtYmluZD1cXHgyMmNoZWNrZWQ6ICRyb290LnByZXZpZXdNb2RlLCBidXR0b246IHsgdGV4dDogZmFsc2UsIGxhYmVsOiAnbW9iaWxlJywgaWNvbnM6IHsgcHJpbWFyeTogJ2ZhIGZhLWZ3IGZhLW1vYmlsZScgfSB9XFx4MjIgLz4gICAgICAgIDxsYWJlbCBmb3I9XFx4MjJwcmV2aWV3TW9iaWxlXFx4MjIgdGl0bGU9XFx4MjJTbWFydHBob25lXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnU21hcnRwaG9uZScpIH1cXHgyMj5TbWFydHBob25lPC9sYWJlbD4gICAgICA8L2Rpdj4gICAgPC9kaXY+ICAgIDxkaXYgaWQ9XFx4MjJmcmFtZS1jb250YWluZXJcXHgyMiBkYXRhLWJpbmQ9XFx4MjJjc3M6IHsgZGVza3RvcDogJHJvb3QucHJldmlld01vZGUoKSA9PSAnZGVza3RvcCcsIG1vYmlsZTogJHJvb3QucHJldmlld01vZGUoKSA9PSAnbW9iaWxlJywgbGFyZ2U6ICRyb290LnByZXZpZXdNb2RlKCkgPT0gJ2xhcmdlJyB9XFx4MjI+ICAgICAgPGlmcmFtZSBkYXRhLWJpbmQ9XFx4MjJiaW5kSWZyYW1lOiAkZGF0YVxceDIyPjwvaWZyYW1lPiAgICA8L2Rpdj4gIDwvZGl2PiAgPGRpdiBjbGFzcz1cXHgyMm1vXFx4MjIgaWQ9XFx4MjJtby1ib2R5XFx4MjI+PC9kaXY+ICA8ZGl2IGlkPVxceDIyaW5jb21wYXRpYmxlLXRlbXBsYXRlXFx4MjIgdGl0bGU9XFx4MjJTYXZlZCBtb2RlbCBpcyBvYnNvbGV0ZVxceDIyIHN0eWxlPVxceDIyZGlzcGxheTogbm9uZVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1NhdmVkIG1vZGVsIGlzIG9ic29sZXRlJykgfSwgaHRtbDogJHJvb3QudCgnPHA+VGhlIHNhdmVkIG1vZGVsIGhhcyBiZWVuIGNyZWF0ZWQgd2l0aCBhIHByZXZpb3VzLCBub24gY29tcGxldGVseSBjb21wYXRpYmxlIHZlcnNpb24sIG9mIHRoZSB0ZW1wbGF0ZTwvcD48cD5Tb21lIGNvbnRlbnQgb3Igc3R5bGUgaW4gdGhlIG1vZGVsIDxiPkNPVUxEIEJFIExPU1Q8L2I+IGlmIHlvdSB3aWxsIDxiPnNhdmU8L2I+PC9wPjxwPkNvbnRhY3QgdXMgZm9yIG1vcmUgaW5mb3JtYXRpb25zITwvcD4nKVxceDIyPiAgICBJbmNvbXBhdGlibGUgdGVtcGxhdGUgIDwvZGl2PiAgPGRpdiBpZD1cXHgyMmZha2UtaW1hZ2UtZWRpdG9yXFx4MjIgdGl0bGU9XFx4MjJGYWtlIGltYWdlIGVkaXRvclxceDIyIHN0eWxlPVxceDIyZGlzcGxheTogbm9uZVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ0Zha2UgaW1hZ2UgZWRpdG9yJykgfSwgaHRtbDogJHJvb3QudCgnPHA+RmFrZSBpbWFnZSBlZGl0b3I8L3A+JylcXHgyMj4gICAgPHA+RmFrZSBpbWFnZSBlZGl0b3I8L3A+ICA8L2Rpdj48L2Rpdj48IS0tIGtvIGlmOiAkcm9vdC5sb2dvUGF0aCAtLT48ZGl2IGlkPVxceDIybG9hZGluZ1xceDIyIGNsYXNzPVxceDIybG9hZGluZ1xceDIyIHN0eWxlPVxceDIyZGlzcGxheTogYmxvY2s7IHdpZHRoOiAzMDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBoZWlnaHQ6IDMycHg7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOjA7IGJvdHRvbTogMDsgbGVmdDogMDsgcmlnaHQ6IDA7ICBtYXJnaW46IGF1dG87XFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyBzdHlsZTogJ3Bvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiA1cHg7IGxlZnQ6IDZweDsgei1pbmRleDogMTUwOyd9LCBjc3M6IHsgbG9hZGluZzogZmFsc2UgfVxceDIyPiAgPGEgaHJlZj1cXHgyMi9cXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IGhyZWY6ICRyb290LmxvZ29VcmwsIGFsdDogJHJvb3QubG9nb0FsdCB9XFx4MjI+PGltZyBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHNyYzogJHJvb3QubG9nb1BhdGggfVxceDIyIHdpZHRoPVxceDIyMzJcXHgyMiBoZWlnaHQ9XFx4MjIzMlxceDIyIGFsdD1cXHgyMm1vc2FpY29cXHgyMiBib3JkZXI9XFx4MjIwXFx4MjIgLz48L2E+ICA8ZGl2IHN0eWxlPVxceDIyb3BhY2l0eTogMFxceDIyIGRhdGEtYmluZD1cXHgyMnZpc2libGU6IGZhbHNlXFx4MjI+T3BwcHMuLi4gISE8L2Rpdj48L2Rpdj48IS0tIC9rbyAtLT5cIik7XG50ZW1wbGF0ZVN5c3RlbS5hZGRUZW1wbGF0ZShcInRpbnltY2UtYXJlYVwiLCBcIjxkaXYgY2xhc3M9XFx4MjJ0aW55TUNFLWNhcmRcXHgyMj4gIDxkaXYgY2xhc3M9XFx4MjJ0aW55TUNFLWNhcmRfX2NvbnRlbnRcXHgyMj4gICAgPGRpdiBjbGFzcz1cXHgyMnRpbnlNQ0UtaGVhZGVyXFx4MjI+ICAgICAgPHNwYW4gY2xhc3M9XFx4MjJ1bmRvLXJlZG9cXHgyMiBkYXRhLWJpbmQ9XFx4MjJidXR0b25zZXQ6IHsgfVxceDIyPiAgICAgICAgPGEgdGl0bGU9XFx4MjJVbmRvIGxhc3Qgb3BlcmF0aW9uXFx4MjIgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dm9pZCgwKVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1VuZG8gbGFzdCBvcGVyYXRpb24nKSB9LCBjbGljazogJHJvb3QudW5kby5leGVjdXRlLCBjbGlja0J1YmJsZTogZmFsc2UsIGJ1dHRvbjogeyBkaXNhYmxlZDogISRyb290LnVuZG8uZW5hYmxlZCgpLCBpY29uczogeyBwcmltYXJ5OiAnbWNlLWljbyBtY2UtaS11bmRvJyB9fVxceDIyPjwvYT4gICAgICAgIDxhIHRpdGxlPVxceDIyUmVkbyBsYXN0IG9wZXJhdGlvblxceDIyIGhyZWY9XFx4MjJqYXZhc2NyaXB0OnZvaWQoMClcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdSZWRvIGxhc3Qgb3BlcmF0aW9uJykgfSwgY2xpY2s6ICRyb290LnJlZG8uZXhlY3V0ZSwgY2xpY2tCdWJibGU6IGZhbHNlLCBidXR0b246IHsgZGlzYWJsZWQ6ICEkcm9vdC5yZWRvLmVuYWJsZWQoKSwgaWNvbnM6IHsgcHJpbWFyeTogJ21jZS1pY28gbWNlLWktcmVkbycgfX1cXHgyMj48L2E+ICAgICAgPC9zcGFuPiAgICA8L2Rpdj4gICAgPGRpdiBpZD1cXHgyMm1haW4tZWRpdC1hcmVhXFx4MjIgZGF0YS1iaW5kPVxceDIyY2xpY2s6IGZ1bmN0aW9uKG9iaiwgZXZ0KSB7ICRyb290LnNlbGVjdEJsb2NrKG51bGwpOyByZXR1cm4gdHJ1ZTsgfSwgY2xpY2tCdWJibGU6IGZhbHNlXFx4MjI+ICAgICAgPCEtLSBrbyB3aXRoUHJvcGVydGllczogeyB0ZW1wbGF0ZU1vZGU6ICd3eXNpd3lnJywgdGVtcGxhdGVNb2RlRmFsbGJhY2s6ICdzaG93JyB9IC0tPiAgICAgIDxkaXYgaWQ9XFx4MjJtYWluLXd5c2l3eWctYXJlYVxceDIyIGRhdGEtYmluZD1cXHgyMnd5c2l3eWdTY3JvbGxmaXg6IHRydWUsIHNjcm9sbGFibGU6IHRydWUsIGZ1ZHJvcHBhYmxlOiB7IGFjdGl2ZTogZHJhZ2dpbmdJbWFnZSB9LCBjc3M6IHsgaXNkcmFnZ2luZzogZHJhZ2dpbmcsIGlzZHJhZ2dpbmdpbWc6IGRyYWdnaW5nSW1hZ2UgfSwgYmxvY2s6IGNvbnRlbnRcXHgyMj48L2Rpdj4gICAgICA8IS0tIC9rbyAtLT4gICAgPC9kaXY+ICAgIDxkaXYgaWQ9XFx4MjJmYWtlLWltYWdlLWVkaXRvclxceDIyIHRpdGxlPVxceDIyRmFrZSBpbWFnZSBlZGl0b3JcXHgyMiBzdHlsZT1cXHgyMmRpc3BsYXk6IG5vbmVcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdGYWtlIGltYWdlIGVkaXRvcicpIH0sIGh0bWw6ICRyb290LnQoJzxwPkZha2UgaW1hZ2UgZWRpdG9yPC9wPicpXFx4MjI+ICAgIDxwPkZha2UgaW1hZ2UgZWRpdG9yPC9wPiAgPC9kaXY+ICA8L2Rpdj48L2Rpdj5cIik7XG50ZW1wbGF0ZVN5c3RlbS5hZGRUZW1wbGF0ZShcInRpbnltY2Utc2lkZWJhclwiLCBcIiAgPCEtLSBrbyBpZjogJHJvb3Quc2hvd1Rvb2xib3ggLS0+ICA8ZGl2IGlkPVxceDIybWFpbi10b29sYm94XFx4MjIgY2xhc3M9XFx4MjJtb1xceDIyIGRhdGEtYmluZD1cXHgyMnNjcm9sbGFibGU6IHRydWUsIHdpdGhQcm9wZXJ0aWVzOiB7IHRlbXBsYXRlTW9kZTogJ2VkaXQnIH1cXHgyMj4gICAgPGRpdiBkYXRhLWJpbmQ9XFx4MjJ0ZW1wbGF0ZTogeyBuYW1lOiAndG9vbGJveCcgfVxceDIyPjwvZGl2PiAgPC9kaXY+ICA8IS0tIC9rbyAtLT5cIik7XG50ZW1wbGF0ZVN5c3RlbS5hZGRUZW1wbGF0ZShcInRvb2xib3hcIiwgXCI8ZGl2IGlkPVxceDIydG9vbHRhYnNcXHgyMiBjbGFzcz1cXHgyMnRhYnNfaG9yaXpvbnRhbCBidXR0b25fY29sb3JcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ0YWJzOiB7IGFjdGl2ZTogJHJvb3Quc2VsZWN0ZWRUb29sIH1cXHgyMj4gIDx1bD4gICAgPGxpIGRhdGEtYmluZD1cXHgyMnRvb2x0aXBzOiB7fVxceDIyPjxhIHRpdGxlPVxceDIyQmxvY2tzIHJlYWR5IHRvIGJlIGFkZGVkIHRvIHRoZSB0ZW1wbGF0ZVxceDIyIGRhdGEtbG9jYWw9XFx4MjJ0cnVlXFx4MjIgaHJlZj1cXHgyMiN0b29sYmxvY2tzXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnQmxvY2tzIHJlYWR5IHRvIGJlIGFkZGVkIHRvIHRoZSB0ZW1wbGF0ZScpIH1cXHgyMj48c3BhbiBkYXRhLWJpbmQ9XFx4MjJodG1sOiAkcm9vdC50KCdCbG9ja3MnKVxceDIyPkJsb2Nrczwvc3Bhbj48L2E+PC9saT4gICAgPGxpIGRhdGEtYmluZD1cXHgyMnRvb2x0aXBzOiB7fVxceDIyPjxhIHRpdGxlPVxceDIyRWRpdCBjb250ZW50IG9wdGlvbnNcXHgyMiBocmVmPVxceDIyI3Rvb2xjb250ZW50c1xceDIyIGRhdGEtbG9jYWw9XFx4MjJ0cnVlXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnRWRpdCBjb250ZW50IG9wdGlvbnMnKSB9XFx4MjI+PHNwYW4gZGF0YS1iaW5kPVxceDIyaHRtbDogJHJvb3QudCgnQ29udGVudCcpXFx4MjI+Q29udGVudDwvc3Bhbj48L2E+PC9saT4gICAgPGxpIGRhdGEtYmluZD1cXHgyMmNsaWNrOiAkcm9vdC5zaG93R2FsbGVyeVxceDIyPjxhIHRpdGxlPVxceDIyRWRpdCBzdHlsZSBvcHRpb25zXFx4MjIgaHJlZj1cXHgyMiN0b29saW1hZ2VzXFx4MjIgZGF0YS1sb2NhbD1cXHgyMnRydWVcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdWaWV3IG9yIHVwbG9hZCBpbWFnZXMnKSB9XFx4MjI+PHNwYW4gZGF0YS1iaW5kPVxceDIyaHRtbDogJHJvb3QudCgnSW1hZ2VzJylcXHgyMj5JbWFnZXM8L3NwYW4+PC9hPjwvbGk+ICA8L3VsPiAgPGRpdiBpZD1cXHgyMnRvb2xibG9ja3NcXHgyMiBkYXRhLWJpbmQ9XFx4MjJzY3JvbGxhYmxlOiB0cnVlXFx4MjI+ICAgIDxkaXYgY2xhc3M9XFx4MjJibG9jay1saXN0XFx4MjIgZGF0YS1iaW5kPVxceDIyZm9yZWFjaDogYmxvY2tEZWZzXFx4MjIgc3R5bGU9XFx4MjJ0ZXh0LWFsaWduOiBjZW50ZXJcXHgyMj4gICAgICA8ZGl2IGNsYXNzPVxceDIyZHJhZ2dhYmxlLWl0ZW1cXHgyMiBkYXRhLWJpbmQ9XFx4MjJ3aXRoUHJvcGVydGllczogeyB0ZW1wbGF0ZU1vZGU6ICdzaG93JyB9XFx4MjI+ICAgICAgICA8ZGl2IGNsYXNzPVxceDIyYmxvY2tcXHgyMiBkYXRhLWJpbmQ9XFx4MjJleHRkcmFnZ2FibGU6IHsgY29ubmVjdENsYXNzOiAnc29ydGFibGUtYmxvY2tzLWVkaXQnLCBkYXRhOiAkZGF0YSwgZHJvcENvbnRhaW5lcjogJyNtYWluLXd5c2l3eWctYXJlYScsIGRyYWdnaW5nOiAkcm9vdC5kcmFnZ2luZywgJ29wdGlvbnMnOiB7IGhhbmRsZTogJy5oYW5kbGUnLCBkaXN0YW5jZTogMTAsICdhcHBlbmRUbyc6ICcjcGFnZScgfSB9LCBjbGljazogJHJvb3QuYWRkQmxvY2tcXHgyMiBzdHlsZT1cXHgyMnBvc2l0aW9uOiByZWxhdGl2ZTtcXHgyMj4gICAgICAgICAgPGRpdiB0aXRsZT1cXHgyMkNsaWNrIG9yIGRyYWcgdG8gYWRkIHRoaXMgYmxvY2sgdG8gdGhlIHRlbXBsYXRlXFx4MjIgY2xhc3M9XFx4MjJoYW5kbGVcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdDbGljayBvciBkcmFnIHRvIGFkZCB0aGlzIGJsb2NrIHRvIHRoZSB0ZW1wbGF0ZScpIH0sIHRvb2x0aXBzOiB7fVxceDIyPjwvZGl2PiAgICAgICAgICA8aW1nIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgYWx0OiAkcm9vdC50KCdCbG9jayBfX25hbWVfXycsIHsgbmFtZToga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh0eXBlKSB9KSwgc3JjOiAkcm9vdC50ZW1wbGF0ZVBhdGgoJ2VkcmVzLycra28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh0eXBlKSsnLnBuZycpIH1cXHgyMiBhbHQ9XFx4MjJCbG9jayBfX25hbWVfX1xceDIyIC8+ICAgICAgICA8L2Rpdj4gICAgICAgIDxhIGhyZWY9XFx4MjJqYXZhc2NyaXB0OnZvaWQoMClcXHgyMiBjbGFzcz1cXHgyMmFkZGJsb2NrYnV0dG9uXFx4MjIgZGF0YS1iaW5kPVxceDIyY2xpY2s6ICRyb290LmFkZEJsb2NrLCBidXR0b246IHsgbGFiZWw6ICRyb290LnQoJ0FkZCcpIH1cXHgyMj5BZGQ8L2E+ICAgICAgPC9kaXY+ICAgIDwvZGl2PiAgPC9kaXY+ICA8ZGl2IGlkPVxceDIydG9vbGNvbnRlbnRzXFx4MjIgZGF0YS1iaW5kPVxceDIyc2Nyb2xsYWJsZTogdHJ1ZVxceDIyPiAgICA8ZGl2IGRhdGEtYmluZD1cXHgyMnNjcm9sbGFibGU6IHRydWUsIHdpdGhQcm9wZXJ0aWVzOiB7IHRlbXBsYXRlTW9kZTogJ3N0eWxlcicgfVxceDIyPiAgICA8IS0tIGtvIGlmOiB0eXBlb2YgJHJvb3QuY29udGVudCgpLnRoZW1lID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgJHJvb3QuY29udGVudCgpLnRoZW1lKCkuc2NoZW1lID09PSAndW5kZWZpbmVkJyB8fCAkcm9vdC5jb250ZW50KCkudGhlbWUoKS5zY2hlbWUoKSA9PT0gJ2N1c3RvbScgLS0+ICAgICAgPCEtLSBrbyBpZjogJHJvb3Quc2VsZWN0ZWRCbG9jaygpICE9PSBudWxsIC0tPiAgICAgIDxkaXYgZGF0YS1iaW5kPVxceDIyYmxvY2s6ICRyb290LnNlbGVjdGVkQmxvY2ssIGNzczogeyB3b3JrR2xvYmFsOiAkcm9vdC5zZWxlY3RlZEJsb2NrKCkuY3VzdG9tU3R5bGUsIHdvcmtMb2NhbDogdHlwZW9mICRyb290LnNlbGVjdGVkQmxvY2soKS5jdXN0b21TdHlsZSA9PT0gJ3VuZGVmaW5lZCcgfHwgISRyb290LnNlbGVjdGVkQmxvY2soKS5jdXN0b21TdHlsZSgpIH1cXHgyMj48L2Rpdj4gICAgICA8IS0tIC9rbyAtLT4gICAgICA8IS0tIGtvIGlmOiAkcm9vdC5zZWxlY3RlZEJsb2NrKCkgPT0gbnVsbCAtLT4gICAgICA8ZGl2IGNsYXNzPVxceDIybm9TZWxlY3RlZEJsb2NrXFx4MjIgZGF0YS1iaW5kPVxceDIydGV4dDogJHJvb3QudCgnQnkgY2xpY2tpbmcgb24gbWVzc2FnZSBwYXJ0cyB5b3Ugd2lsbCBzZWxlY3QgYSBibG9jayBhbmQgc3R5bGUgb3B0aW9ucywgaWYgYXZhaWxhYmxlLCB3aWxsIHNob3cgaGVyZScpXFx4MjI+QnkgY2xpY2tpbmcgb24gbWVzc2FnZSBwYXJ0cyB5b3Ugd2lsbCBzZWxlY3QgYSBibG9jayBhbmQgc3R5bGUgb3B0aW9ucywgaWYgYXZhaWxhYmxlLCB3aWxsIHNob3cgaGVyZTwvZGl2PiAgICAgIDwhLS0gL2tvIC0tPiAgICAgIDxkaXYgY2xhc3M9XFx4MjJ3b3JrR2xvYmFsQ29udGVudFxceDIyPiAgICAgIDwhLS0ga28gYmxvY2s6IGNvbnRlbnQgLS0+PCEtLSAva28gLS0+ICAgIDwvZGl2PiAgICA8IS0tIC9rbyAtLT4gICAgPC9kaXY+ICAgIDwhLS0ga28gaWY6ICRyb290LnNlbGVjdGVkQmxvY2soKSAhPT0gbnVsbCAtLT4gICAgPGRpdiBkYXRhLWJpbmQ9XFx4MjJibG9jazogJHJvb3Quc2VsZWN0ZWRCbG9ja1xceDIyPjwvZGl2PiAgICA8IS0tIC9rbyAtLT4gICAgPCEtLSBrbyBpZjogJHJvb3Quc2VsZWN0ZWRCbG9jaygpID09IG51bGwgLS0+ICAgIDxkaXYgY2xhc3M9XFx4MjJub1NlbGVjdGVkQmxvY2tcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ0ZXh0OiAkcm9vdC50KCdCeSBjbGlja2luZyBvbiBtZXNzYWdlIHBhcnRzIHlvdSB3aWxsIHNlbGVjdCBhIGJsb2NrIGFuZCBjb250ZW50IG9wdGlvbnMsIGlmIGFueSwgd2lsbCBzaG93IGhlcmUnKVxceDIyPkJ5IGNsaWNraW5nIG9uIG1lc3NhZ2UgcGFydHMgeW91IHdpbGwgc2VsZWN0IGEgYmxvY2sgYW5kIGNvbnRlbnQgb3B0aW9ucywgaWYgYW55LCB3aWxsIHNob3cgaGVyZTwvZGl2PiAgICA8IS0tIC9rbyAtLT4gICAgPCEtLSBrbyBibG9jazogY29udGVudCAtLT48IS0tIC9rbyAtLT4gIDwvZGl2PiAgICA8ZGl2IGlkPVxceDIydG9vbGltYWdlc1xceDIyIGNsYXNzPVxceDIyc2xpZGViYXJcXHgyMiBkYXRhLWJpbmQ9XFx4MjJzY3JvbGxhYmxlOiB0cnVlLCBjc3M6IHsgaGlkZGVuOiAkcm9vdC5zaG93R2FsbGVyeSgpID09PSBmYWxzZSB9LCB0YWJzOiB7IGFjdGl2ZTogJHJvb3Quc2VsZWN0ZWRJbWFnZVRhYiB9XFx4MjI+ICA8ZGl2IGRhdGEtZHJvcC1jb250ZW50PVxceDIyRHJvcCBoZXJlXFx4MjIgY2xhc3M9XFx4MjJpbWctZHJvcHpvbmUgcGFuZSB1cGxvYWR6b25lXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyAnZGF0YS1kcm9wLWNvbnRlbnQnOiAkcm9vdC50KCdEcm9wIGhlcmUnKSB9LCBmdWRyb3BwYWJsZTogeyBhY3RpdmVDbGFzczogJ3VpLXN0YXRlLWhpZ2hsaWdodCcsIGhvdmVyQ2xhc3M6ICd1aS1zdGF0ZS1kcmFnaG92ZXInIH1cXHgyMj4gIDxkaXYgY2xhc3M9XFx4MjJtby11cGxvYWR6b25lXFx4MjIgc3R5bGU9XFx4MjJwb3NpdGlvbjogcmVsYXRpdmU7IHBhZGRpbmc6IDJlbTsgYm9yZGVyOiAycHggZG90dGVkICM4MDgwODBcXHgyMj4gICAgIDxpbnB1dCBjbGFzcz1cXHgyMmZpbGV1cGxvYWRcXHgyMiB0eXBlPVxceDIyZmlsZVxceDIyIG11bHRpcGxlIG5hbWU9XFx4MjJmaWxlc1tdXFx4MjIgZGF0YS1iaW5kPVxceDIyZmlsZXVwbG9hZDogeyBvbmVycm9yOiAkcm9vdC5ub3RpZmllci5lcnJvciwgb25maWxlOiAkcm9vdC5sb2FkSW1hZ2UgfVxceDIyIHN0eWxlPVxceDIyei1pbmRleDogMTA7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyByaWdodDogMDsgYm90dG9tOiAwOyBtaW4td2lkdGg6IDEwMCU7IG1pbi1oZWlnaHQ6IDEwMCU7IGZvbnQtemllOiA5OTlweDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZpbHRlcjogYWxwaGEob3BhY2l0eT0wKTsgb3BhY2l0eTogMDsgb3V0bGluZTogbm9uZTsgY3Vyc29yOiBpbmhlcml0OyBkaXNwbGF5OiBibG9ja1xceDIyPiAgICAgPHNwYW4gZGF0YS1iaW5kPVxceDIydGV4dDogJHJvb3QudCgnQ2xpY2sgb3IgZHJhZyBmaWxlcyBoZXJlJylcXHgyMj5DbGljayBvciBkcmFnIGZpbGVzIGhlcmU8L3NwYW4+ICAgICA8ZGl2IGNsYXNzPVxceDIyd29ya3pvbmVcXHgyMiBzdHlsZT1cXHgyMnBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyByaWdodDogMDsgYm90dG9tOiAwOyBvdmVyZmxvdzogaGlkZGVuO1xceDIyPiAgICAgICA8ZGl2IGNsYXNzPVxceDIycHJvZ3Jlc3NcXHgyMiBzdHlsZT1cXHgyMm9wYWNpdHk6IC41OyB3aWR0aDogODAlOyBtYXJnaW4tbGVmdDogMTAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IGJvdHRvbTogMzAlOyBoZWlnaHQ6IDIwcHg7IGJvcmRlcjogMnB4IHNvbGlkIGJsYWNrO1xceDIyPiAgICAgICAgIDxkaXYgY2xhc3M9XFx4MjJwcm9ncmVzcy1iYXIgcHJvZ3Jlc3MtYmFyLXN1Y2Nlc3NcXHgyMiBzdHlsZT1cXHgyMmhlaWdodDogMjBweDsgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7IFxceDIyPjwvZGl2PiAgICAgICA8L2Rpdj4gICAgIDwvZGl2PiAgPC9kaXY+ICA8L2Rpdj4gIDxkaXYgaWQ9XFx4MjJ0b29saW1hZ2VzdGFiXFx4MjIgY2xhc3M9XFx4MjJ0YWJzX2hvcml6b250YWxcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ0YWJzOiB7IGFjdGl2ZTogJHJvb3Quc2VsZWN0ZWRJbWFnZVRhYiB9XFx4MjI+ICAgIDx1bD4gICAgICA8bGkgZGF0YS1iaW5kPVxceDIydG9vbHRpcHM6IHt9XFx4MjI+PGEgdGl0bGU9XFx4MjJTZXNzaW9uIGltYWdlc1xceDIyIGRhdGEtbG9jYWw9XFx4MjJ0cnVlXFx4MjIgaHJlZj1cXHgyMiN0b29saW1hZ2VzcmVjZW50XFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnU2Vzc2lvbiBpbWFnZXMnKSB9LCB0ZXh0OiAkcm9vdC50KCdSZWNlbnRzJylcXHgyMj5SZWNlbnRzPC9hPjwvbGk+ICAgICAgPGxpIGRhdGEtYmluZD1cXHgyMnRvb2x0aXBzOiB7fVxceDIyPjxhIHRpdGxlPVxceDIyUmVtb3RlIGltYWdlc1xceDIyIGRhdGEtbG9jYWw9XFx4MjJ0cnVlXFx4MjIgaHJlZj1cXHgyMiN0b29saW1hZ2VzZ2FsbGVyeVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1JlbW90ZSBnYWxsZXJ5JykgfSwgdGV4dDogJHJvb3QudCgnTXkgSW1hZ2VzJylcXHgyMj5NeSBJbWFnZXM8L2E+PC9saT4gICAgICA8bGkgZGF0YS1iaW5kPVxceDIydG9vbHRpcHM6IHt9XFx4MjI+PGEgdGl0bGU9XFx4MjJSZW1vdGUgZ2FsbGVyeVxceDIyIGRhdGEtbG9jYWw9XFx4MjJ0cnVlXFx4MjIgaHJlZj1cXHgyMiN0b29saG9saWRheWdhbGxlcnlcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdOYXR1cmUgaW1hZ2VzJykgfSwgdGV4dDogJHJvb3QudCgnSG9saWRheXMnKVxceDIyPkhvbGlkYXlzPC9hPjwvbGk+ICAgICAgPGxpIGRhdGEtYmluZD1cXHgyMnRvb2x0aXBzOiB7fVxceDIyPjxhIHRpdGxlPVxceDIyUmVtb3RlIGdhbGxlcnlcXHgyMiBkYXRhLWxvY2FsPVxceDIydHJ1ZVxceDIyIGhyZWY9XFx4MjIjdG9vbG5hdHVyZWdhbGxlcnlcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdOYXR1cmUgaW1hZ2VzJykgfSwgdGV4dDogJHJvb3QudCgnTmF0dXJlJylcXHgyMj5OYXR1cmU8L2E+PC9saT4gICAgICA8bGkgZGF0YS1iaW5kPVxceDIydG9vbHRpcHM6IHt9XFx4MjI+PGEgdGl0bGU9XFx4MjJSZW1vdGUgZ2FsbGVyeVxceDIyIGRhdGEtbG9jYWw9XFx4MjJ0cnVlXFx4MjIgaHJlZj1cXHgyMiN0b29scHJvbW90aW9uZ2FsbGVyeVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1Byb21vdGlvbiBpbWFnZXMnKSB9LCB0ZXh0OiAkcm9vdC50KCdQcm9tb3Rpb24nKVxceDIyPlByb21vdGlvbjwvYT48L2xpPiAgICA8L3VsPiAgICA8ZGl2IGlkPVxceDIydG9vbGltYWdlc3JlY2VudFxceDIyPiAgICAgIDwhLS0ga28gaWY6IGdhbGxlcnlSZWNlbnQoKS5sZW5ndGggPT0gMCAtLT48ZGl2IGNsYXNzPVxceDIyZ2FsbGVyeUVtcHR5XFx4MjIgZGF0YS1iaW5kPVxceDIydGV4dDogJHJvb3QudCgnTm8gaW1hZ2VzIHVwbG9hZGVkLCB5ZXQnKVxceDIyPk5vIGltYWdlcyB1cGxvYWRlZCwgeWV0PC9kaXY+PCEtLSAva28gLS0+ICAgICAgPCEtLSBrbyB0ZW1wbGF0ZToge25hbWU6ICdnYWxsZXJ5LWltYWdlcycsIGRhdGE6IHsgaXRlbXM6IGdhbGxlcnlSZWNlbnQgfSB9IC0tPiMgcmVjZW50IGdhbGxlcnkgIzwhLS0gL2tvIC0tPiAgICA8L2Rpdj4gICAgPGRpdiBpZD1cXHgyMnRvb2xpbWFnZXNnYWxsZXJ5XFx4MjIgc3R5bGU9XFx4MjJ0ZXh0LWFsaWduOiBjZW50ZXJcXHgyMj4gICAgPCEtLSBrbyBpZjogJHJvb3QuZ2FsbGVyeUxvYWRlZCgpID09PSBmYWxzZSAtLT48YSBjbGFzcz1cXHgyMmxvYWRidXR0b25cXHgyMiB0aXRsZT1cXHgyMlNob3cgaW1hZ2VzIGZyb20gdGhlIGdhbGxlcnlcXHgyMiBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnU2hvdyBpbWFnZXMgZnJvbSB0aGUgZ2FsbGVyeScpIH0sIGNsaWNrOiAkcm9vdC5sb2FkR2FsbGVyeSwgYnV0dG9uOiB7IGRpc2FibGVkOiAkcm9vdC5nYWxsZXJ5TG9hZGVkLCBpY29uczogeyBwcmltYXJ5OiAnZmEgZmEtZncgZmEtcGljdHVyZS1vJyB9LCBsYWJlbDogJHJvb3QuZ2FsbGVyeUxvYWRlZCgpID09ICdsb2FkaW5nJyA/ICRyb290LnQoJ0xvYWRpbmcuLi4nKSA6ICRyb290LnQoJ0xvYWQgZ2FsbGVyeScpLCB0ZXh0OiB0cnVlIH1cXHgyMj4jIGxvYWQgZ2FsbHkgIzwvYT48IS0tIC9rbyAtLT4gICAgPCEtLSBrbyBpZjogJHJvb3QuZ2FsbGVyeUxvYWRlZCgpID09PSAnbG9hZGluZycgLS0+PGRpdiBjbGFzcz1cXHgyMmdhbGxlcnlFbXB0eVxceDIyIGRhdGEtYmluZD1cXHgyMnRleHQ6ICRyb290LnQoJ0xvYWRpbmcgZ2FsbGVyeS4uLicpXFx4MjI+TG9hZGluZyBnYWxsZXJ5Li4uPC9kaXY+PCEtLSAva28gLS0+ICAgIDwhLS0ga28gaWY6ICRyb290LmdhbGxlcnlMb2FkZWQoKSA9PT0gMCAtLT48ZGl2IGNsYXNzPVxceDIyZ2FsbGVyeUVtcHR5XFx4MjIgZGF0YS1iaW5kPVxceDIydGV4dDogJHJvb3QudCgnVGhlIGdhbGxlcnkgaXMgZW1wdHknKVxceDIyPlRoZSBnYWxsZXJ5IGlzIGVtcHR5PC9kaXY+PCEtLSAva28gLS0+ICAgIDwhLS0ga28gdGVtcGxhdGU6IHtuYW1lOiAnZ2FsbGVyeS1pbWFnZXMnLCBkYXRhOiB7IGl0ZW1zOiBnYWxsZXJ5UmVtb3RlIH0gfSAtLT4jIHJlbW90ZSBnYWxsZXJ5ICM8IS0tIC9rbyAtLT4gICAgPC9kaXY+ICAgIDxkaXYgaWQ9XFx4MjJ0b29saG9saWRheWdhbGxlcnlcXHgyMiBzdHlsZT1cXHgyMnRleHQtYWxpZ246IGNlbnRlclxceDIyPiAgICA8IS0tIGtvIGlmOiAkcm9vdC5nYWxsZXJ5SG9saWRheUxvYWRlZCgpID09PSBmYWxzZSAtLT48YSBjbGFzcz1cXHgyMmxvYWRidXR0b25cXHgyMiB0aXRsZT1cXHgyMlNob3cgaW1hZ2VzIGZyb20gdGhlIGdhbGxlcnlcXHgyMiBocmVmPVxceDIyamF2YXNjcmlwdDp2b2lkKDApXFx4MjIgZGF0YS1iaW5kPVxceDIyYXR0cjogeyB0aXRsZTogJHJvb3QudCgnU2hvdyBpbWFnZXMgZnJvbSB0aGUgbmF0dXJlIGdhbGxlcnknKSB9LCBjbGljazogJHJvb3QubG9hZEhvbGlkYXlHYWxsZXJ5LCBidXR0b246IHsgZGlzYWJsZWQ6ICRyb290LmdhbGxlcnlIb2xpZGF5TG9hZGVkLCBpY29uczogeyBwcmltYXJ5OiAnZmEgZmEtZncgZmEtcGljdHVyZS1vJyB9LCBsYWJlbDogJHJvb3QuZ2FsbGVyeUhvbGlkYXlMb2FkZWQoKSA9PSAnbG9hZGluZycgPyAkcm9vdC50KCdMb2FkaW5nLi4uJykgOiAkcm9vdC50KCdMb2FkIGdhbGxlcnknKSwgdGV4dDogdHJ1ZSB9XFx4MjI+IyBsb2FkIGdhbGx5ICM8L2E+PCEtLSAva28gLS0+ICAgIDwhLS0ga28gaWY6ICRyb290LmdhbGxlcnlIb2xpZGF5TG9hZGVkKCkgPT09ICdsb2FkaW5nJyAtLT48ZGl2IGNsYXNzPVxceDIyZ2FsbGVyeUVtcHR5XFx4MjIgZGF0YS1iaW5kPVxceDIydGV4dDogJHJvb3QudCgnTG9hZGluZyBnYWxsZXJ5Li4uJylcXHgyMj5Mb2FkaW5nIGdhbGxlcnkuLi48L2Rpdj48IS0tIC9rbyAtLT4gICAgPCEtLSBrbyBpZjogJHJvb3QuZ2FsbGVyeUhvbGlkYXlMb2FkZWQoKSA9PT0gMCAtLT48ZGl2IGNsYXNzPVxceDIyZ2FsbGVyeUVtcHR5XFx4MjIgZGF0YS1iaW5kPVxceDIydGV4dDogJHJvb3QudCgnVGhlIGdhbGxlcnkgaXMgZW1wdHknKVxceDIyPlRoZSBnYWxsZXJ5IGlzIGVtcHR5PC9kaXY+PCEtLSAva28gLS0+ICAgIDwhLS0ga28gdGVtcGxhdGU6IHtuYW1lOiAnZ2FsbGVyeS1pbWFnZXMnLCBkYXRhOiB7IGl0ZW1zOiBnYWxsZXJ5SG9saWRheVJlbW90ZSB9IH0gLS0+IyByZW1vdGUgZ2FsbGVyeSAjPCEtLSAva28gLS0+ICAgIDwvZGl2PiAgICA8ZGl2IGlkPVxceDIydG9vbG5hdHVyZWdhbGxlcnlcXHgyMiBzdHlsZT1cXHgyMnRleHQtYWxpZ246IGNlbnRlclxceDIyPiAgICA8IS0tIGtvIGlmOiAkcm9vdC5nYWxsZXJ5TmF0dXJlTG9hZGVkKCkgPT09IGZhbHNlIC0tPjxhIGNsYXNzPVxceDIybG9hZGJ1dHRvblxceDIyIHRpdGxlPVxceDIyU2hvdyBpbWFnZXMgZnJvbSB0aGUgZ2FsbGVyeVxceDIyIGhyZWY9XFx4MjJqYXZhc2NyaXB0OnZvaWQoMClcXHgyMiBkYXRhLWJpbmQ9XFx4MjJhdHRyOiB7IHRpdGxlOiAkcm9vdC50KCdTaG93IGltYWdlcyBmcm9tIHRoZSBuYXR1cmUgZ2FsbGVyeScpIH0sIGNsaWNrOiAkcm9vdC5sb2FkTmF0dXJlR2FsbGVyeSwgYnV0dG9uOiB7IGRpc2FibGVkOiAkcm9vdC5nYWxsZXJ5TmF0dXJlTG9hZGVkLCBpY29uczogeyBwcmltYXJ5OiAnZmEgZmEtZncgZmEtcGljdHVyZS1vJyB9LCBsYWJlbDogJHJvb3QuZ2FsbGVyeU5hdHVyZUxvYWRlZCgpID09ICdsb2FkaW5nJyA/ICRyb290LnQoJ0xvYWRpbmcuLi4nKSA6ICRyb290LnQoJ0xvYWQgZ2FsbGVyeScpLCB0ZXh0OiB0cnVlIH1cXHgyMj4jIGxvYWQgZ2FsbHkgIzwvYT48IS0tIC9rbyAtLT4gICAgPCEtLSBrbyBpZjogJHJvb3QuZ2FsbGVyeU5hdHVyZUxvYWRlZCgpID09PSAnbG9hZGluZycgLS0+PGRpdiBjbGFzcz1cXHgyMmdhbGxlcnlFbXB0eVxceDIyIGRhdGEtYmluZD1cXHgyMnRleHQ6ICRyb290LnQoJ0xvYWRpbmcgZ2FsbGVyeS4uLicpXFx4MjI+TG9hZGluZyBnYWxsZXJ5Li4uPC9kaXY+PCEtLSAva28gLS0+ICAgIDwhLS0ga28gaWY6ICRyb290LmdhbGxlcnlOYXR1cmVMb2FkZWQoKSA9PT0gMCAtLT48ZGl2IGNsYXNzPVxceDIyZ2FsbGVyeUVtcHR5XFx4MjIgZGF0YS1iaW5kPVxceDIydGV4dDogJHJvb3QudCgnVGhlIGdhbGxlcnkgaXMgZW1wdHknKVxceDIyPlRoZSBnYWxsZXJ5IGlzIGVtcHR5PC9kaXY+PCEtLSAva28gLS0+ICAgIDwhLS0ga28gdGVtcGxhdGU6IHtuYW1lOiAnZ2FsbGVyeS1pbWFnZXMnLCBkYXRhOiB7IGl0ZW1zOiBnYWxsZXJ5TmF0dXJlUmVtb3RlIH0gfSAtLT4jIHJlbW90ZSBnYWxsZXJ5ICM8IS0tIC9rbyAtLT4gICAgPC9kaXY+ICAgIDxkaXYgaWQ9XFx4MjJ0b29scHJvbW90aW9uZ2FsbGVyeVxceDIyIHN0eWxlPVxceDIydGV4dC1hbGlnbjogY2VudGVyXFx4MjI+ICAgIDwhLS0ga28gaWY6ICRyb290LmdhbGxlcnlQcm9tb3Rpb25Mb2FkZWQoKSA9PT0gZmFsc2UgLS0+PGEgY2xhc3M9XFx4MjJsb2FkYnV0dG9uXFx4MjIgdGl0bGU9XFx4MjJTaG93IGltYWdlcyBmcm9tIHRoZSBnYWxsZXJ5XFx4MjIgaHJlZj1cXHgyMmphdmFzY3JpcHQ6dm9pZCgwKVxceDIyIGRhdGEtYmluZD1cXHgyMmF0dHI6IHsgdGl0bGU6ICRyb290LnQoJ1Nob3cgaW1hZ2VzIGZyb20gdGhlIG5hdHVyZSBnYWxsZXJ5JykgfSwgY2xpY2s6ICRyb290LmxvYWRQcm9tb3Rpb25HYWxsZXJ5LCBidXR0b246IHsgZGlzYWJsZWQ6ICRyb290LmdhbGxlcnlQcm9tb3Rpb25Mb2FkZWQsIGljb25zOiB7IHByaW1hcnk6ICdmYSBmYS1mdyBmYS1waWN0dXJlLW8nIH0sIGxhYmVsOiAkcm9vdC5nYWxsZXJ5UHJvbW90aW9uTG9hZGVkKCkgPT0gJ2xvYWRpbmcnID8gJHJvb3QudCgnTG9hZGluZy4uLicpIDogJHJvb3QudCgnTG9hZCBnYWxsZXJ5JyksIHRleHQ6IHRydWUgfVxceDIyPiMgbG9hZCBnYWxseSAjPC9hPjwhLS0gL2tvIC0tPiAgICA8IS0tIGtvIGlmOiAkcm9vdC5nYWxsZXJ5UHJvbW90aW9uTG9hZGVkKCkgPT09ICdsb2FkaW5nJyAtLT48ZGl2IGNsYXNzPVxceDIyZ2FsbGVyeUVtcHR5XFx4MjIgZGF0YS1iaW5kPVxceDIydGV4dDogJHJvb3QudCgnTG9hZGluZyBnYWxsZXJ5Li4uJylcXHgyMj5Mb2FkaW5nIGdhbGxlcnkuLi48L2Rpdj48IS0tIC9rbyAtLT4gICAgPCEtLSBrbyBpZjogJHJvb3QuZ2FsbGVyeVByb21vdGlvbkxvYWRlZCgpID09PSAwIC0tPjxkaXYgY2xhc3M9XFx4MjJnYWxsZXJ5RW1wdHlcXHgyMiBkYXRhLWJpbmQ9XFx4MjJ0ZXh0OiAkcm9vdC50KCdUaGUgZ2FsbGVyeSBpcyBlbXB0eScpXFx4MjI+VGhlIGdhbGxlcnkgaXMgZW1wdHk8L2Rpdj48IS0tIC9rbyAtLT4gICAgPCEtLSBrbyB0ZW1wbGF0ZToge25hbWU6ICdnYWxsZXJ5LWltYWdlcycsIGRhdGE6IHsgaXRlbXM6IGdhbGxlcnlQcm9tb3Rpb25SZW1vdGUgfSB9IC0tPiMgcmVtb3RlIGdhbGxlcnkgIzwhLS0gL2tvIC0tPiAgICA8L2Rpdj4gIDwvZGl2PiAgPC9kaXY+PC9kaXY+PGRpdiBpZD1cXHgyMnRvb2x0aGVtZVxceDIyIGNsYXNzPVxceDIydWktd2lkZ2V0IHNsaWRlYmFyXFx4MjIgZGF0YS1iaW5kPVxceDIyY3NzOiB7IGhpZGRlbjogJHJvb3Quc2hvd1RoZW1lKCkgPT09IGZhbHNlIH1cXHgyMj4gICAgPCEtLSBrbyB3aXRoUHJvcGVydGllczogeyB0ZW1wbGF0ZU1vZGU6ICdzdHlsZXInIH0gLS0+ICAgIDwhLS0ga28gaWY6ICRyb290LnNob3dUaGVtZSAtLT4gICAgICA8IS0tIGtvIGJsb2NrOiAkcm9vdC5jb250ZW50KCkudGhlbWUgLS0+PCEtLSAva28gLS0+ICAgIDwhLS0gL2tvIC0tPiAgPCEtLSAva28gLS0+PC9kaXY+XCIpO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vIGNvbXBhcmUgYW5kIGlzQnVmZmVyIHRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvYmxvYi82ODBlOWU1ZTQ4OGYyMmFhYzI3NTk5YTU3ZGM4NDRhNjMxNTkyOGRkL2luZGV4LmpzXG4vLyBvcmlnaW5hbCBub3RpY2U6XG5cbi8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmUoYSwgYikge1xuICBpZiAoYSA9PT0gYikge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgdmFyIHggPSBhLmxlbmd0aDtcbiAgdmFyIHkgPSBiLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXTtcbiAgICAgIHkgPSBiW2ldO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGlmICh5IDwgeCkge1xuICAgIHJldHVybiAxO1xuICB9XG4gIHJldHVybiAwO1xufVxuZnVuY3Rpb24gaXNCdWZmZXIoYikge1xuICBpZiAoZ2xvYmFsLkJ1ZmZlciAmJiB0eXBlb2YgZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBnbG9iYWwuQnVmZmVyLmlzQnVmZmVyKGIpO1xuICB9XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpO1xufVxuXG4vLyBiYXNlZCBvbiBub2RlIGFzc2VydCwgb3JpZ2luYWwgbm90aWNlOlxuXG4vLyBodHRwOi8vd2lraS5jb21tb25qcy5vcmcvd2lraS9Vbml0X1Rlc3RpbmcvMS4wXG4vL1xuLy8gVEhJUyBJUyBOT1QgVEVTVEVEIE5PUiBMSUtFTFkgVE8gV09SSyBPVVRTSURFIFY4IVxuLy9cbi8vIE9yaWdpbmFsbHkgZnJvbSBuYXJ3aGFsLmpzIChodHRwOi8vbmFyd2hhbGpzLm9yZylcbi8vIENvcHlyaWdodCAoYykgMjAwOSBUaG9tYXMgUm9iaW5zb24gPDI4MG5vcnRoLmNvbT5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG9cbi8vIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlXG4vLyByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Jcbi8vIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOXG4vLyBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OXG4vLyBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsLycpO1xudmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgcFNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xudmFyIGZ1bmN0aW9uc0hhdmVOYW1lcyA9IChmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiBmb28oKSB7fS5uYW1lID09PSAnZm9vJztcbn0oKSk7XG5mdW5jdGlvbiBwVG9TdHJpbmcgKG9iaikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik7XG59XG5mdW5jdGlvbiBpc1ZpZXcoYXJyYnVmKSB7XG4gIGlmIChpc0J1ZmZlcihhcnJidWYpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgZ2xvYmFsLkFycmF5QnVmZmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyhhcnJidWYpO1xuICB9XG4gIGlmICghYXJyYnVmKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChhcnJidWYgaW5zdGFuY2VvZiBEYXRhVmlldykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChhcnJidWYuYnVmZmVyICYmIGFycmJ1Zi5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbi8vIDEuIFRoZSBhc3NlcnQgbW9kdWxlIHByb3ZpZGVzIGZ1bmN0aW9ucyB0aGF0IHRocm93XG4vLyBBc3NlcnRpb25FcnJvcidzIHdoZW4gcGFydGljdWxhciBjb25kaXRpb25zIGFyZSBub3QgbWV0LiBUaGVcbi8vIGFzc2VydCBtb2R1bGUgbXVzdCBjb25mb3JtIHRvIHRoZSBmb2xsb3dpbmcgaW50ZXJmYWNlLlxuXG52YXIgYXNzZXJ0ID0gbW9kdWxlLmV4cG9ydHMgPSBvaztcblxuLy8gMi4gVGhlIEFzc2VydGlvbkVycm9yIGlzIGRlZmluZWQgaW4gYXNzZXJ0LlxuLy8gbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7IG1lc3NhZ2U6IG1lc3NhZ2UsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsOiBhY3R1YWwsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IGV4cGVjdGVkIH0pXG5cbnZhciByZWdleCA9IC9cXHMqZnVuY3Rpb25cXHMrKFteXFwoXFxzXSopXFxzKi87XG4vLyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbGpoYXJiL2Z1bmN0aW9uLnByb3RvdHlwZS5uYW1lL2Jsb2IvYWRlZWVlYzhiZmNjNjA2OGIxODdkN2Q5ZmIzZDViYjFkM2EzMDg5OS9pbXBsZW1lbnRhdGlvbi5qc1xuZnVuY3Rpb24gZ2V0TmFtZShmdW5jKSB7XG4gIGlmICghdXRpbC5pc0Z1bmN0aW9uKGZ1bmMpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChmdW5jdGlvbnNIYXZlTmFtZXMpIHtcbiAgICByZXR1cm4gZnVuYy5uYW1lO1xuICB9XG4gIHZhciBzdHIgPSBmdW5jLnRvU3RyaW5nKCk7XG4gIHZhciBtYXRjaCA9IHN0ci5tYXRjaChyZWdleCk7XG4gIHJldHVybiBtYXRjaCAmJiBtYXRjaFsxXTtcbn1cbmFzc2VydC5Bc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIEFzc2VydGlvbkVycm9yKG9wdGlvbnMpIHtcbiAgdGhpcy5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcbiAgdGhpcy5hY3R1YWwgPSBvcHRpb25zLmFjdHVhbDtcbiAgdGhpcy5leHBlY3RlZCA9IG9wdGlvbnMuZXhwZWN0ZWQ7XG4gIHRoaXMub3BlcmF0b3IgPSBvcHRpb25zLm9wZXJhdG9yO1xuICBpZiAob3B0aW9ucy5tZXNzYWdlKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlO1xuICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubWVzc2FnZSA9IGdldE1lc3NhZ2UodGhpcyk7XG4gICAgdGhpcy5nZW5lcmF0ZWRNZXNzYWdlID0gdHJ1ZTtcbiAgfVxuICB2YXIgc3RhY2tTdGFydEZ1bmN0aW9uID0gb3B0aW9ucy5zdGFja1N0YXJ0RnVuY3Rpb24gfHwgZmFpbDtcbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgc3RhY2tTdGFydEZ1bmN0aW9uKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBub24gdjggYnJvd3NlcnMgc28gd2UgY2FuIGhhdmUgYSBzdGFja3RyYWNlXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcigpO1xuICAgIGlmIChlcnIuc3RhY2spIHtcbiAgICAgIHZhciBvdXQgPSBlcnIuc3RhY2s7XG5cbiAgICAgIC8vIHRyeSB0byBzdHJpcCB1c2VsZXNzIGZyYW1lc1xuICAgICAgdmFyIGZuX25hbWUgPSBnZXROYW1lKHN0YWNrU3RhcnRGdW5jdGlvbik7XG4gICAgICB2YXIgaWR4ID0gb3V0LmluZGV4T2YoJ1xcbicgKyBmbl9uYW1lKTtcbiAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAvLyBvbmNlIHdlIGhhdmUgbG9jYXRlZCB0aGUgZnVuY3Rpb24gZnJhbWVcbiAgICAgICAgLy8gd2UgbmVlZCB0byBzdHJpcCBvdXQgZXZlcnl0aGluZyBiZWZvcmUgaXQgKGFuZCBpdHMgbGluZSlcbiAgICAgICAgdmFyIG5leHRfbGluZSA9IG91dC5pbmRleE9mKCdcXG4nLCBpZHggKyAxKTtcbiAgICAgICAgb3V0ID0gb3V0LnN1YnN0cmluZyhuZXh0X2xpbmUgKyAxKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zdGFjayA9IG91dDtcbiAgICB9XG4gIH1cbn07XG5cbi8vIGFzc2VydC5Bc3NlcnRpb25FcnJvciBpbnN0YW5jZW9mIEVycm9yXG51dGlsLmluaGVyaXRzKGFzc2VydC5Bc3NlcnRpb25FcnJvciwgRXJyb3IpO1xuXG5mdW5jdGlvbiB0cnVuY2F0ZShzLCBuKSB7XG4gIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gcy5sZW5ndGggPCBuID8gcyA6IHMuc2xpY2UoMCwgbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHM7XG4gIH1cbn1cbmZ1bmN0aW9uIGluc3BlY3Qoc29tZXRoaW5nKSB7XG4gIGlmIChmdW5jdGlvbnNIYXZlTmFtZXMgfHwgIXV0aWwuaXNGdW5jdGlvbihzb21ldGhpbmcpKSB7XG4gICAgcmV0dXJuIHV0aWwuaW5zcGVjdChzb21ldGhpbmcpO1xuICB9XG4gIHZhciByYXduYW1lID0gZ2V0TmFtZShzb21ldGhpbmcpO1xuICB2YXIgbmFtZSA9IHJhd25hbWUgPyAnOiAnICsgcmF3bmFtZSA6ICcnO1xuICByZXR1cm4gJ1tGdW5jdGlvbicgKyAgbmFtZSArICddJztcbn1cbmZ1bmN0aW9uIGdldE1lc3NhZ2Uoc2VsZikge1xuICByZXR1cm4gdHJ1bmNhdGUoaW5zcGVjdChzZWxmLmFjdHVhbCksIDEyOCkgKyAnICcgK1xuICAgICAgICAgc2VsZi5vcGVyYXRvciArICcgJyArXG4gICAgICAgICB0cnVuY2F0ZShpbnNwZWN0KHNlbGYuZXhwZWN0ZWQpLCAxMjgpO1xufVxuXG4vLyBBdCBwcmVzZW50IG9ubHkgdGhlIHRocmVlIGtleXMgbWVudGlvbmVkIGFib3ZlIGFyZSB1c2VkIGFuZFxuLy8gdW5kZXJzdG9vZCBieSB0aGUgc3BlYy4gSW1wbGVtZW50YXRpb25zIG9yIHN1YiBtb2R1bGVzIGNhbiBwYXNzXG4vLyBvdGhlciBrZXlzIHRvIHRoZSBBc3NlcnRpb25FcnJvcidzIGNvbnN0cnVjdG9yIC0gdGhleSB3aWxsIGJlXG4vLyBpZ25vcmVkLlxuXG4vLyAzLiBBbGwgb2YgdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgbXVzdCB0aHJvdyBhbiBBc3NlcnRpb25FcnJvclxuLy8gd2hlbiBhIGNvcnJlc3BvbmRpbmcgY29uZGl0aW9uIGlzIG5vdCBtZXQsIHdpdGggYSBtZXNzYWdlIHRoYXRcbi8vIG1heSBiZSB1bmRlZmluZWQgaWYgbm90IHByb3ZpZGVkLiAgQWxsIGFzc2VydGlvbiBtZXRob2RzIHByb3ZpZGVcbi8vIGJvdGggdGhlIGFjdHVhbCBhbmQgZXhwZWN0ZWQgdmFsdWVzIHRvIHRoZSBhc3NlcnRpb24gZXJyb3IgZm9yXG4vLyBkaXNwbGF5IHB1cnBvc2VzLlxuXG5mdW5jdGlvbiBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wZXJhdG9yLCBzdGFja1N0YXJ0RnVuY3Rpb24pIHtcbiAgdGhyb3cgbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7XG4gICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICBhY3R1YWw6IGFjdHVhbCxcbiAgICBleHBlY3RlZDogZXhwZWN0ZWQsXG4gICAgb3BlcmF0b3I6IG9wZXJhdG9yLFxuICAgIHN0YWNrU3RhcnRGdW5jdGlvbjogc3RhY2tTdGFydEZ1bmN0aW9uXG4gIH0pO1xufVxuXG4vLyBFWFRFTlNJT04hIGFsbG93cyBmb3Igd2VsbCBiZWhhdmVkIGVycm9ycyBkZWZpbmVkIGVsc2V3aGVyZS5cbmFzc2VydC5mYWlsID0gZmFpbDtcblxuLy8gNC4gUHVyZSBhc3NlcnRpb24gdGVzdHMgd2hldGhlciBhIHZhbHVlIGlzIHRydXRoeSwgYXMgZGV0ZXJtaW5lZFxuLy8gYnkgISFndWFyZC5cbi8vIGFzc2VydC5vayhndWFyZCwgbWVzc2FnZV9vcHQpO1xuLy8gVGhpcyBzdGF0ZW1lbnQgaXMgZXF1aXZhbGVudCB0byBhc3NlcnQuZXF1YWwodHJ1ZSwgISFndWFyZCxcbi8vIG1lc3NhZ2Vfb3B0KTsuIFRvIHRlc3Qgc3RyaWN0bHkgZm9yIHRoZSB2YWx1ZSB0cnVlLCB1c2Vcbi8vIGFzc2VydC5zdHJpY3RFcXVhbCh0cnVlLCBndWFyZCwgbWVzc2FnZV9vcHQpOy5cblxuZnVuY3Rpb24gb2sodmFsdWUsIG1lc3NhZ2UpIHtcbiAgaWYgKCF2YWx1ZSkgZmFpbCh2YWx1ZSwgdHJ1ZSwgbWVzc2FnZSwgJz09JywgYXNzZXJ0Lm9rKTtcbn1cbmFzc2VydC5vayA9IG9rO1xuXG4vLyA1LiBUaGUgZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIHNoYWxsb3csIGNvZXJjaXZlIGVxdWFsaXR5IHdpdGhcbi8vID09LlxuLy8gYXNzZXJ0LmVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LmVxdWFsID0gZnVuY3Rpb24gZXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsICE9IGV4cGVjdGVkKSBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5lcXVhbCk7XG59O1xuXG4vLyA2LiBUaGUgbm9uLWVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBmb3Igd2hldGhlciB0d28gb2JqZWN0cyBhcmUgbm90IGVxdWFsXG4vLyB3aXRoICE9IGFzc2VydC5ub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5ub3RFcXVhbCA9IGZ1bmN0aW9uIG5vdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCA9PSBleHBlY3RlZCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJyE9JywgYXNzZXJ0Lm5vdEVxdWFsKTtcbiAgfVxufTtcblxuLy8gNy4gVGhlIGVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBhIGRlZXAgZXF1YWxpdHkgcmVsYXRpb24uXG4vLyBhc3NlcnQuZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LmRlZXBFcXVhbCA9IGZ1bmN0aW9uIGRlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmICghX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBmYWxzZSkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdkZWVwRXF1YWwnLCBhc3NlcnQuZGVlcEVxdWFsKTtcbiAgfVxufTtcblxuYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIGRlZXBTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmICghX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCB0cnVlKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ2RlZXBTdHJpY3RFcXVhbCcsIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIHN0cmljdCwgbWVtb3MpIHtcbiAgLy8gNy4xLiBBbGwgaWRlbnRpY2FsIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uXG4gIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoaXNCdWZmZXIoYWN0dWFsKSAmJiBpc0J1ZmZlcihleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gY29tcGFyZShhY3R1YWwsIGV4cGVjdGVkKSA9PT0gMDtcblxuICAvLyA3LjIuIElmIHRoZSBleHBlY3RlZCB2YWx1ZSBpcyBhIERhdGUgb2JqZWN0LCB0aGUgYWN0dWFsIHZhbHVlIGlzXG4gIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIERhdGUgb2JqZWN0IHRoYXQgcmVmZXJzIHRvIHRoZSBzYW1lIHRpbWUuXG4gIH0gZWxzZSBpZiAodXRpbC5pc0RhdGUoYWN0dWFsKSAmJiB1dGlsLmlzRGF0ZShleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gYWN0dWFsLmdldFRpbWUoKSA9PT0gZXhwZWN0ZWQuZ2V0VGltZSgpO1xuXG4gIC8vIDcuMyBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBSZWdFeHAgb2JqZWN0LCB0aGUgYWN0dWFsIHZhbHVlIGlzXG4gIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIFJlZ0V4cCBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzb3VyY2UgYW5kXG4gIC8vIHByb3BlcnRpZXMgKGBnbG9iYWxgLCBgbXVsdGlsaW5lYCwgYGxhc3RJbmRleGAsIGBpZ25vcmVDYXNlYCkuXG4gIH0gZWxzZSBpZiAodXRpbC5pc1JlZ0V4cChhY3R1YWwpICYmIHV0aWwuaXNSZWdFeHAoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGFjdHVhbC5zb3VyY2UgPT09IGV4cGVjdGVkLnNvdXJjZSAmJlxuICAgICAgICAgICBhY3R1YWwuZ2xvYmFsID09PSBleHBlY3RlZC5nbG9iYWwgJiZcbiAgICAgICAgICAgYWN0dWFsLm11bHRpbGluZSA9PT0gZXhwZWN0ZWQubXVsdGlsaW5lICYmXG4gICAgICAgICAgIGFjdHVhbC5sYXN0SW5kZXggPT09IGV4cGVjdGVkLmxhc3RJbmRleCAmJlxuICAgICAgICAgICBhY3R1YWwuaWdub3JlQ2FzZSA9PT0gZXhwZWN0ZWQuaWdub3JlQ2FzZTtcblxuICAvLyA3LjQuIE90aGVyIHBhaXJzIHRoYXQgZG8gbm90IGJvdGggcGFzcyB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcsXG4gIC8vIGVxdWl2YWxlbmNlIGlzIGRldGVybWluZWQgYnkgPT0uXG4gIH0gZWxzZSBpZiAoKGFjdHVhbCA9PT0gbnVsbCB8fCB0eXBlb2YgYWN0dWFsICE9PSAnb2JqZWN0JykgJiZcbiAgICAgICAgICAgICAoZXhwZWN0ZWQgPT09IG51bGwgfHwgdHlwZW9mIGV4cGVjdGVkICE9PSAnb2JqZWN0JykpIHtcbiAgICByZXR1cm4gc3RyaWN0ID8gYWN0dWFsID09PSBleHBlY3RlZCA6IGFjdHVhbCA9PSBleHBlY3RlZDtcblxuICAvLyBJZiBib3RoIHZhbHVlcyBhcmUgaW5zdGFuY2VzIG9mIHR5cGVkIGFycmF5cywgd3JhcCB0aGVpciB1bmRlcmx5aW5nXG4gIC8vIEFycmF5QnVmZmVycyBpbiBhIEJ1ZmZlciBlYWNoIHRvIGluY3JlYXNlIHBlcmZvcm1hbmNlXG4gIC8vIFRoaXMgb3B0aW1pemF0aW9uIHJlcXVpcmVzIHRoZSBhcnJheXMgdG8gaGF2ZSB0aGUgc2FtZSB0eXBlIGFzIGNoZWNrZWQgYnlcbiAgLy8gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyAoYWthIHBUb1N0cmluZykuIE5ldmVyIHBlcmZvcm0gYmluYXJ5XG4gIC8vIGNvbXBhcmlzb25zIGZvciBGbG9hdCpBcnJheXMsIHRob3VnaCwgc2luY2UgZS5nLiArMCA9PT0gLTAgYnV0IHRoZWlyXG4gIC8vIGJpdCBwYXR0ZXJucyBhcmUgbm90IGlkZW50aWNhbC5cbiAgfSBlbHNlIGlmIChpc1ZpZXcoYWN0dWFsKSAmJiBpc1ZpZXcoZXhwZWN0ZWQpICYmXG4gICAgICAgICAgICAgcFRvU3RyaW5nKGFjdHVhbCkgPT09IHBUb1N0cmluZyhleHBlY3RlZCkgJiZcbiAgICAgICAgICAgICAhKGFjdHVhbCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSB8fFxuICAgICAgICAgICAgICAgYWN0dWFsIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5KSkge1xuICAgIHJldHVybiBjb21wYXJlKG5ldyBVaW50OEFycmF5KGFjdHVhbC5idWZmZXIpLFxuICAgICAgICAgICAgICAgICAgIG5ldyBVaW50OEFycmF5KGV4cGVjdGVkLmJ1ZmZlcikpID09PSAwO1xuXG4gIC8vIDcuNSBGb3IgYWxsIG90aGVyIE9iamVjdCBwYWlycywgaW5jbHVkaW5nIEFycmF5IG9iamVjdHMsIGVxdWl2YWxlbmNlIGlzXG4gIC8vIGRldGVybWluZWQgYnkgaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChhcyB2ZXJpZmllZFxuICAvLyB3aXRoIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCksIHRoZSBzYW1lIHNldCBvZiBrZXlzXG4gIC8vIChhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXIpLCBlcXVpdmFsZW50IHZhbHVlcyBmb3IgZXZlcnlcbiAgLy8gY29ycmVzcG9uZGluZyBrZXksIGFuZCBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuIE5vdGU6IHRoaXNcbiAgLy8gYWNjb3VudHMgZm9yIGJvdGggbmFtZWQgYW5kIGluZGV4ZWQgcHJvcGVydGllcyBvbiBBcnJheXMuXG4gIH0gZWxzZSBpZiAoaXNCdWZmZXIoYWN0dWFsKSAhPT0gaXNCdWZmZXIoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIG1lbW9zID0gbWVtb3MgfHwge2FjdHVhbDogW10sIGV4cGVjdGVkOiBbXX07XG5cbiAgICB2YXIgYWN0dWFsSW5kZXggPSBtZW1vcy5hY3R1YWwuaW5kZXhPZihhY3R1YWwpO1xuICAgIGlmIChhY3R1YWxJbmRleCAhPT0gLTEpIHtcbiAgICAgIGlmIChhY3R1YWxJbmRleCA9PT0gbWVtb3MuZXhwZWN0ZWQuaW5kZXhPZihleHBlY3RlZCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbWVtb3MuYWN0dWFsLnB1c2goYWN0dWFsKTtcbiAgICBtZW1vcy5leHBlY3RlZC5wdXNoKGV4cGVjdGVkKTtcblxuICAgIHJldHVybiBvYmpFcXVpdihhY3R1YWwsIGV4cGVjdGVkLCBzdHJpY3QsIG1lbW9zKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyhvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xufVxuXG5mdW5jdGlvbiBvYmpFcXVpdihhLCBiLCBzdHJpY3QsIGFjdHVhbFZpc2l0ZWRPYmplY3RzKSB7XG4gIGlmIChhID09PSBudWxsIHx8IGEgPT09IHVuZGVmaW5lZCB8fCBiID09PSBudWxsIHx8IGIgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gZmFsc2U7XG4gIC8vIGlmIG9uZSBpcyBhIHByaW1pdGl2ZSwgdGhlIG90aGVyIG11c3QgYmUgc2FtZVxuICBpZiAodXRpbC5pc1ByaW1pdGl2ZShhKSB8fCB1dGlsLmlzUHJpbWl0aXZlKGIpKVxuICAgIHJldHVybiBhID09PSBiO1xuICBpZiAoc3RyaWN0ICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSAhPT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGIpKVxuICAgIHJldHVybiBmYWxzZTtcbiAgdmFyIGFJc0FyZ3MgPSBpc0FyZ3VtZW50cyhhKTtcbiAgdmFyIGJJc0FyZ3MgPSBpc0FyZ3VtZW50cyhiKTtcbiAgaWYgKChhSXNBcmdzICYmICFiSXNBcmdzKSB8fCAoIWFJc0FyZ3MgJiYgYklzQXJncykpXG4gICAgcmV0dXJuIGZhbHNlO1xuICBpZiAoYUlzQXJncykge1xuICAgIGEgPSBwU2xpY2UuY2FsbChhKTtcbiAgICBiID0gcFNsaWNlLmNhbGwoYik7XG4gICAgcmV0dXJuIF9kZWVwRXF1YWwoYSwgYiwgc3RyaWN0KTtcbiAgfVxuICB2YXIga2EgPSBvYmplY3RLZXlzKGEpO1xuICB2YXIga2IgPSBvYmplY3RLZXlzKGIpO1xuICB2YXIga2V5LCBpO1xuICAvLyBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGtleXMgaW5jb3Jwb3JhdGVzXG4gIC8vIGhhc093blByb3BlcnR5KVxuICBpZiAoa2EubGVuZ3RoICE9PSBrYi5sZW5ndGgpXG4gICAgcmV0dXJuIGZhbHNlO1xuICAvL3RoZSBzYW1lIHNldCBvZiBrZXlzIChhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXIpLFxuICBrYS5zb3J0KCk7XG4gIGtiLnNvcnQoKTtcbiAgLy9+fn5jaGVhcCBrZXkgdGVzdFxuICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGlmIChrYVtpXSAhPT0ga2JbaV0pXG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy9lcXVpdmFsZW50IHZhbHVlcyBmb3IgZXZlcnkgY29ycmVzcG9uZGluZyBrZXksIGFuZFxuICAvL35+fnBvc3NpYmx5IGV4cGVuc2l2ZSBkZWVwIHRlc3RcbiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBrZXkgPSBrYVtpXTtcbiAgICBpZiAoIV9kZWVwRXF1YWwoYVtrZXldLCBiW2tleV0sIHN0cmljdCwgYWN0dWFsVmlzaXRlZE9iamVjdHMpKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyA4LiBUaGUgbm9uLWVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBmb3IgYW55IGRlZXAgaW5lcXVhbGl0eS5cbi8vIGFzc2VydC5ub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90RGVlcEVxdWFsID0gZnVuY3Rpb24gbm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgZmFsc2UpKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnbm90RGVlcEVxdWFsJywgYXNzZXJ0Lm5vdERlZXBFcXVhbCk7XG4gIH1cbn07XG5cbmFzc2VydC5ub3REZWVwU3RyaWN0RXF1YWwgPSBub3REZWVwU3RyaWN0RXF1YWw7XG5mdW5jdGlvbiBub3REZWVwU3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCB0cnVlKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ25vdERlZXBTdHJpY3RFcXVhbCcsIG5vdERlZXBTdHJpY3RFcXVhbCk7XG4gIH1cbn1cblxuXG4vLyA5LiBUaGUgc3RyaWN0IGVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBzdHJpY3QgZXF1YWxpdHksIGFzIGRldGVybWluZWQgYnkgPT09LlxuLy8gYXNzZXJ0LnN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LnN0cmljdEVxdWFsID0gZnVuY3Rpb24gc3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsICE9PSBleHBlY3RlZCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJz09PScsIGFzc2VydC5zdHJpY3RFcXVhbCk7XG4gIH1cbn07XG5cbi8vIDEwLiBUaGUgc3RyaWN0IG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHN0cmljdCBpbmVxdWFsaXR5LCBhc1xuLy8gZGV0ZXJtaW5lZCBieSAhPT0uICBhc3NlcnQubm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90U3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBub3RTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT09JywgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZXhwZWN0ZWRFeGNlcHRpb24oYWN0dWFsLCBleHBlY3RlZCkge1xuICBpZiAoIWFjdHVhbCB8fCAhZXhwZWN0ZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGV4cGVjdGVkKSA9PSAnW29iamVjdCBSZWdFeHBdJykge1xuICAgIHJldHVybiBleHBlY3RlZC50ZXN0KGFjdHVhbCk7XG4gIH1cblxuICB0cnkge1xuICAgIGlmIChhY3R1YWwgaW5zdGFuY2VvZiBleHBlY3RlZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSWdub3JlLiAgVGhlIGluc3RhbmNlb2YgY2hlY2sgZG9lc24ndCB3b3JrIGZvciBhcnJvdyBmdW5jdGlvbnMuXG4gIH1cblxuICBpZiAoRXJyb3IuaXNQcm90b3R5cGVPZihleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gZXhwZWN0ZWQuY2FsbCh7fSwgYWN0dWFsKSA9PT0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gX3RyeUJsb2NrKGJsb2NrKSB7XG4gIHZhciBlcnJvcjtcbiAgdHJ5IHtcbiAgICBibG9jaygpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZXJyb3IgPSBlO1xuICB9XG4gIHJldHVybiBlcnJvcjtcbn1cblxuZnVuY3Rpb24gX3Rocm93cyhzaG91bGRUaHJvdywgYmxvY2ssIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIHZhciBhY3R1YWw7XG5cbiAgaWYgKHR5cGVvZiBibG9jayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYmxvY2tcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZXhwZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgbWVzc2FnZSA9IGV4cGVjdGVkO1xuICAgIGV4cGVjdGVkID0gbnVsbDtcbiAgfVxuXG4gIGFjdHVhbCA9IF90cnlCbG9jayhibG9jayk7XG5cbiAgbWVzc2FnZSA9IChleHBlY3RlZCAmJiBleHBlY3RlZC5uYW1lID8gJyAoJyArIGV4cGVjdGVkLm5hbWUgKyAnKS4nIDogJy4nKSArXG4gICAgICAgICAgICAobWVzc2FnZSA/ICcgJyArIG1lc3NhZ2UgOiAnLicpO1xuXG4gIGlmIChzaG91bGRUaHJvdyAmJiAhYWN0dWFsKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnTWlzc2luZyBleHBlY3RlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7XG4gIH1cblxuICB2YXIgdXNlclByb3ZpZGVkTWVzc2FnZSA9IHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJztcbiAgdmFyIGlzVW53YW50ZWRFeGNlcHRpb24gPSAhc2hvdWxkVGhyb3cgJiYgdXRpbC5pc0Vycm9yKGFjdHVhbCk7XG4gIHZhciBpc1VuZXhwZWN0ZWRFeGNlcHRpb24gPSAhc2hvdWxkVGhyb3cgJiYgYWN0dWFsICYmICFleHBlY3RlZDtcblxuICBpZiAoKGlzVW53YW50ZWRFeGNlcHRpb24gJiZcbiAgICAgIHVzZXJQcm92aWRlZE1lc3NhZ2UgJiZcbiAgICAgIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB8fFxuICAgICAgaXNVbmV4cGVjdGVkRXhjZXB0aW9uKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnR290IHVud2FudGVkIGV4Y2VwdGlvbicgKyBtZXNzYWdlKTtcbiAgfVxuXG4gIGlmICgoc2hvdWxkVGhyb3cgJiYgYWN0dWFsICYmIGV4cGVjdGVkICYmXG4gICAgICAhZXhwZWN0ZWRFeGNlcHRpb24oYWN0dWFsLCBleHBlY3RlZCkpIHx8ICghc2hvdWxkVGhyb3cgJiYgYWN0dWFsKSkge1xuICAgIHRocm93IGFjdHVhbDtcbiAgfVxufVxuXG4vLyAxMS4gRXhwZWN0ZWQgdG8gdGhyb3cgYW4gZXJyb3I6XG4vLyBhc3NlcnQudGhyb3dzKGJsb2NrLCBFcnJvcl9vcHQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LnRocm93cyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9lcnJvciwgLypvcHRpb25hbCovbWVzc2FnZSkge1xuICBfdGhyb3dzKHRydWUsIGJsb2NrLCBlcnJvciwgbWVzc2FnZSk7XG59O1xuXG4vLyBFWFRFTlNJT04hIFRoaXMgaXMgYW5ub3lpbmcgdG8gd3JpdGUgb3V0c2lkZSB0aGlzIG1vZHVsZS5cbmFzc2VydC5kb2VzTm90VGhyb3cgPSBmdW5jdGlvbihibG9jaywgLypvcHRpb25hbCovZXJyb3IsIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHtcbiAgX3Rocm93cyhmYWxzZSwgYmxvY2ssIGVycm9yLCBtZXNzYWdlKTtcbn07XG5cbmFzc2VydC5pZkVycm9yID0gZnVuY3Rpb24oZXJyKSB7IGlmIChlcnIpIHRocm93IGVycjsgfTtcblxudmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBrZXlzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoaGFzT3duLmNhbGwob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcbiAgfVxuICByZXR1cm4ga2V5cztcbn07XG4iLCJleHBvcnRzLmVuZGlhbm5lc3MgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnTEUnIH07XG5cbmV4cG9ydHMuaG9zdG5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHR5cGVvZiBsb2NhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uLmhvc3RuYW1lXG4gICAgfVxuICAgIGVsc2UgcmV0dXJuICcnO1xufTtcblxuZXhwb3J0cy5sb2FkYXZnID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW10gfTtcblxuZXhwb3J0cy51cHRpbWUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAwIH07XG5cbmV4cG9ydHMuZnJlZW1lbSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gTnVtYmVyLk1BWF9WQUxVRTtcbn07XG5cbmV4cG9ydHMudG90YWxtZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE51bWJlci5NQVhfVkFMVUU7XG59O1xuXG5leHBvcnRzLmNwdXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbXSB9O1xuXG5leHBvcnRzLnR5cGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnQnJvd3NlcicgfTtcblxuZXhwb3J0cy5yZWxlYXNlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLmFwcFZlcnNpb247XG4gICAgfVxuICAgIHJldHVybiAnJztcbn07XG5cbmV4cG9ydHMubmV0d29ya0ludGVyZmFjZXNcbj0gZXhwb3J0cy5nZXROZXR3b3JrSW50ZXJmYWNlc1xuPSBmdW5jdGlvbiAoKSB7IHJldHVybiB7fSB9O1xuXG5leHBvcnRzLmFyY2ggPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnamF2YXNjcmlwdCcgfTtcblxuZXhwb3J0cy5wbGF0Zm9ybSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICdicm93c2VyJyB9O1xuXG5leHBvcnRzLnRtcGRpciA9IGV4cG9ydHMudG1wRGlyID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnL3RtcCc7XG59O1xuXG5leHBvcnRzLkVPTCA9ICdcXG4nO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsImlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufSBlbHNlIHtcbiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0J1ZmZlcihhcmcpIHtcbiAgcmV0dXJuIGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0J1xuICAgICYmIHR5cGVvZiBhcmcuY29weSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcuZmlsbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcucmVhZFVJbnQ4ID09PSAnZnVuY3Rpb24nO1xufSIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG52YXIgZm9ybWF0UmVnRXhwID0gLyVbc2RqJV0vZztcbmV4cG9ydHMuZm9ybWF0ID0gZnVuY3Rpb24oZikge1xuICBpZiAoIWlzU3RyaW5nKGYpKSB7XG4gICAgdmFyIG9iamVjdHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgb2JqZWN0cy5wdXNoKGluc3BlY3QoYXJndW1lbnRzW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3RzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIHZhciBpID0gMTtcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgdmFyIHN0ciA9IFN0cmluZyhmKS5yZXBsYWNlKGZvcm1hdFJlZ0V4cCwgZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSAnJSUnKSByZXR1cm4gJyUnO1xuICAgIGlmIChpID49IGxlbikgcmV0dXJuIHg7XG4gICAgc3dpdGNoICh4KSB7XG4gICAgICBjYXNlICclcyc6IHJldHVybiBTdHJpbmcoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVkJzogcmV0dXJuIE51bWJlcihhcmdzW2krK10pO1xuICAgICAgY2FzZSAnJWonOlxuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmdzW2krK10pO1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgcmV0dXJuICdbQ2lyY3VsYXJdJztcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgfVxuICB9KTtcbiAgZm9yICh2YXIgeCA9IGFyZ3NbaV07IGkgPCBsZW47IHggPSBhcmdzWysraV0pIHtcbiAgICBpZiAoaXNOdWxsKHgpIHx8ICFpc09iamVjdCh4KSkge1xuICAgICAgc3RyICs9ICcgJyArIHg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciArPSAnICcgKyBpbnNwZWN0KHgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3RyO1xufTtcblxuXG4vLyBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLlxuLy8gUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC5cbi8vIElmIC0tbm8tZGVwcmVjYXRpb24gaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG5leHBvcnRzLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKGZuLCBtc2cpIHtcbiAgLy8gQWxsb3cgZm9yIGRlcHJlY2F0aW5nIHRoaW5ncyBpbiB0aGUgcHJvY2VzcyBvZiBzdGFydGluZyB1cC5cbiAgaWYgKGlzVW5kZWZpbmVkKGdsb2JhbC5wcm9jZXNzKSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBleHBvcnRzLmRlcHJlY2F0ZShmbiwgbXNnKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cblxuICBpZiAocHJvY2Vzcy5ub0RlcHJlY2F0aW9uID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuICAgIGlmICghd2FybmVkKSB7XG4gICAgICBpZiAocHJvY2Vzcy50aHJvd0RlcHJlY2F0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLnRyYWNlRGVwcmVjYXRpb24pIHtcbiAgICAgICAgY29uc29sZS50cmFjZShtc2cpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtc2cpO1xuICAgICAgfVxuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICByZXR1cm4gZGVwcmVjYXRlZDtcbn07XG5cblxudmFyIGRlYnVncyA9IHt9O1xudmFyIGRlYnVnRW52aXJvbjtcbmV4cG9ydHMuZGVidWdsb2cgPSBmdW5jdGlvbihzZXQpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKGRlYnVnRW52aXJvbikpXG4gICAgZGVidWdFbnZpcm9uID0gcHJvY2Vzcy5lbnYuTk9ERV9ERUJVRyB8fCAnJztcbiAgc2V0ID0gc2V0LnRvVXBwZXJDYXNlKCk7XG4gIGlmICghZGVidWdzW3NldF0pIHtcbiAgICBpZiAobmV3IFJlZ0V4cCgnXFxcXGInICsgc2V0ICsgJ1xcXFxiJywgJ2knKS50ZXN0KGRlYnVnRW52aXJvbikpIHtcbiAgICAgIHZhciBwaWQgPSBwcm9jZXNzLnBpZDtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBtc2cgPSBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCclcyAlZDogJXMnLCBzZXQsIHBpZCwgbXNnKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7fTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlYnVnc1tzZXRdO1xufTtcblxuXG4vKipcbiAqIEVjaG9zIHRoZSB2YWx1ZSBvZiBhIHZhbHVlLiBUcnlzIHRvIHByaW50IHRoZSB2YWx1ZSBvdXRcbiAqIGluIHRoZSBiZXN0IHdheSBwb3NzaWJsZSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBwcmludCBvdXQuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRpb25hbCBvcHRpb25zIG9iamVjdCB0aGF0IGFsdGVycyB0aGUgb3V0cHV0LlxuICovXG4vKiBsZWdhY3k6IG9iaiwgc2hvd0hpZGRlbiwgZGVwdGgsIGNvbG9ycyovXG5mdW5jdGlvbiBpbnNwZWN0KG9iaiwgb3B0cykge1xuICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgdmFyIGN0eCA9IHtcbiAgICBzZWVuOiBbXSxcbiAgICBzdHlsaXplOiBzdHlsaXplTm9Db2xvclxuICB9O1xuICAvLyBsZWdhY3kuLi5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMykgY3R4LmRlcHRoID0gYXJndW1lbnRzWzJdO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSA0KSBjdHguY29sb3JzID0gYXJndW1lbnRzWzNdO1xuICBpZiAoaXNCb29sZWFuKG9wdHMpKSB7XG4gICAgLy8gbGVnYWN5Li4uXG4gICAgY3R4LnNob3dIaWRkZW4gPSBvcHRzO1xuICB9IGVsc2UgaWYgKG9wdHMpIHtcbiAgICAvLyBnb3QgYW4gXCJvcHRpb25zXCIgb2JqZWN0XG4gICAgZXhwb3J0cy5fZXh0ZW5kKGN0eCwgb3B0cyk7XG4gIH1cbiAgLy8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKSBjdHguc2hvd0hpZGRlbiA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmRlcHRoKSkgY3R4LmRlcHRoID0gMjtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKSBjdHguY29sb3JzID0gZmFsc2U7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpIGN0eC5jdXN0b21JbnNwZWN0ID0gdHJ1ZTtcbiAgaWYgKGN0eC5jb2xvcnMpIGN0eC5zdHlsaXplID0gc3R5bGl6ZVdpdGhDb2xvcjtcbiAgcmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCBjdHguZGVwdGgpO1xufVxuZXhwb3J0cy5pbnNwZWN0ID0gaW5zcGVjdDtcblxuXG4vLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FOU0lfZXNjYXBlX2NvZGUjZ3JhcGhpY3Ncbmluc3BlY3QuY29sb3JzID0ge1xuICAnYm9sZCcgOiBbMSwgMjJdLFxuICAnaXRhbGljJyA6IFszLCAyM10sXG4gICd1bmRlcmxpbmUnIDogWzQsIDI0XSxcbiAgJ2ludmVyc2UnIDogWzcsIDI3XSxcbiAgJ3doaXRlJyA6IFszNywgMzldLFxuICAnZ3JleScgOiBbOTAsIDM5XSxcbiAgJ2JsYWNrJyA6IFszMCwgMzldLFxuICAnYmx1ZScgOiBbMzQsIDM5XSxcbiAgJ2N5YW4nIDogWzM2LCAzOV0sXG4gICdncmVlbicgOiBbMzIsIDM5XSxcbiAgJ21hZ2VudGEnIDogWzM1LCAzOV0sXG4gICdyZWQnIDogWzMxLCAzOV0sXG4gICd5ZWxsb3cnIDogWzMzLCAzOV1cbn07XG5cbi8vIERvbid0IHVzZSAnYmx1ZScgbm90IHZpc2libGUgb24gY21kLmV4ZVxuaW5zcGVjdC5zdHlsZXMgPSB7XG4gICdzcGVjaWFsJzogJ2N5YW4nLFxuICAnbnVtYmVyJzogJ3llbGxvdycsXG4gICdib29sZWFuJzogJ3llbGxvdycsXG4gICd1bmRlZmluZWQnOiAnZ3JleScsXG4gICdudWxsJzogJ2JvbGQnLFxuICAnc3RyaW5nJzogJ2dyZWVuJyxcbiAgJ2RhdGUnOiAnbWFnZW50YScsXG4gIC8vIFwibmFtZVwiOiBpbnRlbnRpb25hbGx5IG5vdCBzdHlsaW5nXG4gICdyZWdleHAnOiAncmVkJ1xufTtcblxuXG5mdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG4gIHZhciBzdHlsZSA9IGluc3BlY3Quc3R5bGVzW3N0eWxlVHlwZV07XG5cbiAgaWYgKHN0eWxlKSB7XG4gICAgcmV0dXJuICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0gKyAnbScgKyBzdHIgK1xuICAgICAgICAgICAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzFdICsgJ20nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHI7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICByZXR1cm4gc3RyO1xufVxuXG5cbmZ1bmN0aW9uIGFycmF5VG9IYXNoKGFycmF5KSB7XG4gIHZhciBoYXNoID0ge307XG5cbiAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbih2YWwsIGlkeCkge1xuICAgIGhhc2hbdmFsXSA9IHRydWU7XG4gIH0pO1xuXG4gIHJldHVybiBoYXNoO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcykge1xuICAvLyBQcm92aWRlIGEgaG9vayBmb3IgdXNlci1zcGVjaWZpZWQgaW5zcGVjdCBmdW5jdGlvbnMuXG4gIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdFxuICBpZiAoY3R4LmN1c3RvbUluc3BlY3QgJiZcbiAgICAgIHZhbHVlICYmXG4gICAgICBpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpICYmXG4gICAgICAvLyBGaWx0ZXIgb3V0IHRoZSB1dGlsIG1vZHVsZSwgaXQncyBpbnNwZWN0IGZ1bmN0aW9uIGlzIHNwZWNpYWxcbiAgICAgIHZhbHVlLmluc3BlY3QgIT09IGV4cG9ydHMuaW5zcGVjdCAmJlxuICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suXG4gICAgICAhKHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSA9PT0gdmFsdWUpKSB7XG4gICAgdmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzLCBjdHgpO1xuICAgIGlmICghaXNTdHJpbmcocmV0KSkge1xuICAgICAgcmV0ID0gZm9ybWF0VmFsdWUoY3R4LCByZXQsIHJlY3Vyc2VUaW1lcyk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuICB2YXIgcHJpbWl0aXZlID0gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpO1xuICBpZiAocHJpbWl0aXZlKSB7XG4gICAgcmV0dXJuIHByaW1pdGl2ZTtcbiAgfVxuXG4gIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gIHZhciB2aXNpYmxlS2V5cyA9IGFycmF5VG9IYXNoKGtleXMpO1xuXG4gIGlmIChjdHguc2hvd0hpZGRlbikge1xuICAgIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSk7XG4gIH1cblxuICAvLyBJRSBkb2Vzbid0IG1ha2UgZXJyb3IgZmllbGRzIG5vbi1lbnVtZXJhYmxlXG4gIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4XG4gIGlmIChpc0Vycm9yKHZhbHVlKVxuICAgICAgJiYgKGtleXMuaW5kZXhPZignbWVzc2FnZScpID49IDAgfHwga2V5cy5pbmRleE9mKCdkZXNjcmlwdGlvbicpID49IDApKSB7XG4gICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICB2YXIgbmFtZSA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbRnVuY3Rpb24nICsgbmFtZSArICddJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcbiAgICB9XG4gICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ2RhdGUnKTtcbiAgICB9XG4gICAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBiYXNlID0gJycsIGFycmF5ID0gZmFsc2UsIGJyYWNlcyA9IFsneycsICd9J107XG5cbiAgLy8gTWFrZSBBcnJheSBzYXkgdGhhdCB0aGV5IGFyZSBBcnJheVxuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBhcnJheSA9IHRydWU7XG4gICAgYnJhY2VzID0gWydbJywgJ10nXTtcbiAgfVxuXG4gIC8vIE1ha2UgZnVuY3Rpb25zIHNheSB0aGF0IHRoZXkgYXJlIGZ1bmN0aW9uc1xuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICB2YXIgbiA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuICAgIGJhc2UgPSAnIFtGdW5jdGlvbicgKyBuICsgJ10nO1xuICB9XG5cbiAgLy8gTWFrZSBSZWdFeHBzIHNheSB0aGF0IHRoZXkgYXJlIFJlZ0V4cHNcbiAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlXG4gIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIERhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodmFsdWUpO1xuICB9XG5cbiAgLy8gTWFrZSBlcnJvciB3aXRoIG1lc3NhZ2UgZmlyc3Qgc2F5IHRoZSBlcnJvclxuICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgZm9ybWF0RXJyb3IodmFsdWUpO1xuICB9XG5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwICYmICghYXJyYXkgfHwgdmFsdWUubGVuZ3RoID09IDApKSB7XG4gICAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyBicmFjZXNbMV07XG4gIH1cblxuICBpZiAocmVjdXJzZVRpbWVzIDwgMCkge1xuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuXG4gIGN0eC5zZWVuLnB1c2godmFsdWUpO1xuXG4gIHZhciBvdXRwdXQ7XG4gIGlmIChhcnJheSkge1xuICAgIG91dHB1dCA9IGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpO1xuICB9IGVsc2Uge1xuICAgIG91dHB1dCA9IGtleXMubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpO1xuICAgIH0pO1xuICB9XG5cbiAgY3R4LnNlZW4ucG9wKCk7XG5cbiAgcmV0dXJuIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgndW5kZWZpbmVkJywgJ3VuZGVmaW5lZCcpO1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgdmFyIHNpbXBsZSA9ICdcXCcnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpLnJlcGxhY2UoL15cInxcIiQvZywgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpICsgJ1xcJyc7XG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKHNpbXBsZSwgJ3N0cmluZycpO1xuICB9XG4gIGlmIChpc051bWJlcih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdudW1iZXInKTtcbiAgaWYgKGlzQm9vbGVhbih2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7XG4gIC8vIEZvciBzb21lIHJlYXNvbiB0eXBlb2YgbnVsbCBpcyBcIm9iamVjdFwiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS5cbiAgaWYgKGlzTnVsbCh2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSkge1xuICByZXR1cm4gJ1snICsgRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpICsgJ10nO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHtcbiAgdmFyIG91dHB1dCA9IFtdO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgU3RyaW5nKGkpKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBTdHJpbmcoaSksIHRydWUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LnB1c2goJycpO1xuICAgIH1cbiAgfVxuICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgaWYgKCFrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuICAgICAgICAgIGtleSwgdHJ1ZSkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkge1xuICB2YXIgbmFtZSwgc3RyLCBkZXNjO1xuICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih2YWx1ZSwga2V5KSB8fCB7IHZhbHVlOiB2YWx1ZVtrZXldIH07XG4gIGlmIChkZXNjLmdldCkge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXIvU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChkZXNjLnNldCkge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tTZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFoYXNPd25Qcm9wZXJ0eSh2aXNpYmxlS2V5cywga2V5KSkge1xuICAgIG5hbWUgPSAnWycgKyBrZXkgKyAnXSc7XG4gIH1cbiAgaWYgKCFzdHIpIHtcbiAgICBpZiAoY3R4LnNlZW4uaW5kZXhPZihkZXNjLnZhbHVlKSA8IDApIHtcbiAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHIuaW5kZXhPZignXFxuJykgPiAtMSkge1xuICAgICAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJykuc3Vic3RyKDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciA9ICdcXG4nICsgc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICAnICsgbGluZTtcbiAgICAgICAgICB9KS5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0NpcmN1bGFyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmIChpc1VuZGVmaW5lZChuYW1lKSkge1xuICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cXGQrJC8pKSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpO1xuICAgIGlmIChuYW1lLm1hdGNoKC9eXCIoW2EtekEtWl9dW2EtekEtWl8wLTldKilcIiQvKSkge1xuICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcbiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheXCJ8XCIkKS9nLCBcIidcIik7XG4gICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuYW1lICsgJzogJyArIHN0cjtcbn1cblxuXG5mdW5jdGlvbiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcykge1xuICB2YXIgbnVtTGluZXNFc3QgPSAwO1xuICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHtcbiAgICBudW1MaW5lc0VzdCsrO1xuICAgIGlmIChjdXIuaW5kZXhPZignXFxuJykgPj0gMCkgbnVtTGluZXNFc3QrKztcbiAgICByZXR1cm4gcHJldiArIGN1ci5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZywgJycpLmxlbmd0aCArIDE7XG4gIH0sIDApO1xuXG4gIGlmIChsZW5ndGggPiA2MCkge1xuICAgIHJldHVybiBicmFjZXNbMF0gK1xuICAgICAgICAgICAoYmFzZSA9PT0gJycgPyAnJyA6IGJhc2UgKyAnXFxuICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgb3V0cHV0LmpvaW4oJyxcXG4gICcpICtcbiAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgYnJhY2VzWzFdO1xuICB9XG5cbiAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcbn1cblxuXG4vLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcbi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuZnVuY3Rpb24gaXNBcnJheShhcikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcik7XG59XG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG59XG5leHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblxuZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5leHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5leHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cbmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG59XG5leHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5leHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG4gIHJldHVybiBpc09iamVjdChyZSkgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBpc09iamVjdChkKSAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gaXNPYmplY3QoZSkgJiZcbiAgICAgIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xufVxuZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuXG5mdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sXG4gICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJztcbn1cbmV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTtcblxuZXhwb3J0cy5pc0J1ZmZlciA9IHJlcXVpcmUoJy4vc3VwcG9ydC9pc0J1ZmZlcicpO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG5cblxuZnVuY3Rpb24gcGFkKG4pIHtcbiAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4udG9TdHJpbmcoMTApIDogbi50b1N0cmluZygxMCk7XG59XG5cblxudmFyIG1vbnRocyA9IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLFxuICAgICAgICAgICAgICAnT2N0JywgJ05vdicsICdEZWMnXTtcblxuLy8gMjYgRmViIDE2OjE5OjM0XG5mdW5jdGlvbiB0aW1lc3RhbXAoKSB7XG4gIHZhciBkID0gbmV3IERhdGUoKTtcbiAgdmFyIHRpbWUgPSBbcGFkKGQuZ2V0SG91cnMoKSksXG4gICAgICAgICAgICAgIHBhZChkLmdldE1pbnV0ZXMoKSksXG4gICAgICAgICAgICAgIHBhZChkLmdldFNlY29uZHMoKSldLmpvaW4oJzonKTtcbiAgcmV0dXJuIFtkLmdldERhdGUoKSwgbW9udGhzW2QuZ2V0TW9udGgoKV0sIHRpbWVdLmpvaW4oJyAnKTtcbn1cblxuXG4vLyBsb2cgaXMganVzdCBhIHRoaW4gd3JhcHBlciB0byBjb25zb2xlLmxvZyB0aGF0IHByZXBlbmRzIGEgdGltZXN0YW1wXG5leHBvcnRzLmxvZyA9IGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmxvZygnJXMgLSAlcycsIHRpbWVzdGFtcCgpLCBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpKTtcbn07XG5cblxuLyoqXG4gKiBJbmhlcml0IHRoZSBwcm90b3R5cGUgbWV0aG9kcyBmcm9tIG9uZSBjb25zdHJ1Y3RvciBpbnRvIGFub3RoZXIuXG4gKlxuICogVGhlIEZ1bmN0aW9uLnByb3RvdHlwZS5pbmhlcml0cyBmcm9tIGxhbmcuanMgcmV3cml0dGVuIGFzIGEgc3RhbmRhbG9uZVxuICogZnVuY3Rpb24gKG5vdCBvbiBGdW5jdGlvbi5wcm90b3R5cGUpLiBOT1RFOiBJZiB0aGlzIGZpbGUgaXMgdG8gYmUgbG9hZGVkXG4gKiBkdXJpbmcgYm9vdHN0cmFwcGluZyB0aGlzIGZ1bmN0aW9uIG5lZWRzIHRvIGJlIHJld3JpdHRlbiB1c2luZyBzb21lIG5hdGl2ZVxuICogZnVuY3Rpb25zIGFzIHByb3RvdHlwZSBzZXR1cCB1c2luZyBub3JtYWwgSmF2YVNjcmlwdCBkb2VzIG5vdCB3b3JrIGFzXG4gKiBleHBlY3RlZCBkdXJpbmcgYm9vdHN0cmFwcGluZyAoc2VlIG1pcnJvci5qcyBpbiByMTE0OTAzKS5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGluaGVyaXQgdGhlXG4gKiAgICAgcHJvdG90eXBlLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gc3VwZXJDdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIGluaGVyaXQgcHJvdG90eXBlIGZyb20uXG4gKi9cbmV4cG9ydHMuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuXG5leHBvcnRzLl9leHRlbmQgPSBmdW5jdGlvbihvcmlnaW4sIGFkZCkge1xuICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiBhZGQgaXNuJ3QgYW4gb2JqZWN0XG4gIGlmICghYWRkIHx8ICFpc09iamVjdChhZGQpKSByZXR1cm4gb3JpZ2luO1xuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYWRkKTtcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIG9yaWdpbltrZXlzW2ldXSA9IGFkZFtrZXlzW2ldXTtcbiAgfVxuICByZXR1cm4gb3JpZ2luO1xufTtcblxuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFsIGdsb2JhbDogZmFsc2UgKi9cbi8qIGdsb2JhbCBYTUxIdHRwUmVxdWVzdDogZmFsc2UgKi9cblxucmVxdWlyZSgnLi9jdXN0b20uanMnKTtcbnZhciB0ZW1wbGF0ZUxvYWRlciA9IHJlcXVpcmUoJy4vdGVtcGxhdGUtbG9hZGVyLmpzJyk7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xucmVxdWlyZShcIi4va28tYmluZGluZ3MuanNcIik7XG5yZXF1aXJlKCcuL2V4cC1tYW5hZ2VyLmpzJyk7XG52YXIgcGVyZm9ybWFuY2VBd2FyZUNhbGxlciA9IHJlcXVpcmUoXCIuL3RpbWVkLWNhbGwuanNcIikudGltZWRDYWxsO1xuXG52YXIgYWRkVW5kb1N0YWNrRXh0ZW5zaW9uTWFrZXIgPSByZXF1aXJlKFwiLi91bmRvbWFuYWdlci91bmRvbWFpbi5qc1wiKTtcbnZhciBjb2xvclBsdWdpbiA9IHJlcXVpcmUoXCIuL2V4dC9jb2xvci5qc1wiKTtcbnZhciB1dGlsUGx1Z2luID0gcmVxdWlyZShcIi4vZXh0L3V0aWwuanNcIik7XG52YXIgaW5saW5lclBsdWdpbiA9IHJlcXVpcmUoXCIuL2V4dC9pbmxpbmVyLmpzXCIpO1xuXG52YXIgbG9jYWxTdG9yYWdlTG9hZGVyID0gcmVxdWlyZShcIi4vZXh0L2xvY2Fsc3RvcmFnZS5qc1wiKTtcblxuXG5pZiAodHlwZW9mIGtvID09ICd1bmRlZmluZWQnKSB0aHJvdyBcIkNhbm5vdCBmaW5kIGtub2Nrb3V0LmpzIGxpYnJhcnkhXCI7XG5pZiAodHlwZW9mICQgPT0gJ3VuZGVmaW5lZCcpIHRocm93IFwiQ2Fubm90IGZpbmQganF1ZXJ5IGxpYnJhcnkhXCI7XG5cbmZ1bmN0aW9uIF9jYW5vbmljYWxpemUodXJsKSB7XG4gIHZhciBkaXYgPSBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRpdi5pbm5lckhUTUwgPSBcIjxhPjwvYT5cIjtcbiAgZGl2LmZpcnN0Q2hpbGQuaHJlZiA9IHVybDsgLy8gRW5zdXJlcyB0aGF0IHRoZSBocmVmIGlzIHByb3Blcmx5IGVzY2FwZWRcbiAgZGl2LmlubmVySFRNTCA9IGRpdi5pbm5lckhUTUw7IC8vIFJ1biB0aGUgY3VycmVudCBpbm5lckhUTUwgYmFjayB0aHJvdWdoIHRoZSBwYXJzZXJcbiAgcmV0dXJuIGRpdi5maXJzdENoaWxkLmhyZWY7XG59XG5cbmZ1bmN0aW9uIF9hcHBlbmRVcmxQYXJhbWV0ZXJzKGJhc2VVcmwsIHBhcmFtZXRlcnMpIHtcbiAgdmFyIHBhcmFtU2VwYXJhdG9yID0gYmFzZVVybC5pbmRleE9mKCc/JykgPT0gLTEgPyAnPycgOiAnJic7XG4gIHZhciByZXMgPSBiYXNlVXJsO1xuICBmb3IgKHZhciBwYXJhbSBpbiBwYXJhbWV0ZXJzKSBpZiAocGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShwYXJhbSkpIHtcbiAgICByZXMgKz0gcGFyYW1TZXBhcmF0b3IgKyBwYXJhbSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtZXRlcnNbcGFyYW1dKTtcbiAgICBwYXJhbVNlcGFyYXRvciA9ICcmJztcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG52YXIgYXBwbHlCaW5kaW5nT3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMsIGtvKSB7XG5cbiAga28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWdTcmMuY29udmVydGVkVXJsID0gZnVuY3Rpb24oc3JjLCBtZXRob2QsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICB2YXIgcXVlcnlQYXJhbVNlcGFyYXRvcjtcbiAgICB2YXIgaW1nUHJvY2Vzc29yQmFja2VuZCA9IG9wdGlvbnMuaW1nUHJvY2Vzc29yQmFja2VuZCA/IG9wdGlvbnMuaW1nUHJvY2Vzc29yQmFja2VuZCA6ICcuL3VwbG9hZCc7XG4gICAgdmFyIGJhY2tFbmRNYXRjaCA9IGltZ1Byb2Nlc3NvckJhY2tlbmQubWF0Y2goL14oaHR0cHM/OlxcL1xcL1teXFwvXSpcXC8pLiokLyk7XG4gICAgdmFyIHNyY01hdGNoID0gc3JjLm1hdGNoKC9eKGh0dHBzPzpcXC9cXC9bXlxcL10qXFwvKS4qJC8pO1xuICAgIGlmIChiYWNrRW5kTWF0Y2ggPT09IG51bGwgfHwgKHNyY01hdGNoICE9PSBudWxsICYmIGJhY2tFbmRNYXRjaFsxXSA9PSBzcmNNYXRjaFsxXSkpIHtcbiAgICAgIHF1ZXJ5UGFyYW1TZXBhcmF0b3IgPSBpbWdQcm9jZXNzb3JCYWNrZW5kLmluZGV4T2YoJz8nKSA9PSAtMSA/ICc/JyA6ICcmJztcbiAgICAgIHJldHVybiBfYXBwZW5kVXJsUGFyYW1ldGVycyhpbWdQcm9jZXNzb3JCYWNrZW5kLCB7IHNyYzogc3JjLCBtZXRob2Q6IG1ldGhvZCwgcGFyYW1zOiB3aWR0aCArIFwiLFwiICsgaGVpZ2h0IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkNhbm5vdCBhcHBseSBiYWNrZW5kIGltYWdlIHJlc2l6aW5nIHRvIG5vbi1sb2NhbCByZXNvdXJjZXMgXCIsIHNyYywgbWV0aG9kLCB3aWR0aCwgaGVpZ2h0LCBiYWNrRW5kTWF0Y2gsIHNyY01hdGNoKTtcbiAgICAgIHZhciBwYXJhbXMgPSB7IG1ldGhvZDogbWV0aG9kLCB3aWR0aDogd2lkdGggfTtcbiAgICAgIGlmIChoZWlnaHQgIT09IG51bGwpIHBhcmFtc1snaGVpZ2h0J10gPSBoZWlnaHQ7XG4gICAgICByZXR1cm4gX2FwcGVuZFVybFBhcmFtZXRlcnMoc3JjLCBwYXJhbXMpO1xuICAgIH1cbiAgfTtcblxuICBrby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5Z1NyYy5wbGFjZWhvbGRlclVybCA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQsIHRleHQpIHtcbiAgICB2YXIgaW1nUHJvY2Vzc29yQmFja2VuZCA9IG9wdGlvbnMuaW1nUHJvY2Vzc29yQmFja2VuZCA/IG9wdGlvbnMuaW1nUHJvY2Vzc29yQmFja2VuZCA6ICcuL3VwbG9hZCc7XG4gICAgcmV0dXJuIF9hcHBlbmRVcmxQYXJhbWV0ZXJzKGltZ1Byb2Nlc3NvckJhY2tlbmQsIHsgbWV0aG9kOiAncGxhY2Vob2xkZXInLCBwYXJhbXM6IHdpZHRoICsgXCIsXCIgKyBoZWlnaHQgfSk7XG4gIH07XG5cbiAgLy8gcHVzaGVzIGN1c3RvbSB0aW55bWNlIGNvbmZpZ3VyYXRpb25zIGZyb20gb3B0aW9ucyB0byB0aGUgYmluZGluZ1xuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnRpbnltY2VDb25maWcpXG4gICAga28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWcuc3RhbmRhcmRPcHRpb25zID0gb3B0aW9ucy50aW55bWNlQ29uZmlnO1xuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnRpbnltY2VDb25maWdGdWxsKVxuICAgIGtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnLmZ1bGxPcHRpb25zID0gb3B0aW9ucy50aW55bWNlQ29uZmlnRnVsbDtcbn07XG5cbnZhciBzdGFydCA9IGZ1bmN0aW9uKG9wdGlvbnMsIHRlbXBsYXRlRmlsZSwgdGVtcGxhdGVNZXRhZGF0YSwganNvcmpzb24sIGN1c3RvbUV4dGVuc2lvbnMpIHtcblxuICB0ZW1wbGF0ZUxvYWRlci5maXhQYWdlRXZlbnRzKCk7XG5cbiAgdmFyIGZpbGVVcGxvYWRNZXNzYWdlc0V4dGVuc2lvbiA9IGZ1bmN0aW9uKHZtKSB7XG4gICAgdmFyIGZpbGV1cGxvYWRDb25maWcgPSB7XG4gICAgICBtZXNzYWdlczoge1xuICAgICAgICB1bmtub3duRXJyb3I6IHZtLnQoJ1Vua25vd24gZXJyb3InKSxcbiAgICAgICAgdXBsb2FkZWRCeXRlczogdm0udCgnVXBsb2FkZWQgYnl0ZXMgZXhjZWVkIGZpbGUgc2l6ZScpLFxuICAgICAgICBtYXhOdW1iZXJPZkZpbGVzOiB2bS50KCdNYXhpbXVtIG51bWJlciBvZiBmaWxlcyBleGNlZWRlZCcpLFxuICAgICAgICBhY2NlcHRGaWxlVHlwZXM6IHZtLnQoJ0ZpbGUgdHlwZSBub3QgYWxsb3dlZCcpLFxuICAgICAgICBtYXhGaWxlU2l6ZTogdm0udCgnRmlsZSBpcyB0b28gbGFyZ2UnKSxcbiAgICAgICAgbWluRmlsZVNpemU6IHZtLnQoJ0ZpbGUgaXMgdG9vIHNtYWxsJyksXG4gICAgICAgIHBvc3RfbWF4X3NpemU6IHZtLnQoJ1RoZSB1cGxvYWRlZCBmaWxlIGV4Y2VlZHMgdGhlIHBvc3RfbWF4X3NpemUgZGlyZWN0aXZlIGluIHBocC5pbmknKSxcbiAgICAgICAgbWF4X2ZpbGVfc2l6ZTogdm0udCgnRmlsZSBpcyB0b28gYmlnJyksXG4gICAgICAgIG1pbl9maWxlX3NpemU6IHZtLnQoJ0ZpbGUgaXMgdG9vIHNtYWxsJyksXG4gICAgICAgIGFjY2VwdF9maWxlX3R5cGVzOiB2bS50KCdGaWxldHlwZSBub3QgYWxsb3dlZCcpLFxuICAgICAgICBtYXhfbnVtYmVyX29mX2ZpbGVzOiB2bS50KCdNYXhpbXVtIG51bWJlciBvZiBmaWxlcyBleGNlZWRlZCcpLFxuICAgICAgICBtYXhfd2lkdGg6IHZtLnQoJ0ltYWdlIGV4Y2VlZHMgbWF4aW11bSB3aWR0aCcpLFxuICAgICAgICBtaW5fd2lkdGg6IHZtLnQoJ0ltYWdlIHJlcXVpcmVzIGEgbWluaW11bSB3aWR0aCcpLFxuICAgICAgICBtYXhfaGVpZ2h0OiB2bS50KCdJbWFnZSBleGNlZWRzIG1heGltdW0gaGVpZ2h0JyksXG4gICAgICAgIG1pbl9oZWlnaHQ6IHZtLnQoJ0ltYWdlIHJlcXVpcmVzIGEgbWluaW11bSBoZWlnaHQnKSxcbiAgICAgICAgYWJvcnQ6IHZtLnQoJ0ZpbGUgdXBsb2FkIGFib3J0ZWQnKSxcbiAgICAgICAgaW1hZ2VfcmVzaXplOiB2bS50KCdGYWlsZWQgdG8gcmVzaXplIGltYWdlJyksXG4gICAgICAgIGdlbmVyaWM6IHZtLnQoJ1VuZXhwZWN0ZWQgdXBsb2FkIGVycm9yJylcbiAgICAgIH1cbiAgICB9O1xuICAgIC8vIGZpbGVVcGxvYWQgb3B0aW9ucy5cbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZpbGV1cGxvYWRDb25maWcpXG4gICAgICBmaWxldXBsb2FkQ29uZmlnID0gJC5leHRlbmQodHJ1ZSwgZmlsZXVwbG9hZENvbmZpZywgb3B0aW9ucy5maWxldXBsb2FkQ29uZmlnKTtcblxuICAgIGtvLmJpbmRpbmdIYW5kbGVyc1snZmlsZXVwbG9hZCddLmV4dGVuZE9wdGlvbnMgPSBmaWxldXBsb2FkQ29uZmlnO1xuXG4gIH07XG5cbiAgdmFyIHNpbXBsZVRyYW5zbGF0aW9uUGx1Z2luID0gZnVuY3Rpb24odm0pIHtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnN0cmluZ3MpIHtcbiAgICAgIHZtLnQgPSBmdW5jdGlvbihrZXksIG9ialBhcmFtKSB7XG4gICAgICAgIHZhciByZXMgPSBvcHRpb25zLnN0cmluZ3Nba2V5XTtcbiAgICAgICAgaWYgKHR5cGVvZiByZXMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJNaXNzaW5nIHRyYW5zbGF0aW9uIHN0cmluZyBmb3JcIixrZXksXCI6IHVzaW5nIGRlZmF1bHQgc3RyaW5nXCIpO1xuICAgICAgICAgIHJlcyA9IGtleTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdm0udHQocmVzLCBvYmpQYXJhbSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcblxuICAvLyBzaW1wbGVUcmFuc2xhdGlvblBsdWdpbiBtdXN0IGJlIGJlZm9yZSB0aGUgdW5kb1N0YWNrIHRvIHRyYW5zbGF0ZSB1bmRvL3JlZG8gbGFiZWxzXG4gIHZhciBleHRlbnNpb25zID0gW3NpbXBsZVRyYW5zbGF0aW9uUGx1Z2luLCBhZGRVbmRvU3RhY2tFeHRlbnNpb25NYWtlcihwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyKSwgY29sb3JQbHVnaW4sIHV0aWxQbHVnaW4sIGlubGluZXJQbHVnaW5dO1xuICBpZiAodHlwZW9mIGN1c3RvbUV4dGVuc2lvbnMgIT09ICd1bmRlZmluZWQnKVxuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY3VzdG9tRXh0ZW5zaW9ucy5sZW5ndGg7IGsrKykgZXh0ZW5zaW9ucy5wdXNoKGN1c3RvbUV4dGVuc2lvbnNba10pO1xuICBleHRlbnNpb25zLnB1c2goZmlsZVVwbG9hZE1lc3NhZ2VzRXh0ZW5zaW9uKTtcblxuICB2YXIgZ2FsbGVyeVVybCA9IG9wdGlvbnMuZmlsZXVwbG9hZENvbmZpZyA/IG9wdGlvbnMuZmlsZXVwbG9hZENvbmZpZy51cmwgOiAnL3VwbG9hZC8nO1xuICBhcHBseUJpbmRpbmdPcHRpb25zKG9wdGlvbnMsIGtvKTtcblxuICAvLyBUT0RPIHdoYXQgYWJvdXQgYXBwZW5kaW5nIHRvIGFub3RoZXIgZWxlbWVudD9cbiAgJChcIjwhLS0ga28gdGVtcGxhdGU6ICdtYWluJyAtLT48IS0tIC9rbyAtLT5cIikuYXBwZW5kVG8oZ2xvYmFsLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0b3ItYXJlYScpKTtcbiAgJChcIjwhLS0ga28gdGVtcGxhdGU6ICd0aW55bWNlLWFyZWEnIC0tPjwhLS0gL2tvIC0tPlwiKS5hcHBlbmRUbyhnbG9iYWwuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbnltY2UtYXJlYScpKTtcbiAgJChcIjwhLS0ga28gdGVtcGxhdGU6ICd0aW55bWNlLXNpZGViYXInIC0tPjwhLS0gL2tvIC0tPlwiKS5hcHBlbmRUbyhnbG9iYWwuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Itc2lkZWJhcicpKTtcblxuICAvLyB0ZW1wbGF0ZUZpbGUgbWF5IG92ZXJyaWRlIHRoZSB0ZW1wbGF0ZSBwYXRoIGluIHRlbXBsYXRlTWV0YWRhdGFcbiAgaWYgKHR5cGVvZiB0ZW1wbGF0ZUZpbGUgPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRlbXBsYXRlTWV0YWRhdGEgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0ZW1wbGF0ZUZpbGUgPSB0ZW1wbGF0ZU1ldGFkYXRhLnRlbXBsYXRlO1xuICB9XG4gIC8vIFRPRE8gY2Fub25pY2FsaXplIHRlbXBsYXRlRmlsZSB0byBhYnNvbHV0ZSBvciByZWxhdGl2ZSBkZXBlbmRpbmcgb24gXCJyZWxhdGl2ZVVybHNFeGNlcHRpb25cIiBwbHVnaW5cblxuICB0ZW1wbGF0ZUxvYWRlci5sb2FkKHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIsIHRlbXBsYXRlRmlsZSwgdGVtcGxhdGVNZXRhZGF0YSwganNvcmpzb24sIGV4dGVuc2lvbnMsIGdhbGxlcnlVcmwpO1xuXG59O1xuXG52YXIgaW5pdEZyb21Mb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbihvcHRpb25zLCBoYXNoX2tleSwgY3VzdG9tRXh0ZW5zaW9ucykge1xuICB0cnkge1xuICAgIHZhciBsc0RhdGEgPSBsb2NhbFN0b3JhZ2VMb2FkZXIoaGFzaF9rZXksIG9wdGlvbnMuZW1haWxQcm9jZXNzb3JCYWNrZW5kKTtcbiAgICB2YXIgZXh0ZW5zaW9ucyA9IHR5cGVvZiBjdXN0b21FeHRlbnNpb25zICE9PSAndW5kZWZpbmVkJyA/IGN1c3RvbUV4dGVuc2lvbnMgOiBbXTtcbiAgICBleHRlbnNpb25zLnB1c2gobHNEYXRhLmV4dGVuc2lvbik7XG4gICAgdmFyIHRlbXBsYXRlID0gX2Nhbm9uaWNhbGl6ZShsc0RhdGEubWV0YWRhdGEudGVtcGxhdGUpO1xuICAgIHN0YXJ0KG9wdGlvbnMsIHRlbXBsYXRlLCBsc0RhdGEubWV0YWRhdGEsIGxzRGF0YS5tb2RlbCwgZXh0ZW5zaW9ucyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiVE9ETyBub3QgZm91bmQgXCIsIGhhc2hfa2V5LCBlKTtcbiAgfVxufTtcblxudmFyIGluaXQgPSBmdW5jdGlvbihvcHRpb25zLCBjdXN0b21FeHRlbnNpb25zKSB7XG5cbiAgdmFyIGhhc2ggPSBnbG9iYWwubG9jYXRpb24uaGFzaCA/IGdsb2JhbC5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiI1wiKVsxXSA6IHVuZGVmaW5lZDtcblxuICAvLyBMb2FkaW5nIGZyb20gY29uZmlndXJlZCB0ZW1wbGF0ZSBvciBjb25maWd1cmVkIG1ldGFkYXRhXG4gIGlmIChvcHRpb25zICYmIChvcHRpb25zLnRlbXBsYXRlIHx8IG9wdGlvbnMuZGF0YSkpIHtcbiAgICBpZiAob3B0aW9ucy5kYXRhKSB7XG4gICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2Uob3B0aW9ucy5kYXRhKTtcbiAgICAgIHN0YXJ0KG9wdGlvbnMsIHVuZGVmaW5lZCwgZGF0YS5tZXRhZGF0YSwgZGF0YS5jb250ZW50LCBjdXN0b21FeHRlbnNpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnQob3B0aW9ucywgb3B0aW9ucy50ZW1wbGF0ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGN1c3RvbUV4dGVuc2lvbnMpO1xuICAgIH1cbiAgICAvLyBMb2FkaW5nIGZyb20gTG9jYWxTdG9yYWdlIChpZiB1cmwgaGFzaCBoYXMgYSA3Y2hhcnMga2V5KVxuICB9IGVsc2UgaWYgKGhhc2ggJiYgaGFzaC5sZW5ndGggPT0gNykge1xuICAgIGluaXRGcm9tTG9jYWxTdG9yYWdlKG9wdGlvbnMsIGhhc2gsIGN1c3RvbUV4dGVuc2lvbnMpO1xuICAgIC8vIExvYWRpbmcgZnJvbSB0ZW1wbGF0ZSB1cmwgYXMgaGFzaCAoaWYgaGFzaCBpcyBub3QgYSB2YWxpZCBsb2NhbHN0b3JhZ2Uga2V5KVxuICB9IGVsc2UgaWYgKGhhc2gpIHtcbiAgICBzdGFydChvcHRpb25zLCBfY2Fub25pY2FsaXplKGhhc2gpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY3VzdG9tRXh0ZW5zaW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlzQ29tcGF0aWJsZTogdGVtcGxhdGVMb2FkZXIuaXNDb21wYXRpYmxlLFxuICBpbml0OiBpbml0LFxuICBzdGFydDogc3RhcnRcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cbi8vIEBzZWUgYWxzbyBzY3JpcHQtdGVtcGxhdGUuanMgcHVzaFRlbXBsYXRlXG52YXIgYWRkU2NyaXB0VGVtcGxhdGUgPSBmdW5jdGlvbihkb2MsIHRlbXBsYXRlTmFtZSwgdGVtcGxhdGVNYXJrdXApIHtcbiAgdmFyIHNjcmlwdFRhZyA9IGRvYy5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgc2NyaXB0VGFnLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2h0bWwnKTtcbiAgc2NyaXB0VGFnLnNldEF0dHJpYnV0ZSgnaWQnLCB0ZW1wbGF0ZU5hbWUpO1xuICBzY3JpcHRUYWcudGV4dCA9IHRlbXBsYXRlTWFya3VwO1xuICBkb2MuYm9keS5hcHBlbmRDaGlsZChzY3JpcHRUYWcpO1xuICByZXR1cm4gc2NyaXB0VGFnO1xuICAvLyAkKCc8c2NyaXB0IHR5cGU9XCJ0ZXh0L2h0bWxcIj48L3NjJyArICdyaXB0PicpLnRleHQodGVtcGxhdGVNYXJrdXApLmF0dHIoJ2lkJywgdGVtcGxhdGVOYW1lKS5hcHBlbmRUbygkKCdib2R5JykpO1xufTtcblxuLy8gdXNlZCBmb3IgbGl2ZSBwcmV2aWV3IGluIGlmcmFtZS5cbmtvLmJpbmRpbmdIYW5kbGVycy5iaW5kSWZyYW1lID0ge1xuICAvLyB0cGwgd2lsbCBiZSBvdmVycmlkZW4gd2l0aCB0aGUgc3RydWN0dXJlIHBhcnNlZCBieSB0aGUgaW5wdXQgdGVtcGxhdGUuXG4gIHRwbDogXCI8IURPQ1RZUEUgaHRtbD5cXHJcXG48aHRtbD5cXHJcXG48aGVhZD5cXHJcXG48L2hlYWQ+XFxyXFxuPGJvZHk+PGRpdiBkYXRhLWJpbmQ9XFxcImJsb2NrOiBjb250ZW50XFxcIj48L2Rpdj48L2JvZHk+XFxyXFxuPC9odG1sPlxcclxcblwiLFxuICBpbml0OiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yKSB7XG4gICAgZnVuY3Rpb24gYmluZElmcmFtZShsb2NhbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGlmcmFtZSA9IGVsZW1lbnQuY29udGVudERvY3VtZW50O1xuICAgICAgICBpZnJhbWUub3BlbigpO1xuICAgICAgICBpZnJhbWUud3JpdGUoa28uYmluZGluZ0hhbmRsZXJzLmJpbmRJZnJhbWUudHBsKTtcbiAgICAgICAgaWZyYW1lLmNsb3NlKCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgaWZyYW1lZG9jID0gaWZyYW1lLmJvZHk7XG4gICAgICAgICAgaWYgKGlmcmFtZWRvYykge1xuICAgICAgICAgICAgLy8gc2NyaXB0cyBoYXZlIHRvIGJlIGR1cGxpY2F0ZWQgKG1heWJlIHRoaXMgaXMgbm90IG5lZWRlZCBhbnltb3JlIHNpbmNlIHVzaW5nIHN0cmluZy10ZW1wbGF0ZXMpXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVzID0gZWxlbWVudC5jb250ZW50V2luZG93LnBhcmVudC5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXBsYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAodGVtcGxhdGVzW2ldLmdldEF0dHJpYnV0ZSgndHlwZScpID09ICd0ZXh0L2h0bWwnICYmIHRlbXBsYXRlc1tpXS5nZXRBdHRyaWJ1dGUoJ2lkJykpIHtcbiAgICAgICAgICAgICAgICBhZGRTY3JpcHRUZW1wbGF0ZShpZnJhbWUsIHRlbXBsYXRlc1tpXS5nZXRBdHRyaWJ1dGUoJ2lkJyksIHRlbXBsYXRlc1tpXS5pbm5lckhUTUwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBodG1sID0gaWZyYW1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiSFRNTFwiKTtcblxuICAgICAgICAgICAga28udXRpbHMuZG9tTm9kZURpc3Bvc2FsLmFkZERpc3Bvc2VDYWxsYmFjayhlbGVtZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAga28uY2xlYW5Ob2RlKGh0bWxbMF0gfHwgaWZyYW1lZG9jKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBrby5hcHBseUJpbmRpbmdzKHZhbHVlQWNjZXNzb3IoKSwgaHRtbFswXSB8fCBpZnJhbWVkb2MpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vIGlmcmFtZWRvY1wiLCBsb2NhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvciByZWFkaW5nIGlmcmFtZS5ib2R5XCIsIGUsIGxvY2FsKTtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3IgcmVhZGluZyBpZnJhbWUgY29udGVudERvY3VtZW50XCIsIGUsIGxvY2FsKTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgLy8gaWdub3JlZFxuICAgICAgfVxuICAgIH1cbiAgICBiaW5kSWZyYW1lKFwiZmlyc3QgY2FsbFwiKTtcbiAgICAvLyBvbGRlciBicm93c2VycyBuZWVkZWQgdGhpc1xuICAgIC8vIGtvLnV0aWxzLnJlZ2lzdGVyRXZlbnRIYW5kbGVyKGVsZW1lbnQsICdsb2FkJywgYmluZElmcmFtZSk7XG4gIH1cbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWxzIGdsb2JhbDpmYWxzZSAqL1xuXG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xuXG5cbmtvLmJpbmRpbmdIYW5kbGVyc1snd2l0aFByb3BlcnRpZXMnXSA9IHtcbiAgaW5pdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICAvLyBNYWtlIGEgbW9kaWZpZWQgYmluZGluZyBjb250ZXh0LCB3aXRoIGEgZXh0cmEgcHJvcGVydGllcywgYW5kIGFwcGx5IGl0IHRvIGRlc2NlbmRhbnQgZWxlbWVudHNcbiAgICB2YXIgY2hpbGRCaW5kaW5nQ29udGV4dCA9IGJpbmRpbmdDb250ZXh0LmNyZWF0ZUNoaWxkQ29udGV4dChcbiAgICAgIGJpbmRpbmdDb250ZXh0LiRyYXdEYXRhLFxuICAgICAgbnVsbCwgLy8gT3B0aW9uYWxseSwgcGFzcyBhIHN0cmluZyBoZXJlIGFzIGFuIGFsaWFzIGZvciB0aGUgZGF0YSBpdGVtIGluIGRlc2NlbmRhbnQgY29udGV4dHNcbiAgICAgIGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgICAgICAga28udXRpbHMuZXh0ZW5kKGNvbnRleHQsIHZhbHVlQWNjZXNzb3IoKSk7XG4gICAgICB9XG4gICAgKTtcbiAgICBrby5hcHBseUJpbmRpbmdzVG9EZXNjZW5kYW50cyhjaGlsZEJpbmRpbmdDb250ZXh0LCBlbGVtZW50KTtcblxuICAgIC8vIEFsc28gdGVsbCBLTyAqbm90KiB0byBiaW5kIHRoZSBkZXNjZW5kYW50cyBpdHNlbGYsIG90aGVyd2lzZSB0aGV5IHdpbGwgYmUgYm91bmQgdHdpY2VcbiAgICByZXR1cm4ge1xuICAgICAgY29udHJvbHNEZXNjZW5kYW50QmluZGluZ3M6IHRydWVcbiAgICB9O1xuICB9XG59O1xua28udmlydHVhbEVsZW1lbnRzLmFsbG93ZWRCaW5kaW5nc1snd2l0aFByb3BlcnRpZXMnXSA9IHRydWU7XG5cbmtvLmJpbmRpbmdIYW5kbGVyc1snbG9nJ10gPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgY29uc29sZS5sb2coXCJsb2dcIiwgdmFsdWVBY2Nlc3NvcigpKTtcbiAgfVxufTtcblxuXG5rby5iaW5kaW5nSGFuZGxlcnNbJ2Jsb2NrJ10gPSB7XG5cbiAgdGVtcGxhdGVFeGlzdHM6IGZ1bmN0aW9uKGlkKSB7XG4gICAgdmFyIGVsID0gZ2xvYmFsLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICBpZiAoZWwpIHJldHVybiB0cnVlO1xuICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIF9jaG9vc2VUZW1wbGF0ZTogZnVuY3Rpb24oaXNBcnJheSwgcHJlZml4LCBhY3Rpb24sIGZhbGxiYWNrKSB7XG4gICAgdmFyIGlkID0gcHJlZml4ICsgJy0nICsgYWN0aW9uO1xuICAgIGlmIChrby5iaW5kaW5nSGFuZGxlcnNbJ2Jsb2NrJ10udGVtcGxhdGVFeGlzdHMoaWQpKSByZXR1cm4gaWQ7XG4gICAgaWYgKHR5cGVvZiBmYWxsYmFjayAhPSAndW5kZWZpbmVkJyAmJiBmYWxsYmFjayAhPT0gbnVsbCkgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVyc1snYmxvY2snXS5fY2hvb3NlVGVtcGxhdGUoaXNBcnJheSwgcHJlZml4LCBmYWxsYmFjayk7XG4gICAgZWxzZSB7XG4gICAgICB2YXIgZmFsbEJhY2tJZCA9IGlzQXJyYXkgPyAnYXJyYXknIDogJ29iamVjdC0nICsgYWN0aW9uO1xuICAgICAgaWYgKGtvLmJpbmRpbmdIYW5kbGVyc1snYmxvY2snXS50ZW1wbGF0ZUV4aXN0cyhmYWxsQmFja0lkKSkgcmV0dXJuIGZhbGxCYWNrSWQ7XG4gICAgICBlbHNlIHRocm93IFwiY2Fubm90IGZpbmQgdGVtcGxhdGUgZm9yIFwiICsgaWQgKyBcIi9cIiArIGZhbGxCYWNrSWQ7XG4gICAgfVxuICB9LFxuXG4gIC8vIGNvbXB1dGUgZGlzcGxheU1vZGUgZGVwZW5kaW5nIG9uIHRlbXBsYXRlTW9kZSBzZXQgdXNpbmcgXCJ3aXRoUHJvcGVydGllc1wiIGJpbmRpbmcuXG4gIF9kaXNwbGF5TW9kZTogZnVuY3Rpb24odW53cmFwcGVkLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIHZhciBwcmVmaXggPSB0eXBlb2YgdW53cmFwcGVkLnR5cGUgIT0gJ3VuZGVmaW5lZCcgPyBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHVud3JhcHBlZC50eXBlKSA6ICdub3RhYmxvY2stJyArIHR5cGVvZih1bndyYXBwZWQpO1xuICAgIHZhciBpc0FycmF5ID0gdHlwZW9mIHVud3JhcHBlZC5zcGxpY2UgIT09ICd1bmRlZmluZWQnO1xuICAgIHZhciB0ZW1wbGF0ZU1vZGUgPSBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUgPyBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUgOiAnc2hvdyc7XG4gICAgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVyc1snYmxvY2snXS5fY2hvb3NlVGVtcGxhdGUoaXNBcnJheSwgcHJlZml4LCB0ZW1wbGF0ZU1vZGUsIGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZUZhbGxiYWNrKTtcbiAgfSxcblxuICBfbWFrZVRlbXBsYXRlVmFsdWVBY2Nlc3NvcjogZnVuY3Rpb24odmFsdWVBY2Nlc3NvciwgYmluZGluZ0NvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdmFsdWUgPSB2YWx1ZUFjY2Vzc29yKCksXG4gICAgICAgIHVud3JhcHBlZFZhbHVlID0ga28udXRpbHMucGVla09ic2VydmFibGUodmFsdWUpOyAvLyBVbndyYXAgd2l0aG91dCBzZXR0aW5nIGEgZGVwZW5kZW5jeSBoZXJlXG5cbiAgICAgIC8vIElmIHVud3JhcHBlZFZhbHVlLmRhdGEgaXMgdGhlIGFycmF5LCBwcmVzZXJ2ZSBhbGwgcmVsZXZhbnQgb3B0aW9ucyBhbmQgdW53cmFwIGFnYWluIHZhbHVlIHNvIHdlIGdldCB1cGRhdGVzXG4gICAgICB2YXIgbW9kZWxWYWx1ZTtcbiAgICAgIHZhciB0ZW1wbGF0ZTtcblxuICAgICAgaWYgKCghdW53cmFwcGVkVmFsdWUpIHx8ICh0eXBlb2YgdW53cmFwcGVkVmFsdWUuZGF0YSAhPSAnb2JqZWN0JyAmJiB0eXBlb2YgdW53cmFwcGVkVmFsdWUuZGF0YSAhPSAnZnVuY3Rpb24nKSkge1xuICAgICAgICBtb2RlbFZhbHVlID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb2RlbFZhbHVlID0gdW53cmFwcGVkVmFsdWUuZGF0YTtcbiAgICAgICAgaWYgKHR5cGVvZiB1bndyYXBwZWRWYWx1ZS50ZW1wbGF0ZSAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHZhciB0ZW1wbGF0ZVBhcmFtID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh1bndyYXBwZWRWYWx1ZS50ZW1wbGF0ZSk7XG4gICAgICAgICAgdmFyIHRlbXBsYXRlTW9kZSA9IGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSA/IGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSA6ICdzaG93JztcbiAgICAgICAgICB0ZW1wbGF0ZSA9IGtvLmJpbmRpbmdIYW5kbGVyc1snYmxvY2snXS5fY2hvb3NlVGVtcGxhdGUoZmFsc2UsIHRlbXBsYXRlUGFyYW0sIHRlbXBsYXRlTW9kZSwgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlRmFsbGJhY2spO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciB1bndyYXBwZWRNb2RlbFZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShtb2RlbFZhbHVlKTtcbiAgICAgIGlmIChrby5pc09ic2VydmFibGUodW53cmFwcGVkTW9kZWxWYWx1ZSkpIGNvbnNvbGUubG9nKFwiZG91YmxlT2JzZXJ2YWJsZVwiLCB1bndyYXBwZWRNb2RlbFZhbHVlKTtcblxuICAgICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBOT1RFIElFOCB1c2VkIHRvIGJyZWFrIGhlcmUsIGJ1dCB3ZSBkb24ndCBzdXBwb3J0IGl0IGFueW1vcmUsIHNvIG1heWJlIHRoaXMgaXMgbm90IG5lZWRlZC5cbiAgICAgICAgaWYgKG1vZGVsVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRlbXBsYXRlID0gJ2VtcHR5JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGVtcGxhdGUgPSBrby5iaW5kaW5nSGFuZGxlcnNbJ2Jsb2NrJ10uX2Rpc3BsYXlNb2RlKHVud3JhcHBlZE1vZGVsVmFsdWUsIGJpbmRpbmdDb250ZXh0KTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLCB1bndyYXBwZWRNb2RlbFZhbHVlLCBiaW5kaW5nQ29udGV4dFsnJGRhdGEnXSwgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgICduYW1lJzogdGVtcGxhdGUsXG4gICAgICAgICdkYXRhJzogbW9kZWxWYWx1ZSxcbiAgICAgICAgJ3RlbXBsYXRlRW5naW5lJzoga28ubmF0aXZlVGVtcGxhdGVFbmdpbmUuaW5zdGFuY2VcbiAgICAgIH07XG4gICAgfTtcbiAgfSxcblxuICAnaW5pdCc6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZUFjY2Vzc29yKCkgPT09ICd1bmRlZmluZWQnKSBjb25zb2xlLmxvZyhcImZvdW5kIGEgbnVsbCBibG9jazogY2hlY2sgZW5kaW5nIGNvbW1hcyBpbiBhcnJheXMgZGVmcyBpbiBJRVwiKTtcbiAgICB2YXIgbmV3VmFsdWVBY2Nlc3NvciA9IGtvLmJpbmRpbmdIYW5kbGVyc1snYmxvY2snXS5fbWFrZVRlbXBsYXRlVmFsdWVBY2Nlc3Nvcih2YWx1ZUFjY2Vzc29yLCBiaW5kaW5nQ29udGV4dCk7XG4gICAgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVyc1sndGVtcGxhdGUnXVsnaW5pdCddKGVsZW1lbnQsIG5ld1ZhbHVlQWNjZXNzb3IpO1xuICB9LFxuICAndXBkYXRlJzogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICB2YXIgbmV3VmFsdWVBY2Nlc3NvciA9IGtvLmJpbmRpbmdIYW5kbGVyc1snYmxvY2snXS5fbWFrZVRlbXBsYXRlVmFsdWVBY2Nlc3Nvcih2YWx1ZUFjY2Vzc29yLCBiaW5kaW5nQ29udGV4dCk7XG4gICAgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVyc1sndGVtcGxhdGUnXVsndXBkYXRlJ10oZWxlbWVudCwgbmV3VmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpO1xuICB9XG59O1xua28uZXhwcmVzc2lvblJld3JpdGluZy5iaW5kaW5nUmV3cml0ZVZhbGlkYXRvcnNbJ2Jsb2NrJ10gPSBmYWxzZTsgLy8gQ2FuJ3QgcmV3cml0ZSBjb250cm9sIGZsb3cgYmluZGluZ3NcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ2Jsb2NrJ10gPSB0cnVlOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBzY3JpcHQgdGVtcGxhdGUgaXMgdGhlIG9uZSBwcm92aWRlZCBieSBLTyBhbmQgZGVhbHMgd2l0aCB0ZW1wYWx0ZXMgZGVmaW5lZCBhcyA8c2NyaXB0IHR5cGU9dGV4dC9odG1sLlxuLy8gc3RyaW5nIHRlbXBsYXRlIGRlZmluZXMgdGhlbSBpbiBtZW1vcnkgYW5kIGF2b2lkcyBwb2xsdXRpbmcgdGhlIEhUTUw6IHNlZW1zIHRvIHdvcmsgYmV0dGVyIGluIE1vc2FpY28uXG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9zdHJpbmctdGVtcGxhdGUuanMnKTtcbi8vIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9zY3JpcHQtdGVtcGxhdGUuanMnKTsiLCJcInVzZSBzdHJpY3RcIjtcbi8qIGdsb2JhbCBnbG9iYWw6IGZhbHNlICovXG5cbnJlcXVpcmUoXCJldm9sLWNvbG9ycGlja2VyXCIpO1xuXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIga29qcXVpID0gcmVxdWlyZShcImtub2Nrb3V0LWpxdWVyeXVpXCIpO1xuXG5cbnZhciBDb2xvclBpY2tlciA9IGZ1bmN0aW9uKCkge1xuICBrb2pxdWkuQmluZGluZ0hhbmRsZXIuY2FsbCh0aGlzLCAnY29sb3JwaWNrZXInKTtcbn07XG5Db2xvclBpY2tlci5wcm90b3R5cGUgPSBrb2pxdWkudXRpbHMuY3JlYXRlT2JqZWN0KGtvanF1aS5CaW5kaW5nSGFuZGxlci5wcm90b3R5cGUpO1xuQ29sb3JQaWNrZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ29sb3JQaWNrZXI7XG5cbkNvbG9yUGlja2VyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MpIHtcbiAgdmFyIHZhID0gdmFsdWVBY2Nlc3NvcigpO1xuICB2YXIgdmFsdWUgPSB2YS5jb2xvcjtcblxuICAvLyBJbiBvcmRlciB0byBoYXZlIGEgY29ycmVjdCBkZXBlbmRlbmN5IHRyYWNraW5nIGluIFwiaWZTdWJzXCIgd2UgaGF2ZSB0byBlbnN1cmUgd2UgdXNlIGEgc2luZ2xlIGNvbXB1dGVyIGZvciBlYWNoIGVkaXRhYmxlXG4gIC8vIHByb3BlcnR5LiBHaXZlbiB0aGlzIGJpbmRpbmcgbmVlZHMgMiBvZiB0aGVtLCB3ZSBjcmVhdGUgYSBjb21wdXRlZCBzbyB0byBcInByb3h5XCIgdGhlIGRlcGVuZGVuY2llcy5cbiAgdmFyIG5ld0RPID0ga28uY29tcHV0ZWQoe1xuICAgIHJlYWQ6IHZhbHVlLFxuICAgIHdyaXRlOiB2YWx1ZSxcbiAgICBkaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQ6IGVsZW1lbnRcbiAgfSk7XG4gIHZhciBuZXdWQSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXdETztcbiAgfTtcblxuICBrby5iaW5kaW5nSGFuZGxlcnMudmFsdWUuaW5pdChlbGVtZW50LCBuZXdWQSwgYWxsQmluZGluZ3MpO1xuXG4gIHZhciBjaGFuZ2VQcm9wYWdhdG9yID0gZnVuY3Rpb24oZXZlbnQsIGNvbG9yKSB7XG4gICAgaWYgKHR5cGVvZiBjb2xvciAhPT0gJ3VuZGVmaW5lZCcpIG5ld0RPKGNvbG9yKTtcbiAgfTtcbiAgJChlbGVtZW50KS5vbignY2hhbmdlLmNvbG9yJywgY2hhbmdlUHJvcGFnYXRvcik7XG5cbiAga28uY29tcHV0ZWQoe1xuICAgIHJlYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9wdCA9IHtcbiAgICAgICAgY29sb3I6IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUobmV3RE8pLFxuICAgICAgICBzaG93T246ICdidXR0b24nXG4gICAgICB9O1xuICAgICAgZm9yICh2YXIgcHJvcCBpbiB2YSlcbiAgICAgICAgaWYgKHByb3AgIT09ICdjb2xvcicgJiYgdmEuaGFzT3duUHJvcGVydHkocHJvcCkpIG9wdFtwcm9wXSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFbcHJvcF0pO1xuICAgICAgJChlbGVtZW50KS5jb2xvcnBpY2tlcihvcHQpO1xuICAgIH0sXG4gICAgZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkOiBlbGVtZW50XG4gIH0pO1xuXG4gIGtvLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2soZWxlbWVudCwgZnVuY3Rpb24oKSB7XG4gICAgJChlbGVtZW50KS5vZmYoJ2NoYW5nZS5jb2xvcicsIGNoYW5nZVByb3BhZ2F0b3IpO1xuICAgICQoZWxlbWVudCkuY29sb3JwaWNrZXIoJ2Rlc3Ryb3knKTtcbiAgfSk7XG5cbn07XG5rb2pxdWkudXRpbHMucmVnaXN0ZXIoQ29sb3JQaWNrZXIpOyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG5cbi8qIGh0dHBzOi8vZ2l0aHViLmNvbS9rbm9ja291dC9rbm9ja291dC9pc3N1ZXMvMTE3MSAqL1xua28uYmluZGluZ0hhbmRsZXJzLmNzc1RleHQgPSB7XG4gICd1cGRhdGUnOiBmdW5jdGlvbihub2RlLCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncykge1xuICAgIHZhciB0ZXh0ID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkpO1xuICAgIHRyeSB7XG4gICAgICBub2RlLmlubmVyVGV4dCA9IHRleHQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFub2RlLnN0eWxlU2hlZXQpIG5vZGUuaW5uZXJIVE1MID0gXCJhe31cIjtcbiAgICAgIG5vZGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gdGV4dDtcbiAgICB9XG4gIH1cbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcblxuLyoga25vY2tvdXQgZHJvcHBhYmxlLCB3aXRoIHNpbXBsaWZpZWQgVU1EICovXG47KGZ1bmN0aW9uKGZhY3RvcnkpIHtcbiAgZmFjdG9yeShrbywgJCk7XG59KShmdW5jdGlvbihrbywgJCkge1xuICB2YXIgSVRFTUtFWSA9IFwia29fc29ydEl0ZW1cIixcbiAgICBJTkRFWEtFWSA9IFwia29fc291cmNlSW5kZXhcIixcbiAgICBMSVNUS0VZID0gXCJrb19zb3J0TGlzdFwiLFxuICAgIFBBUkVOVEtFWSA9IFwia29fcGFyZW50TGlzdFwiLFxuICAgIERSQUdLRVkgPSBcImtvX2RyYWdJdGVtXCIsXG4gICAgdW53cmFwID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSxcbiAgICBkYXRhR2V0ID0ga28udXRpbHMuZG9tRGF0YS5nZXQsXG4gICAgZGF0YVNldCA9IGtvLnV0aWxzLmRvbURhdGEuc2V0O1xuXG4gIGtvLmJpbmRpbmdIYW5kbGVycy5kcm9wcGFibGUgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3NvciwgZGF0YSwgY29udGV4dCkge1xuICAgICAgdmFyICRlbGVtZW50ID0gJChlbGVtZW50KSxcbiAgICAgICAgdmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSkgfHwge30sXG4gICAgICAgIGRyb3BwYWJsZSA9IHt9LFxuICAgICAgICBkcm9wQWN0dWFsO1xuXG4gICAgICAkLmV4dGVuZCh0cnVlLCBkcm9wcGFibGUsIGtvLmJpbmRpbmdIYW5kbGVycy5kcm9wcGFibGUpO1xuICAgICAgaWYgKHZhbHVlLmRhdGEpIHtcbiAgICAgICAgaWYgKHZhbHVlLm9wdGlvbnMgJiYgZHJvcHBhYmxlLm9wdGlvbnMpIHtcbiAgICAgICAgICBrby51dGlscy5leHRlbmQoZHJvcHBhYmxlLm9wdGlvbnMsIHZhbHVlLm9wdGlvbnMpO1xuICAgICAgICAgIGRlbGV0ZSB2YWx1ZS5vcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIGtvLnV0aWxzLmV4dGVuZChkcm9wcGFibGUsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyb3BwYWJsZS5kYXRhID0gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGRyb3BBY3R1YWwgPSBkcm9wcGFibGUub3B0aW9ucy5kcm9wO1xuXG4gICAgICAkZWxlbWVudC5kcm9wcGFibGUoa28udXRpbHMuZXh0ZW5kKGRyb3BwYWJsZS5vcHRpb25zLCB7XG4gICAgICAgIGRyb3A6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuXG4gICAgICAgICAgdmFyIGVsID0gdWkuZHJhZ2dhYmxlWzBdLFxuICAgICAgICAgICAgaXRlbSA9IGRhdGFHZXQoZWwsIElURU1LRVkpIHx8IGRhdGFHZXQoZWwsIERSQUdLRVkpO1xuXG4gICAgICAgICAgaWYgKGl0ZW0pIHtcblxuICAgICAgICAgICAgaWYgKGl0ZW0uY2xvbmUpIHtcbiAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uY2xvbmUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRyb3BwYWJsZS5kcmFnZ2VkKSB7XG4gICAgICAgICAgICAgIGl0ZW0gPSBkcm9wcGFibGUuZHJhZ2dlZC5jYWxsKHRoaXMsIGl0ZW0sIGV2ZW50LCB1aSkgfHwgaXRlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRyb3BwYWJsZS5kYXRhKSB7XG4gICAgICAgICAgICAgIGRyb3BwYWJsZS5kYXRhKGl0ZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGRyb3BBY3R1YWwpIHtcbiAgICAgICAgICAgIGRyb3BBY3R1YWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfSkpO1xuXG4gICAgICAvL2hhbmRsZSBlbmFibGluZy9kaXNhYmxpbmdcbiAgICAgIGlmIChkcm9wcGFibGUuaXNFbmFibGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAga28uY29tcHV0ZWQoe1xuICAgICAgICAgIHJlYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJGVsZW1lbnQuZHJvcHBhYmxlKGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoZHJvcHBhYmxlLmlzRW5hYmxlZCkgPyBcImVuYWJsZVwiIDogXCJkaXNhYmxlXCIpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkOiBlbGVtZW50XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgfSxcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIGRhdGEsIGNvbnRleHQpIHtcblxuICAgIH0sXG4gICAgdGFyZ2V0SW5kZXg6IG51bGwsXG4gICAgYWZ0ZXJNb3ZlOiBudWxsLFxuICAgIGJlZm9yZU1vdmU6IG51bGwsXG4gICAgb3B0aW9uczoge31cbiAgfTtcbn0pOyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xuXG4vKiB1dGlsaXR5IGZvciB0b2dldGhlcmpzICovXG5rby5iaW5kaW5nSGFuZGxlcnMuZm9jdXNhYmxlID0ge1xuICAnZm9jdXMnOiBmdW5jdGlvbigpIHt9LFxuICAnYmx1cic6IGZ1bmN0aW9uKCkge30sXG4gICdpbml0JzogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIGtvLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2soZWxlbWVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAkKGVsZW1lbnQpLm9mZihcImZvY3VzaW5cIiwga28uYmluZGluZ0hhbmRsZXJzLmZvY3VzYWJsZS5mb2N1cyk7XG4gICAgICAkKGVsZW1lbnQpLm9mZihcImZvY3Vzb3V0XCIsIGtvLmJpbmRpbmdIYW5kbGVycy5mb2N1c2FibGUuYmx1cik7XG4gICAgfSk7XG5cbiAgICAkKGVsZW1lbnQpLm9uKFwiZm9jdXNpblwiLCBrby5iaW5kaW5nSGFuZGxlcnMuZm9jdXNhYmxlLmZvY3VzKTtcbiAgICAkKGVsZW1lbnQpLm9uKFwiZm9jdXNvdXRcIiwga28uYmluZGluZ0hhbmRsZXJzLmZvY3VzYWJsZS5ibHVyKTtcblxuICB9XG59O1xuXG5rby5iaW5kaW5nSGFuZGxlcnMuc2Nyb2xsYWJsZSA9IHtcbiAgJ3Njcm9sbCc6IGZ1bmN0aW9uKCkge30sXG4gICdpbml0JzogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIGtvLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2soZWxlbWVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAkKGVsZW1lbnQpLm9mZihcInNjcm9sbFwiLCBrby5iaW5kaW5nSGFuZGxlcnMuc2Nyb2xsYWJsZS5zY3JvbGwpO1xuICAgIH0pO1xuXG4gICAgJChlbGVtZW50KS5vbihcInNjcm9sbFwiLCBrby5iaW5kaW5nSGFuZGxlcnMuc2Nyb2xsYWJsZS5zY3JvbGwpO1xuXG4gIH1cbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcblxua28uZXh0ZW5kZXJzLnBhZ2luZyA9IGZ1bmN0aW9uKHRhcmdldCwgcGFnZVNpemUpIHtcbiAgdmFyIF9wYWdlU2l6ZSA9IGtvLm9ic2VydmFibGUocGFnZVNpemUgfHwgMTApLFxuICAgIC8vIGRlZmF1bHQgcGFnZVNpemUgdG8gMTBcbiAgICBfY3VycmVudFBhZ2UgPSBrby5vYnNlcnZhYmxlKDEpOyAvLyBkZWZhdWx0IGN1cnJlbnQgcGFnZSB0byAxXG4gIHRhcmdldC5wYWdlU2l6ZSA9IGtvLmNvbXB1dGVkKHtcbiAgICByZWFkOiBfcGFnZVNpemUsXG4gICAgd3JpdGU6IGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XG4gICAgICBpZiAobmV3VmFsdWUgPiAwKSB7XG4gICAgICAgIF9wYWdlU2l6ZShuZXdWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfcGFnZVNpemUoMTApO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgdGFyZ2V0LmN1cnJlbnRQYWdlID0ga28uY29tcHV0ZWQoe1xuICAgIHJlYWQ6IF9jdXJyZW50UGFnZSxcbiAgICB3cml0ZTogZnVuY3Rpb24obmV3VmFsdWUpIHtcbiAgICAgIGlmIChuZXdWYWx1ZSA+IHRhcmdldC5wYWdlQ291bnQoKSkge1xuICAgICAgICBfY3VycmVudFBhZ2UodGFyZ2V0LnBhZ2VDb3VudCgpKTtcbiAgICAgIH0gZWxzZSBpZiAobmV3VmFsdWUgPD0gMCkge1xuICAgICAgICBfY3VycmVudFBhZ2UoMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfY3VycmVudFBhZ2UobmV3VmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgdGFyZ2V0LnBhZ2VDb3VudCA9IGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBNYXRoLmNlaWwodGFyZ2V0KCkubGVuZ3RoIC8gdGFyZ2V0LnBhZ2VTaXplKCkpIHx8IDE7XG4gIH0pO1xuXG4gIHRhcmdldC5jdXJyZW50UGFnZURhdGEgPSBrby5jb21wdXRlZChmdW5jdGlvbigpIHtcbiAgICB2YXIgcGFnZVNpemUgPSBfcGFnZVNpemUoKSxcbiAgICAgIHBhZ2VJbmRleCA9IF9jdXJyZW50UGFnZSgpLFxuICAgICAgc3RhcnRJbmRleCA9IHBhZ2VTaXplICogKHBhZ2VJbmRleCAtIDEpLFxuICAgICAgZW5kSW5kZXggPSBwYWdlU2l6ZSAqIHBhZ2VJbmRleDtcblxuICAgIHJldHVybiB0YXJnZXQoKS5zbGljZShzdGFydEluZGV4LCBlbmRJbmRleCk7XG4gIH0pO1xuXG4gIHRhcmdldC5tb3ZlRmlyc3QgPSBmdW5jdGlvbigpIHtcbiAgICB0YXJnZXQuY3VycmVudFBhZ2UoMSk7XG4gIH07XG4gIHRhcmdldC5tb3ZlUHJldmlvdXMgPSBmdW5jdGlvbigpIHtcbiAgICB0YXJnZXQuY3VycmVudFBhZ2UodGFyZ2V0LmN1cnJlbnRQYWdlKCkgLSAxKTtcbiAgfTtcbiAgdGFyZ2V0Lm1vdmVOZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGFyZ2V0LmN1cnJlbnRQYWdlKHRhcmdldC5jdXJyZW50UGFnZSgpICsgMSk7XG4gIH07XG4gIHRhcmdldC5tb3ZlTGFzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHRhcmdldC5jdXJyZW50UGFnZSh0YXJnZXQucGFnZUNvdW50KCkpO1xuICB9O1xuXG4gIHJldHVybiB0YXJnZXQ7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFscyBnbG9iYWw6IHRydWUgKi9cblxudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xudmFyIHNvcnRhYmxlID0gcmVxdWlyZShcImpxdWVyeS11aS9zb3J0YWJsZVwiKTtcbnZhciBkcmFnZ2FibGUgPSByZXF1aXJlKFwianF1ZXJ5LXVpL2RyYWdnYWJsZVwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5yZXF1aXJlKFwia25vY2tvdXQtc29ydGFibGVcIik7XG5cbmlmICh0eXBlb2Ygc29ydGFibGUgPT0gJ3VuZGVmaW5lZCcpIHRocm93IFwiQ2Fubm90IGZpbmQganF1ZXJ5LXVpIHNvcnRhYmxlIHdpZGdldCBkZXBlbmRlbmN5IVwiO1xuaWYgKHR5cGVvZiBkcmFnZ2FibGUgPT0gJ3VuZGVmaW5lZCcpIHRocm93IFwiQ2Fubm90IGZpbmQganF1ZXJ5LXVpIHNvcnRhYmxlIHdpZGdldCBkZXBlbmRlbmN5IVwiO1xuXG52YXIgaXNEcmFnZ2luZ0hlbHBlciA9IGZ1bmN0aW9uKHdyaXRhYmxlLCBlKSB7XG4gIGlmICh3cml0YWJsZSgpKSB7XG4gICAgaWYgKGUudHlwZSA9PSB3cml0YWJsZSgpICsgJ3N0b3AnKSB3cml0YWJsZShmYWxzZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGUudHlwZSA9PSAnZHJhZ3N0YXJ0JyB8fCBlLnR5cGUgPT0gJ3NvcnRzdGFydCcpIHdyaXRhYmxlKGUudHlwZS5zdWJzdHJpbmcoMCwgNCkpO1xuICB9XG59O1xuXG52YXIgbWFrZUV4dGVuZGVkVmFsdWVBY2Nlc3NvciA9IGZ1bmN0aW9uKHZhbHVlQWNjZXNzb3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBtb2RlbFZhbHVlID0gdmFsdWVBY2Nlc3NvcigpLFxuICAgICAgdW53cmFwcGVkVmFsdWUgPSBrby51dGlscy5wZWVrT2JzZXJ2YWJsZShtb2RlbFZhbHVlKTsgLy8gVW53cmFwIHdpdGhvdXQgc2V0dGluZyBhIGRlcGVuZGVuY3kgaGVyZVxuXG4gICAga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShtb2RlbFZhbHVlKTtcblxuICAgIGlmIChtb2RlbFZhbHVlLm9wdGlvbnMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1vZGVsVmFsdWUub3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIHZhciBvcmlnU3RhcnQgPSBtb2RlbFZhbHVlLm9wdGlvbnMuc3RhcnQ7XG4gICAgbW9kZWxWYWx1ZS5vcHRpb25zLnN0YXJ0ID0gZnVuY3Rpb24oZSwgdWkpIHtcbiAgICAgIGlmICh0eXBlb2YgbW9kZWxWYWx1ZS5kcmFnZ2luZyAhPSAndW5kZWZpbmVkJyAmJiBrby5pc1dyaXRhYmxlT2JzZXJ2YWJsZShtb2RlbFZhbHVlLmRyYWdnaW5nKSkgaXNEcmFnZ2luZ0hlbHBlcihtb2RlbFZhbHVlLmRyYWdnaW5nLCBlKTtcbiAgICAgIGlmICh0eXBlb2YgbW9kZWxWYWx1ZS5kcm9wQ29udGFpbmVyICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG1vZGVsVmFsdWUuc2Nyb2xsSW50ZXJ2YWwgPSBnbG9iYWwuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGZvbyA9ICQobW9kZWxWYWx1ZS5kcm9wQ29udGFpbmVyKS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAkKG1vZGVsVmFsdWUuZHJvcENvbnRhaW5lcikuc2Nyb2xsVG9wKGZvbyArIG1vZGVsVmFsdWUuYWRkaW5nKTtcbiAgICAgICAgfSwgMjApO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBvcmlnU3RhcnQgIT0gJ3VuZGVmaW5lZCcpIHJldHVybiBvcmlnU3RhcnQoZSwgdWkpO1xuICAgIH07XG4gICAgdmFyIG9yaWdTdG9wID0gbW9kZWxWYWx1ZS5vcHRpb25zLnN0b3A7XG4gICAgbW9kZWxWYWx1ZS5vcHRpb25zLnN0b3AgPSBmdW5jdGlvbihlLCB1aSkge1xuICAgICAgaWYgKHR5cGVvZiBtb2RlbFZhbHVlLmRyYWdnaW5nICE9ICd1bmRlZmluZWQnICYmIGtvLmlzV3JpdGFibGVPYnNlcnZhYmxlKG1vZGVsVmFsdWUuZHJhZ2dpbmcpKSBpc0RyYWdnaW5nSGVscGVyKG1vZGVsVmFsdWUuZHJhZ2dpbmcsIGUpO1xuICAgICAgaWYgKHR5cGVvZiBtb2RlbFZhbHVlLmRyb3BDb250YWluZXIgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZ2xvYmFsLmNsZWFySW50ZXJ2YWwobW9kZWxWYWx1ZS5zY3JvbGxJbnRlcnZhbCk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIG9yaWdTdG9wICE9ICd1bmRlZmluZWQnKSByZXR1cm4gb3JpZ1N0b3AoZSwgdWkpO1xuICAgIH07XG4gICAgdmFyIG9yaWdEcmFnID0gbW9kZWxWYWx1ZS5vcHRpb25zLmRyYWc7XG4gICAgbW9kZWxWYWx1ZS5vcHRpb25zLmRyYWcgPSBmdW5jdGlvbihlLCB1aSkge1xuICAgICAgaWYgKHR5cGVvZiBtb2RlbFZhbHVlLmRyb3BDb250YWluZXIgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIHRvcCA9IGUucGFnZVkgLSAkKG1vZGVsVmFsdWUuZHJvcENvbnRhaW5lcikub2Zmc2V0KCkudG9wO1xuICAgICAgICB2YXIgYm90dG9tID0gdG9wIC0gJChtb2RlbFZhbHVlLmRyb3BDb250YWluZXIpLmhlaWdodCgpO1xuICAgICAgICAvLyBIYW5kbGUgc2Nyb2xsaW5nIHNwZWVkIGRlcGVuZGluZyBvbiBkaXN0YW5jZSBmcm9tIGJvcmRlci5cbiAgICAgICAgaWYgKHRvcCA8IC0yMCkge1xuICAgICAgICAgIG1vZGVsVmFsdWUuYWRkaW5nID0gLTIwO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiPDw8XCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHRvcCA8IDApIHtcbiAgICAgICAgICBtb2RlbFZhbHVlLmFkZGluZyA9IC0xMDtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIjw8XCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHRvcCA8IDEwKSB7XG4gICAgICAgICAgbW9kZWxWYWx1ZS5hZGRpbmcgPSAtNTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIjxcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoYm90dG9tID4gMjApIHtcbiAgICAgICAgICBtb2RlbFZhbHVlLmFkZGluZyA9IDIwO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiPj4+XCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGJvdHRvbSA+IDApIHtcbiAgICAgICAgICBtb2RlbFZhbHVlLmFkZGluZyA9IDEwO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiPj5cIik7XG4gICAgICAgIH0gZWxzZSBpZiAoYm90dG9tID4gLTEwKSB7XG4gICAgICAgICAgbW9kZWxWYWx1ZS5hZGRpbmcgPSA1O1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiPlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb2RlbFZhbHVlLmFkZGluZyA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2Ygb3JpZ0RyYWcgIT0gJ3VuZGVmaW5lZCcpIHJldHVybiBvcmlnRHJhZyhlLCB1aSk7XG4gICAgfTtcblxuICAgIHJldHVybiBtb2RlbFZhbHVlO1xuICB9O1xufTtcblxua28uYmluZGluZ0hhbmRsZXJzLmV4dHNvcnRhYmxlID0ge1xuICBpbml0OiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCBkYXRhLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVycy5zb3J0YWJsZS5pbml0KGVsZW1lbnQsIG1ha2VFeHRlbmRlZFZhbHVlQWNjZXNzb3IodmFsdWVBY2Nlc3NvciksIGFsbEJpbmRpbmdzQWNjZXNzb3IsIGRhdGEsIGNvbnRleHQpO1xuICB9LFxuICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIGRhdGEsIGNvbnRleHQpIHtcbiAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzLnNvcnRhYmxlLnVwZGF0ZShlbGVtZW50LCBtYWtlRXh0ZW5kZWRWYWx1ZUFjY2Vzc29yKHZhbHVlQWNjZXNzb3IpLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCBkYXRhLCBjb250ZXh0KTtcbiAgfVxufTtcblxua28uYmluZGluZ0hhbmRsZXJzLmV4dGRyYWdnYWJsZSA9IHtcbiAgaW5pdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3NvciwgZGF0YSwgY29udGV4dCkge1xuICAgIHJldHVybiBrby5iaW5kaW5nSGFuZGxlcnMuZHJhZ2dhYmxlLmluaXQoZWxlbWVudCwgbWFrZUV4dGVuZGVkVmFsdWVBY2Nlc3Nvcih2YWx1ZUFjY2Vzc29yKSwgYWxsQmluZGluZ3NBY2Nlc3NvciwgZGF0YSwgY29udGV4dCk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3NvciwgZGF0YSwgY29udGV4dCkge1xuICAgIHJldHVybiBrby5iaW5kaW5nSGFuZGxlcnMuZHJhZ2dhYmxlLnVwZGF0ZShlbGVtZW50LCBtYWtlRXh0ZW5kZWRWYWx1ZUFjY2Vzc29yKHZhbHVlQWNjZXNzb3IpLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCBkYXRhLCBjb250ZXh0KTtcbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcbi8qIGdsb2JhbCBnbG9iYWw6IGZhbHNlLCBJbWFnZTogZmFsc2UgKi9cblxuLy8gVGhpcyBtb2R1bGUgZGVwZW5kcyBvbiB0aG9zZSBmaWxlcywgYnV0IGl0IGRvZXNuJ3QgaGF2ZSBhIGRpcmVjdCBkZXBlbmRlbmN5LCBzbyB3ZSBkb24ndCByZXF1aXJlIHRoZW0gaGVyZS5cblxuLy9yZXF1aXJlKFwiYmx1ZWltcC1jYW52YXMtdG8tYmxvYlwiKTtcbi8vcmVxdWlyZShcImpxdWVyeS1maWxlLXVwbG9hZC9qcy9qcXVlcnkuaWZyYW1lLXRyYW5zcG9ydC5qc1wiKTtcbi8vcmVxdWlyZShcImpxdWVyeS1maWxlLXVwbG9hZC9qcy9qcXVlcnkuZmlsZXVwbG9hZC5qc1wiKTtcbi8vcmVxdWlyZShcImpxdWVyeS1maWxlLXVwbG9hZC9qcy9qcXVlcnkuZmlsZXVwbG9hZC1wcm9jZXNzLmpzXCIpO1xuLy9yZXF1aXJlKFwianF1ZXJ5LWZpbGUtdXBsb2FkL2pzL2pxdWVyeS5maWxldXBsb2FkLWltYWdlLmpzXCIpO1xuLy9yZXF1aXJlKFwianF1ZXJ5LWZpbGUtdXBsb2FkL2pzL2pxdWVyeS5maWxldXBsb2FkLXZhbGlkYXRlLmpzXCIpO1xuXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xuXG4vLyBleHBlcmltZW50YWwgaW1hZ2UgcHJlbG9hZGluZy5cbmtvLmJpbmRpbmdIYW5kbGVyc1sncHJlbG9hZGVyJ10gPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpIHtcbiAgICB2YXIgdmFsdWUgPSB2YWx1ZUFjY2Vzc29yKCk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZS5wcmVsb2FkZWQgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhbHVlLnByZWxvYWRlZCA9IGtvLm9ic2VydmFibGUoXCJcIik7XG5cbiAgICAgIHZhciBwcmVsb2FkZXIgPSBmdW5jdGlvbihuZXdWYWx1ZSkge1xuICAgICAgICBpZiAobmV3VmFsdWUgIT0gdmFsdWUucHJlbG9hZGVkKCkpIHtcbiAgICAgICAgICBpZiAobmV3VmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhbHVlLnByZWxvYWRlZChuZXdWYWx1ZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFsdWUucHJlbG9hZGVkKG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbWcuc3JjID0gbmV3VmFsdWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlLnByZWxvYWRlZChuZXdWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YWx1ZS5zdWJzY3JpYmUocHJlbG9hZGVyKTtcbiAgICAgIHByZWxvYWRlcih2YWx1ZSgpKTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIFRPRE8gd2UgZG9uJ3QgdXNlIGFkdmF0dHIgYW5kIGFkdnN0eWxlLCBtYXliZSB3ZSBzaG91bGQgc2ltcGx5IHJlbW92ZSB0aGlzIGNvZGUuXG5rby5iaW5kaW5nSGFuZGxlcnNbJ2FkdmF0dHInXSA9IHtcbiAgJ2luaXQnOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIHZhciB2YWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpIHx8IHt9KTtcbiAgICBrby51dGlscy5vYmplY3RGb3JFYWNoKHZhbHVlLCBmdW5jdGlvbihhdHRyTmFtZSwgYXR0clZhbHVlQWNjZXNzb3IpIHtcbiAgICAgIHZhciBhdHRyVmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyTmFtZSk7XG5cbiAgICAgIGlmIChrby5pc1dyaXRlYWJsZU9ic2VydmFibGUoYXR0clZhbHVlQWNjZXNzb3IpKSB7XG4gICAgICAgIHZhciBvbGRWYWx1ZSA9IGF0dHJWYWx1ZUFjY2Vzc29yKCk7XG4gICAgICAgIGlmIChvbGRWYWx1ZSAhPSBhdHRyVmFsdWUpIHtcbiAgICAgICAgICBhdHRyVmFsdWVBY2Nlc3NvcihhdHRyVmFsdWUpO1xuICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBZHZBdHRyIGZvdW5kIGEgdmFsdWUgZGlmZmVyZW50IGZyb20gdGhlIGRlZmF1bHRcIiwgYXR0ck5hbWUsIG9sZFZhbHVlLCBhdHRyVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICAndXBkYXRlJzogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MpIHtcbiAgICB2YXIgdmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSkgfHwge307XG4gICAga28udXRpbHMub2JqZWN0Rm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24oYXR0ck5hbWUsIGF0dHJWYWx1ZSkge1xuICAgICAgYXR0clZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShhdHRyVmFsdWUpO1xuICAgICAgLy8gVG8gY292ZXIgY2FzZXMgbGlrZSBcImF0dHI6IHsgY2hlY2tlZDpzb21lUHJvcCB9XCIsIHdlIHdhbnQgdG8gcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgZW50aXJlbHlcbiAgICAgIC8vIHdoZW4gc29tZVByb3AgaXMgYSBcIm5vIHZhbHVlXCItbGlrZSB2YWx1ZSAoc3RyaWN0bHkgbnVsbCwgZmFsc2UsIG9yIHVuZGVmaW5lZClcbiAgICAgIC8vIChiZWNhdXNlIHRoZSBhYnNlbmNlIG9mIHRoZSBcImNoZWNrZWRcIiBhdHRyIGlzIGhvdyB0byBtYXJrIGFuIGVsZW1lbnQgYXMgbm90IGNoZWNrZWQsIGV0Yy4pXG4gICAgICB2YXIgdG9SZW1vdmUgPSAoYXR0clZhbHVlID09PSBmYWxzZSkgfHwgKGF0dHJWYWx1ZSA9PT0gbnVsbCkgfHwgKGF0dHJWYWx1ZSA9PT0gdW5kZWZpbmVkKTtcbiAgICAgIGlmICh0b1JlbW92ZSkgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuICAgICAgZWxzZSBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgYXR0clZhbHVlLnRvU3RyaW5nKCkpO1xuICAgIH0pO1xuICB9XG59O1xua28uYmluZGluZ0hhbmRsZXJzWydhZHZzdHlsZSddID0ge1xuICAnaW5pdCc6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgdmFyIHZhbHVlID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkgfHwge30pO1xuICAgIGtvLnV0aWxzLm9iamVjdEZvckVhY2godmFsdWUsIGZ1bmN0aW9uKHN0eWxlTmFtZSwgc3R5bGVWYWx1ZUFjY2Vzc29yKSB7XG4gICAgICB2YXIgc3R5bGVWYWx1ZTtcbiAgICAgIGlmIChzdHlsZU5hbWUubWF0Y2goL1B4JC8pKSB7XG4gICAgICAgIHN0eWxlTmFtZSA9IHN0eWxlTmFtZS5zdWJzdHIoMCwgc3R5bGVOYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgICBzdHlsZVZhbHVlID0gZWxlbWVudC5zdHlsZVtzdHlsZU5hbWVdO1xuICAgICAgICBpZiAoc3R5bGVWYWx1ZS5tYXRjaCgvcHgkLykpIHtcbiAgICAgICAgICBzdHlsZVZhbHVlID0gc3R5bGVWYWx1ZS5yZXBsYWNlKC9weCQvLCAnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJBZHZTdHlsZSBiaW5kaW5nIGZvdW5kIGFuIHVuZXhwZWN0ZWQgZGVmYXVsdCB2YWx1ZVwiLCBzdHlsZU5hbWUsIHN0eWxlVmFsdWUsIGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHlsZVZhbHVlID0gZWxlbWVudC5zdHlsZVtzdHlsZU5hbWVdO1xuICAgICAgfVxuXG4gICAgICBpZiAoa28uaXNXcml0ZWFibGVPYnNlcnZhYmxlKHN0eWxlVmFsdWVBY2Nlc3NvcikpIHtcbiAgICAgICAgdmFyIG9sZFZhbHVlID0gc3R5bGVWYWx1ZUFjY2Vzc29yKCk7XG4gICAgICAgIGlmIChvbGRWYWx1ZSAhPSBzdHlsZVZhbHVlKSB7XG4gICAgICAgICAgc3R5bGVWYWx1ZUFjY2Vzc29yKHN0eWxlVmFsdWUpO1xuICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBZHZTdHlsZSBmb3VuZCBhIHZhbHVlIGRpZmZlcmVudCBmcm9tIHRoZSBkZWZhdWx0XCIsIHN0eWxlTmFtZSwgb2xkVmFsdWUsIHN0eWxlVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICAndXBkYXRlJzogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgIHZhciB2YWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpIHx8IHt9KTtcbiAgICBrby51dGlscy5vYmplY3RGb3JFYWNoKHZhbHVlLCBmdW5jdGlvbihzdHlsZU5hbWUsIHN0eWxlVmFsdWUpIHtcbiAgICAgIHN0eWxlVmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHN0eWxlVmFsdWUpO1xuXG4gICAgICBpZiAoc3R5bGVWYWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2Ygc3R5bGVWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgc3R5bGVWYWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgc3R5bGVWYWx1ZSA9IFwiXCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdHlsZU5hbWUubWF0Y2goL1B4JC8pKSB7XG4gICAgICAgIHN0eWxlTmFtZSA9IHN0eWxlTmFtZS5zdWJzdHIoMCwgc3R5bGVOYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgICBzdHlsZVZhbHVlID0gc3R5bGVWYWx1ZSArIFwicHhcIjtcbiAgICAgIH1cblxuICAgICAgZWxlbWVudC5zdHlsZVtzdHlsZU5hbWVdID0gc3R5bGVWYWx1ZTtcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gVXRpbGl0eSB0byBsb2cgaW5pemlhbGl6YXRpb24gYW5kIGRpc3Bvc2FsIG9mIERPTSBlbGVtZW50cy5cbmtvLmJpbmRpbmdIYW5kbGVyc1snZG9tbG9nJ10gPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpIHtcbiAgICBjb25zb2xlLmxvZyhcImluaXRpYWxpemVkXCIsIGVsZW1lbnQpO1xuICAgIGtvLnV0aWxzLmRvbU5vZGVEaXNwb3NhbC5hZGREaXNwb3NlQ2FsbGJhY2soZWxlbWVudCwgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImRpc3Bvc2VkXCIsIGVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG59O1xuXG5rby5iaW5kaW5nSGFuZGxlcnNbJ2Z1ZHJvcHBhYmxlJ10gPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpIHtcbiAgICB2YXIgb3B0ID0gdmFsdWVBY2Nlc3NvcigpIHx8IHt9O1xuICAgIHZhciB0aW1lb3V0c09iaiA9IHt9O1xuXG4gICAgdmFyIG92ZXIgPSBmdW5jdGlvbih0aW1lb3V0cywgZHJvcFpvbmVUaW1lb3V0LCBlbGVtZW50LCBjbGFzc05hbWUsIG9ic2VydmFibGUsIGV2ZW50KSB7XG5cbiAgICAgIGlmICghdGltZW91dHNbZHJvcFpvbmVUaW1lb3V0XSkge1xuICAgICAgICBpZiAodHlwZW9mIGNsYXNzTmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa28uaXNXcml0ZWFibGVPYnNlcnZhYmxlKG9ic2VydmFibGUpICYmICFvYnNlcnZhYmxlKCkpIHtcbiAgICAgICAgICBvYnNlcnZhYmxlKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnbG9iYWwuY2xlYXJUaW1lb3V0KHRpbWVvdXRzW2Ryb3Bab25lVGltZW91dF0pO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aW1lb3V0c1tkcm9wWm9uZVRpbWVvdXRdID0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGFzc05hbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtvLmlzV3JpdGVhYmxlT2JzZXJ2YWJsZShvYnNlcnZhYmxlKSAmJiBvYnNlcnZhYmxlKCkpIHtcbiAgICAgICAgICBvYnNlcnZhYmxlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaWYgKGV2ZW50LnR5cGUgPT0gJ2RyYWdsZWF2ZScpIHN0b3AoKTtcbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyBVc2luZyAxMDAgaXQgZG9lbnMndCB3b3JrIGZpbmUgb24gTGludXggKGNob21lL2ZpcmVmb3gpLCB1c2luZyAyMDAgc3RpbGwgc2hvd3MgaXNzdWVzIG9uIHNsb3cgTGludXggYm94ZXNcbiAgICAgICAgdGltZW91dHNbZHJvcFpvbmVUaW1lb3V0XSA9IGdsb2JhbC5zZXRUaW1lb3V0KHN0b3AsIDUwMCk7XG4gICAgICB9XG5cbiAgICB9O1xuXG4gICAgaWYgKG9wdC5hY3RpdmUgfHwgb3B0LmFjdGl2ZUNsYXNzKSB7XG4gICAgICBrby51dGlscy5yZWdpc3RlckV2ZW50SGFuZGxlcihnbG9iYWwsICdkcmFnb3ZlcicsIG92ZXIuYmluZCh1bmRlZmluZWQsIHRpbWVvdXRzT2JqLCAnYWN0aXZlVGltZW91dCcsIGVsZW1lbnQsIG9wdC5hY3RpdmVDbGFzcywgb3B0LmFjdGl2ZSkpO1xuICAgIH1cbiAgICBpZiAob3B0LmhvdmVyQ2xhc3MpIHtcbiAgICAgIC8vIGRyYWdlbnRlciBhbmQgZHJhZ2xlYXZlIGFyZSBub3QgcmVxdWlyZWQgYnV0IHRoZXkgc3BlZWR1cCBmZWVkYmFjayB3aGVuIHVzZWQuXG4gICAgICBrby51dGlscy5yZWdpc3RlckV2ZW50SGFuZGxlcihlbGVtZW50LCAnZHJhZ292ZXIgZHJhZ2VudGVyIGRyYWdsZWF2ZScsIG92ZXIuYmluZCh1bmRlZmluZWQsIHRpbWVvdXRzT2JqLCAnaG92ZXJUaW1lb3V0JywgZWxlbWVudCwgb3B0LmhvdmVyQ2xhc3MsIHVuZGVmaW5lZCkpO1xuICAgIH1cbiAgfVxufTtcblxua28uYmluZGluZ0hhbmRsZXJzWydmaWxldXBsb2FkJ10gPSB7XG4gIGV4dGVuZE9wdGlvbnM6IHt9LFxuICByZW1vdGVGaWxlUHJlcHJvY2Vzc29yOiBmdW5jdGlvbih1cmwpIHsgcmV0dXJuIHVybDsgfSxcbiAgaW5pdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3Nvcikge1xuICAgIC8vIFRPRE8gZG9tbm9kZWRpc3Bvc2FsIGRvZXNuJ3Qgd29yayB3aGVuIHRoZSB1cGxvYWQgaXMgZG9uZSBieSBcImNsaWNraW5nXCJcbiAgICAvLyBQcm9iYWJseSBqcXVlcnktZmlsZXVwbG9hZCBtb3ZlcyB0aGUgRE9NIHNvbWV3aGVyZSBlbHNlIHNvIHRoYXQgS08gZG9lc24ndCBcbiAgICAvLyBkZXRlY3QgdGhlIHJlbW92YWwgYW55bW9yZS5cbiAgICBrby51dGlscy5kb21Ob2RlRGlzcG9zYWwuYWRkRGlzcG9zZUNhbGxiYWNrKGVsZW1lbnQsIGZ1bmN0aW9uKCkge1xuICAgICAgJChlbGVtZW50KS5maWxldXBsb2FkKCdkZXN0cm95Jyk7XG4gICAgfSk7XG5cbiAgICAvLyBpZiB3ZSBsZWF2ZSB0aGUgdGl0bGUgdGhlIG5hdGl2ZSBjb250cm9sIHdpbGwgc2hvdyB1cyBhIHRvb2x0aXAgd2UgZG9uJ3Qgd2FudC5cbiAgICAvLyBJbiBXZWJLaXQgdGhlIHJpZ2h0IHdheSB0byByZW1vdmUgaXQgaXMgbGVhdmluZyBhIFwid2hpdGVzcGFjZVwiLlxuICAgIC8vIEluIEdlY2tvIHdlIGhhdmUgdG8gc2V0IGl0IGVtcHR5LlxuICAgIGlmIChnbG9iYWwud2Via2l0VVJMKVxuICAgICAgJChlbGVtZW50KS5hdHRyKCd0aXRsZScsICcgJyk7XG4gICAgZWxzZVxuICAgICAgJChlbGVtZW50KS5hdHRyKCd0aXRsZScsICcnKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHZhbHVlQWNjZXNzb3IoKSB8fCB7fTtcblxuICAgIHZhciAkZnUgPSAkKGVsZW1lbnQpO1xuICAgIHZhciAkcGFyZW50ID0gJGZ1LnBhcmVudHMoJy51cGxvYWR6b25lJyk7XG5cbiAgICB2YXIgZGF0YVZhbHVlID0gb3B0aW9ucy5kYXRhO1xuICAgIG9wdGlvbnMuZGF0YSA9IHVuZGVmaW5lZDtcblxuICAgIHZhciBjYW52YXNQcmV2aWV3ID0gb3B0aW9ucy5jYW52YXNQcmV2aWV3O1xuXG4gICAgLy8gVE9ETyByZW1vdmUgaGFyZGNvZGVkIHVybFxuICAgIGtvLnV0aWxzLmV4dGVuZChvcHRpb25zLCB7XG4gICAgICB1cmw6ICcvdXBsb2FkLycsXG4gICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgZHJvcFpvbmU6ICRwYXJlbnQuZmluZCgnLm1vLXVwbG9hZHpvbmUnKVswXSxcbiAgICAgIGF1dG9VcGxvYWQ6IHRydWUsXG4gICAgICBhY2NlcHRGaWxlVHlwZXM6IC8oXFwufFxcLykoZ2lmfGpwZT9nfHBuZykkL2ksXG4gICAgICBtYXhGaWxlU2l6ZTogMTAyNCAqIDEwMjQsXG4gICAgICAvLyBFbmFibGUgaW1hZ2UgcmVzaXppbmcsIGV4Y2VwdCBmb3IgQW5kcm9pZCBhbmQgT3BlcmEsXG4gICAgICAvLyB3aGljaCBhY3R1YWxseSBzdXBwb3J0IGltYWdlIHJlc2l6aW5nLCBidXQgZmFpbCB0b1xuICAgICAgLy8gc2VuZCBCbG9iIG9iamVjdHMgdmlhIFhIUiByZXF1ZXN0czpcbiAgICAgIGRpc2FibGVJbWFnZVJlc2l6ZTogL0FuZHJvaWQoPyEuKkNocm9tZSl8T3BlcmEvLnRlc3QoZ2xvYmFsLm5hdmlnYXRvci51c2VyQWdlbnQpLFxuICAgICAgcHJldmlld01heFdpZHRoOiAyMDAsXG4gICAgICBwcmV2aWV3TWF4SGVpZ2h0OiAyMDAsXG4gICAgICBwcmV2aWV3Q3JvcDogZmFsc2UsXG4gICAgICByZXBsYWNlRmlsZUlucHV0OiBmYWxzZSwgLy8gcmVwbGFjZUZpbGVJbnB1dCB0cnVlIGJyZWFrcyBhZnRlciB1cGxvYWRpbmcgdXNpbmcgXCJpbnB1dFwiICh1c2luZyBtb3VzZSBjbGljIGluc3RlYWQgb2YgZHJvcHBpbmcpXG5cbiAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgIC8vIGNsaWVudCBzaWRlXG4gICAgICAgIHVua25vd25FcnJvcjogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICB1cGxvYWRlZEJ5dGVzOiAnVXBsb2FkZWQgYnl0ZXMgZXhjZWVkIGZpbGUgc2l6ZScsXG4gICAgICAgIG1heE51bWJlck9mRmlsZXM6ICdNYXhpbXVtIG51bWJlciBvZiBmaWxlcyBleGNlZWRlZCcsXG4gICAgICAgIGFjY2VwdEZpbGVUeXBlczogJ0ZpbGUgdHlwZSBub3QgYWxsb3dlZCcsXG4gICAgICAgIG1heEZpbGVTaXplOiAnRmlsZSBpcyB0b28gbGFyZ2UnLFxuICAgICAgICBtaW5GaWxlU2l6ZTogJ0ZpbGUgaXMgdG9vIHNtYWxsJyxcbiAgICAgICAgLy8gc2VydmVyIHNpZGVcbiAgICAgICAgcG9zdF9tYXhfc2l6ZTogJ1RoZSB1cGxvYWRlZCBmaWxlIGV4Y2VlZHMgdGhlIHBvc3RfbWF4X3NpemUgZGlyZWN0aXZlIGluIHBocC5pbmknLFxuICAgICAgICBtYXhfZmlsZV9zaXplOiAnRmlsZSBpcyB0b28gYmlnJyxcbiAgICAgICAgbWluX2ZpbGVfc2l6ZTogJ0ZpbGUgaXMgdG9vIHNtYWxsJyxcbiAgICAgICAgYWNjZXB0X2ZpbGVfdHlwZXM6ICdGaWxldHlwZSBub3QgYWxsb3dlZCcsXG4gICAgICAgIG1heF9udW1iZXJfb2ZfZmlsZXM6ICdNYXhpbXVtIG51bWJlciBvZiBmaWxlcyBleGNlZWRlZCcsXG4gICAgICAgIG1heF93aWR0aDogJ0ltYWdlIGV4Y2VlZHMgbWF4aW11bSB3aWR0aCcsXG4gICAgICAgIG1pbl93aWR0aDogJ0ltYWdlIHJlcXVpcmVzIGEgbWluaW11bSB3aWR0aCcsXG4gICAgICAgIG1heF9oZWlnaHQ6ICdJbWFnZSBleGNlZWRzIG1heGltdW0gaGVpZ2h0JyxcbiAgICAgICAgbWluX2hlaWdodDogJ0ltYWdlIHJlcXVpcmVzIGEgbWluaW11bSBoZWlnaHQnLFxuICAgICAgICBhYm9ydDogJ0ZpbGUgdXBsb2FkIGFib3J0ZWQnLFxuICAgICAgICBpbWFnZV9yZXNpemU6ICdGYWlsZWQgdG8gcmVzaXplIGltYWdlJyxcbiAgICAgICAgZ2VuZXJpYzogJ1VuZXhwZWN0ZWQgdXBsb2FkIGVycm9yJ1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAga28udXRpbHMuZXh0ZW5kKG9wdGlvbnMsIGtvLmJpbmRpbmdIYW5kbGVyc1snZmlsZXVwbG9hZCddLmV4dGVuZE9wdGlvbnMpO1xuXG4gICAgdmFyIHdvcmtpbmcgPSAwO1xuICAgIHZhciBmaXJzdFdvcmtlZCA9ICcnO1xuXG4gICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgtLXdvcmtpbmcgPT09IDApIHtcbiAgICAgICAgaWYgKGRhdGFWYWx1ZSkge1xuICAgICAgICAgIGRhdGFWYWx1ZShmaXJzdFdvcmtlZCk7XG4gICAgICAgIH1cbiAgICAgICAgZmlyc3RXb3JrZWQgPSAnJztcbiAgICAgICAgaWYgKGNhbnZhc1ByZXZpZXcpIHtcbiAgICAgICAgICAkcGFyZW50LmZpbmQoJ2ltZycpLnNob3coKTtcbiAgICAgICAgICAkcGFyZW50LmZpbmQoJ2NhbnZhcycpLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgICRwYXJlbnQucmVtb3ZlQ2xhc3MoXCJ1cGxvYWRpbmdcIik7XG4gICAgICAgICRwYXJlbnQuZmluZCgnLnByb2dyZXNzLWJhcicpLmNzcygnd2lkdGgnLCAwKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHRyYW5zbGF0ZWRNZXNzYWdlID0gZnVuY3Rpb24odGV4dCkge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm1lc3NhZ2VzID09ICdvYmplY3QnICYmIG9wdGlvbnMubWVzc2FnZXMgIT09IG51bGwpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gdGV4dC5tYXRjaCgvXihbXiBdKykoLiopJC8pO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubWVzc2FnZXNbbWF0Y2hbMV1dICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMubWVzc2FnZXNbbWF0Y2hbMV1dICsgbWF0Y2hbMl07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGV4dDtcbiAgICB9O1xuXG4gICAgJGZ1LmZpbGV1cGxvYWQob3B0aW9ucyk7XG5cbiAgICB2YXIgZXZlbnRzID0gWydmaWxldXBsb2FkYWRkJywgJ2ZpbGV1cGxvYWRwcm9jZXNzYWx3YXlzJywgJ2ZpbGV1cGxvYWRwcm9ncmVzc2FsbCcsICdmaWxldXBsb2FkZG9uZScsICdmaWxldXBsb2FkZmFpbCddO1xuICAgIHZhciBldmVudEhhbmRsZXIgPSBmdW5jdGlvbihlLCBkYXRhKSB7XG4gICAgICBpZiAoZS50eXBlID09ICdmaWxldXBsb2FkYWRkJykge1xuICAgICAgICB3b3JraW5nKys7XG4gICAgICB9XG4gICAgICBpZiAoZS50eXBlID09ICdmaWxldXBsb2FkZmFpbCcpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJmaWxldXBsb2FkZmFpbFwiLCBlLCBkYXRhKTtcbiAgICAgICAgaWYgKG9wdGlvbnMub25lcnJvcikge1xuICAgICAgICAgIGlmIChkYXRhLmVycm9yVGhyb3duID09PSAnJyAmJiBkYXRhLnRleHRTdGF0dXMgPT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgb3B0aW9ucy5vbmVycm9yKHRyYW5zbGF0ZWRNZXNzYWdlKCdnZW5lcmljJykpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zLm9uZXJyb3IodHJhbnNsYXRlZE1lc3NhZ2UoJ2dlbmVyaWMgKCcgKyBkYXRhLmVycm9yVGhyb3duICsgJyknKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNsZWFudXAoKTtcbiAgICAgIH1cbiAgICAgIGlmIChlLnR5cGUgPT0gJ2ZpbGV1cGxvYWRkb25lJykge1xuICAgICAgICBpZiAodHlwZW9mIGRhdGEucmVzdWx0LmZpbGVzWzBdLnVybCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpZiAob3B0aW9ucy5vbmZpbGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5yZXN1bHQuZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgZGF0YS5yZXN1bHQuZmlsZXNbaV0gPSBrby5iaW5kaW5nSGFuZGxlcnNbJ2ZpbGV1cGxvYWQnXS5yZW1vdGVGaWxlUHJlcHJvY2Vzc29yKGRhdGEucmVzdWx0LmZpbGVzW2ldKTtcbiAgICAgICAgICAgICAgb3B0aW9ucy5vbmZpbGUoZGF0YS5yZXN1bHQuZmlsZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChmaXJzdFdvcmtlZCA9PT0gJycpIGZpcnN0V29ya2VkID0gZGF0YS5yZXN1bHQuZmlsZXNbMF0udXJsO1xuXG4gICAgICAgICAgaWYgKGNhbnZhc1ByZXZpZXcpIHtcbiAgICAgICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSBjbGVhbnVwO1xuICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSBjbGVhbnVwO1xuICAgICAgICAgICAgaW1nLnNyYyA9IGRhdGEucmVzdWx0LmZpbGVzWzBdLnVybDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGF0YS5yZXN1bHQuZmlsZXNbMF0uZXJyb3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJyZW1vdGUgZXJyb3JcIiwgZSwgZGF0YSk7XG4gICAgICAgICAgaWYgKG9wdGlvbnMub25lcnJvcikge1xuICAgICAgICAgICAgb3B0aW9ucy5vbmVycm9yKHRyYW5zbGF0ZWRNZXNzYWdlKGRhdGEucmVzdWx0LmZpbGVzWzBdLmVycm9yKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInVuZXhwZWN0ZWQgZXJyb3JcIiwgZSwgZGF0YSk7XG4gICAgICAgICAgaWYgKG9wdGlvbnMub25lcnJvcikge1xuICAgICAgICAgICAgb3B0aW9ucy5vbmVycm9yKHRyYW5zbGF0ZWRNZXNzYWdlKCdnZW5lcmljIChVbmV4cGVjdGVkIEVycm9yIHJldHJpZXZpbmcgdXBsb2FkZWQgZmlsZSknKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGUudHlwZSA9PSAnZmlsZXVwbG9hZHByb2Nlc3NhbHdheXMnKSB7XG4gICAgICAgIHZhciBpbmRleCA9IGRhdGEuaW5kZXgsXG4gICAgICAgICAgZmlsZSA9IGRhdGEuZmlsZXNbaW5kZXhdO1xuICAgICAgICBpZiAoZmlsZS5wcmV2aWV3ICYmIGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIGNhbnZhcyB3ZSBoYWQgbXVsdGlwbGUgdXBsb2FkZWQgZmlsZXNcbiAgICAgICAgICBpZiAoJHBhcmVudC5maW5kKCdjYW52YXMnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmIChjYW52YXNQcmV2aWV3KSB7XG4gICAgICAgICAgICAgIHZhciBlbCA9ICQoZmlsZS5wcmV2aWV3KS5jc3MoJ3dpZHRoJywgJzEwMCUnKTsgLy8gLmNzcygncG9zaXRpb24nLCAnYWJzb2x1dGUnKS5jc3MoJ2xlZnQnLCAnMCcpO1xuICAgICAgICAgICAgICAkcGFyZW50LmZpbmQoJ2ltZycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgJHBhcmVudC5wcmVwZW5kKGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRwYXJlbnQuYWRkQ2xhc3MoXCJ1cGxvYWRpbmdcIik7XG4gICAgICAgICAgICAkcGFyZW50LmZpbmQoJy5wcm9ncmVzcy1iYXInKS5jc3MoJ3dpZHRoJywgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaWxlLmVycm9yKSB7XG4gICAgICAgICAgLy8gRmlsZSB0eXBlIG5vdCBhbGxvd2VkXG4gICAgICAgICAgLy8gRmlsZSBpcyB0b28gbGFyZ2VcbiAgICAgICAgICBpZiAob3B0aW9ucy5vbmVycm9yKSB7XG4gICAgICAgICAgICBvcHRpb25zLm9uZXJyb3IodHJhbnNsYXRlZE1lc3NhZ2UoZmlsZS5lcnJvcikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChlLnR5cGUgPT0gJ2ZpbGV1cGxvYWRwcm9ncmVzc2FsbCcpIHtcbiAgICAgICAgdmFyIHByb2dyZXNzID0gcGFyc2VJbnQoZGF0YS5sb2FkZWQgLyBkYXRhLnRvdGFsICogMTAwLCAxMCk7XG4gICAgICAgICRwYXJlbnQuZmluZCgnLnByb2dyZXNzLWJhcicpLmNzcygnd2lkdGgnLCBwcm9ncmVzcyArICclJyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBmb3IgKHZhciBpID0gZXZlbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgZXZlbnROYW1lID0gZXZlbnRzW2ldO1xuICAgICAgJGZ1Lm9uKGV2ZW50TmFtZSwgZXZlbnRIYW5kbGVyKTtcbiAgICB9XG4gICAgaWYgKCEkLnN1cHBvcnQuZmlsZUlucHV0KSB7XG4gICAgICAkZnUucHJvcCgnZGlzYWJsZWQnLCB0cnVlKS5wYXJlbnQoKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICB9XG4gIH1cbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cbmtvLmJpbmRpbmdIYW5kbGVyc1snaWZTdWJzJ10gPSB7XG4gIC8vIGNsb25lTm9kZXMgZnJvbSBrby51dGlscy5jbG9uZU5vZGVzIChtaXNzaW5nIGluIG1pbmltaXplZCBLTylcbiAgY2xvbmVOb2RlczogZnVuY3Rpb24obm9kZXNBcnJheSwgc2hvdWxkQ2xlYW5Ob2Rlcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBqID0gbm9kZXNBcnJheS5sZW5ndGgsIG5ld05vZGVzQXJyYXkgPSBbXTsgaSA8IGo7IGkrKykge1xuICAgICAgdmFyIGNsb25lZE5vZGUgPSBub2Rlc0FycmF5W2ldLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIG5ld05vZGVzQXJyYXkucHVzaChzaG91bGRDbGVhbk5vZGVzID8ga28uY2xlYW5Ob2RlKGNsb25lZE5vZGUpIDogY2xvbmVkTm9kZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdOb2Rlc0FycmF5O1xuICB9LFxuICAnaW5pdCc6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgdmFyIGRpZERpc3BsYXlPbkxhc3RVcGRhdGUsXG4gICAgICBzYXZlZE5vZGVzLFxuICAgICAgdmFsdWVBY2MgPSB2YWx1ZUFjY2Vzc29yKCk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZUFjYy5kYXRhLnN1YnNDb3VudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGtvLmV4dGVuZGVyc1snc3Vic2NyaXB0aW9uc0NvdW50J10odmFsdWVBY2MuZGF0YSk7XG4gICAgICAvLyBOT1RFIEkgY2FuJ3Qgc2ltcGx5IGxpc3RlbiBvbiBcInRocmVzaG9sZHNcIiBiZWNhdXNlIG11bHRpcGxlIGJpbmRpbmdzIHRvIHRoZSBzYW1lIG9ic2VydmFibGUgY291bGQgdXNlIGRpZmZlcmVudCB0aHJlc2hvbGRzLlxuICAgIH1cbiAgICBrby5jb21wdXRlZChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkYXRhVmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKS5kYXRhLnN1YnNDb3VudCksXG4gICAgICAgIGlzRmlyc3RSZW5kZXIgPSAhc2F2ZWROb2RlcyxcbiAgICAgICAgc2hvdWxkRGlzcGxheSwgbmVlZHNSZWZyZXNoLCBndXR0ZXI7XG5cbiAgICAgIGd1dHRlciA9IC0odHlwZW9mIHZhbHVlQWNjZXNzb3IoKS5ndXR0ZXIgIT09ICd1bmRlZmluZWQnID8gdmFsdWVBY2Nlc3NvcigpLmd1dHRlciA6IDEpO1xuICAgICAgc2hvdWxkRGlzcGxheSA9IGRhdGFWYWx1ZSArIChkaWREaXNwbGF5T25MYXN0VXBkYXRlID8gZ3V0dGVyIDogMCkgPj0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjYy50aHJlc2hvbGQpO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZUFjY2Vzc29yKCkubm90ICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZUFjY2Vzc29yKCkubm90KSB7XG4gICAgICAgIHNob3VsZERpc3BsYXkgPSAhc2hvdWxkRGlzcGxheTtcbiAgICAgIH1cbiAgICAgIG5lZWRzUmVmcmVzaCA9IGlzRmlyc3RSZW5kZXIgfHwgKHNob3VsZERpc3BsYXkgIT09IGRpZERpc3BsYXlPbkxhc3RVcGRhdGUpO1xuXG4gICAgICBpZiAobmVlZHNSZWZyZXNoKSB7XG4gICAgICAgIC8vIFNhdmUgYSBjb3B5IG9mIHRoZSBpbm5lciBub2RlcyBvbiB0aGUgaW5pdGlhbCB1cGRhdGUsIGJ1dCBvbmx5IGlmIHdlIGhhdmUgZGVwZW5kZW5jaWVzLlxuICAgICAgICBpZiAoaXNGaXJzdFJlbmRlciAmJiBrby5jb21wdXRlZENvbnRleHQuZ2V0RGVwZW5kZW5jaWVzQ291bnQoKSkge1xuICAgICAgICAgIHNhdmVkTm9kZXMgPSBrby5iaW5kaW5nSGFuZGxlcnNbJ2lmU3VicyddLmNsb25lTm9kZXMoa28udmlydHVhbEVsZW1lbnRzLmNoaWxkTm9kZXMoZWxlbWVudCksIHRydWUgLyogc2hvdWxkQ2xlYW5Ob2RlcyAqLyApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNob3VsZERpc3BsYXkpIHtcbiAgICAgICAgICBpZiAoIWlzRmlyc3RSZW5kZXIpIHtcbiAgICAgICAgICAgIGtvLnZpcnR1YWxFbGVtZW50cy5zZXREb21Ob2RlQ2hpbGRyZW4oZWxlbWVudCwga28uYmluZGluZ0hhbmRsZXJzWydpZlN1YnMnXS5jbG9uZU5vZGVzKHNhdmVkTm9kZXMpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAga28uYXBwbHlCaW5kaW5nc1RvRGVzY2VuZGFudHMoYmluZGluZ0NvbnRleHQsIGVsZW1lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGtvLnZpcnR1YWxFbGVtZW50cy5lbXB0eU5vZGUoZWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBkaWREaXNwbGF5T25MYXN0VXBkYXRlID0gc2hvdWxkRGlzcGxheTtcbiAgICAgIH1cbiAgICB9LCBudWxsLCB7XG4gICAgICBkaXNwb3NlV2hlbk5vZGVJc1JlbW92ZWQ6IGVsZW1lbnRcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgJ2NvbnRyb2xzRGVzY2VuZGFudEJpbmRpbmdzJzogdHJ1ZVxuICAgIH07XG4gIH1cbn07XG5rby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWydpZlN1YnMnXSA9IHRydWU7XG5cbi8vIGtvLmlzV3JpdGFibGVPYnNlcnZhYmxlICh3aXRob3V0IFwiZVwiKSBoYXMgYmVlbiBpbnRyb2R1Y2VkIGluIDMuMi4wLCB0aGF0IGlzIGFsc28gb3VyIG1pbiByZXF1aXJlbWVudC5cbi8vIG1pbmltaXplZCBrbm9ja291dCBcIm9iZnVzY2F0ZVwiIHRoZSBiZWZvcmVTdWJzY3JpcHRpb25BZGQgYW5kIGFmdGVyU3Vic2NyaXB0aW9uUmVtb3ZlIG1ldGhvZHMgdGhhdCB3ZSBoYWNrIGhlcmUuXG4vLyBzbyB3ZSBoYXZlIHRvIGV4cGxpY2l0bHkga25vdyB0aGF0LlxuLy8gTm90ZTogd2UgdXNlZCB0byB1c2Uga28uREVCVUcgdG8gZGV0ZWN0IHRoZSBkZWJ1ZyB2ZXJzaW9uIG9mIEtPLCBidXQgdGhpcyB3YXMgcmVtb3ZlZCBpbiBLTyAzLjQuMCssIFxuLy8gICAgICAgc28gd2Ugc3dpdGNoZWQgdG8ga28uc3Vic2NyaXB0aW9uIGZ1bmN0aW9uIHRoYXQgb25seSBleGlzdHMgaW4gREVCVUcgdmVyc2lvbnMuXG52YXIgYmVmb3JlU3Vic2NyaXB0aW9uUHJvcDtcbnZhciBhZnRlclN1YnNjcmlwdGlvblByb3A7XG5pZiAodHlwZW9mIGtvLnN1YnNjcmlwdGlvbiA9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBrby5pc1dyaXRhYmxlT2JzZXJ2YWJsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgYmVmb3JlU3Vic2NyaXB0aW9uUHJvcCA9ICdiZWZvcmVTdWJzY3JpcHRpb25BZGQnO1xuICBhZnRlclN1YnNjcmlwdGlvblByb3AgPSAnYWZ0ZXJTdWJzY3JpcHRpb25SZW1vdmUnO1xufSBlbHNlIGlmIChrby52ZXJzaW9uID09IFwiMy4yLjBcIikge1xuICBiZWZvcmVTdWJzY3JpcHRpb25Qcm9wID0gJ3ZhJztcbiAgYWZ0ZXJTdWJzY3JpcHRpb25Qcm9wID0gJ25iJztcbn0gZWxzZSBpZiAoa28udmVyc2lvbiA9PSBcIjMuMy4wXCIpIHtcbiAgYmVmb3JlU3Vic2NyaXB0aW9uUHJvcCA9ICdqYSc7XG4gIGFmdGVyU3Vic2NyaXB0aW9uUHJvcCA9ICd1YSc7XG59IGVsc2UgaWYgKGtvLnZlcnNpb24gPT0gXCIzLjQuMFwiKSB7XG4gIGJlZm9yZVN1YnNjcmlwdGlvblByb3AgPSAnc2EnO1xuICBhZnRlclN1YnNjcmlwdGlvblByb3AgPSAnSWEnO1xufSBlbHNlIGlmIChrby52ZXJzaW9uID09IFwiMy40LjFcIikge1xuICBiZWZvcmVTdWJzY3JpcHRpb25Qcm9wID0gJ3NhJztcbiAgYWZ0ZXJTdWJzY3JpcHRpb25Qcm9wID0gJ0lhJztcbn1cbmVsc2UgdGhyb3cgXCJVbnN1cHBvcnRlZCBtaW5pbWl6ZWQgS25vY2tvdXQgdmVyc2lvbiBcIiArIGtvLnZlcnNpb24gKyBcIiAoc3VwcG9ydGVkIERFQlVHIG9yIG1pbmltaXplZCAzLjIuMCAuLi4gMy40LjEpXCI7XG5cbi8vIGludGVybmFsbHkgdXNlZCBieSBpZnN1YnMgYmluZGluZy5cbi8vIFdBUk5JTkcgdGhpcyBicmVhayB3aGVuIHVzZWQgd2l0aCBwdXJlQ29tcHV0ZWQgb3IgZGVmZXJyZWRFdmFsdWF0ZWRcbmtvLmV4dGVuZGVyc1snc3Vic2NyaXB0aW9uc0NvdW50J10gPSBmdW5jdGlvbih0YXJnZXQsIGwxLCBsMikge1xuICBpZiAodHlwZW9mIHRhcmdldC5zdWJzQ291bnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdGFyZ2V0LnN1YnNDb3VudCA9IGtvLm9ic2VydmFibGUodGFyZ2V0LmdldFN1YnNjcmlwdGlvbnNDb3VudCgpKS5leHRlbmQoe1xuICAgICAgbm90aWZ5OiAnYWx3YXlzJ1xuICAgIH0pO1xuICAgIHZhciB1bmRlcmx5aW5nQmVmb3JlU3Vic2NyaXB0aW9uQWRkRnVuY3Rpb24gPSB0YXJnZXRbYmVmb3JlU3Vic2NyaXB0aW9uUHJvcF07XG4gICAgdmFyIHVuZGVybHlpbmdBZnRlclN1YnNjcmlwdGlvblJlbW92ZUZ1bmN0aW9uID0gdGFyZ2V0W2FmdGVyU3Vic2NyaXB0aW9uUHJvcF07XG4gICAgdGFyZ2V0W2JlZm9yZVN1YnNjcmlwdGlvblByb3BdID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmICh1bmRlcmx5aW5nQmVmb3JlU3Vic2NyaXB0aW9uQWRkRnVuY3Rpb24pIHVuZGVybHlpbmdCZWZvcmVTdWJzY3JpcHRpb25BZGRGdW5jdGlvbi5jYWxsKHRhcmdldCwgZXZlbnQpO1xuICAgICAgdmFyIGMgPSB0YXJnZXQuZ2V0U3Vic2NyaXB0aW9uc0NvdW50KCkgKyAxO1xuICAgICAgaWYgKHR5cGVvZiBsMSA9PT0gJ3VuZGVmaW5lZCcgfHwgYyA9PSBsMSB8fCB0eXBlb2YgbDIgPT09ICd1bmRlZmluZWQnIHx8IGMgPT0gbDIpIHRhcmdldC5zdWJzQ291bnQoYyk7XG4gICAgfTtcbiAgICB0YXJnZXRbYWZ0ZXJTdWJzY3JpcHRpb25Qcm9wXSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAodW5kZXJseWluZ0FmdGVyU3Vic2NyaXB0aW9uUmVtb3ZlRnVuY3Rpb24pIHVuZGVybHlpbmdBZnRlclN1YnNjcmlwdGlvblJlbW92ZUZ1bmN0aW9uLmNhbGwodGFyZ2V0LCBldmVudCk7XG4gICAgICB2YXIgYyA9IHRhcmdldC5nZXRTdWJzY3JpcHRpb25zQ291bnQoKTtcbiAgICAgIGlmICh0eXBlb2YgbDEgPT09ICd1bmRlZmluZWQnIHx8IGMgPT0gbDEgfHwgdHlwZW9mIGwyID09PSAndW5kZWZpbmVkJyB8fCBjID09IGwyKSB0YXJnZXQuc3Vic0NvdW50KGMpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coXCJhbHJlYWR5IGFwcGxpZWQgc3Vic2NyaXB0aW9uQ291bnQgdG8gb2JzZXJ2YWJsZVwiKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gT3ZlcnJpZGVzIG5hdGl2ZSBqUXVlcnkgc3Bpbm5lciB0byBhdm9pZCB2YWxpZGF0aW9uIG9mIHRoZSBcInN0ZXBcIi5cbi8vIFdlIHdhbnRzIHRvIHVzZSB0aGUgc3RlcCBidXQgYWxzbyB3YW50cyB0byBsZWF2ZSB0aGUgdXNlciB0aGUgYWJpbGl0eSB0byBzZWxlY3Qgc3BlY2lmaWMgdmFsdWVzLlxuXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xudmFyIHNwaW5uZXIgPSByZXF1aXJlKFwianF1ZXJ5LXVpL3NwaW5uZXJcIik7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoJ2NvbnNvbGUnKTtcblxuaWYgKHR5cGVvZiBzcGlubmVyID09ICd1bmRlZmluZWQnKSB0aHJvdyBcIkNhbm5vdCBmaW5kIGpxdWVyeS11aSBzcGlubmVyIHdpZGdldCBkZXBlbmRlbmN5IVwiO1xuXG4kLndpZGdldChcInVpLnNwaW5uZXJcIiwgc3Bpbm5lciwge1xuICBfYWRqdXN0VmFsdWU6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIGFkaiA9IHRoaXMuX3N1cGVyKHZhbHVlKTtcblxuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG4gICAgLy8gZml4IHByZWNpc2lvbiBmcm9tIGJhZCBKUyBmbG9hdGluZyBwb2ludCBtYXRoXG4gICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlLnRvRml4ZWQodGhpcy5fcHJlY2lzaW9uKCkpKTtcblxuICAgIC8vIGNsYW1wIHRoZSB2YWx1ZVxuICAgIGlmIChvcHRpb25zLm1heCAhPT0gbnVsbCAmJiB2YWx1ZSA+IG9wdGlvbnMubWF4KSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5tYXg7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLm1pbiAhPT0gbnVsbCAmJiB2YWx1ZSA8IG9wdGlvbnMubWluKSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5taW47XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBPdmVycmlkZXMgbmF0aXZlIGpRdWVyeSB0YWJzIHRvIG1ha2UgdGFicyB3b3JraW5nIGFsc28gd2hlbiB1c2luZyBhIGJhc2UgdGFnXG4vLyBpbiBvcmRlciB0byBhdm9pZCBjb25mbGljdHMgeW91IGhhdmUgdG8gYWRkIGEgZGF0YS1sb2NhbD1cInRydWVcIiBhdHRyaWJ1dGUgdG8geW91ciB0YWIgbGlua3MuXG5cbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoJ2NvbnNvbGUnKTtcbnZhciB0YWJzID0gcmVxdWlyZShcImpxdWVyeS11aS90YWJzXCIpO1xuXG5pZiAodHlwZW9mIHRhYnMgPT0gJ3VuZGVmaW5lZCcpIHRocm93IFwiQ2Fubm90IGZpbmQganF1ZXJ5LXVpIHRhYnMgd2lkZ2V0IGRlcGVuZGVuY3khXCI7XG5cbiQud2lkZ2V0KFwidWkudGFic1wiLCB0YWJzLCB7XG4gIF9pc0xvY2FsOiBmdW5jdGlvbiggYW5jaG9yICkge1xuICAgIGlmIChhbmNob3IuZ2V0QXR0cmlidXRlKCdkYXRhLWxvY2FsJykgPT0gXCJ0cnVlXCIpIHJldHVybiB0cnVlO1xuICAgIGVsc2UgcmV0dXJuIHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApO1xuICB9XG59KTsiLCJcInVzZSBzdHJpY3RcIjtcbi8qIGdsb2JhbHMgZ2xvYmFsOiBmYWxzZSAqL1xuXG5mdW5jdGlvbiBwdXNoVGVtcGxhdGUodGVtcGxhdGVOYW1lLCB0ZW1wbGF0ZVRleHQpIHtcbiAgdmFyIHNjcmlwdFRhZyA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgc2NyaXB0VGFnLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2h0bWwnKTtcbiAgc2NyaXB0VGFnLnNldEF0dHJpYnV0ZSgnaWQnLCB0ZW1wbGF0ZU5hbWUpO1xuICBzY3JpcHRUYWcudGV4dCA9IHRlbXBsYXRlVGV4dDtcbiAgZ2xvYmFsLmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0VGFnKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlVGVtcGxhdGUodGVtcGxhdGVOYW1lKSB7XG4gIHZhciBlbCA9IGdsb2JhbC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZU5hbWUpO1xuICBpZiAoZWwpIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xufVxuXG5mdW5jdGlvbiBpbml0KCkge31cblxuZnVuY3Rpb24gZ2V0VGVtcGxhdGVDb250ZW50KGlkKSB7XG4gIHZhciBlbCA9IGdsb2JhbC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gIGlmIChlbCkgcmV0dXJuIGVsLmlubmVySFRNTDtcbiAgZWxzZSByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaW5pdDogaW5pdCxcbiAgYWRkVGVtcGxhdGU6IHB1c2hUZW1wbGF0ZSxcbiAgcmVtb3ZlVGVtcGxhdGU6IHJlbW92ZVRlbXBsYXRlLFxuICBnZXRUZW1wbGF0ZUNvbnRlbnQ6IGdldFRlbXBsYXRlQ29udGVudFxufTsiLCJcInVzZSBzdHJpY3RcIjtcbi8qIGdsb2JhbCBnbG9iYWw6IGZhbHNlICovXG5cbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG52YXIgdGlueW1jZSA9IHJlcXVpcmUoXCJ0aW55bWNlXCIpO1xuXG52YXIgdGltZW91dDtcblxudmFyIHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuXG4gIHRpbWVvdXQgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKHR5cGVvZiB0aW55bWNlLmFjdGl2ZUVkaXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgdGlueW1jZS5hY3RpdmVFZGl0b3IgIT09IG51bGwgJiZcbiAgICAgIHR5cGVvZiB0aW55bWNlLmFjdGl2ZUVkaXRvci50aGVtZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGlueW1jZS5hY3RpdmVFZGl0b3IudGhlbWUgIT09IG51bGwgJiYgXG4gICAgICB0eXBlb2YgdGlueW1jZS5hY3RpdmVFZGl0b3IudGhlbWUucGFuZWwgIT09ICd1bmRlZmluZWQnICYmIHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lLnBhbmVsICE9PSBudWxsICYmXG4gICAgICB0eXBlb2YgdGlueW1jZS5hY3RpdmVFZGl0b3IudGhlbWUucGFuZWwudmlzaWJsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBAc2VlIEZsb2F0UGFuZWwuanMgZnVuY3Rpb24gcmVwb3NpdGlvblBhbmVsKHBhbmVsKVxuICAgIC8vIEZpcnN0IGNvbmRpdGlvbiBncm91cCBpcyBmb3IgVGlueW1jZSA0LjAvNC4xXG4gICAgLy8gU2Vjb25kIGNvbmRpdGlvbiBncm91cCBpcyBmb3IgVGlueW1jZSA0LjIvNC4zIHdoZXJlIFwiLl9wcm9wZXJ0eVwiIGFyZSBub3cgYXZhaWxhYmxlIGFzIFwiLnN0YXRlLmdldCgncHJvcGVydHknKVwiLlxuICAgIGlmICgodHlwZW9mIHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lLnBhbmVsLl92aXNpYmxlICE9PSAndW5kZWZpbmVkJyAmJiB0aW55bWNlLmFjdGl2ZUVkaXRvci50aGVtZS5wYW5lbC5fdmlzaWJsZSAmJiB0aW55bWNlLmFjdGl2ZUVkaXRvci50aGVtZS5wYW5lbC5fZml4ZWQpIHx8IFxuICAgICAgICAodHlwZW9mIHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lLnBhbmVsLnN0YXRlICE9PSAndW5kZWZpbmVkJyAmJiB0aW55bWNlLmFjdGl2ZUVkaXRvci50aGVtZS5wYW5lbC5zdGF0ZS5nZXQoJ3Zpc2libGUnKSAmJiB0aW55bWNlLmFjdGl2ZUVkaXRvci50aGVtZS5wYW5lbC5zdGF0ZS5nZXQoJ2ZpeGVkJykpKSB7XG4gICAgICB0aW55bWNlLmFjdGl2ZUVkaXRvci50aGVtZS5wYW5lbC5maXhlZChmYWxzZSk7XG4gICAgfVxuXG4gICAgdGlueW1jZS5hY3RpdmVFZGl0b3Iubm9kZUNoYW5nZWQoKTtcbiAgICB0aW55bWNlLmFjdGl2ZUVkaXRvci50aGVtZS5wYW5lbC52aXNpYmxlKHRydWUpO1xuICAgIGlmICh0aW55bWNlLmFjdGl2ZUVkaXRvci50aGVtZS5wYW5lbC5sYXlvdXRSZWN0KCkueSA8PSA0MClcbiAgICAgIHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lLnBhbmVsLm1vdmVCeSgwLCA0MCAtIHRpbnltY2UuYWN0aXZlRWRpdG9yLnRoZW1lLnBhbmVsLmxheW91dFJlY3QoKS55KTtcblxuICB9XG59O1xuXG5rby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5Z1Njcm9sbGZpeCA9IHtcbiAgJ3Njcm9sbCc6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKHRpbWVvdXQpIGdsb2JhbC5jbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgdGltZW91dCA9IGdsb2JhbC5zZXRUaW1lb3V0KHJlbmRlciwgNTApO1xuICB9LFxuICAnaW5pdCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICBrby51dGlscy5kb21Ob2RlRGlzcG9zYWwuYWRkRGlzcG9zZUNhbGxiYWNrKGVsZW1lbnQsIGZ1bmN0aW9uKCkge1xuICAgICAgJChlbGVtZW50KS5vZmYoXCJzY3JvbGxcIiwga28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWdTY3JvbGxmaXguc2Nyb2xsKTtcbiAgICB9KTtcblxuICAgICQoZWxlbWVudCkub24oXCJzY3JvbGxcIiwga28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWdTY3JvbGxmaXguc2Nyb2xsKTtcblxuICB9XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xuXG52YXIgX3Njcm9sbEludG9WaWV3ID0gZnVuY3Rpb24oJGVsZW1lbnQsIGFsaWduVG9wLCBzY3JvbGxQYXJlbnQsIG1vdmVCeSkge1xuICB2YXIgY3VycmVudFNjcm9sbFRvcCA9IHNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTtcbiAgdmFyIG5ld1Njcm9sbFRvcCA9IGN1cnJlbnRTY3JvbGxUb3AgLSBtb3ZlQnkgLSAoYWxpZ25Ub3AgPyAyMCA6IC0yMCk7XG4gIC8vIGlmcmFtZSBzY3JvbGxzIHRoZSB3aW5kb3cgYW5kIGFuaW1hdGlvbiBpcyBub3Qgc3VwcG9ydGVkXG4gIHZhciBhbmltYXRlID0gdHlwZW9mIHNjcm9sbFBhcmVudFswXS5ub2RlVHlwZSAhPT0gJ3VuZGVmaW5lZCc7XG4gIGlmIChhbmltYXRlKSB7XG4gICAgdmFyIGFjdGlvbiA9IHtcbiAgICAgICdzY3JvbGxUb3AnOiBcIlwiICsgTWF0aC5yb3VuZChuZXdTY3JvbGxUb3ApICsgXCJweFwiXG4gICAgfTtcbiAgICB2YXIgdGltZSA9IE1hdGgucm91bmQoTWF0aC5hYnMobmV3U2Nyb2xsVG9wIC0gY3VycmVudFNjcm9sbFRvcCkpO1xuICAgIHNjcm9sbFBhcmVudC5zdG9wKCkuYW5pbWF0ZShhY3Rpb24sIHRpbWUpO1xuICB9IGVsc2Uge1xuICAgIHNjcm9sbFBhcmVudC5zY3JvbGxUb3AobmV3U2Nyb2xsVG9wKTtcbiAgfVxuICAvLyBuYXRpdmUgc2Nyb2xsSW50b1ZpZXcgaXMgbm90IHdlbGwgc3VwcG9ydGVkIGFuZCBkb2Vzbid0IHdvcmsgZmluZS5cbiAgLy8gZWxlbWVudC5zY3JvbGxJbnRvVmlldyhhbGlnblRvcCk7XG59O1xuXG5rby5iaW5kaW5nSGFuZGxlcnMuc2Nyb2xsSW50b1ZpZXcgPSB7XG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3Nvciwgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIHZhciBzZWxlY3RlZCA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKTtcbiAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm47XG4gICAgdHJ5IHtcblxuICAgICAgd2hpbGUgKGVsZW1lbnQubm9kZVR5cGUgPT09IDgpIHtcbiAgICAgICAgLy8gZWxlbWVudCBpcyBhIGNvbW1lbnQsIG1vdmUgdG8gdGhlIG5leHQgc2libGluZy4uLlxuICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5uZXh0U2libGluZztcbiAgICAgIH1cbiAgICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9PSA4KSB7XG4gICAgICAgIHZhciBzY3JvbGxQYXJlbnQgPSAkKGVsZW1lbnQpLnNjcm9sbFBhcmVudCgpO1xuXG4gICAgICAgIHZhciBwYXJlbnRUb3A7XG4gICAgICAgIHZhciByZWxhdGl2ZU9mZnNldCA9IGZhbHNlO1xuICAgICAgICBpZiAoc2Nyb2xsUGFyZW50WzBdLm5vZGVUeXBlID09IDkpIHtcbiAgICAgICAgICAvLyBzY3JvbGxwYXJlbnQgaXMgZG9jdW1lbnQsIHJlcGxhY2luZyB3aXRoIGJvZHkuLi5cbiAgICAgICAgICBzY3JvbGxQYXJlbnQgPSAkKHNjcm9sbFBhcmVudFswXS5kZWZhdWx0Vmlldyk7XG4gICAgICAgICAgcGFyZW50VG9wID0gMDtcbiAgICAgICAgICByZWxhdGl2ZU9mZnNldCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFyZW50VG9wID0gc2Nyb2xsUGFyZW50Lm9mZnNldCgpLnRvcDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJlbnRIZWlnaHQgPSBzY3JvbGxQYXJlbnQuaGVpZ2h0KCk7XG4gICAgICAgIHZhciBwYXJlbnRTY3JvbGwgPSBzY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk7XG4gICAgICAgIHZhciBwYXJlbnRCb3R0b20gPSBwYXJlbnRUb3AgKyBwYXJlbnRIZWlnaHQ7XG5cbiAgICAgICAgLy8gc2Nyb2xsUGFyZW50IGlzIHRoZSBkb2N1bWVudC5cbiAgICAgICAgdmFyICRlbGVtZW50ID0gJChlbGVtZW50KTtcbiAgICAgICAgdmFyIGVsVG9wID0gJGVsZW1lbnQub2Zmc2V0KCkudG9wO1xuICAgICAgICAvLyB3aGVuIHdlIGFyZSBpbiBcImlmcmFtZVwiIHdpdGggc2Nyb2xsYmFyIGV2ZXJ5dGhpam5nIGNoYW5nZXMuXG4gICAgICAgIGlmIChyZWxhdGl2ZU9mZnNldCkgZWxUb3AgPSBlbFRvcCAtIHBhcmVudFNjcm9sbDtcbiAgICAgICAgdmFyIGVsSGVpZ2h0ID0gJGVsZW1lbnQuaGVpZ2h0KCk7XG4gICAgICAgIHZhciBlbEJvdHRvbSA9IGVsVG9wICsgZWxIZWlnaHQ7XG4gICAgICAgIGlmIChlbFRvcCA+IHBhcmVudFRvcCAmJiBlbFRvcCArIGVsSGVpZ2h0IDwgcGFyZW50Qm90dG9tKSB7XG4gICAgICAgICAgLy8gYm90aCBib3JkZXJzIGFyZSB2aXNpYmxlID0+IGRvbid0IGRvIGFueXRoaW5nLlxuICAgICAgICB9IGVsc2UgaWYgKGVsSGVpZ2h0IDwgcGFyZW50SGVpZ2h0KSB7XG4gICAgICAgICAgLy8gaWYgdGhlIGJsb2NrIGlzIHNtYWxsZXIgdGhhbiB0aGUgdmlld1BvcnRcbiAgICAgICAgICBpZiAoZWxUb3AgPCBwYXJlbnRUb3ApIF9zY3JvbGxJbnRvVmlldyhlbGVtZW50LCB0cnVlLCBzY3JvbGxQYXJlbnQsIHBhcmVudFRvcCAtIGVsVG9wKTtcbiAgICAgICAgICAvLyAtPiBpZiB0aGUgdXBwZXIgYm9yZGVyIGlzIGhpZ2hlciB0aGFuIHRoZSB0b3AsIHRoZW4gSSBtb3ZlIGl0IHRvIHRoZSB0b3AuXG4gICAgICAgICAgaWYgKGVsQm90dG9tID4gcGFyZW50Qm90dG9tKSBfc2Nyb2xsSW50b1ZpZXcoZWxlbWVudCwgZmFsc2UsIHNjcm9sbFBhcmVudCwgcGFyZW50Qm90dG9tIC0gZWxCb3R0b20pO1xuICAgICAgICAgIC8vIC0+IGlmIHRoZSBib3R0b20gYm9yZGVyIGlzIGxvd2VyIHRoYW4gdGhlIGJvdHRvbSB0aGVuIEkgbW92ZSBpdCB0byB0aGUgYm90dG9tLlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGlmIHRoZSBibG9jayBpcyBsYXJnZXIgdGhhbiB0aGUgdmlld1BvcnQgd2UgZG8gdGhlIG9wcG9zaXRlIVxuICAgICAgICAgIC8vIC0+IGlmIHRoZSB1cHBlciBib3JkZXIgaXMgaGlnaGVyIHRoYW4gdGhlIHRvcCBhbmQgdGhlIGxvd2VyIGlzIGhpZ2hlciB0aGFuIHRoZSBib3R0b20gSSBtb3ZlIHRoZSBsb3dlciBpdCB0byB0aGUgYm90dG9tLlxuICAgICAgICAgIGlmIChlbFRvcCA8IHBhcmVudFRvcCAmJiBlbEJvdHRvbSA8IHBhcmVudEJvdHRvbSkgX3Njcm9sbEludG9WaWV3KGVsZW1lbnQsIGZhbHNlLCBzY3JvbGxQYXJlbnQsIHBhcmVudEJvdHRvbSAtIGVsQm90dG9tKTtcbiAgICAgICAgICAvLyAtPiBpZiB0aGUgYm90dG9tIGJvcmRlciBpbCBsb3dlciB0aGFuIGJvdHRvbSBhbmQgdGhlIHVwcGVyIGlzIGxvd2VyIHRoYW4gdGhlIHRvcCBJIG1vdmUgdGhlIHVwcGVyIGJvcmRlciB0byB0aGUgdmlld3BvcnQgdG9wXG4gICAgICAgICAgaWYgKGVsVG9wID4gcGFyZW50VG9wICYmIGVsQm90dG9tID4gcGFyZW50Qm90dG9tKSBfc2Nyb2xsSW50b1ZpZXcoZWxlbWVudCwgdHJ1ZSwgc2Nyb2xsUGFyZW50LCBwYXJlbnRUb3AgLSBlbFRvcCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBlbGVtZW50LnNjcm9sbEludG9WaWV3KHRydWUpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiVE9ETyBleGNlcHRpb24gc2Nyb2xsaW5nIGludG8gdmlld1wiLCBlKTtcbiAgICB9XG4gIH1cbn07XG5rby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWydzY3JvbGxJbnRvVmlldyddID0gdHJ1ZTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xudmFyIG9yaWdUZW1wbGF0ZVN5c3RlbSA9IHJlcXVpcmUoXCIuL3NjcmlwdC10ZW1wbGF0ZS5qc1wiKTtcblxudmFyIHRlbXBsYXRlcyA9IHt9O1xuXG4vL2RlZmluZSBhIHRlbXBsYXRlIHNvdXJjZSB0aGF0IHNpbXBseSB0cmVhdHMgdGhlIHRlbXBsYXRlIG5hbWUgYXMgaXRzIGNvbnRlbnRcbmtvLnRlbXBsYXRlU291cmNlcy5zdHJpbmdUZW1wbGF0ZSA9IGZ1bmN0aW9uKHRlbXBsYXRlTmFtZSwgdGVtcGxhdGUpIHtcbiAgdGhpcy50ZW1wbGF0ZU5hbWUgPSB0ZW1wbGF0ZU5hbWU7XG4gIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgdGhpcy5fZGF0YSA9IHt9O1xufTtcblxua28udXRpbHMuZXh0ZW5kKGtvLnRlbXBsYXRlU291cmNlcy5zdHJpbmdUZW1wbGF0ZS5wcm90b3R5cGUsIHtcbiAgZGF0YTogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiZGF0YVwiLCBrZXksIHZhbHVlLCB0aGlzLnRlbXBsYXRlTmFtZSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kYXRhW2tleV07XG4gICAgfVxuXG4gICAgdGhpcy5fZGF0YVtrZXldID0gdmFsdWU7XG4gIH0sXG4gIHRleHQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgLy8gY29uc29sZS5sb2coXCJ0ZXh0XCIsIHZhbHVlLCB0aGlzLnRlbXBsYXRlTmFtZSlcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGU7XG4gICAgfVxuICAgIHRoaXMudGVtcGxhdGUgPSB2YWx1ZTtcbiAgfVxufSk7XG5cblxuLy9tb2RpZnkgYW4gZXhpc3RpbmcgdGVtcGxhdGVFbmdpbmUgdG8gd29yayB3aXRoIHN0cmluZyB0ZW1wbGF0ZXNcbmZ1bmN0aW9uIGNyZWF0ZVN0cmluZ1RlbXBsYXRlRW5naW5lKHRlbXBsYXRlRW5naW5lKSB7XG4gIHZhciBvcmlnID0gdGVtcGxhdGVFbmdpbmUubWFrZVRlbXBsYXRlU291cmNlO1xuICB0ZW1wbGF0ZUVuZ2luZS5tYWtlVGVtcGxhdGVTb3VyY2UgPSBmdW5jdGlvbih0ZW1wbGF0ZU5hbWUpIHtcbiAgICBpZiAodHlwZW9mIHRlbXBsYXRlc1t0ZW1wbGF0ZU5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIG5ldyBrby50ZW1wbGF0ZVNvdXJjZXMuc3RyaW5nVGVtcGxhdGUodGVtcGxhdGVOYW1lLCB0ZW1wbGF0ZXNbdGVtcGxhdGVOYW1lXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvcmlnKHRlbXBsYXRlTmFtZSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gdGVtcGxhdGVFbmdpbmU7XG59XG5cbmZ1bmN0aW9uIHB1c2hUZW1wbGF0ZSh0ZW1wbGF0ZU5hbWUsIHRlbXBsYXRlVGV4dCkge1xuICB0ZW1wbGF0ZXNbdGVtcGxhdGVOYW1lXSA9IHRlbXBsYXRlVGV4dDtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlVGVtcGxhdGUodGVtcGxhdGVOYW1lKSB7XG4gIGlmICh0eXBlb2YgdGVtcGxhdGVzW3RlbXBsYXRlTmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdGVtcGxhdGVzW3RlbXBsYXRlTmFtZV0gPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgb3JpZ1RlbXBsYXRlU3lzdGVtLnJlbW92ZVRlbXBsYXRlKHRlbXBsYXRlTmFtZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAga28uc2V0VGVtcGxhdGVFbmdpbmUoY3JlYXRlU3RyaW5nVGVtcGxhdGVFbmdpbmUobmV3IGtvLm5hdGl2ZVRlbXBsYXRlRW5naW5lKCkpKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGVtcGxhdGVDb250ZW50KGlkKSB7XG4gIGlmICh0eXBlb2YgdGVtcGxhdGVzW2lkXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gdGVtcGxhdGVzW2lkXTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gb3JpZ1RlbXBsYXRlU3lzdGVtLmdldFRlbXBsYXRlQ29udGVudChpZCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGluaXQ6IGluaXQsXG4gIGFkZFRlbXBsYXRlOiBwdXNoVGVtcGxhdGUsXG4gIHJlbW92ZVRlbXBsYXRlOiByZW1vdmVUZW1wbGF0ZSxcbiAgZ2V0VGVtcGxhdGVDb250ZW50OiBnZXRUZW1wbGF0ZUNvbnRlbnRcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBrb2pxdWkgPSByZXF1aXJlKFwia25vY2tvdXQtanF1ZXJ5dWlcIik7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xuXG52YXIgZXh0ZW5kVmFsdWVBY2Nlc3NvciA9IGZ1bmN0aW9uKHZhbHVlQWNjZXNzb3IsIG9iaikge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAga28udXRpbHMuZXh0ZW5kKG9iaiwgdmFsdWVBY2Nlc3NvcigpKTtcbiAgICByZXR1cm4gb2JqO1xuICB9O1xufTtcblxudmFyIG9wdGlvbnMgPSB7XG4gIHNob3c6IHtcbiAgICBkZWxheTogNTAwXG4gIH0sXG4gIHRyYWNrOiB0cnVlLFxuICBpdGVtczogJ1t0aXRsZV1bdGl0bGUhPVwiXCJdW3RpdGxlIT1cIiBcIl0nXG59O1xuXG5rby5iaW5kaW5nSGFuZGxlcnMudG9vbHRpcHMgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mICQuZm4udG9vbHRpcCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGtvLmJpbmRpbmdIYW5kbGVycy50b29sdGlwICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gcG9zaXRpb246IHsgbXk6IFwibGVmdCsxNSB0b3ArMTVcIiwgYXQ6IFwiY2VudGVyKzMwIGNlbnRlciszMFwiIH1cbiAgICAgIC8vIE5PVEUgdGl0bGUgd2l0aCBcIlwiIGFuZCBcIiBcIiBpcyBuZWVkZWQgdG8gYXZvaWQgZGVmYXVsdCB0b29sdGlwcyBpbiBuYXRpdmUgZmlsZSB1cGxvYWQgY29udHJvbHNcbiAgICAgIHJldHVybiBrby5iaW5kaW5nSGFuZGxlcnMudG9vbHRpcC5pbml0KGVsZW1lbnQsIGV4dGVuZFZhbHVlQWNjZXNzb3IodmFsdWVBY2Nlc3Nvciwgb3B0aW9ucyksIGFsbEJpbmRpbmdzQWNjZXNzb3IsIGRhdGEsIGNvbnRleHQpO1xuICAgIH1cbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCBkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiAkLmZuLnRvb2x0aXAgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBrby5iaW5kaW5nSGFuZGxlcnMudG9vbHRpcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBrby5iaW5kaW5nSGFuZGxlcnMudG9vbHRpcC51cGRhdGUoZWxlbWVudCwgZXh0ZW5kVmFsdWVBY2Nlc3Nvcih2YWx1ZUFjY2Vzc29yLCBvcHRpb25zKSwgYWxsQmluZGluZ3NBY2Nlc3NvciwgZGF0YSwgY29udGV4dCk7XG4gICAgfVxuICB9LFxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGtvID0gcmVxdWlyZSgna25vY2tvdXQnKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZSgnY29uc29sZScpO1xuXG4vLyBlcXVhbHMgdG8gXCJ2YWx1ZVwiIGJpbmRpbmcgYnV0IGFwcGx5IFwiaW52YWxpZFwiIGNsYXNzIGlmIFwicGF0dGVyblwiIGF0dHJpYnV0ZSBpcyBkZWZpbmVkIGFuZCB2YWx1ZSBtYXRjaGVzIHRoZSBydWxlXG5rby5iaW5kaW5nSGFuZGxlcnNbJ3ZhbGlkYXRlZFZhbHVlJ10gPSB7XG5cdGluaXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzKSB7XG5cdFx0dmFyIG5ld1ZhbHVlQWNjZXNzb3IgPSB2YWx1ZUFjY2Vzc29yO1xuXHRcdGlmICh0eXBlb2YgZWxlbWVudC5wYXR0ZXJuICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dmFyIHJlID0gbmV3IFJlZ0V4cCgnXig/OicgKyBlbGVtZW50LnBhdHRlcm4gKyAnKSQnKTtcblx0XHRcdHZhciBjb21wdXRlZCA9IGtvLmNvbXB1dGVkKHtcblx0XHRcdFx0cmVhZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIHJlcyA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKTtcblx0XHRcdFx0XHQvLyBUT0RPIHN1cHBvcnQgZm9yIGVsZW1lbnQucmVxdWlyZWQgP1xuXHRcdFx0XHRcdHZhciB2YWxpZCA9IHJlcyA9PT0gbnVsbCB8fCByZXMgPT09ICcnIHx8IHJlLnRlc3QocmVzKTtcblx0XHRcdFx0XHQvLyBJRTExIGRvZXNuJ3Qgc3VwcG9ydCBjbGFzc0xpc3QudG9nZ2xlKCdpbnZhbGlkJywgc3RhdGUpXG5cdFx0XHRcdFx0aWYgKHZhbGlkKSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2ludmFsaWQnKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpbnZhbGlkJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHdyaXRlOiBrby5pc1dyaXRlYWJsZU9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKSAmJiBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0XHRcdC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3ZvaWRsYWJzL21vc2FpY28vaXNzdWVzLzEwM1xuXHRcdFx0XHRcdGtvLnNlbGVjdEV4dGVuc2lvbnMud3JpdGVWYWx1ZShlbGVtZW50LCB2YWx1ZSk7XG5cdFx0XHRcdFx0dmFyIHVwZFZhbHVlID0ga28uc2VsZWN0RXh0ZW5zaW9ucy5yZWFkVmFsdWUoZWxlbWVudCk7XG5cdFx0XHRcdFx0dmFsdWVBY2Nlc3NvcigpKHVwZFZhbHVlKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGlzcG9zZVdoZW5Ob2RlSXNSZW1vdmVkOiBlbGVtZW50XG5cdFx0XHR9KTtcblx0XHRcdG5ld1ZhbHVlQWNjZXNzb3IgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIGNvbXB1dGVkO1xuXHRcdFx0fTtcblx0XHR9XG5cdFx0a28uYmluZGluZ0hhbmRsZXJzWyd2YWx1ZSddLmluaXQoZWxlbWVudCwgbmV3VmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3MpO1xuXHR9XG59O1xua28uZXhwcmVzc2lvblJld3JpdGluZy5fdHdvV2F5QmluZGluZ3NbJ3ZhbGlkYXRlZFZhbHVlJ10gPSB0cnVlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWxzIGdsb2JhbDpmYWxzZSAqL1xuXG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xuXG5rby5iaW5kaW5nSGFuZGxlcnNbJ3VuaXF1ZUlkJ10gPSB7XG4gIGN1cnJlbnRJbmRleDogMCxcbiAgJ2luaXQnOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yKSB7XG4gICAgdmFyIGRhdGEgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSkgfHwge307XG4gICAgaWYgKGRhdGEuaWQoKSA9PT0gJycpIHtcbiAgICAgIHZhciBpZCwgZWwsIHByZWZpeDtcbiAgICAgIC8vIFRPRE8gd2UgbmVlZCBhIGJldHRlciBwcmVmaXhcbiAgICAgIHByZWZpeCA9ICdrb18nICsgKHR5cGVvZiBkYXRhLnR5cGUgIT09ICd1bmRlZmluZWQnID8ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShkYXRhLnR5cGUpIDogJ2Jsb2NrJyk7XG4gICAgICAvLyB3aGVuIGxvYWRpbmcgYW4gZXhpc2luZyBtb2RlbCwgSURzIGNvdWxkIGJlIGFscmVhZHkgYXNzaWduZWQuXG4gICAgICBkbyB7XG4gICAgICAgIGlkID0gcHJlZml4ICsgJ18nICsgKCsra28uYmluZGluZ0hhbmRsZXJzWyd1bmlxdWVJZCddLmN1cnJlbnRJbmRleCk7XG4gICAgICAgIGVsID0gZ2xvYmFsLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKGVsKSB7XG4gICAgICAgICAgLy8gd2hlbiBsb2FkaW5nIGFuIGV4aXN0aW5nIG1vZGVsIG15IFwiY3VycmVudEluZGV4XCIgaXMgZW1wdHkuXG4gICAgICAgICAgLy8gYnV0IHdlIGhhdmUgZXhpc3RpbmcgYmxvY2tzLCBzbyBJIG11c3QgYmUgc3VyZSBJIGRvbid0IHJldXNlIHRoZWlyIElEcy5cbiAgICAgICAgICAvLyBXZSB1c2UgZGlmZmVyZW50IHByZWZpeGVzIChwZXIgYmxvY2sgdHlwZSkgc28gdGhhdCBhIGhpZGRlbiBibG9jayBcbiAgICAgICAgICAvLyAoZm9yIHdoaWNoIHdlIGhhdmUgbm8gaWQgaW4gdGhlIHBhZ2UsIGUuZzogcHJlaGVhZGVyIGluIHZlcnNhZml4LTEpXG4gICAgICAgICAgLy8gd2lsbCBicmVhayBldmVydGhpbmcgb25jZSB3ZSByZXVzZSBpdHMgbmFtZS5cbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoZWwpO1xuICAgICAgZGF0YS5pZChpZCk7XG4gICAgfVxuICB9XG59O1xua28udmlydHVhbEVsZW1lbnRzLmFsbG93ZWRCaW5kaW5nc1sndW5pcXVlSWQnXSA9IHRydWU7XG5cbmtvLmJpbmRpbmdIYW5kbGVyc1sndmlydHVhbEF0dHInXSA9IHtcbiAgdXBkYXRlOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yKSB7XG4gICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgIT09IDgpIHtcbiAgICAgIGtvLmJpbmRpbmdIYW5kbGVyc1snYXR0ciddLnVwZGF0ZShlbGVtZW50LCB2YWx1ZUFjY2Vzc29yKTtcbiAgICB9XG4gIH1cbn07XG5rby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWyd2aXJ0dWFsQXR0ciddID0gdHJ1ZTtcblxua28uYmluZGluZ0hhbmRsZXJzWyd2aXJ0dWFsQXR0clN0eWxlJ10gPSB7XG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3Nvciwgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9PSA4KSB7XG4gICAgICAvLyBJbiBcInByZXZpZXdcIiB3ZSBhbHNvIHNldCBcInJlcGxhY2Vkc3R5bGVcIiBzbyB0byBoYXZlIGFuIGF0dHJpYnV0ZSB0byBiZSB1c2VkIGJ5IElFIChJRSBicmVha3MgdGhlIFNUWUxFKSB0byBkbyB0aGUgZXhwb3J0LlxuICAgICAgdmFyIGlzTm90V3lzaXd5Z01vZGUgPSAodHlwZW9mIGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSA9PSAndW5kZWZpbmVkJyB8fCBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUgIT0gJ3d5c2l3eWcnKTtcbiAgICAgIHZhciBhdHRycyA9IFtcInN0eWxlXCJdO1xuICAgICAgaWYgKGlzTm90V3lzaXd5Z01vZGUpIGF0dHJzLnB1c2goXCJyZXBsYWNlZHN0eWxlXCIpO1xuICAgICAgdmFyIGF0dHJWYWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGF0dHJOYW1lID0gYXR0cnNbaV07XG4gICAgICAgIHZhciB0b1JlbW92ZSA9IChhdHRyVmFsdWUgPT09IGZhbHNlKSB8fCAoYXR0clZhbHVlID09PSBudWxsKSB8fCAoYXR0clZhbHVlID09PSB1bmRlZmluZWQpO1xuICAgICAgICBpZiAodG9SZW1vdmUpXG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJWYWx1ZS50b1N0cmluZygpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5rby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWyd2aXJ0dWFsQXR0clN0eWxlJ10gPSB0cnVlO1xuXG5rby5iaW5kaW5nSGFuZGxlcnNbJ3ZpcnR1YWxTdHlsZSddID0ge1xuICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpIHtcbiAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSAhPT0gOCkge1xuICAgICAga28uYmluZGluZ0hhbmRsZXJzWydzdHlsZSddLnVwZGF0ZShlbGVtZW50LCB2YWx1ZUFjY2Vzc29yKTtcbiAgICB9XG4gIH1cbn07XG5rby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWyd2aXJ0dWFsU3R5bGUnXSA9IHRydWU7XG5cblxua28uYmluZGluZ0hhbmRsZXJzWyd2aXJ0dWFsSHRtbCddID0ge1xuICBpbml0OiBrby5iaW5kaW5nSGFuZGxlcnNbJ2h0bWwnXS5pbml0LFxuICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpIHtcbiAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PT0gOCkge1xuICAgICAgdmFyIGh0bWwgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSk7XG5cbiAgICAgIGtvLnZpcnR1YWxFbGVtZW50cy5lbXB0eU5vZGUoZWxlbWVudCk7XG4gICAgICBpZiAoKGh0bWwgIT09IG51bGwpICYmIChodG1sICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaHRtbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBodG1sID0gaHRtbC50b1N0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBhcnNlZE5vZGVzID0ga28udXRpbHMucGFyc2VIdG1sRnJhZ21lbnQoaHRtbCk7XG4gICAgICAgIGlmIChwYXJzZWROb2Rlcykge1xuICAgICAgICAgIHZhciBlbmRDb21tZW50Tm9kZSA9IGVsZW1lbnQubmV4dFNpYmxpbmc7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBwYXJzZWROb2Rlcy5sZW5ndGg7IGkgPCBqOyBpKyspXG4gICAgICAgICAgICBlbmRDb21tZW50Tm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShwYXJzZWROb2Rlc1tpXSwgZW5kQ29tbWVudE5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHsgLy8gcGxhaW4gbm9kZVxuICAgICAga28uYmluZGluZ0hhbmRsZXJzWydodG1sJ10udXBkYXRlKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IpO1xuICAgIH1cblxuICAgIC8vIENvbnRlbnQgZm9yIHZpcnR1YWxIVE1MIG11c3Qgbm90IGJlIHBhcnNlZCBieSBLTywgaXQgaXMgc2ltcGxlIGNvbnRlbnQuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRyb2xzRGVzY2VuZGFudEJpbmRpbmdzOiB0cnVlXG4gICAgfTtcbiAgfVxufTtcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ3ZpcnR1YWxIdG1sJ10gPSB0cnVlOyIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFsIGdsb2JhbDogZmFsc2UgKi9cblxudmFyIHRpbnltY2UgPSByZXF1aXJlKFwidGlueW1jZVwiKTtcbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5yZXF1aXJlKFwiLi9ldmVudGFibGUuanNcIik7XG52YXIgY2xpY2tzID0gMDtcblxua28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWdPckh0bWwgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICB2YXIgaXNOb3RXeXNpd3lnTW9kZSA9ICh0eXBlb2YgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlID09ICd1bmRlZmluZWQnIHx8IGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSAhPSAnd3lzaXd5ZycpO1xuXG4gICAgaWYgKGlzTm90V3lzaXd5Z01vZGUpXG4gICAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzWyd2aXJ0dWFsSHRtbCddLmluaXQoKTtcbiAgICBlbHNlXG4gICAgICByZXR1cm4ga28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWcuaW5pdChlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KTtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgdmFyIGlzTm90V3lzaXd5Z01vZGUgPSAodHlwZW9mIGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSA9PSAndW5kZWZpbmVkJyB8fCBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUgIT0gJ3d5c2l3eWcnKTtcbiAgICBpZiAoaXNOb3RXeXNpd3lnTW9kZSlcbiAgICAgIHJldHVybiBrby5iaW5kaW5nSGFuZGxlcnNbJ3ZpcnR1YWxIdG1sJ10udXBkYXRlKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpO1xuICAgIC8vZWxzZSBcbiAgICAvLyAgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnLnVwZGF0ZShlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KTtcbiAgfVxufTtcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ3d5c2l3eWdPckh0bWwnXSA9IHRydWU7XG5cbmtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnSHJlZiA9IHtcbiAgaW5pdDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3Nvciwgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9PSA4KSB7XG4gICAgICB2YXIgdiA9IHZhbHVlQWNjZXNzb3IoKTtcblxuICAgICAgdmFyIGlzTm90V3lzaXd5Z01vZGUgPSAodHlwZW9mIGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSA9PSAndW5kZWZpbmVkJyB8fCBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUgIT0gJ3d5c2l3eWcnKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiWFhYXCIsIGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSwgaXNOb3RXeXNpd3lnTW9kZSwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpKTtcbiAgICAgIGlmIChpc05vdFd5c2l3eWdNb2RlKSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0YXJnZXQnLCAnX25ldycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLypqc2hpbnQgc2NyaXB0dXJsOnRydWUqL1xuICAgICAgICAvLyAyMDE1MDIyNjogcmVtb3ZlZCBocmVmIHRvIHdvcmsgYXJvdW5kIEZGIGlzc3VlcyB3aXRoIDxhIGhyZWY9XCJcIj48ZGl2IGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIj4uLjwvZGl2PjwvYT5cbiAgICAgICAgLy8gZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnamF2YXNjcmlwdDp2b2lkKDApJyk7XG4gICAgICAgIC8vIDIwMTUwMzA5OiBvbiBJRSwgYW4gZWRpdGFibGUgPGEgaHJlZj1cIlwiIGRhdGEtZWRpdGFibGU9XCJcIj4gcHJldmVudCB0aW55bWNlIHRvb2xiYXIgdG8gYmUgc2hvd24uXG4gICAgICAgIC8vICAgICAgICAgICBzbyBJIGNoYW5nZSBiZWhhdmlvdXIgYmFzZWQgb24gdGhlIHVzZSBvZiBcInd5c2l3eWdPckh0bWxcIlxuICAgICAgICAvLyBAc2VlOiBodHRwOi8vd3d3LnRpbnltY2UuY29tL2RldmVsb3AvYnVndHJhY2tlcl92aWV3LnBocD9pZD03NDMyXG4gICAgICAgIHZhciBhbGxiaW5kaW5ncyA9IGFsbEJpbmRpbmdzQWNjZXNzb3IoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBhbGxiaW5kaW5ncy53eXNpd3lnT3JIdG1sICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdocmVmJywgJ2phdmFzY3JpcHQ6dm9pZCgwKScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkaHJlZicsICcjJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3Nvciwgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9PSA4KSB7XG4gICAgICB2YXIgaXNOb3RXeXNpd3lnTW9kZSA9ICh0eXBlb2YgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlID09ICd1bmRlZmluZWQnIHx8IGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSAhPSAnd3lzaXd5ZycpO1xuICAgICAgLy8gTk9URSB0aGlzIHVud3JhcCBpcyBuZWVkZWQgYWxzbyBpbiBcInd5c2l3eWdcIiBtb2RlLCBvdGhlcndpc2UgZGVwZW5kZW5jeSB0cmFja2luZyBkaWVzLlxuICAgICAgdmFyIGF0dHJWYWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKTtcbiAgICAgIGlmIChpc05vdFd5c2l3eWdNb2RlKSB7XG4gICAgICAgIGlmICgoYXR0clZhbHVlID09PSBmYWxzZSkgfHwgKGF0dHJWYWx1ZSA9PT0gbnVsbCkgfHwgKGF0dHJWYWx1ZSA9PT0gdW5kZWZpbmVkKSlcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnaHJlZicpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBhdHRyVmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xua28udmlydHVhbEVsZW1lbnRzLmFsbG93ZWRCaW5kaW5nc1snd3lzaXd5Z0hyZWYnXSA9IHRydWU7XG5cbmtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnU3JjID0ge1xuICBjb252ZXJ0ZWRVcmw6IGZ1bmN0aW9uKHNyYywgbWV0aG9kLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgdmFyIHF1ZXJ5UGFyYW1TZXBhcmF0b3IgPSBzcmMuaW5kZXhPZignPycpID09IC0xID8gJz8nIDogJyYnO1xuICAgIHZhciByZXMgPSBzcmMgKyBxdWVyeVBhcmFtU2VwYXJhdG9yICsgXCJtZXRob2Q9XCIgKyBtZXRob2QgKyBcIiZ3aWR0aD1cIiArIHdpZHRoICsgKGhlaWdodCAhPT0gbnVsbCA/IFwiJmhlaWdodD1cIiArIGhlaWdodCA6ICcnKTtcbiAgICByZXR1cm4gcmVzO1xuICB9LFxuICBwbGFjZWhvbGRlclVybDogZnVuY3Rpb24ocGx3aWR0aCwgcGxoZWlnaHQsIHBsdGV4dCkge1xuICAgIHZhciBwbGFjZWhvbGRlcnNyYyA9IFwiJ2h0dHA6Ly9sb3JlbXBpeGVsLmNvbS9nLycrXCIgKyBwbHdpZHRoICsgXCIrJy8nK1wiICsgcGxoZWlnaHQgKyBcIisnL2Fic3RyYWN0LycrZW5jb2RlVVJJQ29tcG9uZW50KFwiICsgcGx0ZXh0ICsgXCIpXCI7XG4gICAgLy8gaHR0cDovL3BsYWNlaG9sZC5pdC8yMDB4MTUwLnBuZy9jY2NjY2MvMzMzMzMzJnRleHQ9cGxhY2Vob2xkLml0I3N0aGFzaC5uQTNyMjZ2Ui5kcHVmXG4gICAgLy8gcGxhY2Vob2xkZXJzcmMgPSBcIidodHRwOi8vcGxhY2Vob2xkLml0LycrXCIrd2lkdGgrXCIrJ3gnK1wiK2hlaWdodCtcIisnLnBuZy9jY2NjY2MvMzMzMzMzJnRleHQ9JytcIitzaXplO1xuICAgIC8vIHBsYWNlaG9sZGVyc3JjID0gXCInXCIrY29udmVydGVyVXRpbHMuYWRkU2xhc2hlcyhkZWZhdWx0VmFsdWUpK1wiJ1wiO1xuICB9LFxuICB1cGRhdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICB2YXIgdmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSk7XG4gICAgdmFyIGF0dHJWYWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWUuc3JjKTtcbiAgICB2YXIgcGxhY2Vob2xkZXJWYWx1ZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWUucGxhY2Vob2xkZXIpO1xuICAgIHZhciB3aWR0aCA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWUud2lkdGgpO1xuICAgIHZhciBoZWlnaHQgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlLmhlaWdodCk7XG4gICAgaWYgKChhdHRyVmFsdWUgPT09IGZhbHNlKSB8fCAoYXR0clZhbHVlID09PSBudWxsKSB8fCAoYXR0clZhbHVlID09PSB1bmRlZmluZWQpIHx8IChhdHRyVmFsdWUgPT09ICcnKSkge1xuICAgICAgaWYgKHR5cGVvZiBwbGFjZWhvbGRlclZhbHVlID09ICdvYmplY3QnICYmIHBsYWNlaG9sZGVyVmFsdWUgIT09IG51bGwpIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdzcmMnLCBrby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5Z1NyYy5wbGFjZWhvbGRlclVybChwbGFjZWhvbGRlclZhbHVlLndpZHRoLCBwbGFjZWhvbGRlclZhbHVlLmhlaWdodCwgcGxhY2Vob2xkZXJWYWx1ZS50ZXh0KSk7XG4gICAgICBlbHNlIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG1ldGhvZCA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWUubWV0aG9kKTtcbiAgICAgIGlmICghbWV0aG9kKSBtZXRob2QgPSB3aWR0aCA+IDAgJiYgaGVpZ2h0ID4gMCA/ICdjb3ZlcicgOiAncmVzaXplJztcbiAgICAgIHZhciBzcmMgPSBrby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5Z1NyYy5jb252ZXJ0ZWRVcmwoYXR0clZhbHVlLnRvU3RyaW5nKCksIG1ldGhvZCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnc3JjJywgc3JjKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aWR0aCAhPT0gJ3VuZGVmaW5lZCcgJiYgd2lkdGggIT09IG51bGwpIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgd2lkdGgpO1xuICAgIGVsc2UgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJ3aWR0aFwiKTtcbiAgICBpZiAodHlwZW9mIGhlaWdodCAhPT0gJ3VuZGVmaW5lZCcgJiYgaGVpZ2h0ICE9PSBudWxsKSBlbGVtZW50LnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBoZWlnaHQpO1xuICAgIGVsc2UgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJoZWlnaHRcIik7XG4gIH1cbn07XG5cbmtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnSWQgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCwgYmluZGluZ0NvbnRleHQpIHtcbiAgICB2YXIgaXNOb3RXeXNpd3lnTW9kZSA9ICh0eXBlb2YgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlID09ICd1bmRlZmluZWQnIHx8IGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSAhPSAnd3lzaXd5ZycpO1xuICAgIGlmICghaXNOb3RXeXNpd3lnTW9kZSlcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmFsdWVBY2Nlc3NvcigpKSk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3Nvciwgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIHZhciBpc05vdFd5c2l3eWdNb2RlID0gKHR5cGVvZiBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUgPT0gJ3VuZGVmaW5lZCcgfHwgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlICE9ICd3eXNpd3lnJyk7XG4gICAgaWYgKCFpc05vdFd5c2l3eWdNb2RlKVxuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lkJywga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWx1ZUFjY2Vzc29yKCkpKTtcbiAgfVxufTtcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ3d5c2l3eWdJZCddID0gdHJ1ZTtcblxuLy8gdXNlZCBvbiBlZGl0YWJsZSBcIml0ZW1cIiBzbyB0byBiaW5kIGNsaWNrcyBvbmx5IGluIHd5c2l3eWcgbW9kZS5cblxua28udmlydHVhbEVsZW1lbnRzLmFsbG93ZWRCaW5kaW5nc1snd3lzaXd5Z0NsaWNrJ10gPSB0cnVlO1xuXG4vLyB1c2VkIG9uIGVkaXRhYmxlIFwiaXRlbVwiIHNvIHRvIGJpbmQgY3NzIG9ubHkgaW4gd3lzaXd5ZyBtb2RlLlxua28uYmluZGluZ0hhbmRsZXJzLnd5c2l3eWdDc3MgPSB7XG4gIHVwZGF0ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3Nvciwgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIHZhciBpc05vdFd5c2l3eWdNb2RlID0gKHR5cGVvZiBiaW5kaW5nQ29udGV4dC50ZW1wbGF0ZU1vZGUgPT0gJ3VuZGVmaW5lZCcgfHwgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlICE9ICd3eXNpd3lnJyk7XG4gICAgaWYgKCFpc05vdFd5c2l3eWdNb2RlKVxuICAgICAga28uYmluZGluZ0hhbmRsZXJzLmNzcy51cGRhdGUoZWxlbWVudCwgdmFsdWVBY2Nlc3NvciwgYWxsQmluZGluZ3NBY2Nlc3Nvciwgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCk7XG4gIH1cbn07XG5rby52aXJ0dWFsRWxlbWVudHMuYWxsb3dlZEJpbmRpbmdzWyd3eXNpd3lnQ3NzJ10gPSB0cnVlO1xuXG5rby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5Z0ltZyA9IHtcbiAgbWFrZVRlbXBsYXRlVmFsdWVBY2Nlc3NvcjogZnVuY3Rpb24odmFsdWVBY2Nlc3NvciwgYmluZGluZ0NvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaXNXeXNpd3lnTW9kZSA9ICh0eXBlb2YgYmluZGluZ0NvbnRleHQudGVtcGxhdGVNb2RlICE9ICd1bmRlZmluZWQnICYmIGJpbmRpbmdDb250ZXh0LnRlbXBsYXRlTW9kZSA9PSAnd3lzaXd5ZycpO1xuXG4gICAgICB2YXIgbW9kZWxWYWx1ZSA9IHZhbHVlQWNjZXNzb3IoKSxcbiAgICAgICAgdW53cmFwcGVkVmFsdWUgPSBrby51dGlscy5wZWVrT2JzZXJ2YWJsZShtb2RlbFZhbHVlKTsgLy8gVW53cmFwIHdpdGhvdXQgc2V0dGluZyBhIGRlcGVuZGVuY3kgaGVyZVxuXG4gICAgICAvLyBJZiB1bndyYXBwZWRWYWx1ZS5kYXRhIGlzIHRoZSBhcnJheSwgcHJlc2VydmUgYWxsIHJlbGV2YW50IG9wdGlvbnMgYW5kIHVud3JhcCBhZ2FpbiB2YWx1ZSBzbyB3ZSBnZXQgdXBkYXRlc1xuICAgICAga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShtb2RlbFZhbHVlKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ25hbWUnOiBpc1d5c2l3eWdNb2RlID8gdW53cmFwcGVkVmFsdWVbJ19lZGl0VGVtcGxhdGUnXSA6IHVud3JhcHBlZFZhbHVlWydfdGVtcGxhdGUnXSxcbiAgICAgICAgJ3RlbXBsYXRlRW5naW5lJzoga28ubmF0aXZlVGVtcGxhdGVFbmdpbmUuaW5zdGFuY2VcbiAgICAgIH07XG4gICAgfTtcbiAgfSxcbiAgJ2luaXQnOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIHJldHVybiBrby5iaW5kaW5nSGFuZGxlcnNbJ3RlbXBsYXRlJ11bJ2luaXQnXShlbGVtZW50LCBrby5iaW5kaW5nSGFuZGxlcnNbJ3d5c2l3eWdJbWcnXS5tYWtlVGVtcGxhdGVWYWx1ZUFjY2Vzc29yKHZhbHVlQWNjZXNzb3IsIGJpbmRpbmdDb250ZXh0KSk7XG4gIH0sXG4gICd1cGRhdGUnOiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5ncywgdmlld01vZGVsLCBiaW5kaW5nQ29udGV4dCkge1xuICAgIGJpbmRpbmdDb250ZXh0ID0gYmluZGluZ0NvbnRleHRbJ2V4dGVuZCddKHZhbHVlQWNjZXNzb3IoKSk7XG4gICAgcmV0dXJuIGtvLmJpbmRpbmdIYW5kbGVyc1sndGVtcGxhdGUnXVsndXBkYXRlJ10oZWxlbWVudCwga28uYmluZGluZ0hhbmRsZXJzWyd3eXNpd3lnSW1nJ10ubWFrZVRlbXBsYXRlVmFsdWVBY2Nlc3Nvcih2YWx1ZUFjY2Vzc29yLCBiaW5kaW5nQ29udGV4dCksIGFsbEJpbmRpbmdzLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KTtcbiAgfVxufTtcbmtvLnZpcnR1YWxFbGVtZW50cy5hbGxvd2VkQmluZGluZ3NbJ3d5c2l3eWdJbWcnXSA9IHRydWU7XG5cbi8vIE5PVEU6IHRoZXJlIGFyZSBpc3N1ZXMgd2l0aCB0aGUgXCJyYXdcIiBmb3JtYXQgYW5kIHRyYXNoIGxlZnQgYXJvdW5kIGJ5IHRpbnltY2Ugd29ya2Fyb3VuZHMgZm9yIGNvbnRlbnRlZGl0YWJsZSBpc3N1ZXMuXG4vLyBzZXR0aW5nIFwiZm9yY2VkX3Jvb3RfYmxvY2s6IGZhbHNlXCIgZGlzYWJsZSB0aGUgZGVmYXVsdCBiZWhhdmlvdXIgb2YgYWRkaW5nIGEgd3JhcHBlciA8cD4gd2hlbiBuZWVkZWQgYW5kIHRoaXMgc2VlbXMgdG8gZml4IG1hbnkgaXNzdWVzIGluIElFLlxuLy8gYWxzbywgbWF5YmUgd2Ugc2hvdWxkIHVzZSB0aGUgXCJyYXdcIiBvbmx5IGZvciB0aGUgXCJiZWZvcmUgU2V0Q29udGVudFwiIGFuZCBpbnN0ZWFkIHJlYWQgdGhlIFwibm9uLXJhd1wiIGNvbnRlbnQgKHRoZSByYXcgY29udGVudCBzb21ldGltZXMgaGF2ZSBkYXRhLSBhdHRyaWJ1dGVzIGFuZCB0b28gbWFueSBlbmRpbmcgPGJyPiBpbiB0aGUgY29kZSlcbmtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnID0ge1xuICBjdXJyZW50SW5kZXg6IDAsXG4gIHN0YW5kYXJkT3B0aW9uczoge1xuICAgIHRvb2xiYXIxOiBcImZvcm1hdHNlbGVjdCBib2xkIGl0YWxpYyB1bmRlcmxpbmUgZm9yZWNvbG9yIGFsaWdubGVmdCBhbGlnbmNlbnRlciBhbGlnbnJpZ2h0IGFsaWduanVzdGlmeSBidWxsaXN0IGxpbmsgcmVtb3ZlZm9ybWF0XCJcbiAgfSxcbiAgY29kZU9wdGlvbnM6IHtcbiAgICBzZWxlY3RvcjogJy5jb2RlLWVkaXRvcicsXG4gICAgaW5saW5lOiBmYWxzZSxcbiAgICB2aXN1YWw6IGZhbHNlLFxuICAgIHRvb2xiYXIxOiBcImZvcm1hdHNlbGVjdCBhbGlnbnJpZ2h0IGFsaWduanVzdGlmeSBidWxsaXN0IGxpbmsgcmVtb3ZlZm9ybWF0IGNvZGVcIlxuICB9LFxuICBmdWxsT3B0aW9uczoge1xuICAgIHRvb2xiYXIxOiBcImZvbnRzZWxlY3QgZm9udHNpemVzZWxlY3QgaHIgY2hhcm1hcCBzb3VyY2Vjb2RlIGxpbmsgdW5saW5rIHJlbW92ZWZvcm1hdCBjb2RlXCIsXG4gICAgdG9vbGJhcjI6ICdmb3JtYXRzZWxlY3QgYm9sZCBpdGFsaWMgdW5kZXJsaW5lIGZvcmVjb2xvciBiYWNrY29sb3Igb3V0ZGVudCBpbmRlbnQgYWxpZ25sZWZ0IGFsaWduY2VudGVyIGFsaWducmlnaHQgYWxpZ25qdXN0aWZ5IGJ1bGxpc3QgbnVtbGlzdCAnLFxuICAgIC8vdG9vbGJhcjE6IFwiYm9sZCBpdGFsaWMgfCBmb3JlY29sb3IgYmFja2NvbG9yIHwgbGluayB1bmxpbmsgfCBociB8IHBhc3RldGV4dCBjb2RlXCIsIC8vIHwgbmV3c2xldHRlcl9wcm9maWxlIG5ld3NsZXR0ZXJfb3B0bGluayBuZXdzbGV0dGVyX3Vuc3Vic2NyaWJlIG5ld3NsZXR0ZXJfc2hvd2xpbmtcIjtcbiAgICBwbHVnaW5zOiBcImxpbmsgaHIgcGFzdGUgbGlzdHMgdGV4dGNvbG9yIGNvbG9ycGlja2VyIGNvZGUgaW1hZ2UgY2hhcm1hcCBzcGVsbGNoZWNrZXIgaW1hZ2V0b29sc1wiLFxuICB9LFxuICBpbml0OiBmdW5jdGlvbihlbGVtZW50LCB2YWx1ZUFjY2Vzc29yLCBhbGxCaW5kaW5nc0FjY2Vzc29yLCB2aWV3TW9kZWwsIGJpbmRpbmdDb250ZXh0KSB7XG4gICAgLy8gVE9ETyB1Z2x5LCBidXQgd29ya3MuLi5cbiAgICBrby5iaW5kaW5nSGFuZGxlcnMuZm9jdXNhYmxlLmluaXQoZWxlbWVudCk7XG5cbiAgICBrby51dGlscy5kb21Ob2RlRGlzcG9zYWwuYWRkRGlzcG9zZUNhbGxiYWNrKGVsZW1lbnQsIGZ1bmN0aW9uKCkge1xuICAgICAgdGlueW1jZS5yZW1vdmUoJyMnICsgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykpO1xuICAgIH0pO1xuXG4gICAgdmFyIHZhbHVlID0gdmFsdWVBY2Nlc3NvcigpO1xuXG4gICAgaWYgKCFrby5pc09ic2VydmFibGUodmFsdWUpKSB0aHJvdyBcIld5c2l3eWcgYmluZGluZyBjYWxsZWQgd2l0aCBub24gb2JzZXJ2YWJsZVwiO1xuICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSA4KSB0aHJvdyBcIld5c2l3eWcgYmluZGluZyBjYWxsZWQgb24gdmlydHVhbCBub2RlLCBpZ25vcmluZy4uLi5cIiArIGVsZW1lbnQuaW5uZXJIVE1MO1xuXG4gICAgdmFyIHNlbGVjdG9ySWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICBpZiAoIXNlbGVjdG9ySWQpIHtcbiAgICAgIHNlbGVjdG9ySWQgPSAnd3lzaXd5Z18nICsgKCsra28uYmluZGluZ0hhbmRsZXJzWyd3eXNpd3lnJ10uY3VycmVudEluZGV4KTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIHNlbGVjdG9ySWQpO1xuICAgIH1cblxuICAgIHZhciBoZWFkZXJIZWlnaHQgPSBmdW5jdGlvbigpe1xuICAgICAgJCgnLnRpbnlNQ0UtaGVhZGVyJykuaGVpZ2h0KCQoJy5tY2UtdGlueW1jZS5tY2UtY29udGFpbmVyJykub3V0ZXJIZWlnaHQoKSk7fTtcblxuICAgIHZhciBzaW1wbGVFZGl0b3IgPSAkKGVsZW1lbnQpLnBhcmVudHMoJyN0aW55bWNlLWFyZWEnKS5oYXNDbGFzcygnc2ltcGxlLWVkaXRvcicpO1xuICAgIHZhciBmdWxsRWRpdG9yID0gJChlbGVtZW50KS5wYXJlbnRzKCcjdGlueW1jZS1hcmVhJykuaGFzQ2xhc3MoJ2FkdmFuY2VkLWVkaXRvcicpO1xuICAgIHZhciBjb2RlRWRpdG9yID0gJChlbGVtZW50KS5wYXJlbnRzKCcjdGlueW1jZS1hcmVhJykuaGFzQ2xhc3MoJ2NvZGUtZWRpdG9yJyk7XG4gICAgdmFyIGlzU3Vic2NyaWJlckNoYW5nZSA9IGZhbHNlO1xuICAgIHZhciB0aGlzRWRpdG9yO1xuICAgIHZhciBpc0VkaXRvckNoYW5nZSA9IGZhbHNlO1xuICAgIHZhciBpc0luaXQgPSBmYWxzZTtcblxuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgc2VsZWN0b3I6ICcjJyArIHNlbGVjdG9ySWQsXG4gICAgICBpbmxpbmU6IHRydWUsXG4gICAgICAvLyBtYXliZSBub3QgbmVlZGVkLCBidXQgd29uJ3QgaHVydC5cbiAgICAgIGhpZGRlbl9pbnB1dDogZmFsc2UsXG4gICAgICBtZW51YmFyOiBmYWxzZSxcbiAgICAgIGZpeGVkX3Rvb2xiYXJfY29udGFpbmVyOiAnLnRpbnlNQ0UtaGVhZGVyJyxcbiAgICAgIHRvb2xiYXIxOiBcImZvcm1hdHNlbGVjdCBib2xkIGl0YWxpYyB1bmRlcmxpbmUgZm9yZWNvbG9yIGFsaWdubGVmdCBhbGlnbmNlbnRlciBhbGlnbnJpZ2h0IGFsaWduanVzdGlmeSBidWxsaXN0IGxpbmsgcmVtb3ZlZm9ybWF0XCIsXG4gICAgICBwbHVnaW5zOiBcImxpbmsgaHIgcGFzdGUgbGlzdHMgdGV4dGNvbG9yIGNvbG9ycGlja2VyIGNvZGUgaW1hZ2UgY2hhcm1hcCBzcGVsbGNoZWNrZXIgaW1hZ2V0b29sc1wiLFxuICAgICAgLy8gd2UgaGF2ZSB0byBkaXNhYmxlIHByZXZpZXdfc3R5bGVzIG90aGVyd2lzZSB0aW55bWNlIHB1c2ggaW5saW5lIGV2ZXJ5IHN0eWxlIGhlIHRoaW5ncyB3aWxsIGJlIGFwcGxpZWQgYW5kIHRoaXMgbWFrZXMgdGhlIHN0eWxlIG1lbnUgdG8gaW5oZXJpdCBjb2xvci9mb250LWZhbWlseSBhbmQgbW9yZS5cbiAgICAgIHByZXZpZXdfc3R5bGVzOiBmYWxzZSxcbiAgICAgIHBhc3RlX2FzX3RleHQ6IHRydWUsXG4gICAgICBwYXN0ZV9kYXRhX2ltYWdlczogZmFsc2UsXG4gICAgICBsYW5ndWFnZTogJ2VuJyxcbiAgICAgIHNjaGVtYTogXCJodG1sNVwiLFxuICAgICAgYnJvd3Nlcl9zcGVsbGNoZWNrOiB0cnVlLFxuICAgICAgZXh0ZW5kZWRfdmFsaWRfZWxlbWVudHM6ICdzdHJvbmcvYixlbS9pLCpbKl0nLFxuICAgICAgc2tpbjogJ3N0ZWRiJyxcbiAgICAgIHNldHVwOiBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgICAgLy8gVE9ETyBjaGFuZ2Ugc29tZXRpbWVzIGRvZXNuJ3QgdHJpZ2dlciAod2UgaGF2ZSB0byBkb2N1bWVudCB3aGVuKVxuICAgICAgICAvLyBsaXN0ZW5pbmcgb24ga2V5dXAgd291bGQgaW5jcmVhc2UgY29ycmVjdG5lc3MgYnV0IHdlIHdvdWxkIG5lZWQgYSByYXRlTGltaXQgdG8gYXZvaWQgZmxvb2RpbmcuXG5cbiAgICAgICAgZWRpdG9yLm9uKCdjaGFuZ2UgcmVkbyB1bmRvJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCFpc1N1YnNjcmliZXJDaGFuZ2UpIHtcbiAgICAgICAgICAgIGlzRWRpdG9yQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIHdlIGZhaWxlZCB3aXRoIG90aGVyIHdheXMgdG8gZG8gdGhpczpcbiAgICAgICAgICAgIC8vIHZhbHVlKCQoZWxlbWVudCkuaHRtbCgpKTtcbiAgICAgICAgICAgIC8vIHZhbHVlKGVsZW1lbnQuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgIHZhbHVlKGVkaXRvci5nZXRDb250ZW50KHtcbiAgICAgICAgICAgICAgZm9ybWF0OiAncmF3J1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaXNFZGl0b3JDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBDbGlja2luZyBvbiB0aGUgZWxlbWVudCBvbiBmb2N1cyBjaGFuZ2UgYWxsb3cgdGhlIFwiY2xpY1wiIGNvZGUgdG8gYmUgdHJpZ2dlcmVkIGFuZCBwcm9wYWdhdGUgdGhlIHNlbGVjdGlvbi5cbiAgICAgICAgLy8gTm90IGVsZWdhbnQsIG1heWJlIHdlIGhhdmUgYmV0dGVyIG9wdGlvbnMuXG4gICAgICAgIGVkaXRvci5vbignZm9jdXMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyBVc2VkIGJ5IHNjcm9sbGZpeC5qcyAobWF5YmUgdGhpcyBpcyBub3QgbmVlZGVkIGJ5IG5ldyBzY3JvbGxmaXguanMpXG4gICAgICAgICAgZWRpdG9yLm5vZGVDaGFuZ2VkKCk7XG4gICAgICAgICAgZWRpdG9yLmdldEVsZW1lbnQoKS5jbGljaygpO1xuICAgICAgICAgIC8vIFJlbW92ZSBmb2N1cyBmcm9tIGFsbCBvdGhlciBzZWxlY3RvcnNcbiAgICAgICAgICAkKCcudGlueU1DRS1oZWFkZXIgLm1jZS10aW55bWNlLWlubGluZS5tY2UtcGFuZWwnKS5yZW1vdmVDbGFzcygnbGFzdEZvY3VzZWQnKTtcbiAgICAgICAgICBoZWFkZXJIZWlnaHQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZWRpdG9yLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgY2xpY2tzKys7XG4gICAgICAgICAgaWYoY2xpY2tzID4gMSl7XG4gICAgICAgICAgICAkKCcjbWFpbi10b29sYm94JykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEtlZXAgbGFzdCBmb2N1c2VkIHNlbGVjdG9yLCBzbyB0aGUgaGVhZGVyIHdvbid0IGRpc2FwcGVhclxuICAgICAgICBlZGl0b3Iub24oJ2JsdXInLCBmdW5jdGlvbigpe1xuICAgICAgICAgICQoJy50aW55TUNFLWhlYWRlciAubWNlLXRpbnltY2UtaW5saW5lLm1jZS1wYW5lbDp2aXNpYmxlJykuYWRkQ2xhc3MoJ2xhc3RGb2N1c2VkJyk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBOT1RFOiB0aGlzIGZpeGVzIGlzc3VlIHdpdGggXCJsZWFkaW5nIHNwYWNlc1wiIGluIGRlZmF1bHQgY29udGVudCB0aGF0IHdlcmUgbG9zdCBkdXJpbmcgaW5pdGlhbGl6YXRpb24uXG4gICAgICAgIGVkaXRvci5vbignQmVmb3JlU2V0Q29udGVudCcsIGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICBpZiAoYXJncy5pbml0aWFsKSBhcmdzLmZvcm1hdCA9ICdyYXcnO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8qIE5PVEU6IGRpc2FibGluZyBcIkVOVEVSXCIgaW4gdGlueSBlZGl0b3IsIG5vdCBhIGdvb2QgdGhpbmcgYnV0IG1heSBiZSBuZWVkZWQgdG8gd29yayBhcm91bmQgY29udGVudGVkaXRhYmxlIGlzc3Vlc1xuICAgICAgICBpZiAoIWZ1bGxFZGl0b3IpIHtcbiAgICAgICAgICAvLyBzZSBub24gYWJiaWFtbyBpbCBcImZ1bGwgRWRpdG9yXCIsIGRpc2FiaWxpdGlhbW8gbCdpbnZpby4gKHZhcmkgYnVnKVxuICAgICAgICAgIGVkaXRvci5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgKi9cbiAgICAgIH1cblxuICAgIH07XG5cbiAgICAvL0FsdGVybmF0ZSBiZXR3ZWVuIGFkdmFuY2VkIGFuZCBzaW1wbGUgZWRpdG9yc1xuXG4gICAgaWYgKHNpbXBsZUVkaXRvcikga28udXRpbHMuZXh0ZW5kKG9wdGlvbnMsIGtvLmJpbmRpbmdIYW5kbGVycy53eXNpd3lnLnN0YW5kYXJkT3B0aW9ucyk7XG4gICAgaWYgKGZ1bGxFZGl0b3IpIGtvLnV0aWxzLmV4dGVuZChvcHRpb25zLCBrby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5Zy5mdWxsT3B0aW9ucyk7XG4gICAgaWYgKGNvZGVFZGl0b3IpIGtvLnV0aWxzLmV4dGVuZChvcHRpb25zLCBrby5iaW5kaW5nSGFuZGxlcnMud3lzaXd5Zy5jb2RlT3B0aW9ucyk7XG5cbiAgICAvLyB3ZSBoYXZlIHRvIHB1dCBpbml0aWFsaXphdGlvbiBpbiBhIHNldHRpbWVvdXQsIG90aGVyd2lzZSBzd2l0Y2hpbmcgZnJvbSBcIjFcIiB0byBcIjJcIiBjb2x1bW5zIGJsb2Nrc1xuICAgIC8vIHdpbGwgc3RhcnQgdGhlIG5ldyBlZGl0b3JzIGJlZm9yZSBkaXNwb3NpbmcgdGhlIG9sZCBvbmVzIGFuZCBJRHMgZ2V0IHRlbXBvcmFyaWx5IGR1cGxpY2F0ZWQuXG4gICAgLy8gdXNpbmcgc2V0VGltZW91dCB0aGUgZGlzcG9zZS9jcmVhdGUgb3JkZXIgaXMgY29ycmVjdCBvbiBldmVyeSBicm93c2VyIHRlc3RlZC5cbiAgICBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHRpbnltY2UuaW5pdChvcHRpb25zKTtcbiAgICB9KTtcblxuICAgIGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbHVlQWNjZXNzb3IoKSk7XG4gICAgICBpZiAoIWlzRWRpdG9yQ2hhbmdlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaXNTdWJzY3JpYmVyQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAvLyB3ZSBmYWlsZWQgc2V0dGluZyBjb250ZW50cyBpbiBvdGhlciB3YXlzLi4uXG4gICAgICAgICAgLy8gJChlbGVtZW50KS5odG1sKGNvbnRlbnQpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhpc0VkaXRvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXNFZGl0b3Iuc2V0Q29udGVudChjb250ZW50LCB7XG4gICAgICAgICAgICAgIGZvcm1hdDogJ3JhdydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBrby51dGlscy5zZXRIdG1sKGVsZW1lbnQsIGNvbnRlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVE9ETyBleGNlcHRpb24gc2V0dGluZyBjb250ZW50IHRvIGVkaXRhYmxlIGVsZW1lbnRcIiwgdHlwZW9mIHRoaXNFZGl0b3IsIGUpO1xuICAgICAgICB9XG4gICAgICAgIGlzU3Vic2NyaWJlckNoYW5nZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0sIG51bGwsIHtcbiAgICAgIGRpc3Bvc2VXaGVuTm9kZUlzUmVtb3ZlZDogZWxlbWVudFxuICAgIH0pO1xuXG4gICAgLy8gZG8gbm90IHBhcnNlIGh0bWwgY29udGVudCBmb3IgS08gYmluZGluZ3MhIVxuICAgIHJldHVybiB7XG4gICAgICBjb250cm9sc0Rlc2NlbmRhbnRCaW5kaW5nczogdHJ1ZVxuICAgIH07XG5cbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cbi8vIHJldHVybnMgMCBpZiBlcXVhbCAoMC4wLnggcmVsZWFzZSksIDEgd2l0aCBiYWNrd2FyZCBjb21wYXRpYmxlIGFkZGl0aW9ucyAoMC54LjAgcmVsZWFzZSksIDIgb24gbG9zdCBkYXRhIG9yIGluY29tcGF0aWJsZSBkYXRhICh4LjAuMCByZWxlYXNlKVxudmFyIGNoZWNrTW9kZWwgPSBmdW5jdGlvbihyZWZlcmVuY2UsIGJsb2NrRGVmcywgbW9kZWwsIG9yaWdQcmVmaXgsIHJldmVyc2UpIHtcbiAgdmFyIGJsb2NrRGVmc09iaiwgaSwgcHJlZml4O1xuICB2YXIgdmFsaWQgPSAwO1xuICBpZiAodHlwZW9mIHJldmVyc2UgPT0gJ3VuZGVmaW5lZCcpIHJldmVyc2UgPSBmYWxzZTtcbiAgaWYgKHR5cGVvZiBibG9ja0RlZnMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBibG9ja0RlZnMuc3BsaWNlID09ICdmdW5jdGlvbicpIHtcbiAgICBibG9ja0RlZnNPYmogPSB7fTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYmxvY2tEZWZzLmxlbmd0aDsgaSsrKSBibG9ja0RlZnNPYmpbYmxvY2tEZWZzW2ldLnR5cGVdID0gYmxvY2tEZWZzW2ldO1xuICB9IGVsc2Uge1xuICAgIGJsb2NrRGVmc09iaiA9IGJsb2NrRGVmcztcbiAgfVxuICBmb3IgKHZhciBwcm9wIGluIHJlZmVyZW5jZSlcbiAgICBpZiAocmVmZXJlbmNlLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICBwcmVmaXggPSB0eXBlb2Ygb3JpZ1ByZWZpeCAhPT0gJ3VuZGVmaW5lZCcgPyBvcmlnUHJlZml4ICsgXCIuXCIgKyBwcm9wIDogcHJvcDtcbiAgICAgIGlmICghbW9kZWwuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgICAvL2NvbnNvbGUud2FybihcIldBUk4gUHJvcGVydHkgXCIsIHByZWZpeCwgXCJmb3VuZCBpbiBtb2RlbCBpcyBub3QgZGVmaW5lZCBieSB0ZW1wbGF0ZTogcmVtb3ZpbmcgaXQhXCIpO1xuICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIDIpO1xuICAgICAgICAgIGRlbGV0ZSByZWZlcmVuY2VbcHJvcF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJJTkZPIFByb3BlcnR5IFwiLCBwcmVmaXgsIFwibWlzc2luZyBpbiBtb2RlbCwgY2xvbmluZyBmcm9tIHJlZmVyZW5jZSFcIik7XG4gICAgICAgICAgdmFsaWQgPSBNYXRoLm1heCh2YWxpZCwgMSk7XG4gICAgICAgICAgbW9kZWxbcHJvcF0gPSByZWZlcmVuY2VbcHJvcF07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZGVsW3Byb3BdICE9IHR5cGVvZiByZWZlcmVuY2VbcHJvcF0pIHtcbiAgICAgICAgLy8gc2Ugc29ubyBkaSB0aXBvIGRpdmVyc28gYWxsb3JhIHByb3ZvIGEgdmVkZXJlIHNlIGwnYWx0cm8sIGNvbnZlcnRpdG8gZGkgdGlwbyBtYW50aWVuZSB1biB2YWxvcmUgZXF1aXZhbGVudGUuXG4gICAgICAgIGlmIChtb2RlbFtwcm9wXSAhPT0gbnVsbCAmJiByZWZlcmVuY2VbcHJvcF0gIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG1vZGVsW3Byb3BdID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoU3RyaW5nKHJlZmVyZW5jZVtwcm9wXSkgIT0gcmVmZXJlbmNlW3Byb3BdKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVE9ETyBEaWZmZXJlbnQgdHlwZSAxIFwiLCBwcmVmaXgsIHR5cGVvZiBtb2RlbFtwcm9wXSwgdHlwZW9mIHJlZmVyZW5jZVtwcm9wXSwgbW9kZWxbcHJvcF0sIHJlZmVyZW5jZVtwcm9wXSk7XG4gICAgICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZGVsW3Byb3BdID09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBpZiAoTnVtYmVyKHJlZmVyZW5jZVtwcm9wXSkgIT0gcmVmZXJlbmNlW3Byb3BdKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVE9ETyBEaWZmZXJlbnQgdHlwZSAyIFwiLCBwcmVmaXgsIHR5cGVvZiBtb2RlbFtwcm9wXSwgdHlwZW9mIHJlZmVyZW5jZVtwcm9wXSwgbW9kZWxbcHJvcF0sIHJlZmVyZW5jZVtwcm9wXSk7XG4gICAgICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRPRE8gRGlmZmVyZW50IHR5cGUgMyBcIiwgcHJlZml4LCB0eXBlb2YgbW9kZWxbcHJvcF0sIHR5cGVvZiByZWZlcmVuY2VbcHJvcF0sIG1vZGVsW3Byb3BdLCByZWZlcmVuY2VbcHJvcF0pO1xuICAgICAgICAgICAgdmFsaWQgPSBNYXRoLm1heCh2YWxpZCwgMik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZWZlcmVuY2VbcHJvcF0gPT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKHJlZmVyZW5jZVtwcm9wXSAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgcmVmZXJlbmNlW3Byb3BdLnNwbGljZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChyZWZlcmVuY2VbcHJvcF0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBpZiAobW9kZWxbcHJvcF0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8gbmVlZHMgc29ydGluZz9cbiAgICAgICAgICAgICAgICB2YXIgaiA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG1vZGVsW3Byb3BdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZGVsW3Byb3BdW2ldLnR5cGUgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGogPCByZWZlcmVuY2VbcHJvcF0ubGVuZ3RoICYmIHJlZmVyZW5jZVtwcm9wXVtqXS50eXBlICE9PSBtb2RlbFtwcm9wXVtpXS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJpZ25vcmluZyBcIiwgcHJlZml4LCByZWZlcmVuY2VbcHJvcF1bal0udHlwZSwgXCIgYmxvY2sgdHlwZSBpbiByZWZlcmVuY2Ugbm90IGZvdW5kIGluIG1vZGVsXCIpO1xuICAgICAgICAgICAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaiA+PSByZWZlcmVuY2VbcHJvcF0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJXQVJOIGNhbm5vdCBmaW5kIFwiLCBwcmVmaXgsIG1vZGVsW3Byb3BdW2ldLnR5cGUsIFwiIGJsb2NrIGluIHJlZmVyZW5jZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IE1hdGgubWF4KHZhbGlkLCAyKTtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyByZXZlcnNlIGNvbmRpdGlvbiBzbyB0byBza2lwIFwiZGVlcCB0cmF2ZXJzaW5nXCIgb24gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBNYXRoLm1heCh2YWxpZCwgY2hlY2tNb2RlbChyZWZlcmVuY2VbcHJvcF1bal0sIHVuZGVmaW5lZCwgbW9kZWxbcHJvcF1baV0sIHByZWZpeCArIFwiW1wiICsgaSArIFwiLlwiICsgbW9kZWxbcHJvcF1baV0udHlwZSArIFwiXVwiKSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGluIHRoZSBjYXNlIG9mIGRpZmZlcmVudCBhcnJheSB3ZSBjaGVjayBibG9ja0RlZnNcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcmVmZXJlbmNlW3Byb3BdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlZmVyZW5jZVtwcm9wXVtpXS50eXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRPRE8gZm91bmQgYW4gb2JqZWN0IHdpdGggbm8gdHlwZVwiLCBwcmVmaXgsIHJlZmVyZW5jZVtwcm9wXVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIDIpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYmxvY2tEZWZzT2JqLmhhc093blByb3BlcnR5KHJlZmVyZW5jZVtwcm9wXVtpXS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJUT0RPIHRoZSBtb2RlbCB1c2VzIGEgYmxvY2sgdHlwZSBub3QgZGVmaW5lZCBieSB0aGUgdGVtcGxhdGUuIFJFTU9WSU5HIElUISFcIiwgcHJlZml4LCByZWZlcmVuY2VbcHJvcF1baV0pO1xuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VbcHJvcF0uc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIDIpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBNYXRoLm1heCh2YWxpZCwgY2hlY2tNb2RlbChibG9ja0RlZnNPYmpbcmVmZXJlbmNlW3Byb3BdW2ldLnR5cGVdLCBibG9ja0RlZnNPYmosIHJlZmVyZW5jZVtwcm9wXVtpXSwgcHJlZml4ICsgXCJbXCIgKyBpICsgXCIuXCIgKyByZWZlcmVuY2VbcHJvcF1baV0udHlwZSArIFwiXVwiKSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChtb2RlbFtwcm9wXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV0FSTiBOdWxsIG9iamVjdCBpbiBtb2RlbCBcIiwgcHJlZml4LCBcImluc3RlYWQgb2ZcIiwgcmVmZXJlbmNlW3Byb3BdLCBcImRlbGV0aW5nIGl0XCIpO1xuICAgICAgICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIDIpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSByZWZlcmVuY2VbcHJvcF07XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJTkZPIE51bGwgb2JqZWN0IGluIG1vZGVsIFwiLCBwcmVmaXgsIFwiaW5zdGVhZCBvZlwiLCByZWZlcmVuY2VbcHJvcF0sIFwiY2xvbmluZyBpdCBmcm9tIHRoZSByZWZlcmVuY2VcIik7XG4gICAgICAgICAgICAgICAgdmFsaWQgPSBNYXRoLm1heCh2YWxpZCwgMSk7XG4gICAgICAgICAgICAgICAgbW9kZWxbcHJvcF0gPSByZWZlcmVuY2VbcHJvcF07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIGNoZWNrTW9kZWwocmVmZXJlbmNlW3Byb3BdLCBibG9ja0RlZnNPYmosIG1vZGVsW3Byb3BdLCBwcmVmaXgsIHJldmVyc2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobW9kZWxbcHJvcF0gIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlRPRE8gTnVsbCBpbiByZWZlcmVuY2UgYnV0IG5vdCBudWxsIGluIG1vZGVsXCIsIHByZWZpeCwgbW9kZWxbcHJvcF0pO1xuICAgICAgICAgIHZhbGlkID0gTWF0aC5tYXgodmFsaWQsIDIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZWZlcmVuY2VbcHJvcF0gIT09ICdzdHJpbmcnICYmIHR5cGVvZiByZWZlcmVuY2VbcHJvcF0gIT09ICdib29sZWFuJyAmJiB0eXBlb2YgcmVmZXJlbmNlW3Byb3BdICE9PSAnbnVtYmVyJykge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlRPRE8gdW5zdXBwb3J0ZWQgdHlwZVwiLCBwcmVmaXgsIHR5cGVvZiByZWZlcmVuY2VbcHJvcF0pO1xuICAgICAgICB2YWxpZCA9IE1hdGgubWF4KHZhbGlkLCAyKTtcbiAgICAgIH1cblxuICAgIH1cbiAgaWYgKCFyZXZlcnNlKSB2YWxpZCA9IE1hdGgubWF4KHZhbGlkLCBjaGVja01vZGVsKG1vZGVsLCBibG9ja0RlZnMsIHJlZmVyZW5jZSwgdHlwZW9mIG9yaWdQcmVmaXggIT09ICd1bmRlZmluZWQnID8gb3JpZ1ByZWZpeCArIFwiIVJcIiA6IFwiIVJcIiwgdHJ1ZSkpO1xuICByZXR1cm4gdmFsaWQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNoZWNrTW9kZWw7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIFBhcnNlcyBDU1MgZGVjbGFyYXRpb25zIGFuZCBzdXBwb3J0cyB0aGUgcHJvcGVydHkgbGFuZ3VhZ2UgKC1rby0qKSBmb3VuZCBiZXR3ZWVuIHRoZW0uXG4vLyBDcmVhdGUgS08gYmluZGluZ3MgYnV0IGRvZXNuJ3QgZGVwZW5kIG9uIEtPLlxuLy8gTmVlZHMgYSBiaW5kaW5nUHJvdmlkZXIuXG5cbnZhciBjb252ZXJ0ZXJVdGlscyA9IHJlcXVpcmUoXCIuL3V0aWxzLmpzXCIpO1xudmFyIGNzc1BhcnNlID0gcmVxdWlyZShcIm1lbnNjaC9saWIvcGFyc2VyLmpzXCIpO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcbnZhciBkb211dGlscyA9IHJlcXVpcmUoXCIuL2RvbXV0aWxzLmpzXCIpO1xuXG52YXIgX2RlY2xhcmF0aW9uVmFsdWVMb29rdXAgPSBmdW5jdGlvbihkZWNsYXJhdGlvbnMsIHByb3BlcnR5bmFtZSwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIpIHtcbiAgZm9yICh2YXIgaSA9IGRlY2xhcmF0aW9ucy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGlmIChkZWNsYXJhdGlvbnNbaV0udHlwZSA9PSAncHJvcGVydHknICYmIGRlY2xhcmF0aW9uc1tpXS5uYW1lID09IHByb3BlcnR5bmFtZSkge1xuICAgICAgcmV0dXJuIF9kZWNsYXJhdGlvblZhbHVlVXJsUHJlZml4ZXIoZGVjbGFyYXRpb25zW2ldLnZhbHVlLCB0ZW1wbGF0ZVVybENvbnZlcnRlcik7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxudmFyIF9wcm9wVG9DYW1lbENhc2UgPSBmdW5jdGlvbihwcm9wTmFtZSkge1xuICByZXR1cm4gcHJvcE5hbWUucmVwbGFjZSgvLShbYS16XSkvZywgZnVuY3Rpb24obWF0Y2gsIGNvbnRlbnRzLCBvZmZzZXQsIHMpIHtcbiAgICByZXR1cm4gY29udGVudHMudG9VcHBlckNhc2UoKTtcbiAgfSk7XG59O1xuXG52YXIgX2RlY2xhcmF0aW9uVmFsdWVVcmxQcmVmaXhlciA9IGZ1bmN0aW9uKHZhbHVlLCB0ZW1wbGF0ZVVybENvbnZlcnRlcikge1xuICBpZiAodmFsdWUubWF0Y2goL3VybFxcKC4qXFwpLykpIHtcbiAgICB2YXIgcmVwbGFjZWQgPSB2YWx1ZS5yZXBsYWNlKC8odXJsXFwoKShbXlxcKV0qKShcXCkpL2csIGZ1bmN0aW9uKG1hdGNoZWQsIHByZWZpeCwgdXJsLCBwb3N0Zml4KSB7XG4gICAgICB2YXIgdHJpbW1lZCA9IHVybC50cmltKCk7XG4gICAgICB2YXIgYXBpY2UgPSB1cmwudHJpbSgpLmNoYXJBdCgwKTtcbiAgICAgIGlmIChhcGljZSA9PSAnXFwnJyB8fCBhcGljZSA9PSAnXCInKSB7XG4gICAgICAgIHRyaW1tZWQgPSB0cmltbWVkLnN1YnN0cigxLCB0cmltbWVkLmxlbmd0aCAtIDIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBpY2UgPSAnJztcbiAgICAgIH1cbiAgICAgIHZhciBuZXdVcmwgPSB0ZW1wbGF0ZVVybENvbnZlcnRlcih0cmltbWVkKTtcbiAgICAgIGlmIChuZXdVcmwgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHByZWZpeCArIGFwaWNlICsgbmV3VXJsICsgYXBpY2UgKyBwb3N0Zml4O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoZWQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcGxhY2VkO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufTtcblxudmFyIGVsYWJvcmF0ZURlY2xhcmF0aW9ucyA9IGZ1bmN0aW9uKHN0eWxlLCBkZWNsYXJhdGlvbnMsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBiaW5kaW5nUHJvdmlkZXIsIGVsZW1lbnQsIGJhc2ljQmluZGluZ3MsIHJlbW92ZURpc3BsYXlOb25lKSB7XG4gIHZhciBuZXdCaW5kaW5ncyA9IHR5cGVvZiBiYXNpY0JpbmRpbmdzID09ICdvYmplY3QnICYmIGJhc2ljQmluZGluZ3MgIT09IG51bGwgPyBiYXNpY0JpbmRpbmdzIDoge307XG4gIHZhciBuZXdTdHlsZSA9IG51bGw7XG4gIHZhciBza2lwTGluZXMgPSAwO1xuICBpZiAodHlwZW9mIGRlY2xhcmF0aW9ucyA9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBzdHlsZVNoZWV0ID0gY3NzUGFyc2UoXCIje1xcblwiICsgc3R5bGUgKyBcIn1cIiwge1xuICAgICAgY29tbWVudHM6IHRydWUsXG4gICAgICBwb3NpdGlvbjogdHJ1ZVxuICAgIH0pO1xuICAgIGRlY2xhcmF0aW9ucyA9IHN0eWxlU2hlZXQuc3R5bGVzaGVldC5ydWxlc1swXS5kZWNsYXJhdGlvbnM7XG4gICAgc2tpcExpbmVzID0gMTtcbiAgfVxuICBmb3IgKHZhciBpID0gZGVjbGFyYXRpb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgIGlmIChkZWNsYXJhdGlvbnNbaV0udHlwZSA9PSAncHJvcGVydHknKSB7XG4gICAgICBpZiAocmVtb3ZlRGlzcGxheU5vbmUgPT09IHRydWUgJiYgZGVjbGFyYXRpb25zW2ldLm5hbWUgPT0gJ2Rpc3BsYXknICYmIGRlY2xhcmF0aW9uc1tpXS52YWx1ZSA9PSAnbm9uZScpIHtcbiAgICAgICAgaWYgKG5ld1N0eWxlID09PSBudWxsKSBuZXdTdHlsZSA9IHN0eWxlO1xuICAgICAgICBuZXdTdHlsZSA9IGNvbnZlcnRlclV0aWxzLnJlbW92ZVN0eWxlKG5ld1N0eWxlLCBkZWNsYXJhdGlvbnNbaV0ucG9zaXRpb24uc3RhcnQsIGRlY2xhcmF0aW9uc1tpXS5wb3NpdGlvbi5lbmQsIHNraXBMaW5lcywgMCwgMCwgJycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGRlY2wgPSBkZWNsYXJhdGlvbnNbaV0ubmFtZS5tYXRjaCgvXi1rby0oYmluZC18YXR0ci0pPyhbYS16MC05LV0qPykoLWlmfC1pZm5vdCk/JC8pO1xuICAgICAgICBpZiAoZGVjbCAhPT0gbnVsbCkge1xuICAgICAgICAgIC8vIHJpbW96aW9uZSBkZWxsbyBzdGlsZSAta28tIGRhbGwnYXR0cmlidXRvIHN0eWxlLlxuICAgICAgICAgIGlmIChuZXdTdHlsZSA9PT0gbnVsbCAmJiB0eXBlb2Ygc3R5bGUgIT0gJ3VuZGVmaW5lZCcpIG5ld1N0eWxlID0gc3R5bGU7XG5cbiAgICAgICAgICB2YXIgaXNBdHRyID0gZGVjbFsxXSA9PSAnYXR0ci0nO1xuICAgICAgICAgIHZhciBpc0JpbmQgPSBkZWNsWzFdID09ICdiaW5kLSc7XG4gICAgICAgICAgdmFyIHByb3BOYW1lID0gZGVjbFsyXTtcblxuICAgICAgICAgIHZhciBpc0lmID0gZGVjbFszXSA9PSAnLWlmJyB8fCBkZWNsWzNdID09ICctaWZub3QnO1xuICAgICAgICAgIHZhciBjb25kRGVjbDtcbiAgICAgICAgICB2YXIgYmluZFZhbHVlO1xuICAgICAgICAgIHZhciBwcm9wRGVmYXVsdFZhbHVlO1xuXG4gICAgICAgICAgaWYgKGlzSWYpIHtcbiAgICAgICAgICAgIGNvbmREZWNsID0gZGVjbGFyYXRpb25zW2ldLm5hbWUuc3Vic3RyKDAsIGRlY2xhcmF0aW9uc1tpXS5uYW1lLmxlbmd0aCAtIGRlY2xbM10ubGVuZ3RoKTtcbiAgICAgICAgICAgIHZhciBjb25kaXRpb25lZERlY2xhcmF0aW9uID0gX2RlY2xhcmF0aW9uVmFsdWVMb29rdXAoZGVjbGFyYXRpb25zLCBjb25kRGVjbCwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIpO1xuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbmVkRGVjbGFyYXRpb24gPT09IG51bGwpIHRocm93IFwiVW5hYmxlIHRvIGZpbmQgZGVjbGFyYXRpb24gXCIgKyBjb25kRGVjbCArIFwiIGZvciBcIiArIGRlY2xhcmF0aW9uc1tpXS5uYW1lO1xuICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGlmICgoaXNBdHRyIHx8IGlzQmluZCkgJiYgKHR5cGVvZiBlbGVtZW50ID09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBzdHlsZSAhPSAndW5kZWZpbmVkJykpIHRocm93IFwiQXR0cmlidXRlcyBhbmQgYmluZCBkZWNsYXJhdGlvbnMgYXJlIG9ubHkgYWxsb3dlZCBpbiBpbmxpbmUgc3R5bGVzIVwiO1xuXG4gICAgICAgICAgICB2YXIgbmVlZERlZmF1bHRWYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICB2YXIgYmluZFR5cGU7XG4gICAgICAgICAgICBpZiAoaXNBdHRyKSB7XG4gICAgICAgICAgICAgIHByb3BEZWZhdWx0VmFsdWUgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgcHJvcE5hbWUpO1xuICAgICAgICAgICAgICBuZWVkRGVmYXVsdFZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgIGJpbmRUeXBlID0gJ3ZpcnR1YWxBdHRyJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQmluZCkge1xuICAgICAgICAgICAgICBuZWVkRGVmYXVsdFZhbHVlID0gdHlwZW9mIHN0eWxlICE9PSAndW5kZWZpbmVkJztcbiAgICAgICAgICAgICAgaWYgKG5lZWREZWZhdWx0VmFsdWUpIHByb3BEZWZhdWx0VmFsdWUgPSBfZGVjbGFyYXRpb25WYWx1ZUxvb2t1cChkZWNsYXJhdGlvbnMsIHByb3BOYW1lLCB0ZW1wbGF0ZVVybENvbnZlcnRlcik7XG4gICAgICAgICAgICAgIGJpbmRUeXBlID0gJ3ZpcnR1YWxTdHlsZSc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBiaW5kVHlwZSA9IG51bGw7XG4gICAgICAgICAgICAgIGlmIChwcm9wTmFtZSA9PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBwcm9wRGVmYXVsdFZhbHVlID0gZG9tdXRpbHMuZ2V0SW5uZXJUZXh0KGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBuZWVkRGVmYXVsdFZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BOYW1lID09ICdodG1sJykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgIHByb3BEZWZhdWx0VmFsdWUgPSBkb211dGlscy5nZXRJbm5lckh0bWwoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG5lZWREZWZhdWx0VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmVlZERlZmF1bHRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuZWVkRGVmYXVsdFZhbHVlICYmIHByb3BEZWZhdWx0VmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbm5vdCBmaW5kIGRlZmF1bHQgdmFsdWUgZm9yXCIsIGRlY2xhcmF0aW9uc1tpXS5uYW1lLCBkZWNsYXJhdGlvbnMpO1xuICAgICAgICAgICAgICB0aHJvdyBcIkNhbm5vdCBmaW5kIGRlZmF1bHQgdmFsdWUgZm9yIFwiICsgZGVjbGFyYXRpb25zW2ldLm5hbWUgKyBcIjogXCIgKyBkZWNsYXJhdGlvbnNbaV0udmFsdWUgKyBcIiBpbiBcIiArIGVsZW1lbnQgKyBcIiAoXCIgKyB0eXBlb2Ygc3R5bGUgKyBcIi9cIiArIHByb3BOYW1lICsgXCIpXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYmluZERlZmF1bHRWYWx1ZSA9IHByb3BEZWZhdWx0VmFsdWU7XG5cbiAgICAgICAgICAgIHZhciBiaW5kTmFtZSA9ICFpc0JpbmQgJiYgIWlzQXR0ciA/IF9wcm9wVG9DYW1lbENhc2UocHJvcE5hbWUpIDogKHByb3BOYW1lLmluZGV4T2YoJy0nKSAhPSAtMSA/ICdcXCcnK3Byb3BOYW1lKydcXCcnIDogcHJvcE5hbWUpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBiaW5kVmFsdWUgPSBjb252ZXJ0ZXJVdGlscy5leHByZXNzaW9uQmluZGluZyhkZWNsYXJhdGlvbnNbaV0udmFsdWUsIGJpbmRpbmdQcm92aWRlciwgYmluZERlZmF1bHRWYWx1ZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJNb2RlbCBlbnN1cmUgcGF0aCBmYWlsZWRcIiwgZS5zdGFjaywgXCJuYW1lXCIsIGRlY2xhcmF0aW9uc1tpXS5uYW1lLCBcInZhbHVlXCIsIGRlY2xhcmF0aW9uc1tpXS52YWx1ZSwgXCJkZWZhdWx0XCIsIHByb3BEZWZhdWx0VmFsdWUsIFwiZWxlbWVudFwiLCBlbGVtZW50KTtcbiAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJpbmRUeXBlICE9PSBudWxsICYmIHR5cGVvZiBuZXdCaW5kaW5nc1tiaW5kVHlwZV0gPT0gJ3VuZGVmaW5lZCcpIG5ld0JpbmRpbmdzW2JpbmRUeXBlXSA9IHt9O1xuXG5cbiAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIEhSRUZzXG4gICAgICAgICAgICBpZiAoYmluZFR5cGUgPT0gJ3ZpcnR1YWxBdHRyJyAmJiBiaW5kTmFtZSA9PSAnaHJlZicpIHtcbiAgICAgICAgICAgICAgYmluZFR5cGUgPSBudWxsO1xuICAgICAgICAgICAgICBiaW5kTmFtZSA9ICd3eXNpd3lnSHJlZic7XG4gICAgICAgICAgICAgIC8vIFdlIGhhdmUgdG8gcmVtb3ZlIGl0LCBvdGhlcndpc2Ugd2UgZW5kcyB1cCB3aXRoIDIgcnVsZXMgd3JpdGluZyBpdC5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50ICE9ICd1bmRlZmluZWQnICYmIGVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBkb211dGlscy5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgXCJocmVmXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRPRE8gZXZhbHVhdGUgdGhlIHVzZSBvZiBcIi10aGVuXCIgKGFuZCAtZWxzZSkgcG9zdGZpeGVzIHRvIGNvbXBsZXRlIHRoZSAtaWYgaW5zdGVhZCBvZiByZWxheWluZ1xuICAgICAgICAgICAgLy8gb24gdGhlIHNhbWUgYmFzaWMgc2ludGF4IChvciBtYXliZSBpdCBpcyBiZXR0ZXIgdG8gc3VwcG9ydCB0ZXJuYXJ5IG9wZXJhdG9yIENPTkQgPyBUSEVOIDogRUxTRSkuXG4gICAgICAgICAgICB2YXIgZGVjbGFyYXRpb25Db25kaXRpb24gPSBfZGVjbGFyYXRpb25WYWx1ZUxvb2t1cChkZWNsYXJhdGlvbnMsIGRlY2xhcmF0aW9uc1tpXS5uYW1lICsgJy1pZicsIHRlbXBsYXRlVXJsQ29udmVydGVyKTtcbiAgICAgICAgICAgIHZhciBub3QgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChkZWNsYXJhdGlvbkNvbmRpdGlvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICBkZWNsYXJhdGlvbkNvbmRpdGlvbiA9IF9kZWNsYXJhdGlvblZhbHVlTG9va3VwKGRlY2xhcmF0aW9ucywgZGVjbGFyYXRpb25zW2ldLm5hbWUgKyAnLWlmbm90JywgdGVtcGxhdGVVcmxDb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICBub3QgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKF9kZWNsYXJhdGlvblZhbHVlTG9va3VwKGRlY2xhcmF0aW9ucywgZGVjbGFyYXRpb25zW2ldLm5hbWUgKyAnLWlmbm90JywgdGVtcGxhdGVVcmxDb252ZXJ0ZXIpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJVbmV4cGVjdGVkIGVycm9yOiBjYW5ub3QgdXNlIGJvdGggLWlmIGFuZCAtaWZub3QgcHJvcGVydHkgY29uZGl0aW9uc1wiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVjbGFyYXRpb25Db25kaXRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgYmluZGluZ0NvbmQgPSBjb252ZXJ0ZXJVdGlscy5jb25kaXRpb25CaW5kaW5nKGRlY2xhcmF0aW9uQ29uZGl0aW9uLCBiaW5kaW5nUHJvdmlkZXIpO1xuICAgICAgICAgICAgICAgIGJpbmRWYWx1ZSA9IChub3QgPyAnIScgOiAnJykgKyBcIihcIiArIGJpbmRpbmdDb25kICsgXCIpID8gXCIgKyBiaW5kVmFsdWUgKyBcIiA6IG51bGxcIjtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gZGVhbCB3aXRoIC1rbyBzdHlsZSBiaW5kaW5nIGNvbmRpdGlvblwiLCBkZWNsYXJhdGlvbkNvbmRpdGlvbiwgZGVjbGFyYXRpb25zW2ldLm5hbWUpO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJpbmRUeXBlICE9PSBudWxsKSBuZXdCaW5kaW5nc1tiaW5kVHlwZV1bYmluZE5hbWVdID0gYmluZFZhbHVlO1xuICAgICAgICAgICAgZWxzZSBuZXdCaW5kaW5nc1tiaW5kTmFtZV0gPSBiaW5kVmFsdWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gcGFyc2luZyBAc3VwcG9ydHMgOnByZXZpZXdcbiAgICAgICAgICBpZiAobmV3U3R5bGUgIT09IG51bGwpIHtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgLy8gaWYgXCJlbGVtZW50XCIgaXMgZGVmaW5lZCB0aGVuIHdlIGFyZSBwYXJzaW5nIGFuIFwiaW5saW5lXCIgc3R5bGUgYW5kIHdlIHdhbnQgdG8gcmVtb3ZlIGl0LlxuICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQgIT0gJ3VuZGVmaW5lZCcgJiYgZWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5ld1N0eWxlID0gY29udmVydGVyVXRpbHMucmVtb3ZlU3R5bGUobmV3U3R5bGUsIGRlY2xhcmF0aW9uc1tpXS5wb3NpdGlvbi5zdGFydCwgZGVjbGFyYXRpb25zW2ldLnBvc2l0aW9uLmVuZCwgc2tpcExpbmVzLCAwLCAwLCAnJyk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIGFyZSBwYXJzaW5nIGEgZnVsbCBzdHlsZXNoZWV0Li4gbGV0J3MgcmV3cml0ZSB0aGUgZnVsbCBcInByb3A6IHZhbHVlXCIgd2l0aG91dCBjYXJpbmcgYWJvdXQgdGhlIG9yaWdpbmFsIHN5bnRheC5cbiAgICAgICAgICAgICAgICB2YXIgcmVwbGFjZWRXaXRoID0gJyc7XG4gICAgICAgICAgICAgICAgLy8gaWYgaXQgaXMgYW4gXCJpZlwiIHdlIHNpbXBseSBoYXZlIHRvIHJlbW92ZSBpdCwgb3RoZXJ3aXNlIHdlIHJlcGxhY2UgdGhlIGlucHV0IGNvZGUgd2l0aCBcInByb3A6IHZhbHVlXCIgZ2VuZXJhdGluZyBleHByZXNzaW9uLlxuICAgICAgICAgICAgICAgIGlmICghaXNJZikgcmVwbGFjZWRXaXRoID0gcHJvcE5hbWUgKyAnOiA8IS0tIGtvIHRleHQ6ICcgKyBiaW5kVmFsdWUgKyAnIC0tPicgKyBwcm9wRGVmYXVsdFZhbHVlICsgJzwhLS0gL2tvIC0tPic7XG4gICAgICAgICAgICAgICAgbmV3U3R5bGUgPSBjb252ZXJ0ZXJVdGlscy5yZW1vdmVTdHlsZShuZXdTdHlsZSwgZGVjbGFyYXRpb25zW2ldLnBvc2l0aW9uLnN0YXJ0LCBkZWNsYXJhdGlvbnNbaV0ucG9zaXRpb24uZW5kLCBza2lwTGluZXMsIDAsIDAsIHJlcGxhY2VkV2l0aCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiUmVtb3ZlIHN0eWxlIGZhaWxlZFwiLCBlLCBcIm5hbWVcIiwgZGVjbGFyYXRpb25zW2ldKTtcbiAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHByZWZpeGluZyB1cmxzXG4gICAgICAgICAgdmFyIHJlcGxhY2VkVmFsdWUgPSBfZGVjbGFyYXRpb25WYWx1ZVVybFByZWZpeGVyKGRlY2xhcmF0aW9uc1tpXS52YWx1ZSwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIpO1xuICAgICAgICAgIGlmIChyZXBsYWNlZFZhbHVlICE9IGRlY2xhcmF0aW9uc1tpXS52YWx1ZSkge1xuICAgICAgICAgICAgaWYgKG5ld1N0eWxlID09PSBudWxsICYmIHR5cGVvZiBzdHlsZSAhPT0gJ3VuZGVmaW5lZCcpIG5ld1N0eWxlID0gc3R5bGU7XG4gICAgICAgICAgICBpZiAobmV3U3R5bGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXdTdHlsZSA9IGNvbnZlcnRlclV0aWxzLnJlbW92ZVN0eWxlKG5ld1N0eWxlLCBkZWNsYXJhdGlvbnNbaV0ucG9zaXRpb24uc3RhcnQsIGRlY2xhcmF0aW9uc1tpXS5wb3NpdGlvbi5lbmQsIHNraXBMaW5lcywgMCwgMCwgZGVjbGFyYXRpb25zW2ldLm5hbWUgKyBcIjogXCIgKyByZXBsYWNlZFZhbHVlKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVtb3ZlIHN0eWxlIGZhaWxlZCByZXBsYWNpbmcgdXJsXCIsIGUsIFwibmFtZVwiLCBkZWNsYXJhdGlvbnNbaV0pO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTdHlsZSBoYW5kbGluZyBieSBjb25jYXRlbmF0ZWQgXCJzdHlsZSBhdHRyaWJ1dGVcIiAod29yc2UgcGVyZm9ybWFuY2UgYnV0IG1vcmUgc3RhYmxlIHRoYW4gZGlyZWN0IHN0eWxlIGhhbmRsaW5nKVxuICAgICAgICAgIHZhciBiaW5kTmFtZTIgPSBfcHJvcFRvQ2FtZWxDYXNlKGRlY2xhcmF0aW9uc1tpXS5uYW1lKTtcbiAgICAgICAgICB2YXIgYmluZCA9ICd2aXJ0dWFsQXR0clN0eWxlJztcbiAgICAgICAgICB2YXIgYmluZFZhbDIgPSB0eXBlb2YgbmV3QmluZGluZ3NbJ3ZpcnR1YWxTdHlsZSddICE9PSAndW5kZWZpbmVkJyA/IG5ld0JpbmRpbmdzWyd2aXJ0dWFsU3R5bGUnXVtiaW5kTmFtZTJdIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgdmFyIGRpc3QgPSAnICc7XG4gICAgICAgICAgaWYgKHR5cGVvZiBuZXdCaW5kaW5nc1tiaW5kXSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgbmV3QmluZGluZ3NbYmluZF0gPSBcIicnXCI7XG4gICAgICAgICAgICBkaXN0ID0gJyc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHR5cGVvZiBiaW5kVmFsMiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG5ld0JpbmRpbmdzW2JpbmRdID0gXCInXCIgKyBkZWNsYXJhdGlvbnNbaV0ubmFtZSArIFwiOiAnKyhcIiArIGJpbmRWYWwyICsgXCIpKyc7XCIgKyBkaXN0ICsgXCInK1wiICsgbmV3QmluZGluZ3NbYmluZF07XG4gICAgICAgICAgICBkZWxldGUgbmV3QmluZGluZ3NbJ3ZpcnR1YWxTdHlsZSddW2JpbmROYW1lMl07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld0JpbmRpbmdzW2JpbmRdID0gXCInXCIgKyBkZWNsYXJhdGlvbnNbaV0ubmFtZSArIFwiOiBcIiArIGNvbnZlcnRlclV0aWxzLmFkZFNsYXNoZXMocmVwbGFjZWRWYWx1ZSkgKyBcIjtcIiArIGRpc3QgKyBcIicrXCIgKyBuZXdCaW5kaW5nc1tiaW5kXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICBpZiAodHlwZW9mIGVsZW1lbnQgIT0gJ3VuZGVmaW5lZCcgJiYgZWxlbWVudCAhPT0gbnVsbCkge1xuICAgIGZvciAodmFyIHByb3AgaW4gbmV3QmluZGluZ3NbJ3ZpcnR1YWxTdHlsZSddKVxuICAgICAgaWYgKG5ld0JpbmRpbmdzWyd2aXJ0dWFsU3R5bGUnXS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlVuZXhwZWN0ZWQgdmlydHVhbFN0eWxlIGJpbmRpbmcgYWZ0ZXIgY29udmVyc2lvbiB0byB2aXJ0dWFsQXR0ci5zdHlsZVwiLCBwcm9wLCBuZXdCaW5kaW5nc1sndmlydHVhbFN0eWxlJ11bcHJvcF0sIHN0eWxlKTtcbiAgICAgICAgdGhyb3cgXCJVbmV4cGVjdGVkIHZpcnR1YWxTdHlsZSBiaW5kaW5nIGFmdGVyIGNvbnZlcnNpb24gdG8gdmlydHVhbEF0dHIuc3R5bGUgZm9yIFwiICsgcHJvcDtcbiAgICAgIH1cbiAgICBkZWxldGUgbmV3QmluZGluZ3NbJ3ZpcnR1YWxTdHlsZSddO1xuXG4gICAgdmFyIGN1cnJlbnRCaW5kaW5ncyA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1iaW5kJyk7XG4gICAgdmFyIGRhdGFCaW5kID0gKGN1cnJlbnRCaW5kaW5ncyAhPT0gbnVsbCA/IGN1cnJlbnRCaW5kaW5ncyArIFwiLCBcIiA6IFwiXCIpICsgX2JpbmRpbmdTZXJpYWxpemVyKG5ld0JpbmRpbmdzKTtcbiAgICBkb211dGlscy5zZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEtYmluZCcsIGRhdGFCaW5kKTtcbiAgfVxuXG4gIC8vIFRPRE8gYSBmdW5jdGlvbiB3aG9zZSByZXR1cm4gdHlwZSBkZXBlbmRzIG9uIHRoZSBpbnB1dCBwYXJhbWV0ZXJzIGlzIHZlcnkgdWdseS4uIHBsZWFzZSBGSVggTUUuXG4gIGlmICh0eXBlb2Ygc3R5bGUgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBjbGVhbiB2aXJ0dWFsU3R5bGUgaWYgZW1wdHlcbiAgICB2YXIgaGFzVmlydHVhbFN0eWxlID0gZmFsc2U7XG4gICAgZm9yICh2YXIgcHJvcDEgaW4gbmV3QmluZGluZ3NbJ3ZpcnR1YWxTdHlsZSddKVxuICAgICAgaWYgKG5ld0JpbmRpbmdzWyd2aXJ0dWFsU3R5bGUnXS5oYXNPd25Qcm9wZXJ0eShwcm9wMSkpIHtcbiAgICAgICAgaGFzVmlydHVhbFN0eWxlID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgaWYgKCFoYXNWaXJ0dWFsU3R5bGUpIGRlbGV0ZSBuZXdCaW5kaW5nc1sndmlydHVhbFN0eWxlJ107XG4gICAgZWxzZSB7XG4gICAgICAvLyByZW1vdmUgYW5kIGFkZCBiYWNrIHZpcnR1YWxBdHRyU3R5bGUgc28gaXQgZ2V0cyBhcHBlbmRlZCBCRUZPUkUgdmlydHVhbEF0dHJTdHlsZSAoX2JpbmRpbmdTZXJpYWxpemVyIHJldmVyc2UgdGhlbS4uLilcbiAgICAgIGlmICh0eXBlb2YgbmV3QmluZGluZ3NbJ3ZpcnR1YWxBdHRyU3R5bGUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIHZzID0gbmV3QmluZGluZ3NbJ3ZpcnR1YWxBdHRyU3R5bGUnXTtcbiAgICAgICAgZGVsZXRlIG5ld0JpbmRpbmdzWyd2aXJ0dWFsQXR0clN0eWxlJ107XG4gICAgICAgIG5ld0JpbmRpbmdzWyd2aXJ0dWFsQXR0clN0eWxlJ10gPSB2cztcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcmV0dXJucyBuZXcgc2VyaWFsaXplZCBiaW5kaW5nc1xuICAgIHJldHVybiBfYmluZGluZ1NlcmlhbGl6ZXIobmV3QmluZGluZ3MpO1xuICB9XG5cbiAgcmV0dXJuIG5ld1N0eWxlO1xufTtcblxudmFyIF9iaW5kaW5nU2VyaWFsaXplciA9IGZ1bmN0aW9uKHZhbCkge1xuICB2YXIgcmVzID0gW107XG4gIGZvciAodmFyIHByb3AgaW4gdmFsKVxuICAgIGlmICh2YWwuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsW3Byb3BdID09ICdvYmplY3QnKSByZXMucHVzaChwcm9wICsgXCI6IFwiICsgXCJ7IFwiICsgX2JpbmRpbmdTZXJpYWxpemVyKHZhbFtwcm9wXSkgKyBcIiB9XCIpO1xuICAgICAgZWxzZSByZXMucHVzaChwcm9wICsgXCI6IFwiICsgdmFsW3Byb3BdKTtcbiAgICB9XG4gIHJldHVybiByZXMucmV2ZXJzZSgpLmpvaW4oJywgJyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVsYWJvcmF0ZURlY2xhcmF0aW9uczsiLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gVGhpcyBkZWFscyB3aXRoIENoZWVyaW8valF1ZXJ5IGlzc3Vlcy5cbi8vIE1vc3Qgb2YgdGhpcyBjb3VsZCBiZSBkb25lIHdpdGhvdXQgalF1ZXJ5LCB0b28sIGJ1dCBqUXVlcnkgaXMgZWFzaWVyIHRvIGJlIG1vY2tlZCB3aXRoIENoZWVyaW9cbi8vIE90aGVyd2lzZSB3ZSB3b3VsZCBuZWVkIGpzRG9tIHRvIHJ1biB0aGUgY29tcGlsZXIgaW4gdGhlIHNlcnZlciAod2l0aG91dCBhIHJlYWwgYnJvd3NlcilcblxudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xuXG5mdW5jdGlvbiBfZXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XG4gIGlmIChzb3VyY2UpIHtcbiAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbnZhciBvYmpFeHRlbmQgPSBmdW5jdGlvbihvYmosIGV4dGVuZGVyKSB7XG4gIGlmICh0eXBlb2YgJC5leHRlbmQgPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiAkLmV4dGVuZCh0cnVlLCBvYmosIGV4dGVuZGVyKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gX2V4dGVuZChvYmosIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXh0ZW5kZXIpKSk7XG4gIH1cbn07XG5cbnZhciBnZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyaWJ1dGUpIHtcbiAgdmFyIHJlcyA9ICQoZWxlbWVudCkuYXR0cihhdHRyaWJ1dGUpO1xuICBpZiAodHlwZW9mIHJlcyA9PSAndW5kZWZpbmVkJykgcmVzID0gbnVsbDtcbiAgcmV0dXJuIHJlcztcbiAgLy8gcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7XG59O1xuXG52YXIgc2V0QXR0cmlidXRlID0gZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAkKGVsZW1lbnQpLmF0dHIoYXR0cmlidXRlLCB2YWx1ZSk7XG4gIC8vIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xufTtcblxudmFyIHJlbW92ZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJpYnV0ZSkge1xuICAkKGVsZW1lbnQpLnJlbW92ZUF0dHIoYXR0cmlidXRlKTtcbiAgLy8gZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbn07XG5cbnZhciBnZXRJbm5lclRleHQgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gIHJldHVybiAkKGVsZW1lbnQpLnRleHQoKTtcbiAgLy8gaWYgKHR5cGVvZiBlbGVtZW50LmlubmVyVGV4dCAhPSAndW5kZWZpbmVkJykgcmV0dXJuIGVsZW1lbnQuaW5uZXJUZXh0O1xuICAvLyBlbHNlIHJldHVybiBlbGVtZW50LnRleHRDb250ZW50O1xufTtcblxudmFyIGdldElubmVySHRtbCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgcmV0dXJuICQoZWxlbWVudCkuaHRtbCgpO1xuICAvLyByZXR1cm4gZWxlbWVudC5pbm5lckhUTUw7XG59O1xuXG52YXIgZ2V0TG93ZXJUYWdOYW1lID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAvLyBzb21ldGltZXMgY2hlZXJpbyBkb2Vzbid0IGhhdmUgdGFnTmFtZSBidXQgXCJuYW1lXCIuXG4gIC8vIEJyb3dzZXJzIGhhdmUgXCJuYW1lXCIgd2l0aCBlbXB0eSBzdHJpbmdcbiAgLy8gU29tZXRpbWVzIGNoZWVyaW8gaGFzIHRhZ05hbWUgYnV0IG5vIHByb3AgZnVuY3Rpb24uXG4gIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICcnICYmIHR5cGVvZiBlbGVtZW50Lm5hbWUgPT0gJ3N0cmluZycpIHJldHVybiBlbGVtZW50Lm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGVsZW1lbnQudGFnTmFtZSAhPT0gJycpIHJldHVybiBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuICQoZWxlbWVudCkucHJvcChcInRhZ05hbWVcIikudG9Mb3dlckNhc2UoKTtcbiAgLy8gcmV0dXJuIGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xufTtcblxudmFyIHNldENvbnRlbnQgPSBmdW5jdGlvbihlbGVtZW50LCBjb250ZW50KSB7XG4gICQoZWxlbWVudCkuaHRtbChjb250ZW50KTtcbiAgLy8gZWxlbWVudC5pbm5lckhUTUwgPSBjb250ZW50O1xufTtcblxudmFyIHJlcGxhY2VIdG1sID0gZnVuY3Rpb24oZWxlbWVudCwgaHRtbCkge1xuICAkKGVsZW1lbnQpLnJlcGxhY2VXaXRoKGh0bWwpO1xuICAvLyBlbGVtZW50Lm91dGVySFRNTCA9IGh0bWw7XG59O1xuXG52YXIgcmVtb3ZlRWxlbWVudHMgPSBmdW5jdGlvbigkZWxlbWVudHMsIHRyeURldGFjaCkge1xuICBpZiAodHJ5RGV0YWNoICYmIHR5cGVvZiAkZWxlbWVudHMuZGV0YWNoICE9PSAndW5kZWZpbmVkJykgJGVsZW1lbnRzLmRldGFjaCgpO1xuICAvLyBOT1RFOiB3ZSBkb24ndCBuZWVkIGFuIGVsc2UsIGFzIGRldGFjaCBpcyBzaW1wbHkgYW4gb3B0aW1pemF0aW9uXG4gICRlbGVtZW50cy5yZW1vdmUoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRBdHRyaWJ1dGU6IGdldEF0dHJpYnV0ZSxcbiAgc2V0QXR0cmlidXRlOiBzZXRBdHRyaWJ1dGUsXG4gIHJlbW92ZUF0dHJpYnV0ZTogcmVtb3ZlQXR0cmlidXRlLFxuICBnZXRJbm5lclRleHQ6IGdldElubmVyVGV4dCxcbiAgZ2V0SW5uZXJIdG1sOiBnZXRJbm5lckh0bWwsXG4gIGdldExvd2VyVGFnTmFtZTogZ2V0TG93ZXJUYWdOYW1lLFxuICBzZXRDb250ZW50OiBzZXRDb250ZW50LFxuICByZXBsYWNlSHRtbDogcmVwbGFjZUh0bWwsXG4gIHJlbW92ZUVsZW1lbnRzOiByZW1vdmVFbGVtZW50cyxcbiAgb2JqRXh0ZW5kOiBvYmpFeHRlbmRcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG52YXIgZWxhYm9yYXRlRGVjbGFyYXRpb25zID0gcmVxdWlyZShcIi4vZGVjbGFyYXRpb25zLmpzXCIpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy5qcycpO1xudmFyIG1vZGVsRGVmID0gcmVxdWlyZSgnLi9tb2RlbC5qcycpO1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xuXG52YXIgX2dldE9wdGlvbnNPYmplY3QgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gIHZhciBvcHRpb25zQ291cGxlcyA9IG9wdGlvbnMuc3BsaXQoJ3wnKTtcbiAgdmFyIG9wdHMgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRpb25zQ291cGxlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBvcHQgPSBvcHRpb25zQ291cGxlc1tpXS5zcGxpdCgnPScpO1xuICAgIG9wdHNbb3B0WzBdXSA9IG9wdC5sZW5ndGggPiAxID8gb3B0WzFdIDogb3B0WzBdO1xuICB9XG4gIHJldHVybiBvcHRzO1xufTtcblxuLy8gVE9ETyB0aGlzIHNob3VsZCBub3QgaGF2ZSBoYXJkY29kZWQgcnVsZXMgKHdlIG5vdyBoYXZlIGEgd2F5IHRvIGRlY2xhcmUgdGhlbSBpbiB0aGUgdGVtcGxhdGUgZGVmaW5pdGlvbilcbi8vIENhdGVnb3J5IFwic3R5bGVcIiBpcyB1c2VkIGJ5IGVkaXRUeXBlIFwic3R5bGVyXCJcbi8vIENhdGVvZ3J5IFwiY29udGVudFwiIGlzIHVzZWQgYnkgZWRpdFR5cGUgXCJlZGl0XCJcbi8vIFRPRE8gbWF5YmUgd2Ugc2hvdWxkIHVzZSBhIGNvbW1vbiBzdHJpbmcgaGVyZSwgYW5kIHJlbHkgb25seSBvbiB0aGUgb3JpZ2luYWwgY2F0ZWdvcnkuXG52YXIgX2ZpbHRlclByb3BzID0gZnVuY3Rpb24obW9kZWwsIGVkaXRUeXBlLCBsZXZlbCkge1xuICB2YXIgcmVzID0gW107XG4gIC8vIEFkZCBoZXJlIGVkaXRhYmxlIGtvLWF0dHJpYnV0ZXMgZm9yIHBvc3NpYmxlIGRpZmZlcmVudCB0ZW1wbGF0ZXNcbiAgdmFyIGVkaXRhYmxlUHJvcHMgPSBbJ2J1dHRvblN0eWxlJywgJ2JpZ0J1dHRvblN0eWxlJywgJ2J1dHRvbkNvbG9yJywgJ2JhY2tncm91bmRDb2xvcicsICdyYWRpdXMnXTtcbiAgZm9yICh2YXIgcHJvcCBpbiBtb2RlbClcbiAgICBpZiAoIXByb3AubWF0Y2goL15jdXN0b21TdHlsZSQvKSAmJiAhcHJvcC5tYXRjaCgvXl8vKSAmJiBtb2RlbC5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgdmFyIGlzU3R5bGVQcm9wID0gbW9kZWxbcHJvcF0gIT09IG51bGwgJiYgdHlwZW9mIG1vZGVsW3Byb3BdLl9jYXRlZ29yeSAhPSAndW5kZWZpbmVkJyAmJiBtb2RlbFtwcm9wXS5fY2F0ZWdvcnkgPT0gJ3N0eWxlJztcbiAgICAgIGlmIChwcm9wID09ICdpZCcgfHwgcHJvcCA9PSAndHlwZScgfHwgcHJvcC5tYXRjaCgvQmxvY2tzJC8pKSB7fSBlbHNlIGlmIChlZGl0VHlwZSA9PSAnc3R5bGVyJyAmJiBlZGl0YWJsZVByb3BzLmluZGV4T2YocHJvcCkgPiAtMSkge1xuICAgICAgICBpZiAoaXNTdHlsZVByb3AgfHwgbGV2ZWwgPiAwICkgcmVzLnB1c2gocHJvcCk7XG4gICAgICB9IGVsc2UgaWYgKGVkaXRUeXBlID09ICdlZGl0Jykge1xuICAgICAgICAvLyBFZGl0aW5nIGZvciBwcm9wZXJ0aWVzIGluIHRoZSBcImNvbnRlbnRcIiBjYXRlZ29yeSBidXQgbm90IGRlZmluZWQgaW4gdGhlIGNvbnRleHQgb2YgYSBibG9ja1xuICAgICAgICB2YXIgaXNDb250ZW50UHJvcCA9IG1vZGVsW3Byb3BdICE9PSBudWxsICYmIHR5cGVvZiBtb2RlbFtwcm9wXS5fY2F0ZWdvcnkgIT0gJ3VuZGVmaW5lZCcgJiYgbW9kZWxbcHJvcF0uX2NhdGVnb3J5ID09ICdjb250ZW50JyAmJlxuICAgICAgICAgICh0eXBlb2YgbW9kZWxbcHJvcF0uX2NvbnRleHQgPT0gJ3VuZGVmaW5lZCcgfHwgbW9kZWxbcHJvcF0uX2NvbnRleHQgIT0gJ2Jsb2NrJyk7XG4gICAgICAgIGlmIChpc0NvbnRlbnRQcm9wKSByZXMucHVzaChwcm9wKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVkaXRUeXBlID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJlcy5wdXNoKHByb3ApO1xuICAgICAgfVxuICAgIH1cbiAgcmV0dXJuIHJlcztcbn07XG5cbnZhciBfcHJvcElucHV0ID0gZnVuY3Rpb24obW9kZWwsIHByb3AsIHByb3BBY2Nlc3NvciwgZWRpdFR5cGUsIHdpZGdldHMpIHtcbiAgdmFyIGh0bWwgPSBcIlwiO1xuICB2YXIgd2lkZ2V0O1xuICBpZiAobW9kZWwgIT09IG51bGwgJiYgdHlwZW9mIG1vZGVsLl93aWRnZXQgIT0gJ3VuZGVmaW5lZCcpIHdpZGdldCA9IG1vZGVsLl93aWRnZXQ7XG5cbiAgaWYgKHR5cGVvZiB3aWRnZXQgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0aHJvdyBcIlVua25vd24gZGF0YSB0eXBlIGZvciBcIiArIHByb3A7XG4gIH1cblxuICAvLyBGb3IgY29udGVudCBlZGl0b3JzIHdlIGRlYWwgd2l0aCBmb2N1c2luZyAoY2xpY2tpbmcgaXMgaGFuZGxlZCBieSB0aGUgY29udGFpbmVyIERJVikuXG4gIHZhciBvbmZvY3VzYmluZGluZyA9ICdmb2N1c2FibGU6IHRydWUnO1xuICBpZiAoZWRpdFR5cGUgPT0gJ2VkaXQnKSB7XG4gICAgb25mb2N1c2JpbmRpbmcgKz0gJywgZXZlbnQ6IHsgZm9jdXM6IGZ1bmN0aW9uKHVpLCBldmVudCkgeyAkKCRlbGVtZW50KS5jbGljaygpOyB9IH0gJztcbiAgfVxuXG4gIGh0bWwgKz0gJzxsYWJlbCBjbGFzcz1cImRhdGEtJyArIHdpZGdldCArICdcIicgKyAod2lkZ2V0ID09ICdib29sZWFuJyA/ICcgZGF0YS1iaW5kPVwiZXZlbnQ6IHsgbW91c2Vkb3duOiBmdW5jdGlvbih1aSwgZXZ0KSB7IGlmIChldnQuYnV0dG9uID09IDApIHsgdmFyIGlucHV0ID0gJCgkZWxlbWVudCkuZmluZChcXCdpbnB1dFxcJyk7IHZhciBjaCA9IGlucHV0LnByb3AoXFwnY2hlY2tlZFxcJyk7IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGlucHV0LmNsaWNrKCk7IGlucHV0LnByb3AoXFwnY2hlY2tlZFxcJywgIWNoKTsgaW5wdXQudHJpZ2dlcihcXCdjaGFuZ2VcXCcpOyB9LCAwKTsgfSB9IH0sIGNsaWNrOiBmdW5jdGlvbih1aSwgZXZ0KSB7IGV2dC5wcmV2ZW50RGVmYXVsdCgpOyB9LCBjbGlja0J1YmJsZTogZmFsc2VcIicgOiAnJykgKyAnPic7XG5cbiAgaWYgKHR5cGVvZiB3aWRnZXRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2lkZ2V0c1t3aWRnZXRdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciB3ID0gd2lkZ2V0c1t3aWRnZXRdO1xuICAgIHZhciBwYXJhbWV0ZXJzID0ge307XG4gICAgaWYgKHR5cGVvZiB3LnBhcmFtZXRlcnMgIT09ICd1bmRlZmluZWQnKVxuICAgICAgZm9yICh2YXIgcCBpbiB3LnBhcmFtZXRlcnMpXG4gICAgICAgIGlmICh3LnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkocCkgJiYgdHlwZW9mIG1vZGVsWydfJytwXSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgcGFyYW1ldGVyc1twXSA9IG1vZGVsWydfJytwXTtcbiAgICBodG1sICs9IHcuaHRtbChwcm9wQWNjZXNzb3IsIG9uZm9jdXNiaW5kaW5nLCBwYXJhbWV0ZXJzKTtcbiAgfSBlbHNlIGlmICh3aWRnZXQgPT0gJ2Jvb2xlYW4nKSB7XG4gICAgaHRtbCArPSAnPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIHZhbHVlPVwibm90aGluZ1wiIGRhdGEtYmluZD1cImNoZWNrZWQ6ICcgKyBwcm9wQWNjZXNzb3IgKyAnLCAnICsgb25mb2N1c2JpbmRpbmcgKyAnXCIgLz4nO1xuICAgIGh0bWwgKz0gJzxzcGFuIGNsYXNzPVwiY2hlY2tib3gtcmVwbGFjZXJcIiA+PC9zcGFuPic7IC8qIGRhdGEtYmluZD1cImNzczogeyBjaGVja2VkOiAnK3Byb3BBY2Nlc3NvcisnIH1cIiAqL1xuICB9IGVsc2UgaWYgKHdpZGdldCA9PSAnY29sb3InKSB7XG4gICAgaHRtbCArPSAnPGlucHV0IHNpemU9XCI3XCIgdHlwZT1cInRleHRcIiBkYXRhLWJpbmQ9XCJjb2xvcnBpY2tlcjogeyBjb2xvcjogJyArIHByb3BBY2Nlc3NvciArICcsIHN0cmluZ3M6ICRyb290LnQoXFwnVGhlbWUgQ29sb3JzLFN0YW5kYXJkIENvbG9ycyxXZWIgQ29sb3JzLFRoZW1lIENvbG9ycyxCYWNrIHRvIFBhbGV0dGUsSGlzdG9yeSxObyBoaXN0b3J5IHlldC5cXCcpIH0sICcgKyAnLCAnICsgb25mb2N1c2JpbmRpbmcgKyAnXCIgLz4nO1xuICB9IGVsc2UgaWYgKHdpZGdldCA9PSAnc2VsZWN0Jykge1xuICAgIGlmICh0eXBlb2YgbW9kZWwuX29wdGlvbnMgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBvcHRzID0gX2dldE9wdGlvbnNPYmplY3QobW9kZWwuX29wdGlvbnMpO1xuICAgICAgLy8gdmFyIG9wdHMgPSBtb2RlbC5fb3B0aW9ucztcbiAgICAgIGh0bWwgKz0gJzxzZWxlY3QgZGF0YS1iaW5kPVwidmFsdWU6ICcgKyBwcm9wQWNjZXNzb3IgKyAnLCAnICsgb25mb2N1c2JpbmRpbmcgKyAnXCI+JztcbiAgICAgIGZvciAodmFyIG9wdCBpbiBvcHRzKVxuICAgICAgICBpZiAob3B0cy5oYXNPd25Qcm9wZXJ0eShvcHQpKSB7XG4gICAgICAgICAgaHRtbCArPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBvcHQgKyAnXCIgZGF0YS1iaW5kPVwidGV4dDogJHJvb3QudXQoXFwndGVtcGxhdGVcXCcsIFxcJycgKyB1dGlscy5hZGRTbGFzaGVzKG9wdHNbb3B0XSkgKyAnXFwnKVwiPicgKyBvcHRzW29wdF0gKyAnPC9vcHRpb24+JztcbiAgICAgICAgfVxuICAgICAgaHRtbCArPSAnPC9zZWxlY3Q+JztcbiAgICB9XG4gIH0gZWxzZSBpZiAod2lkZ2V0ID09ICdmb250Jykge1xuICAgIGh0bWwgKz0gJzxzZWxlY3QgdHlwZT1cInRleHRcIiBkYXRhLWJpbmQ9XCJ2YWx1ZTogJyArIHByb3BBY2Nlc3NvciArICcsICcgKyBvbmZvY3VzYmluZGluZyArICdcIj4nO1xuICAgIGh0bWwgKz0gJzxvcHRncm91cCBsYWJlbD1cIlNhbnMtU2VyaWYgRm9udHNcIj4nO1xuICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCJBcmlhbCxIZWx2ZXRpY2Esc2Fucy1zZXJpZlwiPkFyaWFsPC9vcHRpb24+JztcbiAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiXFwnQ29taWMgU2FucyBNU1xcJyxjdXJzaXZlLHNhbnMtc2VyaWZcIj5Db21pYyBTYW5zIE1TPC9vcHRpb24+JztcbiAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiSW1wYWN0LENoYXJjb2FsLHNhbnMtc2VyaWZcIj5JbXBhY3Q8L29wdGlvbj4nO1xuICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCJcXCdUcmVidWNoZXQgTVNcXCcsSGVsdmV0aWNhLHNhbnMtc2VyaWZcIj5UcmVidWNoZXQgTVM8L29wdGlvbj4nO1xuICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCJWZXJkYW5hLEdlbmV2YSxzYW5zLXNlcmlmXCI+VmVyZGFuYTwvb3B0aW9uPic7XG4gICAgaHRtbCArPSAnPC9vcHRncm91cD4nO1xuICAgIGh0bWwgKz0gJzxvcHRncm91cCBsYWJlbD1cIlNlcmlmIEZvbnRzXCI+JztcbiAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiR2VvcmdpYSxzZXJpZlwiPkdlb3JnaWE8L29wdGlvbj4nO1xuICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCJcXCdUaW1lcyBOZXcgUm9tYW5cXCcsVGltZXMsc2VyaWZcIj5UaW1lcyBOZXcgUm9tYW48L29wdGlvbj4nO1xuICAgIGh0bWwgKz0gJzwvb3B0Z3JvdXA+JztcbiAgICBodG1sICs9ICc8b3B0Z3JvdXAgbGFiZWw9XCJNb25vc3BhY2UgRm9udHNcIj4nO1xuICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCJcXCdDb3VyaWVyIE5ld1xcJyxDb3VyaWVyLG1vbm9zcGFjZVwiPkNvdXJpZXIgTmV3PC9vcHRpb24+JztcbiAgICBodG1sICs9ICc8L29wdGdyb3VwPic7XG4gICAgaHRtbCArPSAnPC9zZWxlY3Q+JztcbiAgfSBlbHNlIGlmICh3aWRnZXQgPT0gJ3VybCcpIHtcbiAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwidWktdGV4dGJ1dHRvblwiPic7XG4gICAgLy8gPGEgY2xhc3M9XCJ1aS1zcGlubmVyLWJ1dHRvbiB1aS1zcGlubmVyLWRvd24gdWktY29ybmVyLWJyIHVpLWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1idXR0b24tdGV4dC1vbmx5XCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJidXR0b25cIj48c3BhbiBjbGFzcz1cInVpLWJ1dHRvbi10ZXh0XCI+PHNwYW4gY2xhc3M9XCJ1aS1pY29uIGZhIGZhLWZ3IGNhcmV0LWRvd25cIj7ilrw8L3NwYW4+PC9zcGFuPjwvYT5cbiAgICBodG1sICs9ICc8aW5wdXQgY2xhc3M9XCJ1aS10ZXh0YnV0dG9uLWlucHV0XCIgc2l6ZT1cIjdcIiB0eXBlPVwidXJsXCIgcGF0dGVybj1cIihtYWlsdG86LitALit8aHR0cHM/Oi8vLitcXFxcLi4rfFxcXFxbLipcXFxcXS4qKVwiIHZhbHVlPVwibm90aGluZ1wiIGRhdGEtYmluZD1cImNzczogeyB3aXRoQnV0dG9uOiB0eXBlb2YgJHJvb3QubGlua0RpYWxvZyAhPT0gXFwndW5kZWZpbmVkXFwnIH0sIHZhbGlkYXRlZFZhbHVlOiAnICsgcHJvcEFjY2Vzc29yICsgJywgJyArIG9uZm9jdXNiaW5kaW5nICsgJ1wiIC8+JztcbiAgICBodG1sICs9ICc8YSBjbGFzcz1cInVpLXRleHRidXR0b24tYnV0dG9uXCIgZGF0YS1iaW5kPVwidmlzaWJsZTogdHlwZW9mICRyb290LmxpbmtEaWFsb2cgIT09IFxcJ3VuZGVmaW5lZFxcJywgY2xpY2s6IHR5cGVvZiAkcm9vdC5saW5rRGlhbG9nICE9PSBcXCd1bmRlZmluZWRcXCcgPyAkcm9vdC5saW5rRGlhbG9nLmJpbmQoJGVsZW1lbnQucHJldmlvdXNTaWJsaW5nKSA6IGZhbHNlLCBidXR0b246IHsgaWNvbnM6IHsgcHJpbWFyeTogXFwnZmEgZmEtZncgZmEtZWxsaXBzaXMtaFxcJyB9LCBsYWJlbDogXFwnT3B6aW9uaVxcJywgdGV4dDogZmFsc2UgfVwiPk9wemlvbmk8L2E+JztcbiAgICBodG1sICs9ICc8L2Rpdj4nO1xuICB9IGVsc2UgaWYgKHdpZGdldCA9PSAnaW50ZWdlcicpIHtcbiAgICAvLyBhdCB0aGlzIHRpbWUgdGhlIFwic3RlcFwiIGRlcGVuZHMgb24gbWF4IGJlaW5nIGdyZWF0ZXIgdGhhbiAxMDAuXG4gICAgLy8gbWF5YmUgd2Ugc2hvdWxkIGV4cG9zZSBcInN0ZXBcIiBhcyBhIGNvbmZpZ3VyYXRpb24sIHRvb1xuICAgIHZhciBtaW4gPSAwO1xuICAgIHZhciBtYXggPSAxMDAwO1xuICAgIGlmIChtb2RlbCAhPT0gbnVsbCAmJiB0eXBlb2YgbW9kZWwuX21heCAhPT0gJ3VuZGVmaW5lZCcpIG1heCA9IG1vZGVsLl9tYXg7XG4gICAgaWYgKG1vZGVsICE9PSBudWxsICYmIHR5cGVvZiBtb2RlbC5fbWluICE9PSAndW5kZWZpbmVkJykgbWluID0gbW9kZWwuX21pbjtcbiAgICB2YXIgc3RlcCA9IChtYXggLSBtaW4pID49IDEwMCA/IDEwIDogMTtcbiAgICB2YXIgcGFnZSA9IHN0ZXAgKiA1O1xuICAgIGh0bWwgKz0gJzxpbnB1dCBjbGFzcz1cIm51bWJlci1zcGlubmVyXCIgc2l6ZT1cIjdcIiBzdGVwPVwiJyArIHN0ZXAgKyAnXCIgdHlwZT1cIm51bWJlclwiIHZhbHVlPVwiLTFcIiBkYXRhLWJpbmQ9XCJzcGlubmVyOiB7IG1pbjogJyArIG1pbiArICcsIG1heDogJyArIG1heCArICcsIHBhZ2U6ICcgKyBwYWdlICsgJywgdmFsdWU6ICcgKyBwcm9wQWNjZXNzb3IgKyAnIH0sIHZhbHVlVXBkYXRlOiBbXFwnY2hhbmdlXFwnLCBcXCdzcGluXFwnXScgKyAnLCAnICsgb25mb2N1c2JpbmRpbmcgKyAnXCIgLz4nO1xuICB9IGVsc2Uge1xuICAgIGh0bWwgKz0gJzxpbnB1dCBzaXplPVwiN1wiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCJub3RoaW5nXCIgZGF0YS1iaW5kPVwidmFsdWU6ICcgKyBwcm9wQWNjZXNzb3IgKyAnLCAnICsgb25mb2N1c2JpbmRpbmcgKyAnXCIgLz4nO1xuICB9XG5cbiAgaHRtbCArPSAnPC9sYWJlbD4nO1xuXG4gIHJldHVybiBodG1sO1xufTtcblxudmFyIF9nZXRHbG9iYWxTdHlsZVByb3AgPSBmdW5jdGlvbihnbG9iYWxTdHlsZXMsIG1vZGVsLCBwcm9wLCBwYXRoKSB7XG4gIHZhciBnbG9iYWxTdHlsZVByb3A7XG4gIGlmICh0eXBlb2YgbW9kZWwgIT09ICdvYmplY3QnIHx8IG1vZGVsID09PSBudWxsIHx8IHR5cGVvZiBtb2RlbC5fd2lkZ2V0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh0eXBlb2YgcHJvcCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHBhdGggIT09ICd1bmRlZmluZWQnICYmIHBhdGgubGVuZ3RoID4gMCAmJiB0eXBlb2YgZ2xvYmFsU3R5bGVzID09ICdvYmplY3QnICYmIHR5cGVvZiBnbG9iYWxTdHlsZXNbcGF0aF0gIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGdsb2JhbFN0eWxlUHJvcCA9IGdsb2JhbFN0eWxlc1twYXRoXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGdsb2JhbFN0eWxlUHJvcDtcbn07XG5cbnZhciBfcHJvcEVkaXRvciA9IGZ1bmN0aW9uKHdpdGhCaW5kaW5nUHJvdmlkZXIsIHdpZGdldHMsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBtb2RlbCwgdGhlbWVNb2RlbCwgcGF0aCwgcHJvcCwgZWRpdFR5cGUsIGxldmVsLCBiYXNlVGhyZXNob2xkLCBnbG9iYWxTdHlsZXMsIGdsb2JhbFN0eWxlUHJvcCwgdHJhY2tVc2FnZSwgcm9vdFByZXZpZXdCaW5kaW5nLCBwcmV2aWV3QmFja2dyb3VuZCkge1xuICBpZiAodHlwZW9mIGxldmVsID09ICd1bmRlZmluZWQnKSBsZXZlbCA9IDA7XG5cbiAgaWYgKHR5cGVvZiBwcm9wICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kZWwgPT0gJ29iamVjdCcgJiYgbW9kZWwgIT09IG51bGwgJiYgdHlwZW9mIG1vZGVsLl91c2Vjb3VudCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zb2xlLmxvZyhcIlRPRE8gRURJVE9SIGlnbm9yaW5nXCIsIHBhdGgsIFwicHJvcGVydHkgYmVjYXVzZSBpdCBpcyBub3QgdXNlZCBieSB0aGUgdGVtcGxhdGVcIiwgXCJwcm9wOlwiLCBwcm9wLCBcInR5cGU6XCIsIGVkaXRUeXBlLCBcImxldmVsOlwiLCBsZXZlbCwgd2l0aEJpbmRpbmdQcm92aWRlci5fdGVtcGxhdGVOYW1lKTtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIHZhciBwcm9wQWNjZXNzb3IgPSB0eXBlb2YgZ2xvYmFsU3R5bGVQcm9wICE9ICd1bmRlZmluZWQnID8gcHJvcCArICcuX2RlZmF1bHRDb21wdXRlZCcgOiBwcm9wO1xuICB2YXIgaHRtbCA9IFwiXCI7XG4gIHZhciB0aXRsZTtcbiAgdmFyIGlmU3Vic1Byb3AgPSBwcm9wQWNjZXNzb3I7XG4gIHZhciBpZlN1YnNHdXR0ZXIgPSAxO1xuICAvLyB0eXBlb2YgZ2xvYmFsU3R5bGVQcm9wICE9ICd1bmRlZmluZWQnID8gMSA6IDI7XG4gIHZhciBpZlN1YnNUaHJlc2hvbGQgPSAxO1xuXG4gIC8vIFRoZSB2aXNpYmlsaXR5IGhhbmRsaW5nIGlzIGEgUElUQVxuICAvLyBcbiAgLy8gSGVyZSBhcmUgc29tZSBcImVkZ2UgY2FzZXNcIiB0byB0ZXN0IHdoZW5ldmVyIHdlIGNoYW5nZSBzb21ldGhpbmcgaGVyZTpcbiAgLy8gTE0gc29jaWFsIGZvb3RlcjogcmVtb3Zpbmcgc2hhcmVWaXNpYmlsZSBtdXN0IGJlIHJlZmxlY3RlZCBpbiB0aGUgYm9vbGVhbnMgc3ViLWNoZWNrc1xuICAvLyBGTFVJRCBzb2NpYWwgYmxvY2s6IG11bHRpcGxlIGNsaWNrcyBvbiB0aGUgXCJ3YW5kXCIgc2hvdWxkIG5vdCBtYWtlIHRoZSBlZGl0b3IgaW52aXNpYmxlXG4gIC8vIEJJUyBoZXJvTWVudSAtIEJ5IGNoYW5naW5nIHRoZSBtZW51IHZpc2liaWxpdHkgaXQgc2hvdWxkIGJlIHJlZmxlY3RlZCBpbiBzdHlsZSBlZGl0b3JzIGZvciB0aGUgbWVudSBsaW5rc1xuICAvLyBGTFVJRCBhbG1vc3QgZXZlcnkgYmxvY2sgd2l0aCBhIGNvbG9yIHZhcmlhbnQgc29tZXRpbWVzIGtlZXBzIHNob3dpbmcgc3R5bGUgZWRpdG9yIGZvciB0aGUgaGlkZGVuIHZhcmlhbnQuXG4gIGlmICh0eXBlb2YgbW9kZWwgPT0gJ29iamVjdCcgJiYgbW9kZWwgIT09IG51bGwgJiYgdHlwZW9mIG1vZGVsLl93aWRnZXQgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBEbyBub3RoaW5nIGhlcmVcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbFN0eWxlUHJvcCA9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWZTdWJzR3V0dGVyICs9IDE7XG4gICAgfVxuICB9XG5cbiAgLy8gTk9URSBiYXNlVGhyZXNob2xkIGlzIGFkZGVkIG9ubHkgd2hlbiBnbG9iYWxTdHlsZSBpcyBub3QgZGVmaW5lZCBiZWNhdXNlIHdoZW4gd2UgaGF2ZSBnbG9iYWxTdHlsZVxuICAvLyB3ZSdyZSBnb2luZyB0byBiaW5kIHRoZSBjb21wdXRlZCB2YWx1ZXMgYW5kIG5vdCB0aGUgb3JpZ2luYWwgYW5kIHRoaXMgd2F5IHdlIGRvbid0IGFkZCBvdXJzZXJmIHRvIHRoZSBkZXBlbmRlbmN5IFxuICAvLyB0cmFja2luZyAoc3Vic2NyaXB0aW9uQ291bnQpXG4gIC8vIE5PVEUgYmFzZVRocmVzaG9sZCBpcyBhbiBcImV4cHJlc3Npb25cIiBhbmQgbm90IGEgZml4ZWQgbnVtYmVyLCBzbyB0aGlzIGlzIGEgY29uY2F0ZW5hdGlvblxuICBpZiAodHlwZW9mIGdsb2JhbFN0eWxlUHJvcCA9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgYmFzZVRocmVzaG9sZCAhPT0gJ3VuZGVmaW5lZCcpIGlmU3Vic1RocmVzaG9sZCArPSBiYXNlVGhyZXNob2xkO1xuXG4gIGlmICh0eXBlb2YgcHJvcCAhPSAndW5kZWZpbmVkJyAmJiAhIXRyYWNrVXNhZ2UpIHtcbiAgICBodG1sICs9ICc8IS0tIGtvIGlmU3ViczogeyBkYXRhOiAnICsgaWZTdWJzUHJvcCArICcsIHRocmVzaG9sZDogJyArIGlmU3Vic1RocmVzaG9sZCArICcsIGd1dHRlcjogJyArIGlmU3Vic0d1dHRlciArICd9IC0tPic7XG4gIH1cblxuICBpZiAodHlwZW9mIHByb3AgIT0gJ3VuZGVmaW5lZCcgJiYgKG1vZGVsID09PSBudWxsIHx8IHR5cGVvZiBtb2RlbC5fbmFtZSA9PSAndW5kZWZpbmVkJykpIHtcbiAgICAvLyBUT0RPIHRocm93IGV4Y2VwdGlvbj9cbiAgICBjb25zb2xlLmxvZyhcIlRPRE8gV0FSTiBNaXNzaW5nIGxhYmVsIGZvciBwcm9wZXJ0eSBcIiwgcHJvcCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBwcm9wID09ICd1bmRlZmluZWQnICYmIG1vZGVsICE9PSBudWxsICYmIHR5cGVvZiBtb2RlbC5fbmFtZSA9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUubG9nKFwiVE9ETyBXQVJOIE1pc3NpbmcgbGFiZWwgZm9yIG9iamVjdCBcIiwgbW9kZWwudHlwZSAvKiwgbW9kZWwgKi8gKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgbW9kZWwgPT0gJ29iamVjdCcgJiYgbW9kZWwgIT09IG51bGwgJiYgdHlwZW9mIG1vZGVsLl93aWRnZXQgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgcHJvcHMgPSBfZmlsdGVyUHJvcHMobW9kZWwsIGVkaXRUeXBlLCBsZXZlbCk7XG5cbiAgICB2YXIgaGFzQ3VzdG9tU3R5bGUgPSBlZGl0VHlwZSA9PSAnc3R5bGVyJyAmJiBtb2RlbCAhPT0gbnVsbCAmJiB0eXBlb2YgbW9kZWwuY3VzdG9tU3R5bGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBnbG9iYWxTdHlsZVByb3AgIT09ICd1bmRlZmluZWQnO1xuICAgIHZhciBzZWxlY3RlZEl0ZW1CaW5kaW5nID0gJyc7XG4gICAgdmFyIGFkZGl0aW9uYWxDbGFzc2VzID0gJyc7XG4gICAgaWYgKHR5cGVvZiBwcm9wICE9PSAndW5kZWZpbmVkJyAmJiBlZGl0VHlwZSA9PSAnZWRpdCcpIHtcbiAgICAgIHNlbGVjdGVkSXRlbUJpbmRpbmcgPSAnLCBjbGljazogZnVuY3Rpb24ob2JqLCBldnQpIHsgJHJvb3Quc2VsZWN0SXRlbSgnICsgcHJvcCArICcsICRkYXRhKTsgcmV0dXJuIGZhbHNlIH0sIGNsaWNrQnViYmxlOiBmYWxzZSwgY3NzOiB7IHNlbGVjdGVkaXRlbTogJHJvb3QuaXNTZWxlY3RlZEl0ZW0oJyArIHByb3AgKyAnKSB9LCBzY3JvbGxJbnRvVmlldzogJHJvb3QuaXNTZWxlY3RlZEl0ZW0oJyArIHByb3AgKyAnKSwgJztcbiAgICAgIGFkZGl0aW9uYWxDbGFzc2VzICs9ICcgc2VsZWN0YWJsZSc7XG4gICAgfVxuICAgIGlmIChoYXNDdXN0b21TdHlsZSkge1xuICAgICAgYWRkaXRpb25hbENsYXNzZXMgKz0gJyBzdXBwb3J0c0N1c3RvbVN0eWxlcyc7XG4gICAgfVxuICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJvYmpFZGl0IGxldmVsJyArIGxldmVsICsgYWRkaXRpb25hbENsYXNzZXMgKyAnXCIgZGF0YS1iaW5kPVwidG9vbHRpcHM6IHt9JyArIHNlbGVjdGVkSXRlbUJpbmRpbmcgKyAnXCI+JztcbiAgICB2YXIgbW9kZWxOYW1lID0gKG1vZGVsICE9PSBudWxsICYmIHR5cGVvZiBtb2RlbC5fbmFtZSAhPSAndW5kZWZpbmVkJyA/IG1vZGVsLl9uYW1lIDogKHR5cGVvZiBwcm9wICE9PSAndW5kZWZpbmVkJyA/ICdbJyArIHByb3AgKyAnXScgOiAnJykpO1xuICAgIGlmIChoYXNDdXN0b21TdHlsZSkge1xuICAgICAgdmFyIHRoZW1lU2VjdGlvbk5hbWUgPSAnU3RpbGUnO1xuICAgICAgaWYgKHR5cGVvZiB0aGVtZU1vZGVsICE9PSAndW5kZWZpbmVkJyAmJiB0aGVtZU1vZGVsICE9PSBudWxsICYmIHR5cGVvZiB0aGVtZU1vZGVsLl9uYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGVtZVNlY3Rpb25OYW1lID0gdGhlbWVNb2RlbC5fbmFtZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVE9ETyBtaXNzaW5nIGxhYmVsIGZvciB0aGVtZSBzZWN0aW9uIFwiLCBwcm9wLCBtb2RlbCAhPT0gbnVsbCA/IG1vZGVsLnR5cGUgOiAnLScpO1xuICAgICAgfVxuXG4gICAgICBtb2RlbE5hbWUgPSAnPHNwYW4gY2xhc3M9XCJibG9ja1NlbGVjdGlvbk1ldGhvZFwiIGRhdGEtYmluZD1cInRleHQ6IGN1c3RvbVN0eWxlKCkgPyAkcm9vdC51dChcXCd0ZW1wbGF0ZVxcJywgXFwnJyArIHV0aWxzLmFkZFNsYXNoZXMobW9kZWxOYW1lKSArICdcXCcpIDogJHJvb3QudXQoXFwndGVtcGxhdGVcXCcsIFxcJycgKyB1dGlscy5hZGRTbGFzaGVzKHRoZW1lU2VjdGlvbk5hbWUpICsgJ1xcJylcIj5CbG9jazwvc3Bhbj4nO1xuICAgIH0gZWxzZSB7XG4gICAgICBtb2RlbE5hbWUgPSAnPHNwYW4gZGF0YS1iaW5kPVwidGV4dDogJHJvb3QudXQoXFwndGVtcGxhdGVcXCcsIFxcJycgKyB1dGlscy5hZGRTbGFzaGVzKG1vZGVsTmFtZSkgKyAnXFwnKVwiPicgKyBtb2RlbE5hbWUgKyAnPC9zcGFuPic7XG4gICAgfVxuICAgIHRpdGxlID0gbW9kZWwgIT09IG51bGwgJiYgdHlwZW9mIG1vZGVsLl9oZWxwICE9PSAndW5kZWZpbmVkJyA/ICcgdGl0bGU9XCInICsgdXRpbHMuYWRkU2xhc2hlcyhtb2RlbC5faGVscCkgKyAnXCIgZGF0YS1iaW5kPVwiYXR0cjogeyB0aXRsZTogJHJvb3QudXQoXFwndGVtcGxhdGVcXCcsIFxcJycgKyB1dGlscy5hZGRTbGFzaGVzKG1vZGVsLl9oZWxwKSArICdcXCcpIH1cIicgOiAnJztcbiAgICBcbiAgICBpZihsZXZlbCA9PSAnMCcgfHwgbGV2ZWwgPT0gJzEnKXtcbiAgICAgIGh0bWwgKz0gJzxzcGFuJyArIHRpdGxlICsgJyBjbGFzcz1cIm9iakxhYmVsIGxldmVsJyArIGxldmVsICsgJ1wiPicgKyBtb2RlbE5hbWUgKyAnPC9zcGFuPic7XG4gICAgfVxuXG4gICAgaWYgKGVkaXRUeXBlID09ICdlZGl0JyAmJiB0eXBlb2YgbW9kZWwuX2Jsb2NrRGVzY3JpcHRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwiYmxvY2tEZXNjcmlwdGlvblwiIGRhdGEtYmluZD1cImh0bWw6ICRyb290LnV0KFxcJ3RlbXBsYXRlXFwnLCBcXCcnICsgdXRpbHMuYWRkU2xhc2hlcyhtb2RlbC5fYmxvY2tEZXNjcmlwdGlvbikgKyAnXFwnKVwiPicgKyBtb2RlbC5fYmxvY2tEZXNjcmlwdGlvbiArICc8L2Rpdj4nO1xuICAgIH1cblxuICAgIC8qIENVU1RPTSBTVFlMRSAqL1xuICAgIGlmIChoYXNDdXN0b21TdHlsZSkge1xuICAgICAgaHRtbCArPSAnPGxhYmVsIGNsYXNzPVwiZGF0YS1ib29sZWFuIGJsb2NrQ2hlY2tcIiBkYXRhLWJpbmQ9XCJ0b29sdGlwczogeyB9XCI+JztcbiAgICAgIGh0bWwgKz0gJzxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiB2YWx1ZT1cIm5vdGhpbmdcIiBkYXRhLWJpbmQ9XCJmb2N1c2FibGU6IHRydWUsIGNoZWNrZWQ6IGN1c3RvbVN0eWxlXCIgLz4nO1xuICAgICAgaHRtbCArPSAnPHNwYW4gdGl0bGU9XCJTd2l0Y2ggYmV0d2VlbiBnbG9iYWwgYW5kIGJsb2NrIGxldmVsIHN0eWxlcyBlZGl0aW5nXCIgZGF0YS1iaW5kPVwiYXR0cjogeyB0aXRsZTogJHJvb3QudChcXCdTd2l0Y2ggYmV0d2VlbiBnbG9iYWwgYW5kIGJsb2NrIGxldmVsIHN0eWxlcyBlZGl0aW5nXFwnKSB9XCIgY2xhc3M9XCJjaGVja2JveC1yZXBsYWNlciBjaGVja2JveC1yZXBsYWNlci1vbm9mZlwiPjwvc3Bhbj4nOyAvLyAgZGF0YS1iaW5kPVwidG9vbHRpcDogeyBjb250ZW50OiBcXCdwZXJzb25hbGl6emEgdHV0dGlcXCcgfVwiXG4gICAgICBodG1sICs9ICc8L2xhYmVsPic7XG4gICAgICBodG1sICs9ICc8IS0tIGtvIHRlbXBsYXRlOiB7IG5hbWU6IFxcJ2N1c3RvbXN0eWxlXFwnLCBpZjogY3VzdG9tU3R5bGUgfSAtLT48IS0tIC9rbyAtLT4nO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcHJvcCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgaHRtbCArPSAnPCEtLSBrbyB3aXRoOiAnICsgcHJvcCArICcgLS0+JztcblxuICAgICAgLyogUFJFVklFVyAqL1xuICAgICAgaWYgKGxldmVsID09IDEgJiYgdHlwZW9mIHByb3AgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtb2RlbC5fcHJldmlld0JpbmRpbmdzICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aXRoQmluZGluZ1Byb3ZpZGVyICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiByb290UHJldmlld0JpbmRpbmcgIT0gJ3VuZGVmaW5lZCcpIGh0bWwgKz0gJzwhLS0ga28gd2l0aDogJHJvb3QuY29udGVudCgpIC0tPjxkaXYgY2xhc3M9XCJvYmpQcmV2aWV3XCIgZGF0YS1iaW5kPVwiJyArIHJvb3RQcmV2aWV3QmluZGluZyArICdcIj48L2Rpdj48IS0tIC9rbyAtLT4nO1xuICAgICAgICAgIGlmICh0eXBlb2YgcHJldmlld0JhY2tncm91bmQgIT0gJ3VuZGVmaW5lZCcpIGh0bWwgKz0gJzwhLS0ga28gd2l0aDogJHBhcmVudCAtLT48ZGl2IGNsYXNzPVwib2JqUHJldmlld1wiIGRhdGEtYmluZD1cIicgKyBwcmV2aWV3QmFja2dyb3VuZCArICdcIj48L2Rpdj48IS0tIC9rbyAtLT4nO1xuICAgICAgICAgIHZhciBwcmV2aWV3QmluZGluZ3MgPSBlbGFib3JhdGVEZWNsYXJhdGlvbnModW5kZWZpbmVkLCBtb2RlbC5fcHJldmlld0JpbmRpbmdzLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgd2l0aEJpbmRpbmdQcm92aWRlci5iaW5kKHRoaXMsIHBhdGggKyAnLicpKTtcbiAgICAgICAgICAvLyBDb21tZW50ZWQgc2luY2Ugd2UgZG9udCBuZWVkIGEgcHJldmlld1xuICAgICAgICAgIC8vaHRtbCArPSAnPGRpdiBjbGFzcz1cIm9ialByZXZpZXdcIj48ZGl2IGNsYXNzPVwib2JqUHJldmlld0lubmVyXCIgZGF0YS1iaW5kPVwiJyArIHByZXZpZXdCaW5kaW5ncyArICdcIj48L2Rpdj48L2Rpdj4nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogUFJFVklFVyAqL1xuICAgIHZhciBwcmV2aWV3Qkc7XG4gICAgaWYgKGxldmVsID09PSAwKSB7XG4gICAgICBpZiAodHlwZW9mIG1vZGVsLl9wcmV2aWV3QmluZGluZ3MgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcHJldmlld0JHID0gZWxhYm9yYXRlRGVjbGFyYXRpb25zKHVuZGVmaW5lZCwgbW9kZWwuX3ByZXZpZXdCaW5kaW5ncywgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIHdpdGhCaW5kaW5nUHJvdmlkZXIuYmluZCh0aGlzLCBwYXRoLmxlbmd0aCA+IDAgPyBwYXRoICsgJy4nIDogJycpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaSwgbmV3UGF0aDtcblxuICAgIHZhciBiZWZvcmUgPSBodG1sLmxlbmd0aDtcblxuICAgIHZhciBuZXdUaGVtZU1vZGVsO1xuICAgIHZhciBuZXdHbG9iYWxTdHlsZVByb3A7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG5ld1BhdGggPSBwYXRoLmxlbmd0aCA+IDAgPyBwYXRoICsgXCIuXCIgKyBwcm9wc1tpXSA6IHByb3BzW2ldO1xuICAgICAgaWYgKHR5cGVvZiBtb2RlbFtwcm9wc1tpXV0gIT0gJ29iamVjdCcgfHwgbW9kZWxbcHJvcHNbaV1dID09PSBudWxsIHx8IHR5cGVvZiBtb2RlbFtwcm9wc1tpXV0uX3dpZGdldCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICBuZXdHbG9iYWxTdHlsZVByb3AgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChsZXZlbCA9PT0gMCAmJiBwcm9wc1tpXSA9PSAndGhlbWUnKVxuICAgICAgICAgIGh0bWwgKz0gX3Byb3BFZGl0b3Iod2l0aEJpbmRpbmdQcm92aWRlciwgd2lkZ2V0cywgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIG1vZGVsW3Byb3BzW2ldXSwgbmV3VGhlbWVNb2RlbCwgbmV3UGF0aCwgcHJvcHNbaV0sIGVkaXRUeXBlLCAwLCBiYXNlVGhyZXNob2xkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdHJhY2tVc2FnZSwgcm9vdFByZXZpZXdCaW5kaW5nKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbmV3R2xvYmFsU3R5bGVQcm9wID0gX2dldEdsb2JhbFN0eWxlUHJvcChnbG9iYWxTdHlsZXMsIG1vZGVsW3Byb3BzW2ldXSwgcHJvcHNbaV0sIG5ld1BhdGgpO1xuICAgICAgICAgIGh0bWwgKz0gX3Byb3BFZGl0b3Iod2l0aEJpbmRpbmdQcm92aWRlciwgd2lkZ2V0cywgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIG1vZGVsW3Byb3BzW2ldXSwgbmV3VGhlbWVNb2RlbCwgbmV3UGF0aCwgcHJvcHNbaV0sIGVkaXRUeXBlLCBsZXZlbCArIDEsIGJhc2VUaHJlc2hvbGQsIGdsb2JhbFN0eWxlcywgbmV3R2xvYmFsU3R5bGVQcm9wLCB0cmFja1VzYWdlLCByb290UHJldmlld0JpbmRpbmcsIHByZXZpZXdCRyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBuZXdQYXRoID0gcGF0aC5sZW5ndGggPiAwID8gcGF0aCArIFwiLlwiICsgcHJvcHNbaV0gOiBwcm9wc1tpXTtcbiAgICAgIGlmICghKHR5cGVvZiBtb2RlbFtwcm9wc1tpXV0gIT0gJ29iamVjdCcgfHwgbW9kZWxbcHJvcHNbaV1dID09PSBudWxsIHx8IHR5cGVvZiBtb2RlbFtwcm9wc1tpXV0uX3dpZGdldCAhPSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgbmV3R2xvYmFsU3R5bGVQcm9wID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAobGV2ZWwgPT09IDAgJiYgcHJvcHNbaV0gPT0gJ3RoZW1lJylcbiAgICAgICAgICBodG1sICs9IF9wcm9wRWRpdG9yKHdpdGhCaW5kaW5nUHJvdmlkZXIsIHdpZGdldHMsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBtb2RlbFtwcm9wc1tpXV0sIG5ld1RoZW1lTW9kZWwsIG5ld1BhdGgsIHByb3BzW2ldLCBlZGl0VHlwZSwgMCwgYmFzZVRocmVzaG9sZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRyYWNrVXNhZ2UsIHJvb3RQcmV2aWV3QmluZGluZyk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIG5ld0dsb2JhbFN0eWxlUHJvcCA9IF9nZXRHbG9iYWxTdHlsZVByb3AoZ2xvYmFsU3R5bGVzLCBtb2RlbFtwcm9wc1tpXV0sIHByb3BzW2ldLCBuZXdQYXRoKTtcbiAgICAgICAgICBodG1sICs9IF9wcm9wRWRpdG9yKHdpdGhCaW5kaW5nUHJvdmlkZXIsIHdpZGdldHMsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBtb2RlbFtwcm9wc1tpXV0sIG5ld1RoZW1lTW9kZWwsIG5ld1BhdGgsIHByb3BzW2ldLCBlZGl0VHlwZSwgbGV2ZWwgKyAxLCBiYXNlVGhyZXNob2xkLCBnbG9iYWxTdHlsZXMsIG5ld0dsb2JhbFN0eWxlUHJvcCwgdHJhY2tVc2FnZSwgcm9vdFByZXZpZXdCaW5kaW5nLCBwcmV2aWV3QkcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGFkZGVkID0gaHRtbC5sZW5ndGggLSBiZWZvcmU7XG4gICAgaWYgKGFkZGVkID09PSAwKSB7XG4gICAgICAvLyBObyBlZGl0YWJsZSBjb250ZW50OiBpZiB0aGlzIGlzIGluIGNvbnRleHQgXCJ0ZW1wbGF0ZVwiIHdlIGxlYXZlIGl0IGVtcHR5LCBvdGhlcndpc2Ugd2Ugc2hvdyBhbiBoZWxwLlxuICAgICAgaWYgKHR5cGVvZiBtb2RlbCA9PSAnb2JqZWN0JyAmJiBtb2RlbCAhPT0gbnVsbCAmJiBtb2RlbC5fY29udGV4dCA9PSAndGVtcGxhdGUnKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRPRE8gbW92ZSBtZSB0byBhIHRtcGw/XG4gICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJvYmpFbXB0eVwiIGRhdGEtYmluZD1cImh0bWw6ICRyb290LnQoXFwnU2VsZWN0ZWQgZWxlbWVudCBkb2VzIG5vdCBzZWVtIHRvIGhhdmUgZWRpdGFibGUgbGlua3MsIGJ1dHRvbnMgb3IgaW1hZ2VzIFxcJylcIj5TZWxlY3RlZCBlbGVtZW50IGRvZXMgbm90IHNlZW0gdG8gaGF2ZSBlZGl0YWJsZSBsaW5rcywgYnV0dG9ucyBvciBpbWFnZXM8L2Rpdj4nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcHJvcCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgaHRtbCArPSAnPCEtLSAva28gLS0+JztcbiAgICB9XG4gICAgaHRtbCArPSAnPC9kaXY+JztcblxuICB9IGVsc2Uge1xuICAgIHZhciBjaGVja2JveGVzID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsU3R5bGVzID09ICd1bmRlZmluZWQnKSBjaGVja2JveGVzID0gZmFsc2U7XG5cbiAgICBpZiAobW9kZWwgPT09IG51bGwgfHwgdHlwZW9mIG1vZGVsICE9ICdvYmplY3QnIHx8IHR5cGVvZiBtb2RlbC5fd2lkZ2V0ICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgYmluZGluZ3MgPSBbXTtcblxuICAgICAgaWYgKHR5cGVvZiBnbG9iYWxTdHlsZVByb3AgIT0gJ3VuZGVmaW5lZCcpIGJpbmRpbmdzLnB1c2goJ2NzczogeyBub3RudWxsOiAnICsgcHJvcCArICcoKSAhPT0gbnVsbCB9Jyk7XG4gICAgICB0aXRsZSA9IG1vZGVsICE9PSBudWxsICYmIHR5cGVvZiBtb2RlbC5faGVscCAhPT0gJ3VuZGVmaW5lZCcgPyAnIHRpdGxlPVwiJyArIHV0aWxzLmFkZFNsYXNoZXMobW9kZWwuX2hlbHApICsgJ1wiIGRhdGEtYmluZD1cImF0dHI6IHsgdGl0bGU6ICRyb290LnV0KFxcJ3RlbXBsYXRlXFwnLCBcXCcnICsgdXRpbHMuYWRkU2xhc2hlcyhtb2RlbC5faGVscCkgKyAnXFwnKSB9XCInIDogJyc7XG4gICAgICBpZiAodGl0bGUubGVuZ3RoID4gMCkgYmluZGluZ3MucHVzaCgndG9vbHRpcHM6IHt9Jyk7XG4gICAgICB2YXIgYmluZCA9IGJpbmRpbmdzLmxlbmd0aCA+IDAgPyAnZGF0YS1iaW5kPVwiJyArIHV0aWxzLmFkZFNsYXNoZXMoYmluZGluZ3Muam9pbigpKSArICdcIicgOiAnJztcbiAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJwcm9wRWRpdG9yICcgKyAoY2hlY2tib3hlcyA/ICdjaGVja2JveGVzJyA6ICcnKSArICdcIicgKyBiaW5kICsgJz4nO1xuXG4gICAgICB2YXIgbW9kZWxOYW1lMiA9IChtb2RlbCAhPT0gbnVsbCAmJiB0eXBlb2YgbW9kZWwuX25hbWUgIT0gJ3VuZGVmaW5lZCcgPyBtb2RlbC5fbmFtZSA6ICh0eXBlb2YgcHJvcCAhPT0gJ3VuZGVmaW5lZCcgPyAnWycgKyBwcm9wICsgJ10nIDogJycpKTtcbiAgICAgIG1vZGVsTmFtZTIgPSAnPHNwYW4gZGF0YS1iaW5kPVwidGV4dDogJHJvb3QudXQoXFwndGVtcGxhdGVcXCcsIFxcJycgKyB1dGlscy5hZGRTbGFzaGVzKG1vZGVsTmFtZTIpICsgJ1xcJylcIj4nICsgbW9kZWxOYW1lMiArICc8L3NwYW4+JztcbiAgICAgIGh0bWwgKz0gJzxzcGFuJyArIHRpdGxlICsgJyBjbGFzcz1cInByb3BMYWJlbFwiPicgKyBtb2RlbE5hbWUyICsgJzwvc3Bhbj4nO1xuICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInByb3BJbnB1dCAnICsgKHR5cGVvZiBnbG9iYWxTdHlsZXMgIT0gJ3VuZGVmaW5lZCcgPyAnbG9jYWwnIDogJycpICsgJ1wiIGRhdGEtYmluZD1cImNzczogeyBkZWZhdWx0OiAnICsgcHJvcCArICcoKSA9PT0gbnVsbCB9XCI+JztcbiAgICAgIGh0bWwgKz0gX3Byb3BJbnB1dChtb2RlbCwgcHJvcCwgcHJvcEFjY2Vzc29yLCBlZGl0VHlwZSwgd2lkZ2V0cyk7XG4gICAgICBodG1sICs9ICc8L2Rpdj4nO1xuICAgICAgaWYgKHR5cGVvZiBnbG9iYWxTdHlsZVByb3AgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInByb3BJbnB1dCBnbG9iYWxcIiBkYXRhLWJpbmQ9XCJjc3M6IHsgb3ZlcnJpZGRlbjogJyArIHByb3AgKyAnKCkgIT09IG51bGwgfVwiPic7XG4gICAgICAgIGh0bWwgKz0gX3Byb3BJbnB1dChtb2RlbCwgcHJvcCwgZ2xvYmFsU3R5bGVQcm9wLCBlZGl0VHlwZSwgd2lkZ2V0cyk7XG4gICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgaWYgKGNoZWNrYm94ZXMpIHtcbiAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwicHJvcENoZWNrXCI+PGxhYmVsIGRhdGEtYmluZD1cInRvb2x0aXBzOiB7fVwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBkYXRhLWJpbmQ9XCJmb2N1c2FibGU6IHRydWUsIGNsaWNrOiBmdW5jdGlvbihldnQsIG9iaikgeyAkcm9vdC5sb2NhbEdsb2JhbFN3aXRjaCgnICsgcHJvcCArICcsICcgKyBnbG9iYWxTdHlsZVByb3AgKyAnKTsgcmV0dXJuIHRydWU7IH0sIGNoZWNrZWQ6ICcgKyBwcm9wICsgJygpICE9PSBudWxsXCI+JztcbiAgICAgICAgICBodG1sICs9ICc8c3BhbiBjbGFzcz1cImNoZWNrYm94LXJlcGxhY2VyXCIgZGF0YS1iaW5kPVwiY3NzOiB7IGNoZWNrZWQ6ICcgKyBwcm9wICsgJygpICE9PSBudWxsIH0sIGF0dHI6IHsgdGl0bGU6ICRyb290LnQoXFwnVGhpcyBzdHlsZSBpcyBzcGVjaWZpYyBmb3IgdGhpcyBibG9jazogY2xpY2sgaGVyZSB0byByZW1vdmUgdGhlIGN1c3RvbSBzdHlsZSBhbmQgcmV2ZXJ0IHRvIHRoZSB0aGVtZSB2YWx1ZVxcJykgfVwiPjwvc3Bhbj4nO1xuICAgICAgICAgIGh0bWwgKz0gJzwvbGFiZWw+PC9kaXY+JztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaHRtbCArPSAnPC9kaXY+JztcbiAgICB9IGVsc2UgaWYgKG1vZGVsID09PSBudWxsIHx8IHR5cGVvZiBtb2RlbCAhPSAnb2JqZWN0Jykge1xuICAgICAgLy8gVE9ETyByZW1vdmUgZGVidWcgb3V0cHV0XG4gICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwicHJvcEVkaXRvciB1bmtub3duXCI+W0F8JyArIHByb3AgKyBcInxcIiArIHR5cGVvZiBtb2RlbCArICddPC9kaXY+JztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVE9ETyByZW1vdmUgZGVidWcgb3V0cHV0XG4gICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwicHJvcEVkaXRvciB1bmtub3duXCI+W0J8JyArIHByb3AgKyBcInxcIiArIHR5cGVvZiBtb2RlbCArICddPC9kaXY+JztcbiAgICB9XG5cblxuICB9XG5cbiAgaWYgKHR5cGVvZiBwcm9wICE9ICd1bmRlZmluZWQnICYmICEhdHJhY2tVc2FnZSkge1xuICAgIGh0bWwgKz0gJzwhLS0gL2tvIC0tPic7XG4gICAgaHRtbCArPSAnPCEtLSBrbyBpZlN1YnM6IHsgbm90OiB0cnVlLCBkYXRhOiAnICsgaWZTdWJzUHJvcCArICcsIHRocmVzaG9sZDogJyArIGlmU3Vic1RocmVzaG9sZCArICcsIGd1dHRlcjogMCB9IC0tPic7XG4gICAgaHRtbCArPSAnPHNwYW4gY2xhc3M9XCJsYWJlbCBub3R1c2VkXCI+KCcgKyBwcm9wICsgJyk8L3NwYW4+JztcbiAgICBodG1sICs9ICc8IS0tIC9rbyAtLT4nO1xuICB9XG5cbiAgcmV0dXJuIGh0bWw7XG59O1xuXG5cbnZhciBjcmVhdGVCbG9ja0VkaXRvciA9IGZ1bmN0aW9uKGRlZnMsIHdpZGdldHMsIHRoZW1lVXBkYXRlciwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIHJvb3RNb2RlbE5hbWUsIHRlbXBsYXRlTmFtZSwgZWRpdFR5cGUsIHRlbXBsYXRlQ3JlYXRvciwgYmFzZVRocmVzaG9sZCwgdHJhY2tHbG9iYWxTdHlsZXMsIHRyYWNrVXNhZ2UsIGZyb21MZXZlbCkge1xuICBpZiAodHlwZW9mIHRyYWNrVXNhZ2UgPT0gJ3VuZGVmaW5lZCcpIHRyYWNrVXNhZ2UgPSB0cnVlO1xuICB2YXIgbW9kZWwgPSBtb2RlbERlZi5nZXREZWYoZGVmcywgdGVtcGxhdGVOYW1lKTtcblxuICB2YXIgcm9vdE1vZGVsID0gbW9kZWxEZWYuZ2V0RGVmKGRlZnMsIHJvb3RNb2RlbE5hbWUpO1xuICB2YXIgcm9vdFByZXZpZXdCaW5kaW5ncztcbiAgaWYgKHR5cGVvZiByb290TW9kZWwuX3ByZXZpZXdCaW5kaW5ncyAhPSAndW5kZWZpbmVkJyAmJiB0ZW1wbGF0ZU5hbWUgIT0gJ3RoZW1lJyAmJiBlZGl0VHlwZSA9PSAnc3R5bGVyJykge1xuICAgIHJvb3RQcmV2aWV3QmluZGluZ3MgPSBlbGFib3JhdGVEZWNsYXJhdGlvbnModW5kZWZpbmVkLCByb290TW9kZWwuX3ByZXZpZXdCaW5kaW5ncywgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIG1vZGVsRGVmLmdldEJpbmRWYWx1ZS5iaW5kKHVuZGVmaW5lZCwgZGVmcywgdGhlbWVVcGRhdGVyLCByb290TW9kZWxOYW1lLCByb290TW9kZWxOYW1lLCAnJykpO1xuICB9XG5cbiAgdmFyIGdsb2JhbFN0eWxlcyA9IHR5cGVvZiB0cmFja0dsb2JhbFN0eWxlcyAhPSAndW5kZWZpbmVkJyAmJiB0cmFja0dsb2JhbFN0eWxlcyA/IGRlZnNbdGVtcGxhdGVOYW1lXS5fZ2xvYmFsU3R5bGVzIDogdW5kZWZpbmVkO1xuICB2YXIgZ2xvYmFsU3R5bGVQcm9wID0gdHlwZW9mIHRyYWNrR2xvYmFsU3R5bGVzICE9ICd1bmRlZmluZWQnICYmIHRyYWNrR2xvYmFsU3R5bGVzID8gZGVmc1t0ZW1wbGF0ZU5hbWVdLl9nbG9iYWxTdHlsZSA6IHVuZGVmaW5lZDtcblxuXG4gIHZhciB0aGVtZU1vZGVsO1xuICBpZiAodHlwZW9mIGdsb2JhbFN0eWxlUHJvcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbW0gPSBtb2RlbERlZi5nZXREZWYoZGVmcywgJ3RoZW1lJyk7XG4gICAgLy8gVE9ETyByZW1vdmUgZGVwcmVjYXRlZCAkdGhlbWVcbiAgICB0aGVtZU1vZGVsID0gbW1bZ2xvYmFsU3R5bGVQcm9wLnJlcGxhY2UoL14oXFwkdGhlbWV8X3RoZW1lXylcXC4vLCAnJyldO1xuICB9XG5cblxuICB2YXIgd2l0aEJpbmRpbmdQcm92aWRlciA9IG1vZGVsRGVmLmdldEJpbmRWYWx1ZS5iaW5kKHVuZGVmaW5lZCwgZGVmcywgdGhlbWVVcGRhdGVyLCByb290TW9kZWxOYW1lLCB0ZW1wbGF0ZU5hbWUpO1xuICB3aXRoQmluZGluZ1Byb3ZpZGVyLl90ZW1wbGF0ZU5hbWUgPSB0ZW1wbGF0ZU5hbWU7XG5cbiAgdmFyIGh0bWwgPSAnPGRpdiBjbGFzcz1cImVkaXRvclwiPic7XG4gIGh0bWwgKz0gXCI8ZGl2IGNsYXNzPVxcXCJibG9ja1R5cGVcIiArICh0eXBlb2YgZ2xvYmFsU3R5bGVzICE9ICd1bmRlZmluZWQnID8gXCIgd2l0aGRlZmF1bHRzXCIgOiBcIlwiKSArIFwiXFxcIj5cIiArIG1vZGVsLnR5cGUgKyBcIjwvZGl2PlwiO1xuXG4gIHZhciBlZGl0b3JDb250ZW50ID0gX3Byb3BFZGl0b3Iod2l0aEJpbmRpbmdQcm92aWRlciwgd2lkZ2V0cywgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIG1vZGVsLCB0aGVtZU1vZGVsLCBcIlwiLCB1bmRlZmluZWQsIGVkaXRUeXBlLCBmcm9tTGV2ZWwsIGJhc2VUaHJlc2hvbGQsIGdsb2JhbFN0eWxlcywgZ2xvYmFsU3R5bGVQcm9wLCB0cmFja1VzYWdlLCByb290UHJldmlld0JpbmRpbmdzKTtcbiAgaWYgKGVkaXRvckNvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgIGh0bWwgKz0gZWRpdG9yQ29udGVudDtcbiAgfVxuXG4gIGh0bWwgKz0gJzwvZGl2Pic7XG5cbiAgdGVtcGxhdGVDcmVhdG9yKGh0bWwsIHRlbXBsYXRlTmFtZSwgZWRpdFR5cGUpO1xufTtcblxudmFyIGNyZWF0ZUJsb2NrRWRpdG9ycyA9IGZ1bmN0aW9uKGRlZnMsIHdpZGdldHMsIHRoZW1lVXBkYXRlciwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIHJvb3RNb2RlbE5hbWUsIHRlbXBsYXRlTmFtZSwgdGVtcGxhdGVDcmVhdG9yLCBiYXNlVGhyZXNob2xkKSB7XG4gIGNyZWF0ZUJsb2NrRWRpdG9yKGRlZnMsIHdpZGdldHMsIHRoZW1lVXBkYXRlciwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIHJvb3RNb2RlbE5hbWUsIHRlbXBsYXRlTmFtZSwgJ2VkaXQnLCB0ZW1wbGF0ZUNyZWF0b3IsIGJhc2VUaHJlc2hvbGQpO1xuICBjcmVhdGVCbG9ja0VkaXRvcihkZWZzLCB3aWRnZXRzLCB0aGVtZVVwZGF0ZXIsIHRlbXBsYXRlVXJsQ29udmVydGVyLCByb290TW9kZWxOYW1lLCB0ZW1wbGF0ZU5hbWUsICdzdHlsZXInLCB0ZW1wbGF0ZUNyZWF0b3IsIGJhc2VUaHJlc2hvbGQsIHRydWUpO1xufTtcblxudmFyIGdlbmVyYXRlRWRpdG9ycyA9IGZ1bmN0aW9uKHRlbXBsYXRlRGVmLCB3aWRnZXRzLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgdGVtcGxhdGVDcmVhdG9yLCBiYXNlVGhyZXNob2xkKSB7XG4gIHZhciBkZWZzID0gdGVtcGxhdGVEZWYuX2RlZnM7XG4gIHZhciB0ZW1wbGF0ZU5hbWUgPSB0ZW1wbGF0ZURlZi50ZW1wbGF0ZU5hbWU7XG4gIHZhciBibG9ja3MgPSB0ZW1wbGF0ZURlZi5fYmxvY2tzO1xuICB2YXIgaWR4O1xuICB2YXIgYmxvY2tEZWZzID0gW107XG4gIGZvciAoaWR4ID0gMDsgaWR4IDwgYmxvY2tzLmxlbmd0aDsgaWR4KyspIHtcbiAgICBpZiAodHlwZW9mIGJsb2Nrc1tpZHhdLmNvbnRhaW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGJsb2NrRGVmcy5wdXNoKG1vZGVsRGVmLmdlbmVyYXRlTW9kZWwoZGVmcywgYmxvY2tzW2lkeF0uYmxvY2spKTtcbiAgICB9XG4gICAgY3JlYXRlQmxvY2tFZGl0b3JzKGRlZnMsIHdpZGdldHMsIHVuZGVmaW5lZCwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIGJsb2Nrc1tpZHhdLnJvb3QsIGJsb2Nrc1tpZHhdLmJsb2NrLCB0ZW1wbGF0ZUNyZWF0b3IsIGJhc2VUaHJlc2hvbGQpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBkZWZzWyd0aGVtZSddICE9ICd1bmRlZmluZWQnKSBjcmVhdGVCbG9ja0VkaXRvcihkZWZzLCB3aWRnZXRzLCB1bmRlZmluZWQsIHRlbXBsYXRlVXJsQ29udmVydGVyLCB0ZW1wbGF0ZU5hbWUsICd0aGVtZScsICdzdHlsZXInLCB0ZW1wbGF0ZUNyZWF0b3IsIHVuZGVmaW5lZCwgZmFsc2UsIGZhbHNlLCAtMSk7XG4gIHJldHVybiBibG9ja0RlZnM7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdlbmVyYXRlRWRpdG9ycztcbiIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFsIGdsb2JhbDogZmFsc2UgKi9cblxudmFyIG1vZGVsRGVmID0gcmVxdWlyZShcIi4vbW9kZWwuanNcIik7XG5cbnZhciB3cmFwcGVkUmVzdWx0TW9kZWwgPSBmdW5jdGlvbih0ZW1wbGF0ZURlZikge1xuICB2YXIgZGVmcyA9IHRlbXBsYXRlRGVmLl9kZWZzO1xuICB2YXIgdGVtcGxhdGVOYW1lID0gdGVtcGxhdGVEZWYudGVtcGxhdGVOYW1lO1xuICB2YXIgZmluYWxNb2RlbENvbnRlbnREZWYgPSBtb2RlbERlZi5nZXREZWYoZGVmcywgdGVtcGxhdGVOYW1lKTtcblxuICB2YXIgZmluYWxNb2RlbENvbnRlbnQgPSBtb2RlbERlZi5nZW5lcmF0ZVJlc3VsdE1vZGVsKHRlbXBsYXRlRGVmKTtcblxuICB2YXIgd3JhcHBlciA9IHJlcXVpcmUoXCIuL3dyYXBwZXIuanNcIik7XG4gIHZhciByZXMgPSB3cmFwcGVyKGZpbmFsTW9kZWxDb250ZW50LCBmaW5hbE1vZGVsQ29udGVudERlZiwgZGVmcyk7XG5cbiAgcmV0dXJuIHJlcztcbn07XG5cbi8vIHJlcXVpcmVzIG9ubHkgd2hlbiBpbXBvcnRlZFxudmFyIHRyYW5zbGF0ZVRlbXBsYXRlID0gZnVuY3Rpb24oKSB7XG4gIHZhciB0dCA9IHJlcXVpcmUoJy4vcGFyc2VyLmpzJyk7XG4gIHJldHVybiB0dC5hcHBseSh0dCwgYXJndW1lbnRzKTtcbn07XG5cbi8vIHJlcXVpcmVzIG9ubHkgd2hlbiBpbXBvcnRlZFxudmFyIGdlbmVyYXRlRWRpdG9ycyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZ2UgPSByZXF1aXJlKCcuL2VkaXRvci5qcycpO1xuICByZXR1cm4gZ2UuYXBwbHkoZ2UsIGFyZ3VtZW50cyk7XG59O1xuXG52YXIgY2hlY2tNb2RlbCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgY20gPSByZXF1aXJlKCcuL2NoZWNrbW9kZWwuanMnKTtcbiAgcmV0dXJuIGNtLmFwcGx5KGNtLCBhcmd1bWVudHMpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHRyYW5zbGF0ZVRlbXBsYXRlOiB0cmFuc2xhdGVUZW1wbGF0ZSxcbiAgd3JhcHBlZFJlc3VsdE1vZGVsOiB3cmFwcGVkUmVzdWx0TW9kZWwsXG4gIGdlbmVyYXRlUmVzdWx0TW9kZWw6IG1vZGVsRGVmLmdlbmVyYXRlUmVzdWx0TW9kZWwsXG4gIGdlbmVyYXRlRWRpdG9yczogZ2VuZXJhdGVFZGl0b3JzLFxuICBjaGVja01vZGVsOiBjaGVja01vZGVsXG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgb2JqRXh0ZW5kID0gcmVxdWlyZShcIi4vZG9tdXRpbHMuanNcIikub2JqRXh0ZW5kO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcblxudmFyIF92YWx1ZVNldCA9IGZ1bmN0aW9uKGRlZnMsIG1vZGVsLCBwcm9wLCB2YWx1ZSkge1xuICB2YXIgZG90UG9zID0gcHJvcC5pbmRleE9mKCcuJyk7XG4gIGlmIChkb3RQb3MgPT0gLTEpIHtcbiAgICBpZiAodHlwZW9mIG1vZGVsW3Byb3BdID09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlVuZGVmaW5lZCBwcm9wIFwiICsgcHJvcCArIFwiIHdoaWxlIHNldHRpbmcgdmFsdWUgXCIgKyB2YWx1ZSArIFwiIGluIG1vZGVsLl92YWx1ZVNldFwiKTtcbiAgICB9IGVsc2UgaWYgKG1vZGVsW3Byb3BdID09PSBudWxsKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZS5wdXNoID09ICd1bmRlZmluZWQnKSBjb25zb2xlLmxvZyhcIm51bGxwcm9wb2JqZWN0dmFsdWVcIiwgcHJvcCwgdmFsdWUpO1xuICAgICAgbW9kZWxbcHJvcF0gPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2RlbFtwcm9wXSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kZWxbcHJvcF0ucHVzaCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YXIgdmFsdWVzO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdmFyIHZhbHVlc1N0cmluZyA9IHZhbHVlLm1hdGNoKC9eXFxbKC4qKVxcXSQvKTtcbiAgICAgICAgaWYgKHZhbHVlc1N0cmluZyAhPT0gbnVsbCkge1xuICAgICAgICAgIHZhbHVlcyA9IHZhbHVlc1N0cmluZ1sxXS5zcGxpdCgnLCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IFwiVW5leHBlY3RlZCBkZWZhdWx0IHZhbHVlIGZvciBhcnJheSBwcm9wZXJ0eSBcIiArIHByb3AgKyBcIjogXCIgKyB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS5wdXNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YWx1ZXMgPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IFwiVW5leHBlY3RlZCBkZWZhdWx0IHZhbHVlIGZvciBhcnJheSBwcm9wZXJ0eSBcIiArIHByb3AgKyBcIjogXCIgKyB2YWx1ZSArIFwiIHR5cGVvZiBcIiArICh0eXBlb2YgdmFsdWUpO1xuICAgICAgfVxuICAgICAgdmFyIHJlcyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHZhbHVlc1tpXS5zdWJzdHIoMCwgMSkgPT0gJ0AnKSB7XG4gICAgICAgICAgLy8gVE9ETyByZW1vdmUgdGhpcyBsZWdhY3kgc3VwcG9ydCAoQCksIHNvIHdlIGNhbiByZW1vdmUgXCJkZWZzXCIgZnJvbSB0aGlzIGZ1bmN0aW9uLCB0b28uXG4gICAgICAgICAgcmVzLnB1c2goX2dlbmVyYXRlTW9kZWwoZGVmcywgdmFsdWVzW2ldLnN1YnN0cigxKSkpO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlc1tpXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmVzLnB1c2godmFsdWVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbW9kZWxbcHJvcF0gPSByZXM7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kZWxbcHJvcF0gPT0gJ3N0cmluZycgfHwgdHlwZW9mIG1vZGVsW3Byb3BdID09ICdib29sZWFuJykge1xuICAgICAgLy8gVE9ETyBkb2VzIHRoaXMgc3RpbGwgaGFwcGVuPyBEZWJ1Zy90ZXN0IG1lLlxuICAgICAgbW9kZWxbcHJvcF0gPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2RlbFtwcm9wXSA9PSAnb2JqZWN0JyAmJiBtb2RlbFtwcm9wXSAhPT0gbnVsbCAmJiB0eXBlb2YgbW9kZWxbcHJvcF0uX3dpZGdldCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCkgY29uc29sZS5sb2coXCJvYmplY3R2YWx1ZVwiLCBwcm9wLCBtb2RlbFtwcm9wXS5fd2lkZ2V0LCB2YWx1ZSk7XG4gICAgICAvLyBfZGF0YSBpcyBkZWZpbmVkIGZvciBwcmltaXRpdmUgdHlwZXNcbiAgICAgIG1vZGVsW3Byb3BdID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwic2V0dGluZ1wiLCB0eXBlb2YgbW9kZWxbcHJvcF0sIG1vZGVsW3Byb3BdLCBwcm9wLCB2YWx1ZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBwcm9wTmFtZSA9IHByb3Auc3Vic3RyKDAsIGRvdFBvcyk7XG4gICAgX3ZhbHVlU2V0KGRlZnMsIG1vZGVsW3Byb3BOYW1lXSwgcHJvcC5zdWJzdHIoZG90UG9zICsgMSksIHZhbHVlKTtcbiAgfVxufTtcblxudmFyIF9tb2RlbENyZWF0ZU9yVXBkYXRlQmxvY2tEZWYgPSBmdW5jdGlvbihkZWZzLCB0ZW1wbGF0ZU5hbWUsIHByb3BlcnRpZXMsIG5hbWVkUHJvcGVydGllcykge1xuICBpZiAodHlwZW9mIGRlZnNbdGVtcGxhdGVOYW1lXSAhPT0gJ3VuZGVmaW5lZCcgJiYgZGVmc1t0ZW1wbGF0ZU5hbWVdLl9pbml0aWFsaXplZCAmJiAhZGVmc1t0ZW1wbGF0ZU5hbWVdLl93cml0ZWFibGUpIHtcbiAgICBjb25zb2xlLmxvZyhcIl9tb2RlbENyZWF0ZU9yVXBkYXRlQmxvY2tEZWZcIiwgZGVmcywgdGVtcGxhdGVOYW1lLCBwcm9wZXJ0aWVzLCBuYW1lZFByb3BlcnRpZXMpO1xuICAgIHRocm93IFwiVHJ5aW5nIHRvIGFsdGVyIG5vbiB3cml0ZWFibGUgbW9kZWw6IFwiICsgdGVtcGxhdGVOYW1lICsgXCIgLyBcIiArIHByb3BlcnRpZXM7XG4gIH1cblxuICBpZiAodHlwZW9mIGRlZnNbdGVtcGxhdGVOYW1lXSA9PSAndW5kZWZpbmVkJykge1xuICAgIGRlZnNbdGVtcGxhdGVOYW1lXSA9IHtcbiAgICAgIF93cml0ZWFibGU6IHRydWVcbiAgICB9O1xuICAgIC8vIEZhbGxiYWNrIGNvbXB1dGF0aW9uIG9mIFwiY2F0ZWdvcnlcIiBkZXBlbmRpbmcgb24gdGhlIHByb3BlcnR5IG5hbWVcbiAgICAvLyBUT0RPIHJlbW92ZSBtZTogdGhpcyBzaG91bGQgYmUgYWx3YXlzIGRlZmluZWQgaW4gdGhlIHRlbXBsYXRlIGRlZmluaXRpb24sIG5vIG5lZWQgdG8gaGFyZGNvZGUgdGhpcyBzdHVmZi5cbiAgICBpZiAodHlwZW9mIG5hbWVkUHJvcGVydGllcyA9PSAndW5kZWZpbmVkJykgbmFtZWRQcm9wZXJ0aWVzID0ge307XG4gICAgaWYgKHR5cGVvZiBuYW1lZFByb3BlcnRpZXMuY2F0ZWdvcnkgPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRlZnNbdGVtcGxhdGVOYW1lXS5fY2F0ZWdvcnkgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0ZW1wbGF0ZU5hbWUubWF0Y2goLyhedHwuVCloZW1lJC8pIHx8IHRlbXBsYXRlTmFtZS5tYXRjaCgvKF5zfC5TKXR5bGUkLykgfHwgdGVtcGxhdGVOYW1lLm1hdGNoKC8oXmN8LkMpb2xvciQvKSB8fCB0ZW1wbGF0ZU5hbWUubWF0Y2goLyhecnwuUilhZGl1cyQvKSkge1xuICAgICAgICBuYW1lZFByb3BlcnRpZXMuY2F0ZWdvcnkgPSAnc3R5bGUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmFtZWRQcm9wZXJ0aWVzLmNhdGVnb3J5ID0gJ2NvbnRlbnQnO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG5cbiAgaWYgKHR5cGVvZiBuYW1lZFByb3BlcnRpZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gVE9ETyBjaGVjayBpZiB0aGlzIGlzIG5lZWRlZCBiZWZvcmUgdGhlIGVuZGluZyBuYW1lZFByb3BlcnR5IFwibG9vcFwiIG9yIG5vdC5cbiAgICBpZiAodHlwZW9mIG5hbWVkUHJvcGVydGllcy5uYW1lICE9ICd1bmRlZmluZWQnKSBkZWZzW3RlbXBsYXRlTmFtZV0uX25hbWUgPSBuYW1lZFByb3BlcnRpZXMubmFtZTtcblxuICAgIGlmICh0eXBlb2YgbmFtZWRQcm9wZXJ0aWVzLnRoZW1lT3ZlcnJpZGUgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRlZnNbdGVtcGxhdGVOYW1lXS5fdGhlbWVPdmVycmlkZSA9IG5hbWVkUHJvcGVydGllcy50aGVtZU92ZXJyaWRlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5hbWVkUHJvcGVydGllcy5nbG9iYWxTdHlsZSAhPSAndW5kZWZpbmVkJykge1xuICAgICAgZGVmc1t0ZW1wbGF0ZU5hbWVdLl9nbG9iYWxTdHlsZSA9IG5hbWVkUHJvcGVydGllcy5nbG9iYWxTdHlsZTtcbiAgICAgIC8vIFRPRE8gcmVtb3ZlIGRlcHJlY2F0ZWQgJHRoZW1lXG4gICAgICB2YXIgZ2xvYmFsU3R5bGVTdWIgPSBuYW1lZFByb3BlcnRpZXMuZ2xvYmFsU3R5bGUucmVwbGFjZSgvXihcXCR0aGVtZXxfdGhlbWVfKVxcLi8sICcnKTtcbiAgICAgIHZhciBwID0gZ2xvYmFsU3R5bGVTdWIuaW5kZXhPZignLicpO1xuICAgICAgdmFyIGdzID0gcCAhPSAtMSA/IGdsb2JhbFN0eWxlU3ViLnN1YnN0cigwLCBwKSA6IGdsb2JhbFN0eWxlU3ViO1xuICAgICAgX21vZGVsQ3JlYXRlT3JVcGRhdGVCbG9ja0RlZihkZWZzLCAndGhlbWUnLCBncyk7XG5cbiAgICAgIGlmICh0eXBlb2YgZGVmc1t0ZW1wbGF0ZU5hbWVdLl90aGVtZU92ZXJyaWRlID09PSAndW5kZWZpbmVkJyB8fCAhIWRlZnNbdGVtcGxhdGVOYW1lXS5fdGhlbWVPdmVycmlkZSkge1xuICAgICAgICBfbW9kZWxDcmVhdGVPclVwZGF0ZUJsb2NrRGVmKGRlZnMsIHRlbXBsYXRlTmFtZSwgXCJjdXN0b21TdHlsZT1mYWxzZVwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBuYW1lZFByb3BlcnRpZXMuY29udGV4dE5hbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkZWZzW3RlbXBsYXRlTmFtZV0uX2NvbnRleHQgPSBuYW1lZFByb3BlcnRpZXMuY29udGV4dE5hbWU7XG4gICAgICAvLyBUT0RPIGlzIGl0IGNvcnJlY3QgdG8gZmFsbGJhY2sgdG8gXCJib2R5VGhlbWVcIiBmb3IgYmxvY2tzIG5vdCBkZWNsYXJpbmcgYSBkZWZhdWx0IHRoZW1lP1xuICAgICAgLy8gTWF5YmUgaXQgd291bGQgYmUgYmV0dGVyIHRvIHNpbXBseSBkZWNsYXJlIGl0IGFzIG1hbmRhdG9yeSBidXQgbGVhdmUgdGhlIGRlZmF1bHQgY29uZmlndXRhdGlvblxuICAgICAgLy8gdG8gdGhlIHRlbXBsYXRlIGRlZmluaXRpb24uXG4gICAgICBpZiAobmFtZWRQcm9wZXJ0aWVzLmNvbnRleHROYW1lID09ICdibG9jaycgJiYgdHlwZW9mIGRlZnNbdGVtcGxhdGVOYW1lXS5fZ2xvYmFsU3R5bGUgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGVmc1t0ZW1wbGF0ZU5hbWVdLl9nbG9iYWxTdHlsZSA9ICdfdGhlbWVfLmJvZHlUaGVtZSc7XG4gICAgICAgIF9tb2RlbENyZWF0ZU9yVXBkYXRlQmxvY2tEZWYoZGVmcywgJ3RoZW1lJywgJ2JvZHlUaGVtZScpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgZGVmc1t0ZW1wbGF0ZU5hbWVdLl90aGVtZU92ZXJyaWRlID09ICd1bmRlZmluZWQnIHx8IGRlZnNbdGVtcGxhdGVOYW1lXS5fdGhlbWVPdmVycmlkZSkge1xuICAgICAgICAgIF9tb2RlbENyZWF0ZU9yVXBkYXRlQmxvY2tEZWYoZGVmcywgdGVtcGxhdGVOYW1lLCBcImN1c3RvbVN0eWxlPWZhbHNlXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbmFtZWRQcm9wZXJ0aWVzLmV4dGVuZCAhPSAndW5kZWZpbmVkJykgZGVmc1t0ZW1wbGF0ZU5hbWVdLnR5cGUgPSBuYW1lZFByb3BlcnRpZXMuZXh0ZW5kO1xuICB9XG5cbiAgZm9yICh2YXIgbnAgaW4gbmFtZWRQcm9wZXJ0aWVzKSBpZiAobmFtZWRQcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KG5wKSAmJiB0eXBlb2YgbmFtZWRQcm9wZXJ0aWVzW25wXSAhPT0gJ3VuZGVmaW5lZCcgJiYgWyduYW1lJywgJ2V4dGVuZCcsICdjb250ZXh0TmFtZScsICdnbG9iYWxTdHlsZScsJ3RoZW1lT3ZlcnJpZGUnXS5pbmRleE9mKG5wKSA9PSAtMSkge1xuICAgIGRlZnNbdGVtcGxhdGVOYW1lXVsnXycrbnBdID0gbmFtZWRQcm9wZXJ0aWVzW25wXTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcHJvcGVydGllcyAhPSAndW5kZWZpbmVkJyAmJiBwcm9wZXJ0aWVzLmxlbmd0aCA+IDApIHtcbiAgICBkZWZzW3RlbXBsYXRlTmFtZV0uX3Byb3BzID0gdHlwZW9mIGRlZnNbdGVtcGxhdGVOYW1lXS5fcHJvcHMgIT0gJ3VuZGVmaW5lZCcgJiYgZGVmc1t0ZW1wbGF0ZU5hbWVdLl9wcm9wcy5sZW5ndGggPiAwID8gZGVmc1t0ZW1wbGF0ZU5hbWVdLl9wcm9wcyArIFwiIFwiICsgcHJvcGVydGllcyA6IHByb3BlcnRpZXM7XG4gIH1cbn07XG5cbi8vIHJlbW92ZSB0aGUgZmlyc3QgXCJzZXF1ZW5jZVwiIGluIGEgY2FtZWxjYXNlZCB3b3JkIChlLmc6IG15Q2FtZWxDYXNlID0+IGNhbWVsQ2FzZSkuXG52YXIgX3JlbW92ZVByZWZpeCA9IGZ1bmN0aW9uKHN0cikge1xuICB2YXIgcmVzID0gc3RyLm1hdGNoKC9eW15BLVpdKyhbQS1aXSkoLiopJC8pO1xuICByZXR1cm4gcmVzICE9PSBudWxsID8gcmVzWzFdLnRvTG93ZXJDYXNlKCkgKyByZXNbMl0gOiBudWxsO1xufTtcblxuLy8gVE9ETyBkZWZzIGlzIG5lZWRlZCBvbmx5IGJlY2F1c2UgX3ZhbHVlU2V0IG5lZWRzIGl0Li4gd2Ugc2hvdWxkIHJlbW92ZSBpdCBkb3duc3RyZWFtLlxudmFyIF9nZW5lcmF0ZU1vZGVsRnJvbURlZiA9IGZ1bmN0aW9uKG1vZGVsRGVmLCBkZWZzKSB7XG4gIHZhciByZXMgPSB7fTtcblxuICBmb3IgKHZhciBwcm9wIGluIG1vZGVsRGVmKVxuICAgIGlmICghcHJvcC5tYXRjaCgvXl8uKi8pICYmIG1vZGVsRGVmLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICB2YXIgdmFsdWUgPSBtb2RlbERlZltwcm9wXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlLl9jb21wbGV4ICE9ICd1bmRlZmluZWQnICYmIHZhbHVlLl9jb21wbGV4KSB7XG4gICAgICAgIHJlc1twcm9wXSA9IF9nZW5lcmF0ZU1vZGVsRnJvbURlZih2YWx1ZSwgZGVmcyk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT0gJ3R5cGUnKSB7XG4gICAgICAgIHJlc1twcm9wXSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gbW9zdCB0aW1lcyB0aGlzIHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgX3ZhbHVlU2V0XG4gICAgICAgIHJlc1twcm9wXSA9IG51bGw7XG4gICAgICAgIC8vIGZvciBjdXN0b21TdHlsZSB0aGlzIGlzIHNldCB0byBudWxsLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlVuZXhwZWN0ZWQgbW9kZWwgZGVmXCIsIHByb3AsIHZhbHVlLCBtb2RlbERlZik7XG4gICAgICAgIHRocm93IFwiVW5leHBlY3RlZCBtb2RlbCBkZWYgW1wiICsgcHJvcCArIFwiXT1cIiArIHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICBpZiAodHlwZW9mIG1vZGVsRGVmLl9kZWZhdWx0VmFsdWVzICE9ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGRlZmF1bHRzID0gbW9kZWxEZWYuX2RlZmF1bHRWYWx1ZXM7XG4gICAgZm9yICh2YXIgcHJvcDIgaW4gZGVmYXVsdHMpXG4gICAgICBpZiAoZGVmYXVsdHMuaGFzT3duUHJvcGVydHkocHJvcDIpKSB7XG4gICAgICAgIF92YWx1ZVNldChkZWZzLCByZXMsIHByb3AyLCBkZWZhdWx0c1twcm9wMl0pO1xuICAgICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcztcbn07XG5cbnZhciBfZ2VuZXJhdGVNb2RlbCA9IGZ1bmN0aW9uKGRlZnMsIG5hbWUpIHtcbiAgdmFyIG1vZGVsRGVmID0gX2dldE1vZGVsRGVmKGRlZnMsIG5hbWUsIGZhbHNlLCB0cnVlKTtcbiAgcmV0dXJuIF9nZW5lcmF0ZU1vZGVsRnJvbURlZihtb2RlbERlZiwgZGVmcyk7XG59O1xuXG52YXIgX2dldERlZiA9IGZ1bmN0aW9uKGRlZnMsIG5hbWUpIHtcbiAgcmV0dXJuIF9nZXRNb2RlbERlZihkZWZzLCBuYW1lLCBmYWxzZSwgdHJ1ZSk7XG59O1xuXG52YXIgX2dldE1vZGVsRGVmID0gZnVuY3Rpb24oZGVmcywgbmFtZSwgcmV0dXJuQ2xvbmUsIHJlYWRvbmx5KSB7XG4gIC8vIGxvb2t1cCBcIm5hbWVcIiBpbiB0aGUgdGVtcGxhdGUgZGVmaW5pdGlvblxuICBpZiAodHlwZW9mIGRlZnNbbmFtZV0gPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBpZiB0aGUgbmFtZSBoYXMgYSBzcGFjZSB0aGVuIHJldHVybnMuXG4gICAgaWYgKG5hbWUuaW5kZXhPZignICcpICE9IC0xKSByZXR1cm4gbnVsbDtcbiAgICAvLyBvdGhlcndpc2UgdHJ5IGxvb2tpbmcgdXAgdXNpbmcgYSBkZXByZWZpeGVkIG5hbWUuXG4gICAgdmFyIHJlcyA9IF9yZW1vdmVQcmVmaXgobmFtZSk7XG4gICAgaWYgKHJlcyAhPT0gbnVsbCkge1xuICAgICAgLy8gVE9ETyB0aGUgZGVwcmVmaXhpbmcgaXMgcG93ZXJmdWwsIGJ1dCBtYXliZSBub3QgcmVhbGx5IG5lZWRlZC5cbiAgICAgIHJldHVybiBfZ2V0TW9kZWxEZWYoZGVmcywgcmVzLCByZXR1cm5DbG9uZSwgcmVhZG9ubHkpO1xuICAgIH1cbiAgICAvLyBub3QgYSBwcmVmaXhlZCBuYW1lXG4gICAgLy8gVE9ETyBzaG91bGQgd2UgcmFpc2UgYW4gZXJyb3I/XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSB7XG4gICAgLy8gd2hlbiB0aGUgbmFtZSBpcyBhbHJlYWR5IGRlZmluZWQuLi5cbiAgICB2YXIgZGVmT2JqID0gZGVmc1tuYW1lXTtcbiAgICBpZiAodHlwZW9mIGRlZk9iaiAhPSAnb2JqZWN0JykgdGhyb3cgXCJCbG9jayBkZWZpbml0aW9uIG11c3QgYmUgYW4gb2JqZWN0OiBmb3VuZCBcIiArIGRlZk9iaiArIFwiIGZvciBcIiArIG5hbWU7XG5cbiAgICBpZiAodHlwZW9mIGRlZk9iai5faW5pdGlhbGl6ZWQgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFBvcHVsYXRlIFwidHlwZVwiIGRlcGVuZGluZyBvbiBuYW1lXG4gICAgICBpZiAodHlwZW9mIGRlZk9iai50eXBlID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChuYW1lLmluZGV4T2YoJyAnKSA9PSAtMSkge1xuICAgICAgICAgIGRlZk9iai50eXBlID0gbmFtZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWZPYmoudHlwZSA9IG5hbWUuc3Vic3RyKG5hbWUuaW5kZXhPZignICcpICsgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgaXQgaXMgbm90IGEgXCJkYXRhXCIgdHlwZSB0aGVuIGxldCdzIGRlYWwgd2l0aCBpbmhlcml0YW5jZVxuICAgICAgaWYgKGRlZk9iai50eXBlICE9IG5hbWUgJiYgdHlwZW9mIGRlZk9iai5fd2lkZ2V0ID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciB0eXBlRGVmID0gX2dldE1vZGVsRGVmKGRlZnMsIGRlZk9iai50eXBlLCB0cnVlKTtcbiAgICAgICAgdmFyIGV4dGVuZGVkID0gb2JqRXh0ZW5kKHR5cGVEZWYsIGRlZk9iaik7XG4gICAgICAgIGRlZk9iaiA9IGV4dGVuZGVkO1xuICAgICAgICBkZWZzW25hbWVdID0gZGVmT2JqO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmT2JqLl93aWRnZXQgPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRlZk9iai5fcHJvcHMgPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRlZk9iai5fY29tcGxleCA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBUT0RPIGhlcmUgSSB0cmllZCB0byBkZWFsIHdpdGggaW5oZXJpdGFuY2UgZm9yIGV2ZXJ5IG9iamVjdCB3aXRob3V0IGEgXCJ0eXBlXCIgYnkgdXNpbmcgYSBzaW1wbGUgZGVwcmVmaXguXG4gICAgICAgIC8vIGJ1dCB0aGlzIGJyZWFrIG9uIHRoZW1lIGNvbnRhaW5pbmcgXCJwYWdlVGhlbWVcIiB0aGF0IHdvdWxkIGluaGVyaXQgZnJvbSBpcyBwYXJlbnQuIChjcmVhdGluZyBhIGxvb3ApXG4gICAgICAgIC8qXG4gICAgICAgIHZhciBzdXBlclR5cGUgPSBfcmVtb3ZlUHJlZml4KGRlZk9iai50eXBlKTtcbiAgICAgICAgaWYgKHN1cGVyVHlwZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXh0ZW5kaW5nXCIsIHR5cGVEZWYsIG5hbWUsIHN1cGVyVHlwZSwgZGVmT2JqLnR5cGUpO1xuICAgICAgICAgIHZhciB0eXBlRGVmID0gX2dldE1vZGVsRGVmKGRlZnMsIHN1cGVyVHlwZSwgdHJ1ZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdmFyIGV4dGVuZGVkID0galF1ZXJ5LmV4dGVuZCh0cnVlLCB0eXBlRGVmLCBkZWZPYmopO1xuICAgICAgICAgIGRlZk9iaiA9IGV4dGVuZGVkO1xuICAgICAgICAgIGRlZnNbbmFtZV0gPSBkZWZPYmo7XG4gICAgICAgIH1cbiAgICAgICAgKi9cbiAgICAgIH1cbiAgICAgIGRlZk9iai5fd3JpdGVhYmxlID0gdHJ1ZTtcbiAgICAgIGRlZk9iai5faW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGVmT2JqLl9wcm9wcyAhPSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIGRlZiA9IGRlZk9iai5fcHJvcHM7XG4gICAgICBkZWYgPSBkZWYuc3BsaXQoXCIgXCIpO1xuXG4gICAgICBpZiAoZGVmLmxlbmd0aCA+IDAgJiYgdHlwZW9mIGRlZk9iai5fd3JpdGVhYmxlID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBbHRlcmluZyBhIG5vbiB3cml0YWJsZSBvYmplY3QgXCIsIG5hbWUsIGRlZiwgZGVmT2JqKTtcbiAgICAgICAgdGhyb3cgXCJBbHRlcmluZyBhIG5vbiB3cml0YWJsZSBvYmplY3Q6IFwiICsgbmFtZSArIFwiIGRlZjogXCIgKyBkZWY7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgZGVmT2JqLl9wcm9jZXNzZWREZWZzID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRlZk9iai5fcHJvY2Vzc2VkRGVmcyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGRlZk9iai5fZ2xvYmFsU3R5bGVzID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRlZk9iai5fZ2xvYmFsU3R5bGVzID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgZGVmT2JqLl9kZWZhdWx0VmFsdWVzID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRlZk9iai5fZGVmYXVsdFZhbHVlcyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlZi5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcHJvcCA9IGRlZltpXTtcbiAgICAgICAgaWYgKHByb3AubGVuZ3RoID09PSAwKSBjb250aW51ZTtcbiAgICAgICAgdmFyIG9yaWdQcm9wID0gcHJvcDtcbiAgICAgICAgdmFyIGRlZlZhbHVlID0gbnVsbDtcbiAgICAgICAgLy8gcGFyc2VzICBcInByb3BcIiBcInByb3A9dmFsdWVcIiBhbmQgXCJwcm9wW11cIiBkZWNsYXJhdGlvbnNcbiAgICAgICAgdmFyIHByb3BEZWYgPSBwcm9wLm1hdGNoKC9eKFtePVxcW1xcXV0rKShcXFtcXF0pPyg9PykoLiopJC8pO1xuICAgICAgICBpZiAocHJvcERlZiAhPT0gbnVsbCkge1xuICAgICAgICAgIHByb3AgPSBwcm9wRGVmWzFdO1xuICAgICAgICAgIC8vIFRPRE8gYXJyYXkgZGVmaW5pdGlvbiBzaG91bGQgYmUgZG9uZSBkaWZmZXJlbnRseVxuICAgICAgICAgIGlmIChwcm9wRGVmWzJdID09ICdbXScpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gdHlwZSBzaG91bGQgbm90IGJlIGRlZmluZWQgaW4gdGhpcyBmdW5jdGlvblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkZWZPYmpbcHJvcF0gPT0gJ3VuZGVmaW5lZCcpIGRlZk9ialtwcm9wXSA9IFtdO1xuICAgICAgICAgICAgZGVmVmFsdWUgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHByb3BEZWZbM10gPT0gJz0nKSB7XG4gICAgICAgICAgICAvLyBUT0RPIHJlbW92ZSBoYXJkY29kZWQgXCJ2aXNpYmxlXCIgbWF0Y2hpbmcgKHRoaXMgc2hvdWxkIGJlIGRlZmluZWQgaW4gdGhlIHRlbXBsYXRlIGRlZmluaXRpb24pXG4gICAgICAgICAgICBpZiAocHJvcC5tYXRjaCgvKF52fFYpaXNpYmxlJC8pKSBkZWZWYWx1ZSA9IFN0cmluZyhwcm9wRGVmWzRdKS50b0xvd2VyQ2FzZSgpID09ICd0cnVlJztcbiAgICAgICAgICAgIGVsc2UgaWYgKHByb3AubWF0Y2goL15jdXN0b21TdHlsZSQvKSkge1xuICAgICAgICAgICAgICBkZWZWYWx1ZSA9IFN0cmluZyhwcm9wRGVmWzRdKS50b0xvd2VyQ2FzZSgpID09ICd0cnVlJztcbiAgICAgICAgICAgIH0gZWxzZSBkZWZWYWx1ZSA9IHByb3BEZWZbNF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGRlZmF1bHQgdmFsdWVzIGZvdW5kIGluIFwicHJvcGVydGllc1wiIGFyZSBub3QgYmVpbmcgcHJvY2Vzc2VkIGJ5IFwibW9kZWxFbnN1cmVWYWx1ZVwiIGFuZCBieSBjb25zZXF1ZW5jZSBkbyBub3QgY2FsbCBcInRoZW1lVXBkYXRlclwiLlxuICAgICAgICAvLyBUT0RPIGRvY3VtZW50IHdoeSB0aGlzIGlzIG5lZWRlZCwgb3IgcmVtb3ZlLlxuICAgICAgICBpZiAoZGVmVmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGRlZk9iai5fZGVmYXVsdFZhbHVlc1twcm9wXSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gaWYgKHByb3AubWF0Y2goL15fLykpIGNvbnNvbGUubG9nKFwiZGVmVmFsdWUgZm9yXCIsIHByb3AsIFwiaW5cIiwgbmFtZSk7XG4gICAgICAgICAgICBkZWZPYmouX2RlZmF1bHRWYWx1ZXNbcHJvcF0gPSBkZWZWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGRlZk9ialtwcm9wXSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHZhciB2YWwgPSBfZ2V0TW9kZWxEZWYoZGVmcywgbmFtZSArICcgJyArIHByb3AsIHRydWUpO1xuICAgICAgICAgIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhbCA9IF9nZXRNb2RlbERlZihkZWZzLCBwcm9wLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmT2JqW3Byb3BdID0gdmFsO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVmT2JqLl9wcm9jZXNzZWREZWZzW3Byb3BdID0gb3JpZ1Byb3A7XG4gICAgICAgIGRlZk9iai5fY29tcGxleCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBkZWZPYmouX3Byb3BzO1xuICAgIH1cblxuICAgIGlmIChyZXR1cm5DbG9uZSkge1xuICAgICAgZGVmT2JqLl93cml0ZWFibGUgPSBmYWxzZTtcbiAgICAgIHZhciBjbG9uZWQgPSBvYmpFeHRlbmQoe30sIGRlZk9iaik7XG4gICAgICByZXR1cm4gY2xvbmVkO1xuICAgIH0gZWxzZSBpZiAocmVhZG9ubHkpIHtcbiAgICAgIGRlZk9iai5fd3JpdGVhYmxlID0gZmFsc2U7XG4gICAgICByZXR1cm4gZGVmT2JqO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIGRlZk9iai5fd3JpdGVhYmxlID09ICd1bmRlZmluZWQnIHx8IGRlZk9iai5fd3JpdGVhYmxlID09PSBmYWxzZSkgdGhyb3cgXCJSZXRyaWV2aW5nIG5vbiB3cml0ZWFibGUgb2JqZWN0IGRlZmluaXRpb246IFwiICsgbmFtZTtcbiAgICAgIHJldHVybiBkZWZPYmo7XG4gICAgfVxuICB9XG59O1xuXG52YXIgX2luY3JlYXNlVXNlQ291bnQgPSBmdW5jdGlvbihyZWFkb25seSwgbW9kZWwpIHtcbiAgaWYgKCFyZWFkb25seSkge1xuICAgIGlmICh0eXBlb2YgbW9kZWwuX3VzZWNvdW50ID09ICd1bmRlZmluZWQnKSBtb2RlbC5fdXNlY291bnQgPSAwO1xuICAgIG1vZGVsLl91c2Vjb3VudCsrO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBtb2RlbC5fdXNlY291bnQgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRVJST1IgdHJ5aW5nIHRvIGJpbmQgYW4gdW51c2VkIHByb3BlcnR5IHdoaWxlIHJlYWRvbmx5XCIsIG1vZGVsKTtcbiAgICB0aHJvdyBcIkVSUk9SIHRyeWluZyB0byBiaW5kIGFuIHVudXNlZCBwcm9wZXJ0eVwiO1xuICB9XG59O1xuXG52YXIgZW5zdXJlR2xvYmFsU3R5bGUgPSBmdW5jdGlvbihkZWZzLCByZWFkb25seSwgZ3NCaW5kaW5nUHJvdmlkZXIsIG1vZGVsTmFtZSwgcGF0aCwgZ3NGdWxsUGF0aCwgZGVmYXVsdFZhbHVlLCBvdmVycmlkZURlZmF1bHQpIHtcblxuICB2YXIgZ2xvYmFsU3R5bGVCaW5kaW5nQmluZFZhbHVlID0gZ3NCaW5kaW5nUHJvdmlkZXIoZ3NGdWxsUGF0aCwgZGVmYXVsdFZhbHVlLCBvdmVycmlkZURlZmF1bHQpO1xuXG4gIGlmICh0eXBlb2YgZGVmc1ttb2RlbE5hbWVdLl9nbG9iYWxTdHlsZXNbcGF0aF0gPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAocmVhZG9ubHkpIHRocm93IFwiQ2Fubm90IGZpbmQgX2dsb2JhbFN0eWxlIGZvciBcIiArIHBhdGggKyBcIiBpbiBcIiArIG1vZGVsTmFtZSArIFwiIVwiO1xuICAgIGlmIChwYXRoLmluZGV4T2YoJy4nKSAhPSAtMSB8fCAodHlwZW9mIGRlZnNbbW9kZWxOYW1lXVtwYXRoXSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgZGVmc1ttb2RlbE5hbWVdW3BhdGhdLl93aWRnZXQgIT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgZGVmc1ttb2RlbE5hbWVdLl9nbG9iYWxTdHlsZXNbcGF0aF0gPSBnbG9iYWxTdHlsZUJpbmRpbmdCaW5kVmFsdWU7XG4gICAgfVxuICB9IGVsc2UgaWYgKGRlZnNbbW9kZWxOYW1lXS5fZ2xvYmFsU3R5bGVzW3BhdGhdICE9IGdsb2JhbFN0eWxlQmluZGluZ0JpbmRWYWx1ZSkgdGhyb3cgXCJVbmV4cGVjdGVkIGNvbmZsaWN0aW5nIGdsb2JhbFN0eWxlIFsyXSBmb3IgXCIgKyBtb2RlbE5hbWUgKyBcIi9cIiArIHBhdGggKyBcIjogb2xkPVwiICsgZGVmc1ttb2RlbE5hbWVdLl9nbG9iYWxTdHlsZXNbcGF0aF0gKyBcIiBuZXc9XCIgKyBnbG9iYWxTdHlsZUJpbmRpbmdCaW5kVmFsdWU7XG59O1xuXG4vLyB0aGVtZVVwZGF0ZXIsIGRlZmF1bHRWYWx1ZSwgb3ZlcnJpZGVEZWZhdWx0LCBzZXRjYXRlZ29yeSBhcmUgb25seSB1c2VkIGluICFyZWFkb25seSBtb2RlXG52YXIgbW9kZWxFbnN1cmVQYXRoQW5kR2V0QmluZFZhbHVlID0gZnVuY3Rpb24ocmVhZG9ubHksIGRlZnMsIHRoZW1lVXBkYXRlciwgcm9vdE1vZGVsTmFtZSwgdGVtcGxhdGVOYW1lLCB3aXRoaW4sIGZ1bGxQYXRoLCBkZWZhdWx0VmFsdWUsIG92ZXJyaWRlRGVmYXVsdCwgc2V0Y2F0ZWdvcnkpIHtcbiAgdmFyIG1vZGVsTmFtZTtcbiAgdmFyIHJlcztcbiAgdmFyIHBhdGg7XG4gIC8vIFRPRE8gcmVtb3ZlICckJyBhbmQgJyMnIGhhbmRpbmdcbiAgaWYgKGZ1bGxQYXRoLnN1YnN0cigwLCAxKSA9PSAnJCcpIHtcbiAgICBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEICQgaW4gYmluZGluZ1Byb3ZpZGVyOiBcIiwgZnVsbFBhdGgsIHRlbXBsYXRlTmFtZSk7XG4gICAgdmFyIHAgPSBmdWxsUGF0aC5pbmRleE9mKCcuJyk7XG4gICAgaWYgKHAgPT0gLTEpIHtcbiAgICAgIHRocm93IFwiVW5leHBlY3RlZCBmdWxsUGF0aDogXCIgKyBmdWxsUGF0aCArIFwiL1wiICsgd2l0aGluICsgXCIvXCIgKyB0ZW1wbGF0ZU5hbWUgKyBcIi9cIiArIGRlZmF1bHRWYWx1ZSArIFwiL1wiICsgb3ZlcnJpZGVEZWZhdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBtb2RlbE5hbWUgPSBmdWxsUGF0aC5zdWJzdHIoMSwgcCAtIDEpO1xuICAgICAgcGF0aCA9IGZ1bGxQYXRoLnN1YnN0cihwICsgMSk7XG4gICAgICAvLyBUT0RPIHJlZmFjdG9yIG1lIHBsZWFzZVxuICAgICAgaWYgKG1vZGVsTmFtZSA9PSAndGhlbWUnKSB7XG4gICAgICAgIHZhciBwMiA9IHBhdGguaW5kZXhPZignLicpO1xuICAgICAgICBtb2RlbE5hbWUgPSBwYXRoLnN1YnN0cigwLCBwMik7XG4gICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cihwMiArIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgXCJVbmV4cGVjdGVkICQgc2VxdWVuY2U6IFwiICsgbW9kZWxOYW1lICsgXCIgaW4gXCIgKyBmdWxsUGF0aDtcbiAgICAgIH1cbiAgICAgIHJlcyA9IFwiJHJvb3QuY29udGVudCgpLnRoZW1lKCkuXCIgKyBtb2RlbE5hbWUgKyBcIigpLlwiICsgcGF0aC5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFwuJywgJ2cnKSwgJygpLicpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChmdWxsUGF0aC5zdWJzdHIoMCwgMSkgPT0gJyMnKSB7XG4gICAgY29uc29sZS53YXJuKFwiREVQUkVDQVRFRCAjIGluIGJpbmRpbmdQcm92aWRlcjogXCIsIGZ1bGxQYXRoLCB0ZW1wbGF0ZU5hbWUpO1xuICAgIG1vZGVsTmFtZSA9IHJvb3RNb2RlbE5hbWU7XG4gICAgcGF0aCA9IGZ1bGxQYXRoLnN1YnN0cigxKTtcbiAgICByZXMgPSBcIiRyb290LmNvbnRlbnQoKS5cIiArIHBhdGgucmVwbGFjZShuZXcgUmVnRXhwKCdcXFxcLicsICdnJyksICcoKS4nKTtcbiAgfSBlbHNlIGlmIChmdWxsUGF0aC5zdWJzdHIoMCwgOCkgPT0gJ190aGVtZV8uJykge1xuICAgIHZhciBwMyA9IGZ1bGxQYXRoLmluZGV4T2YoJy4nLCA4KTtcbiAgICBtb2RlbE5hbWUgPSBmdWxsUGF0aC5zdWJzdHIoOCwgcDMgLSA4KTtcbiAgICBwYXRoID0gZnVsbFBhdGguc3Vic3RyKHAzICsgMSk7XG4gICAgcmVzID0gXCIkcm9vdC5jb250ZW50KCkudGhlbWUoKS5cIiArIG1vZGVsTmFtZSArIFwiKCkuXCIgKyBwYXRoLnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxcXC4nLCAnZycpLCAnKCkuJyk7XG4gIH0gZWxzZSBpZiAoZnVsbFBhdGguc3Vic3RyKDAsIDcpID09ICdfcm9vdF8uJykge1xuICAgIG1vZGVsTmFtZSA9IHJvb3RNb2RlbE5hbWU7XG4gICAgcGF0aCA9IGZ1bGxQYXRoLnN1YnN0cig3KTtcbiAgICByZXMgPSBcIiRyb290LmNvbnRlbnQoKS5cIiArIHBhdGgucmVwbGFjZShuZXcgUmVnRXhwKCdcXFxcLicsICdnJyksICcoKS4nKTtcbiAgfSBlbHNlIHtcbiAgICBtb2RlbE5hbWUgPSB0ZW1wbGF0ZU5hbWU7XG4gICAgcGF0aCA9IHdpdGhpbiArIGZ1bGxQYXRoO1xuICAgIHJlcyA9IGZ1bGxQYXRoLnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxcXC4nLCAnZycpLCAnKCkuJyk7XG4gIH1cblxuICBpZiAodHlwZW9mIGRlZnNbbW9kZWxOYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHRocm93IFwiQ2Fubm90IGZpbmQgbW9kZWwgZGVmIGZvciBbXCIgKyBtb2RlbE5hbWUgKyBcIl1cIjtcblxuICB2YXIgcHJvcFBvcyA9IHBhdGguaW5kZXhPZignLicpO1xuICB2YXIgcHJvcE5hbWUgPSBwcm9wUG9zID09IC0xID8gcGF0aCA6IHBhdGguc3Vic3RyKDAsIHByb3BQb3MpO1xuXG4gIGlmIChtb2RlbE5hbWUuaW5kZXhPZignLScpICE9IC0xKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVSUk9SIGNhbm5vdCB1c2UgLSBmb3IgYmxvY2sgbmFtZXNcIiwgbW9kZWxOYW1lKTtcbiAgICB0aHJvdyBcIkVSUk9SIHVuZXhwZWN0ZWQgY2hhciBpbiBibG9jayBuYW1lOiBcIiArIG1vZGVsTmFtZTtcbiAgfVxuICBpZiAocHJvcE5hbWUuaW5kZXhPZignLScpICE9IC0xKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVSUk9SIGNhbm5vdCB1c2UgLSBmb3IgcHJvcGVydHkgbmFtZXNcIiwgcHJvcE5hbWUpO1xuICAgIHRocm93IFwiRVJST1IgdW5leHBlY3RlZCBjaGFyIGluIHByb3BlcnR5IG5hbWU6IFwiICsgbW9kZWxOYW1lO1xuICB9XG5cbiAgLy8gRmFzdHBhdGhcbiAgaWYgKHJlYWRvbmx5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZzW21vZGVsTmFtZV0uX2dsb2JhbFN0eWxlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZGVmc1ttb2RlbE5hbWVdW3Byb3BOYW1lXSAhPT0gJ3VuZGVmaW5lZCcgJiYgZGVmc1ttb2RlbE5hbWVdW3Byb3BOYW1lXS5fY2F0ZWdvcnkgPT0gJ3N0eWxlJykge1xuICAgICAgcmVzICs9ICcuX2RlZmF1bHRDb21wdXRlZCc7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICAvLyBnZXRzIHRoZSB3cml0YWJsZSBtb2RlbCB3aGVuIFwiIXJlYWRvbmx5XCIgb3IgdGhlIHJlYWRvbmx5IG1vZGVsIG90aGVyd2lzZVxuICB2YXIgbW9kZWw7XG4gIGlmIChyZWFkb25seSkge1xuICAgIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlICE9PSAndW5kZWZpbmVkJykgdGhyb3cgXCJDYW5ub3QgdXNlIGRlZmF1bHRWYWx1ZSBpbiByZWFkb25seSBtb2RlIVwiO1xuICAgIGlmIChvdmVycmlkZURlZmF1bHQpIHRocm93IFwiQ2Fubm90IHVzZSBvdmVycmlkZURlZmF1bHQgaW4gcmVhZG9ubHkgbW9kZSBmb3IgXCIgKyBtb2RlbE5hbWUgKyBcIi9cIiArIHBhdGggKyBcIi9cIiArIG92ZXJyaWRlRGVmYXVsdCArIFwiIVwiO1xuICAgIGlmICh0eXBlb2Ygc2V0Y2F0ZWdvcnkgIT09ICd1bmRlZmluZWQnKSB0aHJvdyBcIkNhbm5vdCBzZXQgY2F0ZWdvcnkgZm9yIFwiICsgbW9kZWxOYW1lICsgXCIvXCIgKyBwYXRoICsgXCIvXCIgKyBzZXRjYXRlZ29yeSArIFwiIGluIHJlYWRvbmx5IG1vZGUhXCI7XG4gICAgbW9kZWwgPSBfZ2V0TW9kZWxEZWYoZGVmcywgbW9kZWxOYW1lLCBmYWxzZSwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGRlZnNbbW9kZWxOYW1lXS5fd3JpdGVhYmxlID09PSBmYWxzZSkgY29uc29sZS5sb2coXCJUT0RPIGRlYnVnIHVzZSBjYXNlcyBmb3IgdGhpcyBjb25kaXRpb25cIiwgbW9kZWxOYW1lLCBwYXRoKTtcbiAgICBtb2RlbCA9IF9nZXRNb2RlbERlZihkZWZzLCBtb2RlbE5hbWUsIGRlZnNbbW9kZWxOYW1lXS5fd3JpdGVhYmxlID09PSBmYWxzZSk7XG4gIH1cblxuICBpZiAobW9kZWwgPT09IG51bGwpIHRocm93IFwiVW5leHBlY3RlZCBtb2RlbCBmb3IgW1wiICsgbW9kZWxOYW1lICsgXCJdXCI7XG5cbiAgLy8gaWYgdGhlIHByb3BlcnR5IGRvZXMgbm90IGV4aXN0cyB3ZSBoYXZlIHRvIGNyZWF0ZSBpdC5cbiAgaWYgKHR5cGVvZiBtb2RlbFtwcm9wTmFtZV0gPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyB3aGVuIGluIHJlYWRvbmx5IG1vZGUgdGhpcyBjYW5ub3QgYmUgZG9uZSFcbiAgICBpZiAocmVhZG9ubHkpIHRocm93IFwiQ2Fubm90IGZpbmQgcGF0aCBcIiArIHByb3BOYW1lICsgXCIgZm9yIFwiICsgbW9kZWxOYW1lICsgXCIhXCI7XG4gICAgX21vZGVsQ3JlYXRlT3JVcGRhdGVCbG9ja0RlZihkZWZzLCBtb2RlbE5hbWUsIHByb3BOYW1lKTtcbiAgICBtb2RlbCA9IF9nZXRNb2RlbERlZihkZWZzLCBtb2RlbE5hbWUsIGZhbHNlKTtcbiAgfVxuXG4gIC8vIE5lZWRzIHRvIGRvIHRoaXMgYWdhaW4sIGJlY2F1c2UgXCJfbW9kZWxDcmVhdGVPclVwZGF0ZUJsb2NrRGVmXCIgY291bGQgaGF2ZSBiZWVuIGp1c3QgY3JlYXRlZCB0aGUgcHJvcGVydHkgKGUuZzogYmFja2dyb3VuZENvbG9yIGJ1dHRvbkJsb2NrIG5vdCBnZXR0aW5nIGRlZmF1bHRDb21wdXRlZCBpbiB0ZW1wbGF0ZS1sbSlcbiAgaWYgKHR5cGVvZiBkZWZzW21vZGVsTmFtZV0uX2dsb2JhbFN0eWxlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZGVmc1ttb2RlbE5hbWVdW3Byb3BOYW1lXSAhPT0gJ3VuZGVmaW5lZCcgJiYgZGVmc1ttb2RlbE5hbWVdW3Byb3BOYW1lXSAhPT0gbnVsbCAmJiBkZWZzW21vZGVsTmFtZV1bcHJvcE5hbWVdLl9jYXRlZ29yeSA9PSAnc3R5bGUnKSB7XG4gICAgcmVzICs9ICcuX2RlZmF1bHRDb21wdXRlZCc7XG4gIH1cblxuICB2YXIgY2hpbGRNb2RlbCA9IG1vZGVsO1xuICB0cnkge1xuICAgIF9pbmNyZWFzZVVzZUNvdW50KHJlYWRvbmx5LCBjaGlsZE1vZGVsKTtcbiAgICBpZiAocHJvcFBvcyAhPSAtMSkge1xuICAgICAgdmFyIG15cGF0aCA9IHBhdGg7XG4gICAgICBkbyB7XG4gICAgICAgIHZhciBwcm9wID0gbXlwYXRoLnN1YnN0cigwLCBwcm9wUG9zKTtcbiAgICAgICAgaWYgKHR5cGVvZiBjaGlsZE1vZGVsW3Byb3BdID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhyb3cgXCJGb3VuZCBhbiB1bmV4cGVjdGVkIHByb3AgXCIgKyBwcm9wICsgXCIgZm9yIG1vZGVsIFwiICsgbW9kZWxOYW1lICsgXCIgZm9yIFwiICsgcGF0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoaWxkTW9kZWwgPSBjaGlsZE1vZGVsW3Byb3BdO1xuICAgICAgICBfaW5jcmVhc2VVc2VDb3VudChyZWFkb25seSwgY2hpbGRNb2RlbCk7XG4gICAgICAgIG15cGF0aCA9IG15cGF0aC5zdWJzdHIocHJvcFBvcyArIDEpO1xuICAgICAgICBwcm9wUG9zID0gbXlwYXRoLmluZGV4T2YoJy4nKTtcbiAgICAgIH0gd2hpbGUgKHByb3BQb3MgIT0gLTEpO1xuXG4gICAgICBpZiAodHlwZW9mIGNoaWxkTW9kZWxbbXlwYXRoXSA9PSAndW5kZWZpbmVkJyB8fCBjaGlsZE1vZGVsW215cGF0aF0gPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgXCJGb3VuZCBhbiB1bmV4cGVjdGVkIHBhdGggdGVybWluYXRpb24gXCIgKyBteXBhdGggKyBcIiBmb3IgbW9kZWwgXCIgKyBtb2RlbE5hbWUgKyBcIiBmb3IgXCIgKyBwYXRoO1xuICAgICAgfVxuICAgICAgY2hpbGRNb2RlbCA9IGNoaWxkTW9kZWxbbXlwYXRoXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hpbGRNb2RlbCA9IGNoaWxkTW9kZWxbcGF0aF07XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBjaGlsZE1vZGVsID09PSAndW5kZWZpbmVkJyB8fCBjaGlsZE1vZGVsID09PSBudWxsKSB0aHJvdyBcIlVuZXhwZWN0ZWQgbnVsbCBtb2RlbCBmb3IgXCIgKyBtb2RlbE5hbWUgKyBcIi9cIiArIHdpdGhpbiArIFwiL1wiICsgZnVsbFBhdGg7XG5cbiAgICBpZiAodHlwZW9mIHNldGNhdGVnb3J5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY2hpbGRNb2RlbC5fY2F0ZWdvcnkgPSBzZXRjYXRlZ29yeTtcbiAgICB9XG5cbiAgICBfaW5jcmVhc2VVc2VDb3VudChyZWFkb25seSwgY2hpbGRNb2RlbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiVE9ETyBFUlJPUiBQcm9wZXJ0eSBsb29rdXAgZXhjZXB0aW9uXCIsIGUsIG1vZGVsTmFtZSwgcGF0aCwgdGVtcGxhdGVOYW1lLCBmdWxsUGF0aCwgZGVmcyk7XG4gICAgdGhyb3cgZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZGVmc1ttb2RlbE5hbWVdLl9nbG9iYWxTdHlsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRlZnNbbW9kZWxOYW1lXVtwcm9wTmFtZV0gPT0gJ29iamVjdCcgJiYgZGVmc1ttb2RlbE5hbWVdW3Byb3BOYW1lXSAhPT0gbnVsbCAmJiB0eXBlb2YgZGVmc1ttb2RlbE5hbWVdW3Byb3BOYW1lXS5fY2F0ZWdvcnkgIT0gJ3VuZGVmaW5lZCcgJiYgZGVmc1ttb2RlbE5hbWVdW3Byb3BOYW1lXS5fY2F0ZWdvcnkgPT0gJ3N0eWxlJykge1xuICAgIC8vIFRPRE8gY2FuIEkgcmVzdHJpY3QgdGhpcyBjb2RlIHRvICFyZWFkb25seSBtb2RlP1xuICAgIHZhciBnc0JpbmRpbmdQcm92aWRlciA9IG1vZGVsRW5zdXJlUGF0aEFuZEdldEJpbmRWYWx1ZS5iaW5kKHVuZGVmaW5lZCwgcmVhZG9ubHksIGRlZnMsIHRoZW1lVXBkYXRlciwgcm9vdE1vZGVsTmFtZSwgdGVtcGxhdGVOYW1lLCAnJyk7XG5cbiAgICB2YXIgc3ViUGF0aCA9IHBhdGguaW5kZXhPZignLicpICE9IC0xID8gcGF0aC5zdWJzdHIocGF0aC5pbmRleE9mKCcuJykpIDogJyc7XG5cbiAgICAvLyBUaGUgbmV4dCBjb2RlIHN1cHBvcnRzIG9ubHkgcHJvcGVydGllcyB3aXRoIG9uZSBkb3QgKG9iamVjdC5wcm9wZXJ0eSkuXG4gICAgaWYgKHN1YlBhdGguaW5kZXhPZignLicsIDEpICE9IC0xKSB0aHJvdyBcIlRPRE8gdW5zdXBwb3J0ZWQgb2JqZWN0IG5lc3RpbmchIFwiICsgcGF0aDtcblxuICAgIHZhciBnc1BhdGggPSBkZWZzW21vZGVsTmFtZV0uX2dsb2JhbFN0eWxlICsgJy4nICsgcHJvcE5hbWU7XG4gICAgaWYgKHR5cGVvZiBkZWZzW21vZGVsTmFtZV1bcHJvcE5hbWVdID09ICdvYmplY3QnICYmIGRlZnNbbW9kZWxOYW1lXVtwcm9wTmFtZV0gIT09IG51bGwgJiYgdHlwZW9mIGRlZnNbbW9kZWxOYW1lXVtwcm9wTmFtZV0uX2dsb2JhbFN0eWxlICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICBnc1BhdGggPSBkZWZzW21vZGVsTmFtZV1bcHJvcE5hbWVdLl9nbG9iYWxTdHlsZTtcbiAgICB9XG5cbiAgICBlbnN1cmVHbG9iYWxTdHlsZShkZWZzLCByZWFkb25seSwgZ3NCaW5kaW5nUHJvdmlkZXIsIG1vZGVsTmFtZSwgcHJvcE5hbWUsIGdzUGF0aCwgdW5kZWZpbmVkLCBmYWxzZSk7XG5cbiAgICB2YXIgZ3NGdWxsUGF0aCA9IGdzUGF0aCArIHN1YlBhdGg7XG5cbiAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSA9PSAndW5kZWZpbmVkJyAmJiBkZWZzW21vZGVsTmFtZV0uX2RlZmF1bHRWYWx1ZXNbcGF0aF0gIT09IG51bGwpIGRlZmF1bHRWYWx1ZSA9IGRlZnNbbW9kZWxOYW1lXS5fZGVmYXVsdFZhbHVlc1twYXRoXTtcblxuICAgIGVuc3VyZUdsb2JhbFN0eWxlKGRlZnMsIHJlYWRvbmx5LCBnc0JpbmRpbmdQcm92aWRlciwgbW9kZWxOYW1lLCBwYXRoLCBnc0Z1bGxQYXRoLCBkZWZhdWx0VmFsdWUsIG92ZXJyaWRlRGVmYXVsdCk7XG5cbiAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChyZWFkb25seSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2Fubm90IHNldCBhIG5ldyB0aGVtZSBkZWZhdWx0IHZhbHVlXCIsIGdzRnVsbFBhdGguc3Vic3RyKDcpLCBkZWZhdWx0VmFsdWUsIFwid2hpbGUgaW4gcmVhZG9ubHkgbW9kZVwiKTtcbiAgICAgICAgdGhyb3cgXCJDYW5ub3Qgc2V0IGEgbmV3IHRoZW1lIGRlZmF1bHQgdmFsdWUgKFwiICsgZGVmYXVsdFZhbHVlICsgXCIpIGZvciBcIiArIGdzRnVsbFBhdGguc3Vic3RyKDcpICsgXCIgd2hpbGUgaW4gcmVhZG9ubHkgbW9kZSFcIjtcbiAgICAgIH1cbiAgICAgIHRoZW1lVXBkYXRlcignZGVmYXVsdCcsIGdzRnVsbFBhdGguc3Vic3RyKDcpLCBkZWZhdWx0VmFsdWUpO1xuICAgIH1cblxuICAgIC8vIFRPRE8gY29tcGxleCBzdHVmZi4gSWYgdGhlIHRoZW1lIHVzZXMgaW5oZXJpdGFuY2Ugd2UgZW5mb3JjZSBpdCB1c2luZyB3aXRoIHRoZSBzYW1lIHZhbHVlLCBidXQgdGhpcyBpcyBhIGxpbWl0LlxuICAgIGRlZmF1bHRWYWx1ZSA9IG51bGw7XG5cbiAgfVxuXG4gIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlICE9ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKHR5cGVvZiBkZWZzW21vZGVsTmFtZV0uX2RlZmF1bHRWYWx1ZXNbcGF0aF0gPT0gJ3VuZGVmaW5lZCcgfHwgKHR5cGVvZiBvdmVycmlkZURlZmF1bHQgIT0gJ3VuZGVmaW5lZCcgJiYgb3ZlcnJpZGVEZWZhdWx0KSkge1xuICAgICAgaWYgKHJlYWRvbmx5KSB0aHJvdyBcIkNhbm5vdCBzZXQgbmV3IF9kZWZhdWx0VmFsdWVzIFsxXSBmb3IgXCIgKyBwYXRoICsgXCIgaW4gXCIgKyBtb2RlbE5hbWUgKyBcIiFcIjtcbiAgICAgIGRlZnNbbW9kZWxOYW1lXS5fZGVmYXVsdFZhbHVlc1twYXRoXSA9IGRlZmF1bHRWYWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICBpZiAocmVhZG9ubHkgJiYgZGVmc1ttb2RlbE5hbWVdLl9kZWZhdWx0VmFsdWVzW3BhdGhdICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgXCJDYW5ub3Qgc2V0IG5ldyBfZGVmYXVsdFZhbHVlcyBbMl0gZm9yIFwiICsgcGF0aCArIFwiIGluIFwiICsgbW9kZWxOYW1lICsgXCIhXCI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyByZW1vdmUgZGVmYXVsdCB2YWx1ZS4gVWdseS4gKE5lZWRzIHRoaXMgZm9yIGRlZmF1bHRzIGluIHRlbXBsYXRlLWxtIHNvY2lhbExpbmtzSWNvbilcbiAgICAgICAgZGVmc1ttb2RlbE5hbWVdLl9kZWZhdWx0VmFsdWVzW3BhdGhdID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoZGVmc1ttb2RlbE5hbWVdLl9kZWZhdWx0VmFsdWVzW3BhdGhdICE9IGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiVE9ETyBlcnJvciEhISBUcnlpbmcgdG8gc2V0IGEgbmV3IGRlZmF1bHQgdmFsdWUgZm9yIFwiICsgbW9kZWxOYW1lICsgXCIgXCIgKyBwYXRoICsgXCIgd2hpbGUgaXQgYWxyZWFkeSBleGlzdHMgKGN1cnJlbnQ6IFwiICsgZGVmc1ttb2RlbE5hbWVdLl9kZWZhdWx0VmFsdWVzW3BhdGhdICsgXCIsIG5ldzogXCIgKyBkZWZhdWx0VmFsdWUgKyBcIilcIik7XG4gICAgICAgIHRocm93IFwiVHJ5aW5nIHRvIHNldCBhIG5ldyBkZWZhdWx0IHZhbHVlIGZvciBcIiArIG1vZGVsTmFtZSArIFwiIFwiICsgcGF0aCArIFwiIHdoaWxlIGl0IGFscmVhZHkgZXhpc3RzIChjdXJyZW50OiBcIiArIGRlZnNbbW9kZWxOYW1lXS5kZWZhdWx0VmFsdWVzW3BhdGhdICsgXCIsIG5ldzogXCIgKyBkZWZhdWx0VmFsdWUgKyBcIilcIjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzO1xufTtcblxudmFyIGdlbmVyYXRlUmVzdWx0TW9kZWwgPSBmdW5jdGlvbih0ZW1wbGF0ZURlZikge1xuICB2YXIgZGVmcyA9IHRlbXBsYXRlRGVmLl9kZWZzO1xuICB2YXIgdGVtcGxhdGVOYW1lID0gdGVtcGxhdGVEZWYudGVtcGxhdGVOYW1lO1xuXG4gIHZhciBmaW5hbE1vZGVsQ29udGVudCA9IF9nZW5lcmF0ZU1vZGVsKGRlZnMsIHRlbXBsYXRlTmFtZSk7XG5cbiAgLy8gVE9ETyB1Z2x5IHRvIGFkZCB0aGlzIG1hbnVhbGx5XG4gIGlmICh0eXBlb2YgZGVmc1sndGhlbWUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBmaW5hbE1vZGVsQ29udGVudC50aGVtZSA9IF9nZW5lcmF0ZU1vZGVsKGRlZnMsICd0aGVtZScpO1xuICB9XG5cbiAgcmV0dXJuIGZpbmFsTW9kZWxDb250ZW50O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIHVzZWQgdG8gY29tcGlsZSB0aGUgdGVtcGxhdGVcbiAgZW5zdXJlUGF0aEFuZEdldEJpbmRWYWx1ZTogbW9kZWxFbnN1cmVQYXRoQW5kR2V0QmluZFZhbHVlLmJpbmQodW5kZWZpbmVkLCBmYWxzZSksXG4gIC8vIHVzZWQgaW4gcnVudGltZSB0aGUgdGVtcGxhdGVcbiAgZ2V0QmluZFZhbHVlOiBtb2RlbEVuc3VyZVBhdGhBbmRHZXRCaW5kVmFsdWUuYmluZCh1bmRlZmluZWQsIHRydWUpLFxuICBnZW5lcmF0ZU1vZGVsOiBfZ2VuZXJhdGVNb2RlbCxcbiAgZ2VuZXJhdGVSZXN1bHRNb2RlbDogZ2VuZXJhdGVSZXN1bHRNb2RlbCxcbiAgZ2V0RGVmOiBfZ2V0RGVmLFxuICBjcmVhdGVPclVwZGF0ZUJsb2NrRGVmOiBfbW9kZWxDcmVhdGVPclVwZGF0ZUJsb2NrRGVmXG59OyIsIlwidXNlIHN0cmljdFwiO1xuLyogZ2xvYmFsIGdsb2JhbDogZmFsc2UgKi9cblxudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcbnZhciBjb252ZXJ0ZXJVdGlscyA9IHJlcXVpcmUoXCIuL3V0aWxzLmpzXCIpO1xudmFyIGVsYWJvcmF0ZURlY2xhcmF0aW9ucyA9IHJlcXVpcmUoXCIuL2RlY2xhcmF0aW9ucy5qc1wiKTtcbnZhciBwcm9jZXNzU3R5bGVzaGVldFJ1bGVzID0gcmVxdWlyZShcIi4vc3R5bGVzaGVldC5qc1wiKTtcbnZhciBtb2RlbERlZiA9IHJlcXVpcmUoXCIuL21vZGVsLmpzXCIpO1xudmFyIGRvbXV0aWxzID0gcmVxdWlyZShcIi4vZG9tdXRpbHMuanNcIik7XG5cbnZhciB3cmFwRWxlbWVudFdpdGhDb25kaXRpb24gPSBmdW5jdGlvbihhdHRyaWJ1dGUsIGVsZW1lbnQsIGJpbmRpbmdQcm92aWRlcikge1xuICB2YXIgY29uZCA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCBhdHRyaWJ1dGUpO1xuXG4gIHRyeSB7XG4gICAgdmFyIGJpbmRpbmcgPSBjb252ZXJ0ZXJVdGlscy5jb25kaXRpb25CaW5kaW5nKGNvbmQsIGJpbmRpbmdQcm92aWRlcik7XG4gICAgJChlbGVtZW50KS5iZWZvcmUoJzwhLS0ga28gaWY6ICcgKyBiaW5kaW5nICsgJyAtLT4nKTtcbiAgICAkKGVsZW1lbnQpLmFmdGVyKCc8IS0tIC9rbyAtLT4nKTtcbiAgICBkb211dGlscy5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cmlidXRlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihcIk1vZGVsIGVuc3VyZSBwYXRoIGZhaWxlZCBpbiBpZi92YXJpYW50XCIsIGVsZW1lbnQsIGNvbmQsIGF0dHJpYnV0ZSk7XG4gICAgdGhyb3cgZTtcbiAgfVxuXG59O1xuXG52YXIgcmVwbGFjZWRBdHRyaWJ1dGVzID0gZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlTmFtZSkge1xuICBkb211dGlscy5zZXRBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cmlidXRlTmFtZSwgZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsIFwicmVwbGFjZWRcIiArIGF0dHJpYnV0ZU5hbWUpKTtcbn07XG5cbnZhciBwcm9jZXNzU3R5bGUgPSBmdW5jdGlvbihlbGVtZW50LCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgYmluZGluZ1Byb3ZpZGVyLCBhZGRVbmlxdWVJZCkge1xuICB2YXIgc3R5bGUgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ3JlcGxhY2Vkc3R5bGUnKTtcbiAgdmFyIG5ld1N0eWxlID0gbnVsbDtcbiAgdmFyIG5ld0JpbmRpbmdzO1xuICBpZiAoYWRkVW5pcXVlSWQpIG5ld0JpbmRpbmdzID0ge1xuICAgIHVuaXF1ZUlkOiAnJGRhdGEnLFxuICAgIGF0dHI6IHtcbiAgICAgIGlkOiAnaWQnXG4gICAgfVxuICB9O1xuXG4gIHZhciByZW1vdmVEaXNwbGF5Tm9uZSA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby1kaXNwbGF5JykgIT09IG51bGw7XG5cbiAgbmV3U3R5bGUgPSBlbGFib3JhdGVEZWNsYXJhdGlvbnMoc3R5bGUsIHVuZGVmaW5lZCwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIGJpbmRpbmdQcm92aWRlciwgZWxlbWVudCwgbmV3QmluZGluZ3MsIHJlbW92ZURpc3BsYXlOb25lKTtcblxuICAvLyBvbmx5IHdoZW4gdXNpbmcgXCJyZXBsYWNlZFwiXG4gIGlmIChuZXdTdHlsZSA9PT0gbnVsbCkge1xuICAgIG5ld1N0eWxlID0gc3R5bGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gaW4gY2FzZSB0aGVyZSBhcmUgbm8gYmluZGluZ3Mgd2Uga2VlcCByZXBsYWNlZHN0eWxlIHRvIGJlIHVzZWQgYnkgSUUgZHVyaW5nIG91dHB1dFxuICAgIC8vIG90aGVyd2lzZSBJIHJlbW92ZSBpdCBiZWNhdXNlIGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdmlydHVhbEF0dHJTdHlsZSBiaW5kaW5nLlxuICAgIC8vIFRPRE8gbWF5YmUgd2UgYmV0dGVyIHVzZSBkaWZmZXJlbnQgbmFtZXMgZm9yIFwicmVwbGFjZWRcIiB1c2VkIGR1cmluZyB0ZW1wbGF0ZSBjb252ZXJzaW9uXG4gICAgLy8gYW5kIHRoZSBvbmVzIHVzZWQgdG8gY3JlYXRlIHRoZSBvdXRwdXQuXG4gICAgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdyZXBsYWNlZHN0eWxlJyk7XG4gIH1cblxuICBpZiAobmV3U3R5bGUgIT09IG51bGwpIHtcbiAgICBpZiAobmV3U3R5bGUudHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgIGRvbXV0aWxzLnNldEF0dHJpYnV0ZShlbGVtZW50LCAnc3R5bGUnLCBuZXdTdHlsZSk7XG4gICAgfSBlbHNlIGRvbXV0aWxzLnJlbW92ZUF0dHJpYnV0ZShlbGVtZW50LCAnc3R5bGUnKTtcbiAgfVxufTtcblxuXG4vLyBUT0RPIGZpeGluZyBVUkxzIGlzIGFsc28gbmVlZGVkIHdoZXJlIHN0eWxlcyB1c2VzIHBhdGggKGUuZzogYmFja2dyb3VuZC1pbWFnZSwgQGltcG9ydClcbnZhciBfZml4UmVsYXRpdmVQYXRoID0gZnVuY3Rpb24oYXR0cmlidXRlLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgaW5kZXgsIGVsZW1lbnQpIHtcbiAgdmFyIHVybCA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCBhdHRyaWJ1dGUpO1xuICB2YXIgbmV3VXJsID0gdGVtcGxhdGVVcmxDb252ZXJ0ZXIodXJsKTtcbiAgaWYgKG5ld1VybCAhPT0gbnVsbCkge1xuICAgIGRvbXV0aWxzLnNldEF0dHJpYnV0ZShlbGVtZW50LCBhdHRyaWJ1dGUsIG5ld1VybCk7XG4gIH1cbn07XG5cblxudmFyIHByb2Nlc3NCbG9jayA9IGZ1bmN0aW9uKGVsZW1lbnQsIGRlZnMsIHRoZW1lVXBkYXRlciwgYmxvY2tQdXNoZXIsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBjb250ZXh0TmFtZSwgcm9vdE1vZGVsTmFtZSwgY29udGFpbmVyTmFtZSwgZ2VuZXJhdGVVbmlxdWVJZCwgdGVtcGxhdGVDcmVhdG9yKSB7XG5cbiAgdHJ5IHtcblxuICB2YXIgdGVtcGxhdGVOYW1lO1xuICB2YXIgdmFyaWFudE5hbWUgPSAnJyxcbiAgICB2YXJpYW50RGVmID0gJyc7XG4gIGlmIChjb250ZXh0TmFtZSA9PSAnYmxvY2snKSB7XG4gICAgdGVtcGxhdGVOYW1lID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLWJsb2NrJyk7XG4gICAgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLWJsb2NrJyk7XG4gIH0gZWxzZSBpZiAoY29udGV4dE5hbWUgPT0gJ3RlbXBsYXRlJykge1xuICAgIHRlbXBsYXRlTmFtZSA9IHJvb3RNb2RlbE5hbWU7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgXCJVbmV4cGVjdGVkIGNvbnRleHQgbmFtZSB3aGlsZSBwcm9jZXNzaW5nIGJsb2NrOiBcIiArIGNvbnRleHROYW1lO1xuICB9XG5cbiAgLy8gY29uc29sZS5sb2coXCJwcm9jZXNzQmxvY2tcIiwgY29udGV4dE5hbWUsIHJvb3RNb2RlbE5hbWUsIGNvbnRhaW5lck5hbWUsIHRlbXBsYXRlTmFtZSk7XG5cbiAgLy8gUmVtb3ZlIGVsZW1lbnRcbiAgJCgnW2RhdGEta28tcmVtb3ZlXScsIGVsZW1lbnQpLnJlbW92ZSgpO1xuXG4gIHZhciBmaXhlZEJsb2NrcyA9ICQoJ1tkYXRhLWtvLWJsb2NrXScsIGVsZW1lbnQpLnJlcGxhY2VXaXRoKCc8cmVwbGFjZWRibG9jaz4nKTtcblxuICAvLyBVcmxzIGluIHRoZXNlIGF0dHJpYnV0ZXMgbmVlZHMgXCJyZWxhdGl2aXphdGlvblwiXG4gIHZhciB1cmxhdHRycyA9IFsnaHJlZicsICdzcmMnLCAnZGF0YS1rby1wbGFjZWhvbGRlci1zcmMnLCAnYmFja2dyb3VuZCddO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHVybGF0dHJzLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gZmFjY2lvIGlsIGJpbmQgcGVyIG5vbiBkZWZpbmlyZSBmdW56aW9uaSBpbiB1biBsb29wIChqc2hpbnQpXG4gICAgdmFyIGZ1bmMgPSBfZml4UmVsYXRpdmVQYXRoLmJpbmQodW5kZWZpbmVkLCB1cmxhdHRyc1tpXSwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIpO1xuICAgICQoJ1snICsgdXJsYXR0cnNbaV0gKyAnXScsIGVsZW1lbnQpLmVhY2goZnVuYyk7XG4gIH1cblxuICB2YXIgZGF0YURlZnMgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28tcHJvcGVydGllcycpO1xuICBpZiAoZGF0YURlZnMgPT09IG51bGwpIGRhdGFEZWZzID0gXCJcIjtcbiAgJChcIltkYXRhLWtvLXByb3BlcnRpZXNdXCIsIGVsZW1lbnQpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcbiAgICBpZiAoZGF0YURlZnMubGVuZ3RoID4gMCkgZGF0YURlZnMgPSBkYXRhRGVmcyArIFwiIFwiO1xuICAgIGRhdGFEZWZzID0gZGF0YURlZnMgKyBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28tcHJvcGVydGllcycpO1xuICAgIGRvbXV0aWxzLnJlbW92ZUF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby1wcm9wZXJ0aWVzJyk7XG4gIH0pO1xuXG4gIG1vZGVsRGVmLmNyZWF0ZU9yVXBkYXRlQmxvY2tEZWYoZGVmcywgdGVtcGxhdGVOYW1lLCBkYXRhRGVmcywgeyBjb250ZXh0TmFtZTogY29udGV4dE5hbWUgfSk7XG5cbiAgdmFyIGJpbmRpbmdQcm92aWRlciA9IG1vZGVsRGVmLmVuc3VyZVBhdGhBbmRHZXRCaW5kVmFsdWUuYmluZCh1bmRlZmluZWQsIGRlZnMsIHRoZW1lVXBkYXRlciwgcm9vdE1vZGVsTmFtZSwgdGVtcGxhdGVOYW1lLCAnJyk7XG4gIGlmIChjb250ZXh0TmFtZSA9PSAnYmxvY2snKSBiaW5kaW5nUHJvdmlkZXIoJ2lkJywgJycpO1xuXG4gICQoJ3N0eWxlJywgZWxlbWVudCkuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgIHZhciBzdHlsZSA9IGRvbXV0aWxzLmdldElubmVySHRtbChlbGVtZW50KTtcblxuICAgIHZhciBibG9ja0RlZnNVcGRhdGVyID0gbW9kZWxEZWYuY3JlYXRlT3JVcGRhdGVCbG9ja0RlZi5iaW5kKHVuZGVmaW5lZCwgZGVmcyk7XG4gICAgdmFyIGxvY2FsV2l0aEJpbmRpbmdQcm92aWRlciA9IG1vZGVsRGVmLmVuc3VyZVBhdGhBbmRHZXRCaW5kVmFsdWUuYmluZCh1bmRlZmluZWQsIGRlZnMsIHRoZW1lVXBkYXRlciwgcm9vdE1vZGVsTmFtZSk7XG4gICAgdmFyIG5ld1N0eWxlID0gcHJvY2Vzc1N0eWxlc2hlZXRSdWxlcyhzdHlsZSwgdW5kZWZpbmVkLCBsb2NhbFdpdGhCaW5kaW5nUHJvdmlkZXIsIGJsb2NrRGVmc1VwZGF0ZXIsIHRoZW1lVXBkYXRlciwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIHJvb3RNb2RlbE5hbWUsIHRlbXBsYXRlTmFtZSk7XG5cbiAgICBpZiAobmV3U3R5bGUgIT0gc3R5bGUpIHtcbiAgICAgIGlmIChuZXdTdHlsZS50cmltKCkgIT09ICcnKSB7XG4gICAgICAgIHZhciB0bXBOYW1lID0gdGVtcGxhdGVDcmVhdG9yKG5ld1N0eWxlKTtcbiAgICAgICAgZG9tdXRpbHMuc2V0QXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWJpbmQnLCAndGVtcGxhdGU6IHsgbmFtZTogXFwnJyArIHRtcE5hbWUgKyAnXFwnIH0nKTtcbiAgICAgICAgLy8gaG8gY3JlYXRvIGlsIHRlbXBsYXRlIHF1aW5kaSBwb3NzbyBzdnVvdGFyZSBpbCBzb3JnZW50ZS5cbiAgICAgICAgZG9tdXRpbHMuc2V0Q29udGVudChlbGVtZW50LCAnJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyByZW1vdmUgZW1wdHkgc3R5bGVzIGJsb2Nrc1xuICAgICAgICBkb211dGlscy5yZW1vdmVFbGVtZW50cygkKGVsZW1lbnQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHByb2Nlc3NTdHlsZShlbGVtZW50LCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgYmluZGluZ1Byb3ZpZGVyLCBnZW5lcmF0ZVVuaXF1ZUlkKTtcblxuICAvLyBUT0RPIGhyZWYgc2hvdWxkIGJlIHN1cHBvcnRlZC4gZGF0YS1rby1kaXNwbGF5IGFuZCBkYXRhLWtvLXdyYXAgc2hvdWxkIG5ldmVyIGhhcHBlbiBpbiBoZXJlLlxuICB2YXIgbm90c3VwcG9ydGVkID0gWydkYXRhLWtvLWRpc3BsYXknLCAnZGF0YS1rby1lZGl0YWJsZScsICdkYXRhLWtvLXdyYXAnLCAnaHJlZiddO1xuICBmb3IgKHZhciBqID0gMDsgaiA8IG5vdHN1cHBvcnRlZC5sZW5ndGg7IGorKykge1xuICAgIHZhciBhdHRyID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsIG5vdHN1cHBvcnRlZFtqXSk7XG4gICAgaWYgKGF0dHIpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkVSUk9SOiBVbnN1cHBvcnRlZCBcIiArIG5vdHN1cHBvcnRlZFtqXSArIFwiIHVzZWQgdG9nZXRoZXIgd2l0aCBkYXRhLWtvLWJsb2NrXCIsIGVsZW1lbnQpO1xuICAgICAgdGhyb3cgXCJFUlJPUjogVW5zdXBwb3J0ZWQgXCIgKyBub3RzdXBwb3J0ZWRbal0gKyBcIiB1c2VkIHRvZ2V0aGVyIHdpdGggZGF0YS1rby1ibG9ja1wiO1xuICAgIH1cbiAgfVxuXG4gIC8vIHNpbXBseSBwcmVwcm9jZXNzZWQgYXMgZGF0YS1rby13cmFwICsgLWtvLWF0dHItaHJlZlxuICAkKFwiW2RhdGEta28tbGlua11cIiwgZWxlbWVudCkuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgIHZhciB1cmxWYXIgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28tbGluaycpO1xuICAgIHZhciByZXBTdHlsZSA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAncmVwbGFjZWRzdHlsZScpO1xuICAgIGlmICh0eXBlb2YgcmVwU3R5bGUgPT0gJ3VuZGVmaW5lZCcgfHwgcmVwU3R5bGUgPT09IG51bGwpIHJlcFN0eWxlID0gJyc7XG4gICAgaWYgKHJlcFN0eWxlICE9PSAnJykgcmVwU3R5bGUgPSAnLWtvLWF0dHItaHJlZjogQCcgKyB1cmxWYXIgKyBcIjsgXCIgKyByZXBTdHlsZTtcbiAgICBlbHNlIHJlcFN0eWxlID0gJy1rby1hdHRyLWhyZWY6IEAnICsgdXJsVmFyO1xuICAgIGRvbXV0aWxzLnNldEF0dHJpYnV0ZShlbGVtZW50LCAncmVwbGFjZWRzdHlsZScsIHJlcFN0eWxlKTtcbiAgICBkb211dGlscy5zZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28td3JhcCcsIHVybFZhcik7XG4gICAgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLWxpbmsnKTtcbiAgfSk7XG5cbiAgJChcIltyZXBsYWNlZHN0eWxlXVwiLCBlbGVtZW50KS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gICAgcHJvY2Vzc1N0eWxlKGVsZW1lbnQsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBiaW5kaW5nUHJvdmlkZXIsIGZhbHNlKTtcbiAgfSk7XG5cbiAgJChcIltyZXBsYWNlZGh0dHAtZXF1aXZdXCIsIGVsZW1lbnQpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcbiAgICByZXBsYWNlZEF0dHJpYnV0ZXMoZWxlbWVudCwgXCJodHRwLWVxdWl2XCIpO1xuICB9KTtcblxuICAkKFwiW2RhdGEta28tZGlzcGxheV1cIiwgZWxlbWVudCkuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgIHdyYXBFbGVtZW50V2l0aENvbmRpdGlvbignZGF0YS1rby1kaXNwbGF5JywgZWxlbWVudCwgYmluZGluZ1Byb3ZpZGVyKTtcbiAgfSk7XG5cbiAgJChcIltkYXRhLWtvLWVkaXRhYmxlXVwiLCBlbGVtZW50KS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gICAgdmFyIG5ld0JpbmRpbmcsIGRlZmF1bHRWYWx1ZSwgbW9kZWwsIGN1cnJlbnRCaW5kaW5ncywgZGF0YUJpbmQ7XG5cblxuICAgIHZhciBkYXRhRWRpdGFibGUgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgXCJkYXRhLWtvLWVkaXRhYmxlXCIpO1xuXG4gICAgLy8gVE9ETyBhZGQgdmFsaWRhdGlvbiBvZiB0aGUgZWRpdGFibGVcblxuICAgIHZhciBpdGVtQmluZFZhbHVlO1xuICAgIHZhciBzZWxlY3RCaW5kaW5nO1xuICAgIGlmIChkYXRhRWRpdGFibGUubGFzdEluZGV4T2YoJy4nKSA+IDApIHtcbiAgICAgIHZhciBzdWJzID0gZGF0YUVkaXRhYmxlLnN1YnN0cigwLCBkYXRhRWRpdGFibGUubGFzdEluZGV4T2YoJy4nKSk7XG4gICAgICBpdGVtQmluZFZhbHVlID0gYmluZGluZ1Byb3ZpZGVyKHN1YnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtQmluZFZhbHVlID0gYmluZGluZ1Byb3ZpZGVyKGRhdGFFZGl0YWJsZSk7XG4gICAgfVxuICAgIHNlbGVjdEJpbmRpbmcgPSBcInd5c2l3eWdDbGljazogZnVuY3Rpb24ob2JqLCBldnQpIHsgJHJvb3Quc2VsZWN0SXRlbShcIiArIGl0ZW1CaW5kVmFsdWUgKyBcIiwgJGRhdGEpOyByZXR1cm4gZmFsc2UgfSwgY2xpY2tCdWJibGU6IGZhbHNlLCB3eXNpd3lnQ3NzOiB7IHNlbGVjdGVkaXRlbTogJHJvb3QuaXNTZWxlY3RlZEl0ZW0oXCIgKyBpdGVtQmluZFZhbHVlICsgXCIpIH0sIHNjcm9sbEludG9WaWV3OiAkcm9vdC5pc1NlbGVjdGVkSXRlbShcIiArIGl0ZW1CaW5kVmFsdWUgKyBcIilcIjtcblxuICAgIGlmIChkb211dGlscy5nZXRMb3dlclRhZ05hbWUoZWxlbWVudCkgIT0gJ2ltZycpIHtcblxuXG4gICAgICBkZWZhdWx0VmFsdWUgPSBkb211dGlscy5nZXRJbm5lckh0bWwoZWxlbWVudCk7XG4gICAgICB2YXIgbW9kZWxCaW5kVmFsdWUgPSBiaW5kaW5nUHJvdmlkZXIoZGF0YUVkaXRhYmxlLCBkZWZhdWx0VmFsdWUsIHRydWUsICd3eXNpd3lnJyk7XG4gICAgICBuZXdCaW5kaW5nID0gXCJcIjtcblxuICAgICAgaWYgKCFkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgXCJpZFwiKSkge1xuICAgICAgICBuZXdCaW5kaW5nICs9IFwid3lzaXd5Z0lkOiBpZCgpKydfXCIgKyBkYXRhRWRpdGFibGUucmVwbGFjZSgnLicsICdfJykgKyBcIicsIFwiO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHNlbGVjdEJpbmRpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG5ld0JpbmRpbmcgKz0gc2VsZWN0QmluZGluZyArIFwiLCBcIjtcbiAgICAgIH1cblxuICAgICAgbmV3QmluZGluZyArPSBcInd5c2l3eWdPckh0bWw6IFwiICsgbW9kZWxCaW5kVmFsdWU7XG5cbiAgICAgIGlmIChkb211dGlscy5nZXRMb3dlclRhZ05hbWUoZWxlbWVudCkgPT0gJ3RkJykge1xuICAgICAgICB2YXIgd3JhcHBpbmdEaXYgPSAkKCc8ZGl2IGRhdGEta28td3JhcD1cImZhbHNlXCIgc3R5bGU9XCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlXCI+PC9kaXY+JylbMF07XG4gICAgICAgIGRvbXV0aWxzLnNldEF0dHJpYnV0ZSh3cmFwcGluZ0RpdiwgJ2RhdGEtYmluZCcsIG5ld0JpbmRpbmcpO1xuICAgICAgICB2YXIgbmV3Q29udGVudCA9IGRvbXV0aWxzLmdldElubmVySHRtbCgkKCc8ZGl2PjwvZGl2PicpLmFwcGVuZCh3cmFwcGluZ0RpdikpO1xuICAgICAgICBkb211dGlscy5zZXRDb250ZW50KGVsZW1lbnQsIG5ld0NvbnRlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudEJpbmRpbmdzID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWJpbmQnKTtcbiAgICAgICAgZGF0YUJpbmQgPSAoY3VycmVudEJpbmRpbmdzICE9PSBudWxsID8gY3VycmVudEJpbmRpbmdzICsgXCIsIFwiIDogXCJcIikgKyBuZXdCaW5kaW5nO1xuICAgICAgICBkb211dGlscy5zZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEtYmluZCcsIGRhdGFCaW5kKTtcbiAgICAgICAgZG9tdXRpbHMuc2V0Q29udGVudChlbGVtZW50LCAnJyk7XG4gICAgICB9XG4gICAgICBkb211dGlscy5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28tZWRpdGFibGUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHdpZHRoID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICd3aWR0aCcpO1xuICAgICAgaWYgKHdpZHRoID09PSAnJykgd2lkdGggPSBudWxsO1xuICAgICAgaWYgKHdpZHRoID09PSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFUlJPUjogZGF0YS1rby1lZGl0YWJsZSBpbWFnZXMgbXVzdCBkZWNsYXJlIGEgV0lEVEggYXR0cmlidXRlIVwiLCBlbGVtZW50KTtcbiAgICAgICAgdGhyb3cgXCJFUlJPUjogZGF0YS1rby1lZGl0YWJsZSBpbWFnZXMgbXVzdCBkZWNsYXJlIGEgV0lEVEggYXR0cmlidXRlIVwiO1xuICAgICAgfVxuICAgICAgdmFyIGhlaWdodCA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnaGVpZ2h0Jyk7XG4gICAgICBpZiAoaGVpZ2h0ID09PSAnJykgaGVpZ2h0ID0gbnVsbDtcblxuICAgICAgdmFyIGFsaWduID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICdhbGlnbicpO1xuXG4gICAgICBjdXJyZW50QmluZGluZ3MgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEtYmluZCcpO1xuXG4gICAgICAvLyBUT0RPIHRoaXMgaXMgdWdseS4uLiBtYXliZSBhIGJldHRlciBzdHJhdGVneSBpcyB0byBwYXNzIHRoaXMgYXJvdW5kIHVzaW5nIFwiZGF0YS1cIiBhdHRyaWJ1dGVzXG4gICAgICB2YXIgZHluSGVpZ2h0ID0gY3VycmVudEJpbmRpbmdzICYmIGN1cnJlbnRCaW5kaW5ncy5tYXRjaCgvdmlydHVhbEF0dHI6IHtbXn1dKiBoZWlnaHQ6IChbXix9XSopWyx9XS8pO1xuICAgICAgaWYgKGR5bkhlaWdodCkgaGVpZ2h0ID0gZHluSGVpZ2h0WzFdO1xuICAgICAgdmFyIGR5bldpZHRoID0gY3VycmVudEJpbmRpbmdzICYmIGN1cnJlbnRCaW5kaW5ncy5tYXRjaCgvdmlydHVhbEF0dHI6IHtbXn1dKiB3aWR0aDogKFteLH1dKilbLH1dLyk7XG4gICAgICBpZiAoZHluV2lkdGgpIHdpZHRoID0gZHluV2lkdGhbMV07XG5cbiAgICAgIHZhciBtZXRob2Q7XG5cbiAgICAgIGRlZmF1bHRWYWx1ZSA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby1wbGFjZWhvbGRlci1zcmMnKTtcbiAgICAgIC8vIFRPRE8gbWFrZSBzdXJlIHRoaXMgZGVmYXVsdCB2YWx1ZSBpcyB0aGUgc2FtZSBhcyB0aGUgb25lIGNoZWNrZWQgYnkgaW1nLXd5c2l3eWcgdGVtcGxhdGUuXG4gICAgICB2YXIgdmFsdWUgPSAnJztcbiAgICAgIGlmIChkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgdmFsdWUgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ3NyYycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVmYXVsdFZhbHVlID0gZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICdzcmMnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNpemU7XG4gICAgICBpZiAod2lkdGggJiYgaGVpZ2h0KSB7XG4gICAgICAgIHNpemUgPSB3aWR0aCArIFwiKyd4JytcIiArIGhlaWdodDtcbiAgICAgIH0gZWxzZSBpZiAoIWhlaWdodCkge1xuICAgICAgICBzaXplID0gXCIndycrXCIgKyB3aWR0aCArIFwiKycnXCI7XG4gICAgICB9IGVsc2UgaWYgKCF3aWR0aCkge1xuICAgICAgICBzaXplID0gXCInaCcrXCIgKyBoZWlnaHQgKyBcIisnJ1wiO1xuICAgICAgfVxuICAgICAgdmFyIHBsYWNlaG9sZGVyc3JjO1xuICAgICAgdmFyIHBsaGVpZ2h0ID0gaGVpZ2h0IHx8IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby1wbGFjZWhvbGRlci1oZWlnaHQnKTtcbiAgICAgIHZhciBwbHdpZHRoID0gd2lkdGggfHwgZG9tdXRpbHMuZ2V0QXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLXBsYWNlaG9sZGVyLXdpZHRoJyk7XG5cbiAgICAgIGRvbXV0aWxzLnJlbW92ZUF0dHJpYnV0ZShlbGVtZW50LCAnc3JjJyk7XG4gICAgICBkb211dGlscy5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28tZWRpdGFibGUnKTtcbiAgICAgIGRvbXV0aWxzLnJlbW92ZUF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby1wbGFjZWhvbGRlci1oZWlnaHQnKTtcbiAgICAgIGRvbXV0aWxzLnJlbW92ZUF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby1wbGFjZWhvbGRlci13aWR0aCcpO1xuICAgICAgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLXBsYWNlaG9sZGVyLXNyYycpO1xuXG4gICAgICBpZiAoZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIHBsYWNlaG9sZGVyc3JjID0gXCJ7IHdpZHRoOiBcIiArIHBsd2lkdGggKyBcIiwgaGVpZ2h0OiBcIiArIHBsaGVpZ2h0ICsgXCIsIHRleHQ6IFwiICsgc2l6ZSArIFwifVwiO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXBsd2lkdGggfHwgIXBsaGVpZ2h0KSB7XG4gICAgICAgIC8vIFRPRE8gcmFpc2UgYW4gZXhjZXB0aW9uP1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiSU1HIGRhdGEta28tZWRpdGFibGUgbXVzdCBkZWNsYXJlIHdpZHRoIGFuZCBoZWlnaHQgYXR0cmlidXRlcywgb3IgdGhlaXIgcGxhY2Vob2xkZXIgY291bnRlcnBhcnRzIGRhdGEta28tcGxhY2Vob2xkZXItd2lkdGgvZGF0YS1rby1wbGFjZWhvbGRlci1oZWlnaHRcIiwgZWxlbWVudCk7XG4gICAgICAgIHRocm93IFwiRVJST1I6IElNRyBkYXRhLWtvLWVkaXRhYmxlIE1VU1QgZGVjbGFyZSB3aWR0aCBhbmQgaGVpZ2h0IGF0dHJpYnV0ZXMsIG9yIHRoZWlyIHBsYWNlaG9sZGVyIGNvdW50ZXJwYXJ0cyBkYXRhLWtvLXBsYWNlaG9sZGVyLXdpZHRoL2RhdGEta28tcGxhY2Vob2xkZXItaGVpZ2h0XCI7XG4gICAgICB9XG5cbiAgICAgIHZhciBiaW5kaW5nVmFsdWUgPSBiaW5kaW5nUHJvdmlkZXIoZGF0YUVkaXRhYmxlLCB2YWx1ZSwgZmFsc2UsICd3eXNpd3lnJyk7XG4gICAgICBuZXdCaW5kaW5nID0gXCJ3eXNpd3lnU3JjOiB7IHdpZHRoOiBcIiArIHdpZHRoICsgXCIsIGhlaWdodDogXCIgKyBoZWlnaHQgKyBcIiwgc3JjOiBcIiArIGJpbmRpbmdWYWx1ZSArIFwiLCBwbGFjZWhvbGRlcjogXCIgKyBwbGFjZWhvbGRlcnNyYyArIFwiIH1cIjtcbiAgICAgIGRhdGFCaW5kID0gKGN1cnJlbnRCaW5kaW5ncyAhPT0gbnVsbCA/IGN1cnJlbnRCaW5kaW5ncyArIFwiLCBcIiA6IFwiXCIpICsgbmV3QmluZGluZztcbiAgICAgIGRvbXV0aWxzLnNldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1iaW5kJywgZGF0YUJpbmQpO1xuXG4gICAgICB2YXIgdG1wbE5hbWUgPSB0ZW1wbGF0ZUNyZWF0b3IoZWxlbWVudCk7XG5cbiAgICAgIHZhciBjb250YWluZXJCaW5kID0gJ3sgd2lkdGg6ICcgKyB3aWR0aDtcbiAgICAgIGlmIChhbGlnbiA9PSAnbGVmdCcpIGNvbnRhaW5lckJpbmQgKz0gJywgZmxvYXQ6IFxcJ2xlZnRcXCcnO1xuICAgICAgZWxzZSBpZiAoYWxpZ24gPT0gJ3JpZ2h0JykgY29udGFpbmVyQmluZCArPSAnLCBmbG9hdDogXFwncmlnaHRcXCcnO1xuICAgICAgZWxzZSBpZiAoYWxpZ24gPT0gJ2NlbnRlcicpIGNvbnNvbGUubG9nKCdub24gc28gY29zYSBmYSBhbGlnbj1jZW50ZXIgc3UgdW5hIGltZyBlIHF1aW5kaSBub24gc28gY29tZSBzaW11bGFybmUgbFxcJ2VkaXRpbmcnKTtcbiAgICAgIGVsc2UgaWYgKGFsaWduID09ICd0b3AnKSBjb250YWluZXJCaW5kICs9ICcsIHZlcnRpY2FsQWxpZ246IFxcJ3RvcFxcJyc7XG4gICAgICBlbHNlIGlmIChhbGlnbiA9PSAnbWlkZGxlJykgY29udGFpbmVyQmluZCArPSAnLCB2ZXJ0aWNhbEFsaWduOiBcXCdtaWRkbGVcXCcnO1xuICAgICAgZWxzZSBpZiAoYWxpZ24gPT0gJ2JvdHRvbScpIGNvbnRhaW5lckJpbmQgKz0gJywgdmVydGljYWxBbGlnbjogXFwnYm90dG9tXFwnJztcbiAgICAgIGNvbnRhaW5lckJpbmQgKz0gJ30nO1xuXG4gICAgICAkKGVsZW1lbnQpLmJlZm9yZSgnPCEtLSBrbyB3eXNpd3lnSW1nOiB7IF9kYXRhOiAkZGF0YSwgX2l0ZW06ICcgKyBpdGVtQmluZFZhbHVlICsgJywgX3RlbXBsYXRlOiBcXCcnICsgdG1wbE5hbWUgKyAnXFwnLCBfZWRpdFRlbXBsYXRlOiBcXCdpbWctd3lzaXd5Z1xcJywgX3NyYzogJyArIGJpbmRpbmdWYWx1ZSArICcsIF93aWR0aDogJyArIHdpZHRoICsgJywgX2hlaWdodDogJyArIGhlaWdodCArICcsIF9hbGlnbjogJyArIChhbGlnbiA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6ICdcXCcnICsgYWxpZ24gKyAnXFwnJykgKyAnLCBfc2l6ZTogJyArIHNpemUgKyAnLCBfbWV0aG9kOiAnICsgbWV0aG9kICsgJywgX3BsYWNlaG9sZGVyc3JjOiAnICsgcGxhY2Vob2xkZXJzcmMgKyAnLCBfc3R5bGViaW5kOiAnICsgY29udGFpbmVyQmluZCArICcgfSAtLT4nKTtcbiAgICAgICQoZWxlbWVudCkuYWZ0ZXIoJzwhLS0gL2tvIC0tPicpO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBBcHBsaWVkIGFmdGVyIHRoZSBkYXRhLWVkaXRhYmxlIHNvIHRvIGF2b2lkIHByb2Nlc3NpbmcgaHJlZnMgZm9yIGVkaXRhYmxlIGNvbnRlbnRcbiAgJChcIltocmVmXVwiLCBlbGVtZW50KS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gICAgdmFyIGF0dHJWYWx1ZSA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnaHJlZicpO1xuICAgIHZhciBuZXdCaW5kaW5nID0gJ3d5c2l3eWdIcmVmOiBcXCcnICsgY29udmVydGVyVXRpbHMuYWRkU2xhc2hlcyhhdHRyVmFsdWUpICsgJ1xcJyc7XG4gICAgdmFyIGN1cnJlbnRCaW5kaW5ncyA9IGRvbXV0aWxzLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1iaW5kJyk7XG4gICAgdmFyIGRhdGFCaW5kID0gKGN1cnJlbnRCaW5kaW5ncyAhPT0gbnVsbCA/IGN1cnJlbnRCaW5kaW5ncyArIFwiLCBcIiA6IFwiXCIpICsgbmV3QmluZGluZztcbiAgICBkb211dGlscy5zZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEtYmluZCcsIGRhdGFCaW5kKTtcbiAgfSk7XG5cbiAgJChcInJlcGxhY2VkYmxvY2tcIiwgZWxlbWVudCkuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgIHZhciBibG9ja0VsZW1lbnQgPSBmaXhlZEJsb2Nrc1tpbmRleF07XG5cbiAgICB2YXIgYmxvY2tOYW1lID0gcHJvY2Vzc0Jsb2NrKGJsb2NrRWxlbWVudCwgZGVmcywgdGhlbWVVcGRhdGVyLCBibG9ja1B1c2hlciwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsICdibG9jaycsIHRlbXBsYXRlTmFtZSwgY29udGFpbmVyTmFtZSwgdHJ1ZSwgdGVtcGxhdGVDcmVhdG9yKTtcbiAgICAvLyByZXBsYWNlZCBibG9ja3MgYXJlIGRlZmluZWQgaW4gdGhlIG1vZGVsIHJvb3RcbiAgICB2YXIgbW9kZWxCaW5kVmFsdWUgPSBtb2RlbERlZi5lbnN1cmVQYXRoQW5kR2V0QmluZFZhbHVlKGRlZnMsIHRoZW1lVXBkYXRlciwgcm9vdE1vZGVsTmFtZSwgdGVtcGxhdGVOYW1lLCAnJywgYmxvY2tOYW1lKTtcblxuICAgIC8vIHRoaXMgd2F5IHdlIGNhbGwgYmxvY2std3lzaXd5ZyBvciBibG9jay1zaG93IGFuZCBub3QgZGlyZWN0bHkgdGhlIHJpZ2h0IGJsb2NrXG4gICAgJChlbGVtZW50KS5iZWZvcmUoJzwhLS0ga28gYmxvY2s6IHsgZGF0YTogJyArIGNvbnZlcnRlclV0aWxzLmFkZFNsYXNoZXMobW9kZWxCaW5kVmFsdWUpICsgJywgdGVtcGxhdGU6IFxcJ2Jsb2NrXFwnIH0gLS0+Jyk7XG4gICAgJChlbGVtZW50KS5hZnRlcignPCEtLSAva28gLS0+Jyk7XG4gICAgJChlbGVtZW50KS5yZW1vdmUoKTtcbiAgfSk7XG5cbiAgLy8gVE9ETyBkbyB3ZSByZWFsbHkgbmVlZCB0byBsb29wIGluIHJldmVyc2Ugb3JkZXI/XG4gIC8vIGRhdGEta28td3JhcCBoYXZlIHRvIGJlIHByb2Nlc3NlZCBhdCB0aGUgZW5kLCBleHBlY2lhbGx5IGFmdGVyIFwicmVwbGFjZWJsb2Nrc1wiXG4gIC8vIG90aGVyd2lzZSBhIGRhdGEta28td3JhcCB3cmFwcGluZyBhIGRhdGEta28tYmxvY2sgd291bGQgYnJlYWsgZXZlcnl0aGluZy5cbiAgJCgkKFwiW2RhdGEta28td3JhcF1cIiwgZWxlbWVudCkuZ2V0KCkucmV2ZXJzZSgpLCBlbGVtZW50KS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gICAgdmFyIGNvbmQgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28td3JhcCcpO1xuICAgIGlmICh0eXBlb2YgY29uZCA9PT0gJ3VuZGVmaW5lZCcgfHwgY29uZCA9PT0gJycgfHwgY29uZCA9PT0gJ3RydWUnKSB7XG4gICAgICB0aHJvdyBcIlVuc3VwcG9ydGVkIGVtcHR5IHZhbHVlIGZvciBkYXRhLWtvLXdyYXA6IHVzZSBmYWxzZSB2YWx1ZSBpZiB5b3Ugd2FudCB0byBhbHdheXMgcmVtb3ZlIHRoZSB0YWdcIjtcbiAgICB9XG5cbiAgICB2YXIgY29uZEJpbmRpbmcgPSBjb252ZXJ0ZXJVdGlscy5jb25kaXRpb25CaW5kaW5nKGNvbmQsIGJpbmRpbmdQcm92aWRlcik7XG5cbiAgICAvKlxuICAgICAgICAgIHZhciBjb25kQmluZGluZyA9IGZhbHNlO1xuICAgICAgICAgIGlmICh0eXBlb2YgY29uZCA9PT0gJ3VuZGVmaW5lZCcgfHwgY29uZCA9PT0gJycpIHtcbiAgICAgICAgICAgIHRocm93IFwiVW5zdXBwb3J0ZWQgZW1wdHkgdmFsdWUgZm9yIGRhdGEta28td3JhcDogdXNlIGZhbHNlIHZhbHVlIGlmIHlvdSB3YW50IHRvIGFsd2F5cyByZW1vdmUgdGhlIHRhZ1wiO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZCA9PT0gJ2ZhbHNlJykge1xuICAgICAgICAgICAgY29uZEJpbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmQgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgdGhyb3cgXCJVbnN1cHBvcnRlZCB0cnVlIHZhbHVlIGZvciBkYXRhLWtvLXdyYXAuIFRoaXMgbWFrZXMgbm8gc2Vuc2U6IHVzZSBmYWxzZSBvciBhIHZhcmlhYmxlXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbmRCaW5kaW5nID0gYmluZGluZ1Byb3ZpZGVyKGNvbmQpKycoKSc7XG4gICAgICAgICAgfVxuICAgICovXG5cbiAgICB2YXIgZGF0YUJpbmQgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEtYmluZCcpO1xuXG4gICAgdmFyIGlubmVyVG1wbE5hbWUsIG91dGVyVG1wbE5hbWU7XG4gICAgLy8gVE9ETyB1Z2x5IGhhcmRjb2RlZCBoYW5kbGluZzogYXQgdGhlIHZlcnkgbGVhc3QgdGhpcyBzaG91bGQgYmUgaW52b2tlZCBieSB0aGUgZGF0YS1jb250YWluZXIgY2FsbGVyLlxuICAgIGlmIChkYXRhQmluZCAhPT0gJycgJiYgZGF0YUJpbmQgIT09IG51bGwgJiYgZGF0YUJpbmQubWF0Y2goLyhibG9ja3x3eXNpd3lnT3JIdG1sKTovKSkge1xuICAgICAgLy8gd2UgY2FuJ3QgcHV0IHRoZSBjb250ZW50IGluIGEgdGVtcGxhdGUgYmVjYXVzZSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBiaW5kaW5nXG4gICAgICB2YXIgaW5uZXJUbXBsQ29udGVudCA9ICc8IS0tIGtvICcgKyBkYXRhQmluZCArICcgLS0+JyArIGRvbXV0aWxzLmdldElubmVySHRtbChlbGVtZW50KSArICc8IS0tIC9rbyAtLT4nO1xuICAgICAgaW5uZXJUbXBsTmFtZSA9IHRlbXBsYXRlQ3JlYXRvcihpbm5lclRtcGxDb250ZW50KTtcbiAgICAgIGRvbXV0aWxzLnJlbW92ZUF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1rby13cmFwJyk7XG4gICAgICBvdXRlclRtcGxOYW1lID0gdGVtcGxhdGVDcmVhdG9yKGVsZW1lbnQpO1xuICAgICAgZG9tdXRpbHMucmVwbGFjZUh0bWwoZWxlbWVudCwgJzwhLS0ga28gdGVtcGxhdGU6IC8qIHNwZWNpYWwgKi8gKHR5cGVvZiB0ZW1wbGF0ZU1vZGUgIT0gXFwndW5kZWZpbmVkXFwnICYmIHRlbXBsYXRlTW9kZSA9PSBcXCd3eXNpd3lnXFwnKSB8fCAnICsgY29uZEJpbmRpbmcgKyAnID8gXFwnJyArIG91dGVyVG1wbE5hbWUgKyAnXFwnIDogXFwnJyArIGlubmVyVG1wbE5hbWUgKyAnXFwnIC0tPjwhLS0gL2tvIC0tPicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB3ZSBwdXQgdGhlIGNvbnRlbnQgaW4gYSB0ZW1wbGF0ZSBhbmQgdGhlIGZyYW1lIGluIGFub3RoZXIgdGVtcGxhdGUgaW5jbHVkaW5nIHRoaXMgb25lLlxuICAgICAgaW5uZXJUbXBsTmFtZSA9IHRlbXBsYXRlQ3JlYXRvcihkb211dGlscy5nZXRJbm5lckh0bWwoZWxlbWVudCkpO1xuICAgICAgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLXdyYXAnKTtcbiAgICAgIGRvbXV0aWxzLnNldENvbnRlbnQoZWxlbWVudCwgJzwhLS0ga28gdGVtcGxhdGU6IFxcJycgKyBpbm5lclRtcGxOYW1lICsgJ1xcJyAtLT48IS0tIC9rbyAtLT4nKTtcbiAgICAgIG91dGVyVG1wbE5hbWUgPSB0ZW1wbGF0ZUNyZWF0b3IoZWxlbWVudCk7XG4gICAgICBkb211dGlscy5yZXBsYWNlSHRtbChlbGVtZW50LCAnPCEtLSBrbyB0ZW1wbGF0ZTogKHR5cGVvZiB0ZW1wbGF0ZU1vZGUgIT0gXFwndW5kZWZpbmVkXFwnICYmIHRlbXBsYXRlTW9kZSA9PSBcXCd3eXNpd3lnXFwnKSB8fCAnICsgY29uZEJpbmRpbmcgKyAnID8gXFwnJyArIG91dGVyVG1wbE5hbWUgKyAnXFwnIDogXFwnJyArIGlubmVyVG1wbE5hbWUgKyAnXFwnIC0tPjwhLS0gL2tvIC0tPicpO1xuICAgIH1cblxuICB9KTtcblxuICB0ZW1wbGF0ZUNyZWF0b3IoZWxlbWVudCwgdGVtcGxhdGVOYW1lLCAnc2hvdycpO1xuXG4gIGJsb2NrUHVzaGVyKHJvb3RNb2RlbE5hbWUsIHRlbXBsYXRlTmFtZSwgY29udGV4dE5hbWUsIGNvbnRhaW5lck5hbWUpO1xuXG4gIHJldHVybiB0ZW1wbGF0ZU5hbWU7XG5cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFeGNlcHRpb24gd2hpbGUgcGFyc2luZyB0aGUgdGVtcGxhdGVcIiwgZSwgZWxlbWVudCk7XG4gICAgdGhyb3cgZTtcbiAgfVxuXG59O1xuXG5mdW5jdGlvbiBjb25kaXRpb25hbF9yZXBsYWNlKGh0bWwpIHtcbiAgcmV0dXJuIGh0bWwucmVwbGFjZSgvPCEtLVxcW2lmIChbXlxcXV0qKVxcXT4oKD86KD8hLS0pW1xcc1xcU10pKj8pPCFcXFtlbmRpZlxcXS0tPi9nLCBmdW5jdGlvbihtYXRjaCwgY29uZGl0aW9uLCBib2R5KSB7XG4gICAgdmFyIGRkID0gJzwhLS0gY2M6c3RhcnQgLS0+JztcbiAgICBkZCArPSBib2R5LnJlcGxhY2UoLzwoW0EtWmEtejpdKykvZywgJzwhLS0gY2M6Ym86JDEgLS0+PGNjJykgLy8gYmVmb3JlIG9wZW4gdGFnXG4gICAgICAgICAgIC5yZXBsYWNlKC88XFwvKFtBLVphLXo6XSspPi9nLCc8IS0tIGNjOmJjOiQxIC0tPjwvY2M+PCEtLSBjYzphYzokMSAtLT4nKSAvLyBiZWZvcmUvYWZ0ZXIgY2xvc2UgdGFnXG4gICAgICAgICAgIC5yZXBsYWNlKC9cXC8+L2csJy8+PCEtLSBjYzpzYyAtLT4nKTsgLy8gc2VsZi1jbG9zZSB0YWdcbiAgICBkZCArPSAnPCEtLSBjYzplbmQgLS0+JztcbiAgICB2YXIgb3V0cHV0ID0gJzxyZXBsYWNlZGNjIGNvbmRpdGlvbj1cIicrY29uZGl0aW9uKydcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmVcIj4nO1xuICAgIG91dHB1dCArPSAkKCc8ZGl2PicpLmFwcGVuZCgkKGRkKSkuaHRtbCgpXG4gICAgICAucmVwbGFjZSgvXjwhLS0gY2M6c3RhcnQgLS0+LywgJycpXG4gICAgICAucmVwbGFjZSgvPCEtLSBjYzplbmQgLS0+JC8sICcnKTtcbiAgICBvdXRwdXQgKz0gJzwvcmVwbGFjZWRjYz4nO1xuICAgIHJldHVybiBvdXRwdXQ7XG4gIH0pO1xufVxuXG5cbnZhciB0cmFuc2xhdGVUZW1wbGF0ZSA9IGZ1bmN0aW9uKHRlbXBsYXRlTmFtZSwgaHRtbCwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIHRlbXBsYXRlQ3JlYXRvcikge1xuICB2YXIgZGVmcyA9IHt9O1xuICB2YXIgcmVwbGFjZWRIdG1sID0gY29uZGl0aW9uYWxfcmVwbGFjZShodG1sLnJlcGxhY2UoLyg8W14+XStcXHMpKHN0eWxlfGh0dHAtZXF1aXYpKD1cIlteXCJdKlwiW14+XSo+KS9naSwgZnVuY3Rpb24obWF0Y2gsIHAxLCBwMiwgcDMpIHtcbiAgICByZXR1cm4gcDEgKyAncmVwbGFjZWQnICsgcDIgKyBwMztcbiAgfSkpO1xuICB2YXIgY29udGVudCA9ICQocmVwbGFjZWRIdG1sKTtcbiAgdmFyIGVsZW1lbnQgPSBjb250ZW50WzBdO1xuXG4gIHZhciBibG9ja3MgPSBbXTsgLy8ge3Jvb3ROYW1lLCBibG9ja05hbWUsIGNvbnRhaW5lck5hbWV9XG4gIHZhciBfYmxvY2tQdXNoZXIgPSBmdW5jdGlvbihyb290TmFtZSwgYmxvY2tOYW1lLCBjb250ZXh0TmFtZSwgY29udGFpbmVyTmFtZSkge1xuICAgIGJsb2Nrcy5wdXNoKHtcbiAgICAgIHJvb3Q6IHJvb3ROYW1lLFxuICAgICAgYmxvY2s6IGJsb2NrTmFtZSxcbiAgICAgIGNvbnRleHQ6IGNvbnRleHROYW1lLFxuICAgICAgY29udGFpbmVyOiBjb250YWluZXJOYW1lXG4gICAgfSk7XG4gIH07XG5cbiAgLy8gVE9ETyBoYXZlIHRvIGFjY2VwdCBudWxscyBhcyB1bmRlZmluZWRzIChiZWNhdXNlIG9mIG1vZGVsLmpzIGJlaGF2aW91cilcbiAgdmFyIHRoZW1lVXBkYXRlciA9IGZ1bmN0aW9uKG5hbWUsIGtleSwgdmFsKSB7XG4gICAgaWYgKHR5cGVvZiBkZWZzWyd0aGVtZXMnXSA9PT0gJ3VuZGVmaW5lZCcpIGRlZnNbJ3RoZW1lcyddID0ge307XG4gICAgaWYgKHR5cGVvZiBkZWZzWyd0aGVtZXMnXVtuYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIGRlZnNbJ3RoZW1lcyddW25hbWVdID0ge307XG4gICAgaWYgKHR5cGVvZiBkZWZzWyd0aGVtZXMnXVtuYW1lXVtrZXldID09PSAndW5kZWZpbmVkJyB8fCBkZWZzWyd0aGVtZXMnXVtuYW1lXVtrZXldID09PSBudWxsKSBkZWZzWyd0aGVtZXMnXVtuYW1lXVtrZXldID0gdmFsO1xuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWwgIT09ICd1bmRlZmluZWQnICYmIHZhbCAhPT0gbnVsbCkge1xuICAgICAgdmFyIHByZWNWYWwgPSBkZWZzWyd0aGVtZXMnXVtuYW1lXVtrZXldO1xuICAgICAgaWYgKHByZWNWYWwgIT0gdmFsKSBjb25zb2xlLmxvZyhcIkVycm9yIHNldHRpbmcgYSBuZXcgZGVmYXVsdCBmb3IgcHJvcGVydHkgXCIgKyBrZXkgKyBcIiBpbiB0aGVtZSBcIiArIG5hbWUgKyBcIi4gb2xkOlwiICsgcHJlY1ZhbCArIFwiIG5ldzpcIiArIHZhbCArIFwiIVwiKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGNvbnRhaW5lcnMgPSAkKFwiW2RhdGEta28tY29udGFpbmVyXVwiLCBjb250ZW50KTtcbiAgdmFyIGNvbnRhaW5lcnNEb20gPSB7fTtcbiAgY29udGFpbmVycy5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XG4gICAgdmFyIGNvbnRhaW5lck5hbWUgPSBkb211dGlscy5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ2RhdGEta28tY29udGFpbmVyJykgKyBcIkJsb2Nrc1wiO1xuXG4gICAgZG9tdXRpbHMucmVtb3ZlQXR0cmlidXRlKGVsZW1lbnQsICdkYXRhLWtvLWNvbnRhaW5lcicpO1xuICAgIGRvbXV0aWxzLnNldEF0dHJpYnV0ZShlbGVtZW50LCAnZGF0YS1iaW5kJywgJ2Jsb2NrOiAnICsgY29udGFpbmVyTmFtZSk7XG5cbiAgICB2YXIgY29udGFpbmVyQmxvY2tzID0gJChcIj4gW2RhdGEta28tYmxvY2tdXCIsIGVsZW1lbnQpO1xuICAgIGRvbXV0aWxzLnJlbW92ZUVsZW1lbnRzKGNvbnRhaW5lckJsb2NrcywgdHJ1ZSk7XG5cbiAgICBjb250YWluZXJzRG9tW2NvbnRhaW5lck5hbWVdID0gY29udGFpbmVyQmxvY2tzO1xuICB9KTtcblxuICAvLyBUT0RPIHJlbW92ZSBoYXJkY29kZWQgcHJvcGVydGllczogd2UgbmVlZCB0aGVtIGJlY2F1c2Ugd2l0aG91dCB0aGVzZSBsb2FkaW5nIGEgYmFzaWMgdGVtcGxhdGUgZmFpbHMuXG4gIC8vIE5lZWRlZCBpbiBvcmRlciB0byB1c2UgZGF0YS1rby1ibG9ja1xuICBtb2RlbERlZi5jcmVhdGVPclVwZGF0ZUJsb2NrRGVmKGRlZnMsICdpZCcpO1xuICAvLyBOZWVkZWQgYWx3YXlzIGFzIGl0IGlzIHRoZSBkZWZhdWx0IHRoZW1lIHNlY3Rpb24uXG4gIG1vZGVsRGVmLmNyZWF0ZU9yVXBkYXRlQmxvY2tEZWYoZGVmcywgJ2JvZHlUaGVtZScpO1xuICAvLyBOZWVkZWQgZm9yIGRhdGEta28tY29udGFpbmVyXG4gIG1vZGVsRGVmLmNyZWF0ZU9yVXBkYXRlQmxvY2tEZWYoZGVmcywgJ2Jsb2NrcycsICdibG9ja3NbXScpO1xuXG4gIC8vIE5lZWRlZCBpZiB5b3Ugd2FudCB0byB1c2UgYSB0ZXh0IHZhcmlhYmxlPyBUT0RPIHRoaXMgc2hvdWxkIG5vdCBiZSBuZWVkZWQhXG4gIG1vZGVsRGVmLmNyZWF0ZU9yVXBkYXRlQmxvY2tEZWYoZGVmcywgJ3RleHQnKTtcblxuICBwcm9jZXNzQmxvY2soZWxlbWVudCwgZGVmcywgdGhlbWVVcGRhdGVyLCBfYmxvY2tQdXNoZXIsIHRlbXBsYXRlVXJsQ29udmVydGVyLCAndGVtcGxhdGUnLCB0ZW1wbGF0ZU5hbWUsIHVuZGVmaW5lZCwgZmFsc2UsIHRlbXBsYXRlQ3JlYXRvcik7XG5cbiAgdmFyIGJsb2NrUHJvY2VzcyA9IGZ1bmN0aW9uKGNvbnRhaW5lck5hbWUsIGluZGV4LCBlbGVtZW50KSB7XG4gICAgcHJvY2Vzc0Jsb2NrKGVsZW1lbnQsIGRlZnMsIHRoZW1lVXBkYXRlciwgX2Jsb2NrUHVzaGVyLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgJ2Jsb2NrJywgdGVtcGxhdGVOYW1lLCBjb250YWluZXJOYW1lLCB0cnVlLCB0ZW1wbGF0ZUNyZWF0b3IpO1xuICB9O1xuXG4gIGZvciAodmFyIHByb3AgaW4gY29udGFpbmVyc0RvbSlcbiAgICBpZiAoY29udGFpbmVyc0RvbS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgdmFyIGNvbnRhaW5lckJsb2NrcyA9IGNvbnRhaW5lcnNEb21bcHJvcF07XG4gICAgICB2YXIgY29udGFpbmVyTmFtZSA9IHByb3A7XG5cbiAgICAgIG1vZGVsRGVmLmVuc3VyZVBhdGhBbmRHZXRCaW5kVmFsdWUoZGVmcywgdGhlbWVVcGRhdGVyLCB0ZW1wbGF0ZU5hbWUsIHRlbXBsYXRlTmFtZSwgJycsIGNvbnRhaW5lck5hbWUgKyBcIi5ibG9ja3NcIiwgXCJbXVwiKTtcblxuICAgICAgY29udGFpbmVyQmxvY2tzLmVhY2goYmxvY2tQcm9jZXNzLmJpbmQodW5kZWZpbmVkLCBjb250YWluZXJOYW1lKSk7XG4gICAgfVxuXG4gIHZhciB0ZW1wbGF0ZURlZiA9IHtcbiAgICBfZGVmczogZGVmcyxcbiAgICB0ZW1wbGF0ZU5hbWU6IHRlbXBsYXRlTmFtZSxcbiAgICBfYmxvY2tzOiBibG9ja3NcbiAgfTtcblxuICBpZiAodHlwZW9mIGRlZnNbdGVtcGxhdGVOYW1lXS5fdmVyc2lvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0ZW1wbGF0ZURlZi52ZXJzaW9uID0gZGVmc1t0ZW1wbGF0ZU5hbWVdLl92ZXJzaW9uO1xuICB9XG5cbiAgcmV0dXJuIHRlbXBsYXRlRGVmO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IHRyYW5zbGF0ZVRlbXBsYXRlOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBQYXJzZXMgQ1NTL3N0eWxlc2hlZXRzIGRlY2xhcmF0aW9ucyAta28tYmxvY2tkZWZzLy1rby10aGVtZXNcbi8vIEl0IHJldHVybnMgS08gYmluZGluZ3MgYnV0IGRvZXNuJ3QgZGVwZW5kIG9uIEtPXG4vLyBOZWVkcyBhIGJpbmRpbmdQcm92aWRlclxuLy8gQWxzbyB1c2VzIGEgYmxvY2tEZWZzVXBkYXRlciB0byB1cGRhdGUgZGVmaW5pdGlvbnMgd2hpbGUgcGFyc2luZyB0aGUgc3R5bGVzaGVldC5cblxudmFyIGNzc1BhcnNlID0gcmVxdWlyZShcIm1lbnNjaC9saWIvcGFyc2VyLmpzXCIpO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcbnZhciBjb252ZXJ0ZXJVdGlscyA9IHJlcXVpcmUoXCIuL3V0aWxzLmpzXCIpO1xudmFyIGVsYWJvcmF0ZURlY2xhcmF0aW9ucyA9IHJlcXVpcmUoXCIuL2RlY2xhcmF0aW9ucy5qc1wiKTtcblxuLyogVGVtcG9yYXJ5IGV4cGVyaW1lbnRhbCBjb2RlIG5vdCB1c2VkXG52YXIgX3Byb2Nlc3NTdHlsZVNoZWV0UnVsZXNfcHJvY2Vzc1RoZW1lcyA9IGZ1bmN0aW9uIChiaW5kaW5nUHJvdmlkZXIsIHRoZW1lVXBkYXRlciwgcnVsZXMpIHtcbiAgdmFyIHNlbHMsIGRlY2xzLCBpLCBqLCBrO1xuICBmb3IoIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocnVsZXNbaV0udHlwZSA9PSAncnVsZScpIHtcbiAgICAgIHNlbHMgPSBydWxlc1tpXS5zZWxlY3RvcnM7XG4gICAgICBkZWNscyA9IHJ1bGVzW2ldLmRlY2xhcmF0aW9ucztcbiAgICAgIGZvciAoaiA9IDA7IGogPCBzZWxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGZvciAoayA9IDA7IGsgPCBkZWNscy5sZW5ndGg7IGsrKykgaWYgKGRlY2xzW2tdLnR5cGUgPT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgYmluZFZhbCA9IGJpbmRpbmdQcm92aWRlcignJCcrZGVjbHNba10ubmFtZSk7XG4gICAgICAgICAgICB0aGVtZVVwZGF0ZXIoc2Vsc1tqXSwgZGVjbHNba10ubmFtZSwgZGVjbHNba10udmFsdWUsIGJpbmRWYWwpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXhjZXB0aW9uIHNldHRpbmcgdGhlbWUgZm9yXCIsIGRlY2xzW2tdLm5hbWUsIGRlY2xzW2tdLnZhbHVlLCBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG4qL1xuXG52YXIgX3Byb2Nlc3NTdHlsZVNoZWV0UnVsZXNfcHJvY2Vzc0Jsb2NrRGVmID0gZnVuY3Rpb24oYmxvY2tEZWZzVXBkYXRlciwgcnVsZXMpIHtcbiAgdmFyIHByb3BlcnRpZXMsIG5hbWVkUHJvcHMsIGRlY2xzO1xuICAvLyBuYW1lLCBjb250ZXh0TmFtZSwgZ2xvYmFsU3R5bGUsIHRoZW1lT3ZlcnJpZGUsIGV4dGVuZCwgbWluLCBtYXgsIHdpZGdldCwgb3B0aW9ucywgY2F0ZWdvcnksIHZhcmlhbnQsIGhlbHAsIGJsb2NrRGVzY3JpcHRpb24sIHZlcnNpb24sIFxuICBmb3IgKHZhciBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHJ1bGVzW2ldLnR5cGUgPT0gJ3J1bGUnKSB7XG4gICAgICB2YXIgc2VscyA9IHJ1bGVzW2ldLnNlbGVjdG9ycztcbiAgICAgIHZhciBoYXNEZWNsYXJhdGlvbnMgPSBmYWxzZTtcbiAgICAgIHZhciBoYXNQcmV2aWV3cyA9IGZhbHNlO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZWxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChzZWxzW2pdLm1hdGNoKC86cHJldmlldyQvKSkge1xuICAgICAgICAgIGhhc1ByZXZpZXdzID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoYXNEZWNsYXJhdGlvbnMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaGFzUHJldmlld3MgJiYgaGFzRGVjbGFyYXRpb25zKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2Fubm90IG1peCBzZWxlY3RvcnMgdHlwZSAoOnByZXZpZXcgYW5kIGRlY2xhcmF0aW9ucykgaW4gQHN1cHBvcnRzIC1rby1ibG9ja2RlZnMgXCIsIHNlbHMpO1xuICAgICAgICB0aHJvdyBcIkNhbm5vdCBtaXggc2VsZWN0b3JzIHR5cGUgKDpwcmV2aWV3IGFuZCBkZWNsYXJhdGlvbnMpIGluIEBzdXBwb3J0cyAta28tYmxvY2tkZWZzXCI7XG4gICAgICB9XG4gICAgICBpZiAoIWhhc1ByZXZpZXdzICYmICFoYXNEZWNsYXJhdGlvbnMpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjYW5ub3QgZmluZCBrbm93biBzZWxlY3RvcnMgaW4gQHN1cHBvcnRzIC1rby1ibG9ja2RlZnMgXCIsIHNlbHMpO1xuICAgICAgICB0aHJvdyBcIkNhbm5vdCBmaW5kIGtub3duIHNlbGVjdG9ycyBpbiBAc3VwcG9ydHMgLWtvLWJsb2NrZGVmc1wiO1xuICAgICAgfVxuICAgICAgaWYgKGhhc0RlY2xhcmF0aW9ucykge1xuICAgICAgICBwcm9wZXJ0aWVzID0gJyc7XG4gICAgICAgIG5hbWVkUHJvcHMgPSB7fTtcblxuLypcbiAgICAgICAgbmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29udGV4dE5hbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGdsb2JhbFN0eWxlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGVtZU92ZXJyaWRlID0gdW5kZWZpbmVkO1xuICAgICAgICBleHRlbmQgPSB1bmRlZmluZWQ7XG4gICAgICAgIG1heCA9IHVuZGVmaW5lZDtcbiAgICAgICAgbWluID0gdW5kZWZpbmVkO1xuICAgICAgICB3aWRnZXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIG9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIGNhdGVnb3J5ID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXJpYW50ID0gdW5kZWZpbmVkO1xuICAgICAgICBoZWxwID0gdW5kZWZpbmVkO1xuICAgICAgICBibG9ja0Rlc2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB2ZXJzaW9uID0gdW5kZWZpbmVkO1xuICAgICAgICAqL1xuICAgICAgICBkZWNscyA9IHJ1bGVzW2ldLmRlY2xhcmF0aW9ucztcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBkZWNscy5sZW5ndGg7IGsrKykgaWYgKGRlY2xzW2tdLnR5cGUgPT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgIGlmIChkZWNsc1trXS5uYW1lID09ICdsYWJlbCcpIG5hbWVkUHJvcHMubmFtZSA9IGRlY2xzW2tdLnZhbHVlO1xuICAgICAgICAgIGVsc2UgaWYgKGRlY2xzW2tdLm5hbWUgPT0gJ2NvbnRleHQnKSBuYW1lZFByb3BzLmNvbnRleHROYW1lID0gZGVjbHNba10udmFsdWU7XG4gICAgICAgICAgZWxzZSBpZiAoZGVjbHNba10ubmFtZSA9PSAncHJvcGVydGllcycpIHByb3BlcnRpZXMgPSBkZWNsc1trXS52YWx1ZTtcbiAgICAgICAgICBlbHNlIGlmIChkZWNsc1trXS5uYW1lID09ICd0aGVtZScpIG5hbWVkUHJvcHMuZ2xvYmFsU3R5bGUgPSAnX3RoZW1lXy4nICsgZGVjbHNba10udmFsdWU7XG4gICAgICAgICAgZWxzZSBpZiAoZGVjbHNba10ubmFtZSA9PSAndGhlbWVPdmVycmlkZScpIG5hbWVkUHJvcHMudGhlbWVPdmVycmlkZSA9IFN0cmluZyhkZWNsc1trXS52YWx1ZSkudG9Mb3dlckNhc2UoKSA9PSAndHJ1ZSc7XG4gICAgICAgICAgLy8gZWxzZSBpZiAoZGVjbHNba10ubmFtZSA9PSAnZXh0ZW5kJykgZXh0ZW5kID0gZGVjbHNba10udmFsdWU7XG5cbiAgICAgICAgICAvLyBlbHNlIGlmIChkZWNsc1trXS5uYW1lID09ICdtYXgnKSBtYXggPSBkZWNsc1trXS52YWx1ZTtcbiAgICAgICAgICAvLyBlbHNlIGlmIChkZWNsc1trXS5uYW1lID09ICdtaW4nKSBtaW4gPSBkZWNsc1trXS52YWx1ZTtcbiAgICAgICAgICAvLyBlbHNlIGlmIChkZWNsc1trXS5uYW1lID09ICdvcHRpb25zJykgb3B0aW9ucyA9IGRlY2xzW2tdLnZhbHVlO1xuXG4gICAgICAgICAgLy8gZWxzZSBpZiAoZGVjbHNba10ubmFtZSA9PSAnd2lkZ2V0Jykgd2lkZ2V0ID0gZGVjbHNba10udmFsdWU7XG4gICAgICAgICAgLy8gZWxzZSBpZiAoZGVjbHNba10ubmFtZSA9PSAnY2F0ZWdvcnknKSBjYXRlZ29yeSA9IGRlY2xzW2tdLnZhbHVlO1xuICAgICAgICAgIC8vIGVsc2UgaWYgKGRlY2xzW2tdLm5hbWUgPT0gJ3ZhcmlhbnQnKSB2YXJpYW50ID0gZGVjbHNba10udmFsdWU7XG4gICAgICAgICAgLy8gZWxzZSBpZiAoZGVjbHNba10ubmFtZSA9PSAnaGVscCcpIGhlbHAgPSBkZWNsc1trXS52YWx1ZTtcbiAgICAgICAgICAvLyBlbHNlIGlmIChkZWNsc1trXS5uYW1lID09ICdibG9ja0Rlc2NyaXB0aW9uJykgYmxvY2tEZXNjcmlwdGlvbiA9IGRlY2xzW2tdLnZhbHVlO1xuICAgICAgICAgIC8vIGVsc2UgaWYgKGRlY2xzW2tdLm5hbWUgPT0gJ3ZlcnNpb24nKSB2ZXJzaW9uID0gZGVjbHNba10udmFsdWU7XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuYW1lZFByb3BzW2RlY2xzW2tdLm5hbWVdID0gZGVjbHNba10udmFsdWU7XG4gICAgICAgICAgICAvLyBUT0RPIGluIHBhc3Qgd2UgZGV0ZWN0ZWQgdW5zdXBwb3J0ZWQgcHJvcGVydGllcywgd2hpbGUgbm93IHdlIHNpbXBsZSBwdXNoIGV2ZXJ5IGRlY2xhcmF0aW9uIGluIGEgbmFtZWRQcm9wZXJ0eS5cbiAgICAgICAgICAgIC8vIFRoaXMgbWFrZSBpdCBoYXJkZXIgdG8gc3BvdCBlcnJvcnMgaW4gZGVjbGFyYXRpb25zLlxuICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKFwiVW5rbm93biBwcm9wZXJ0eSBwcm9jZXNzaW5nIEBzdXBwb3J0cyAta28tYmxvY2tkZWZzIFwiLCBkZWNsc1trXSwgc2Vscyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgc2Vscy5sZW5ndGg7IGwrKykge1xuICAgICAgICAgIGJsb2NrRGVmc1VwZGF0ZXIoc2Vsc1tsXSwgcHJvcGVydGllcywgbmFtZWRQcm9wcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChoYXNQcmV2aWV3cykge1xuICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IHNlbHMubGVuZ3RoOyBtKyspIHtcbiAgICAgICAgICB2YXIgbG9jYWxCbG9ja05hbWUgPSBzZWxzW21dLnN1YnN0cigwLCBzZWxzW21dLmluZGV4T2YoJzonKSk7XG4gICAgICAgICAgdmFyIHByZXZpZXdCaW5kaW5ncyA9IHJ1bGVzW2ldLmRlY2xhcmF0aW9ucztcbiAgICAgICAgICBibG9ja0RlZnNVcGRhdGVyKGxvY2FsQmxvY2tOYW1lLCB1bmRlZmluZWQsIHsgcHJldmlld0JpbmRpbmdzOiBwcmV2aWV3QmluZGluZ3MgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZ25vcmluZyBjb21tZW50cyBvciBvdGhlciBjb250ZW50XG4gICAgfVxuICB9XG59O1xuXG52YXIgcHJvY2Vzc1N0eWxlc2hlZXRSdWxlcyA9IGZ1bmN0aW9uKHN0eWxlLCBydWxlcywgbG9jYWxXaXRoQmluZGluZ1Byb3ZpZGVyLCBibG9ja0RlZnNVcGRhdGVyLCB0aGVtZVVwZGF0ZXIsIHRlbXBsYXRlVXJsQ29udmVydGVyLCByb290TW9kZWxOYW1lLCB0ZW1wbGF0ZU5hbWUpIHtcbiAgdmFyIG5ld1N0eWxlID0gc3R5bGU7XG4gIHZhciBsYXN0U3RhcnQgPSBudWxsO1xuXG4gIGlmICh0eXBlb2YgcnVsZXMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgc3R5bGVTaGVldCA9IGNzc1BhcnNlKHN0eWxlLCB7XG4gICAgICBjb21tZW50czogdHJ1ZSxcbiAgICAgIHBvc2l0aW9uOiB0cnVlXG4gICAgfSk7XG4gICAgaWYgKHN0eWxlU2hlZXQudHlwZSAhPSAnc3R5bGVzaGVldCcgfHwgdHlwZW9mIHN0eWxlU2hlZXQuc3R5bGVzaGVldCA9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc29sZS5sb2coXCJ1bmFibGUgdG8gcHJvY2VzcyBzdHlsZVNoZWV0XCIsIHN0eWxlU2hlZXQpO1xuICAgICAgdGhyb3cgXCJVbmFibGUgdG8gcGFyc2Ugc3R5bGVzaGVldFwiO1xuICAgIH1cbiAgICBydWxlcyA9IHN0eWxlU2hlZXQuc3R5bGVzaGVldC5ydWxlcztcbiAgfVxuXG4gIC8vIFdBUk4gY3VycmVubHR5IHRoaXMgcGFyc2VzIHJ1bGVzIGluIHJldmVyc2Ugb3JkZXIgc28gdGhhdCBzdHJpbmcgcmVwbGFjZW1lbnRzIHdvcmtzIHVzaW5nIGlucHV0IFwicG9zaXRpb25zXCJcbiAgLy8gb3RoZXJ3aXNlIGl0IHNob3VsZCBjb21wdXRlIG5ldyBvZmZzZXRzIG9uIGV2ZXJ5IHJlcGxhY2VtZW50LlxuICAvLyBCdXQgdGhpcyBjcmVhdGUgaXNzdWVzIGJlY2F1c2Ugb2YgZGVmaW5pdGlvbnMgYmVpbmcgcGFyc2VkIGluIHJldmVyc2Ugb3JkZXIsIHNvIHRoaXMgaXMgbm90IGEgZ29vZCBpZGVhLlxuICAvLyBTb21ldGltZXMsIHRvIHdvcmsgYXJvdW5kIHRoaXMgaXNzdWVzLCB5b3UgbmVlZCB0byBjcmVhdGUgMiBkaWZmZXJlbnQgPHN0eWxlPiBibG9ja3MuXG4gIHZhciBiaW5kaW5nUHJvdmlkZXI7XG5cbiAgZm9yICh2YXIgaSA9IHJ1bGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKHJ1bGVzW2ldLnR5cGUgPT0gJ3N1cHBvcnRzJyAmJiBydWxlc1tpXS5uYW1lID09ICcta28tYmxvY2tkZWZzJykge1xuICAgICAgX3Byb2Nlc3NTdHlsZVNoZWV0UnVsZXNfcHJvY2Vzc0Jsb2NrRGVmKGJsb2NrRGVmc1VwZGF0ZXIsIHJ1bGVzW2ldLnJ1bGVzKTtcbiAgICAgIG5ld1N0eWxlID0gY29udmVydGVyVXRpbHMucmVtb3ZlU3R5bGUobmV3U3R5bGUsIHJ1bGVzW2ldLnBvc2l0aW9uLnN0YXJ0LCBsYXN0U3RhcnQsIDAsIDAsIDAsICcnKTtcbiAgICAgIC8qIHRlbXBvcmFyeSBleHBlcmltZW50YWwgY29kZSBub3QgdXNlZFxuICAgICAgfSBlbHNlIGlmIChydWxlc1tpXS50eXBlID09ICdzdXBwb3J0cycgJiYgcnVsZXNbaV0ubmFtZSA9PSAnLWtvLXRoZW1lcycpIHtcbiAgICAgICAgYmluZGluZ1Byb3ZpZGVyID0gbG9jYWxXaXRoQmluZGluZ1Byb3ZpZGVyLmJpbmQodGhpcywgJ3RoZW1lJywgJycpO1xuICAgICAgICBfcHJvY2Vzc1N0eWxlU2hlZXRSdWxlc19wcm9jZXNzVGhlbWVzKGJpbmRpbmdQcm92aWRlciwgdGhlbWVVcGRhdGVyLCBydWxlc1tpXS5ydWxlcyk7XG4gICAgICAgIG5ld1N0eWxlID0gY29udmVydGVyVXRpbHMucmVtb3ZlU3R5bGUobmV3U3R5bGUsIHJ1bGVzW2ldLnBvc2l0aW9uLnN0YXJ0LCBsYXN0U3RhcnQsIDAsIDAsIDAsICcnKTtcbiAgICAgICovXG4gICAgfSBlbHNlIGlmIChydWxlc1tpXS50eXBlID09ICdtZWRpYScgfHwgcnVsZXNbaV0udHlwZSA9PSAnc3VwcG9ydHMnKSB7XG4gICAgICBuZXdTdHlsZSA9IHByb2Nlc3NTdHlsZXNoZWV0UnVsZXMobmV3U3R5bGUsIHJ1bGVzW2ldLnJ1bGVzLCBsb2NhbFdpdGhCaW5kaW5nUHJvdmlkZXIsIGJsb2NrRGVmc1VwZGF0ZXIsIHRoZW1lVXBkYXRlciwgdGVtcGxhdGVVcmxDb252ZXJ0ZXIsIHJvb3RNb2RlbE5hbWUsIHRlbXBsYXRlTmFtZSk7XG4gICAgfSBlbHNlIGlmIChydWxlc1tpXS50eXBlID09ICdjb21tZW50Jykge1xuICAgICAgLy8gaWdub3JlIGNvbW1lbnRzXG4gICAgfSBlbHNlIGlmIChydWxlc1tpXS50eXBlID09ICdydWxlJykge1xuICAgICAgdmFyIHNlbHMgPSBydWxlc1tpXS5zZWxlY3RvcnM7XG4gICAgICB2YXIgbmV3U2VsID0gXCJcIjtcbiAgICAgIHZhciBmb3VuZEJsb2NrTWF0Y2ggPSBudWxsO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZWxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChuZXdTZWwubGVuZ3RoID4gMCkgbmV3U2VsICs9IFwiLCBcIjtcbiAgICAgICAgdmFyIG1hdGNoID0gc2Vsc1tqXS5tYXRjaCgvXFxbZGF0YS1rby1ibG9jaz0oW14gXSopXFxdLyk7XG4gICAgICAgIGlmIChtYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmIChmb3VuZEJsb2NrTWF0Y2ggIT09IG51bGwgJiYgZm91bmRCbG9ja01hdGNoICE9IG1hdGNoWzFdKSB0aHJvdyBcIkZvdW5kIG11bHRpcGxlIGJsb2NrLW1hdGNoIGF0dHJpYnV0ZSBzZWxlY3RvcnM6IGNhbm5vdCB0cmFuc2xhdGUgaXQgKFwiICsgZm91bmRCbG9ja01hdGNoICsgXCIgdnMgXCIgKyBtYXRjaFsxXSArIFwiKVwiO1xuICAgICAgICAgIGZvdW5kQmxvY2tNYXRjaCA9IG1hdGNoWzFdO1xuICAgICAgICB9XG4gICAgICAgIG5ld1NlbCArPSAnPCEtLSBrbyB0ZXh0OiB0ZW1wbGF0ZU1vZGUgPT1cXCd3eXNpd3lnXFwnID8gXFwnI21haW4td3lzaXd5Zy1hcmVhIFxcJyA6IFxcJ1xcJyAtLT48IS0tIC9rbyAtLT4nICsgc2Vsc1tqXTtcbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZEJsb2NrTWF0Y2gpIHtcbiAgICAgICAgdmFyIGxvb3BQcmVmaXggPSAnPCEtLSBrbyBmb3JlYWNoOiAkcm9vdC5maW5kT2JqZWN0c09mVHlwZSgkZGF0YSwgXFwnJyArIGZvdW5kQmxvY2tNYXRjaCArICdcXCcpIC0tPic7XG4gICAgICAgIHZhciBsb29wUG9zdGZpeCA9ICc8IS0tIC9rbyAtLT4nO1xuICAgICAgICB2YXIgZW5kID0gbGFzdFN0YXJ0O1xuICAgICAgICB2YXIgc3BhY2luZyA9IFwiIFwiO1xuICAgICAgICBpZiAocnVsZXNbaV0uZGVjbGFyYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBpZiAocnVsZXNbaV0uZGVjbGFyYXRpb25zWzBdLnBvc2l0aW9uLnN0YXJ0LmxpbmUgIT0gcnVsZXNbaV0ucG9zaXRpb24uZW5kLmxpbmUpIHtcbiAgICAgICAgICAgIHNwYWNpbmcgPSBcIlxcblwiICsgKG5ldyBBcnJheShydWxlc1tpXS5wb3NpdGlvbi5zdGFydC5jb2wpKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZW5kID0gcnVsZXNbaV0uZGVjbGFyYXRpb25zW3J1bGVzW2ldLmRlY2xhcmF0aW9ucy5sZW5ndGggLSAxXS5wb3NpdGlvbi5lbmQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuZCA9PT0gbnVsbCkgbmV3U3R5bGUgKz0gc3BhY2luZyArIGxvb3BQb3N0Zml4O1xuICAgICAgICBlbHNlIGlmIChlbmQgPT0gbGFzdFN0YXJ0KSBuZXdTdHlsZSA9IGNvbnZlcnRlclV0aWxzLnJlbW92ZVN0eWxlKG5ld1N0eWxlLCBlbmQsIGxhc3RTdGFydCwgMCwgMCwgMCwgc3BhY2luZyArIGxvb3BQb3N0Zml4KTtcbiAgICAgICAgZWxzZSBuZXdTdHlsZSA9IGNvbnZlcnRlclV0aWxzLnJlbW92ZVN0eWxlKG5ld1N0eWxlLCBlbmQsIGxhc3RTdGFydCwgMCwgMCwgMCwgc3BhY2luZyArICd9JyArIHNwYWNpbmcgKyBsb29wUG9zdGZpeCk7XG4gICAgICAgIG5ld1NlbCA9IGxvb3BQcmVmaXggKyBzcGFjaW5nICsgbmV3U2VsLnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxcXFtkYXRhLWtvLWJsb2NrPScgKyBmb3VuZEJsb2NrTWF0Y2ggKyAnXFxcXF0nLCAnZycpLCAnPCEtLSBrbyB0ZXh0OiBcXCcjXFwnK2lkKCkgLS0+JyArIGZvdW5kQmxvY2tNYXRjaCArICc8IS0tIC9rbyAtLT4nKTtcblxuICAgICAgICBibG9ja0RlZnNVcGRhdGVyKGZvdW5kQmxvY2tNYXRjaCwgJycsIHsgY29udGV4dE5hbWU6ICdibG9jaycgfSk7XG4gICAgICB9XG4gICAgICAvLyBUT0RPIG1lbnNjaCB1cGRhdGUgKHVzaW5nIG9yaWdpbmFsIG1lbnNjaCBsaWJyYXJ5IHdlIG5lZWRlZCB0aGlzIGxpbmUsIHdoaWxlIHRoZSBwYXRjaGVkIG9uZSBkb2Vzbid0IG5lZWQgdGhpcyBjb2RlKVxuICAgICAgLy8gbmV3U2VsICs9IFwiIHtcIjtcbiAgICAgIHZhciBsb2NhbEJsb2NrTmFtZSA9IGZvdW5kQmxvY2tNYXRjaCA/IGZvdW5kQmxvY2tNYXRjaCA6IHRlbXBsYXRlTmFtZTtcbiAgICAgIGJpbmRpbmdQcm92aWRlciA9IGxvY2FsV2l0aEJpbmRpbmdQcm92aWRlci5iaW5kKHRoaXMsIGxvY2FsQmxvY2tOYW1lLCAnJyk7XG4gICAgICB2YXIgZWxhYm9yYXRlZFN0eWxlID0gZWxhYm9yYXRlRGVjbGFyYXRpb25zKG5ld1N0eWxlLCBydWxlc1tpXS5kZWNsYXJhdGlvbnMsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBiaW5kaW5nUHJvdmlkZXIpO1xuICAgICAgaWYgKGVsYWJvcmF0ZWRTdHlsZSAhPT0gbnVsbCkgbmV3U3R5bGUgPSBlbGFib3JhdGVkU3R5bGU7XG5cbiAgICAgIG5ld1N0eWxlID0gY29udmVydGVyVXRpbHMucmVtb3ZlU3R5bGUobmV3U3R5bGUsIHJ1bGVzW2ldLnBvc2l0aW9uLnN0YXJ0LCBydWxlc1tpXS5wb3NpdGlvbi5lbmQsIDAsIDAsIDAsIG5ld1NlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiVW5rbm93biBydWxlIHR5cGVcIiwgcnVsZXNbaV0udHlwZSwgXCJ3aGlsZSBwYXJzaW5nIDxzdHlsZT4gcnVsZXNcIik7XG4gICAgfVxuICAgIGxhc3RTdGFydCA9IHJ1bGVzW2ldLnBvc2l0aW9uLnN0YXJ0O1xuICB9XG4gIHJldHVybiBuZXdTdHlsZTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gcHJvY2Vzc1N0eWxlc2hlZXRSdWxlczsiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBjb25zb2xlID0gcmVxdWlyZSgnY29uc29sZScpO1xudmFyIGpzZXAgPSByZXF1aXJlKCdqc2VwJyk7XG5cbmpzZXAuYWRkQmluYXJ5T3AoXCJvclwiLCAxKTtcbmpzZXAuYWRkQmluYXJ5T3AoXCJhbmRcIiwgMik7XG5qc2VwLmFkZEJpbmFyeU9wKFwiZXFcIiwgNik7XG5qc2VwLmFkZEJpbmFyeU9wKFwibmVxXCIsIDYpO1xuanNlcC5hZGRCaW5hcnlPcChcImx0XCIsIDcpO1xuanNlcC5hZGRCaW5hcnlPcChcImx0ZVwiLCA3KTtcbmpzZXAuYWRkQmluYXJ5T3AoXCJndFwiLCA3KTtcbmpzZXAuYWRkQmluYXJ5T3AoXCJndGVcIiwgNyk7XG5cbnZhciBhZGRTbGFzaGVzID0gZnVuY3Rpb24oc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvW1xcXFxcIiddL2csICdcXFxcJCYnKS5yZXBsYWNlKC9cXHUwMDAwL2csICdcXFxcMCcpO1xufTtcblxudmFyIHJlbW92ZVN0eWxlID0gZnVuY3Rpb24oc3R5bGUsIHN0YXJ0UG9zLCBlbmRQb3MsIHNraXBSb3dzLCBzdGFydE9mZnNldCwgZW5kT2Zmc2V0LCBpbnNlcnQpIHtcbiAgdmFyIHN0eWxlUm93cyA9IHN0eWxlLnNwbGl0KFwiXFxuXCIpO1xuICB2YXIgc3RhcnQgPSBzdGFydE9mZnNldDtcbiAgdmFyIGVuZCA9IGVuZE9mZnNldDtcbiAgZm9yICh2YXIgciA9IDEgKyBza2lwUm93czsgciA8IHN0YXJ0UG9zLmxpbmU7IHIrKykgc3RhcnQgKz0gc3R5bGVSb3dzW3IgLSAxIC0gc2tpcFJvd3NdLmxlbmd0aCArIDE7XG4gIHN0YXJ0ICs9IHN0YXJ0UG9zLmNvbDtcbiAgaWYgKGVuZFBvcyAhPT0gbnVsbCkge1xuICAgIGZvciAodmFyIHIyID0gMSArIHNraXBSb3dzOyByMiA8IGVuZFBvcy5saW5lOyByMisrKSBlbmQgKz0gc3R5bGVSb3dzW3IyIC0gMSAtIHNraXBSb3dzXS5sZW5ndGggKyAxO1xuICAgIGVuZCArPSBlbmRQb3MuY29sO1xuICB9IGVsc2UgZW5kICs9IHN0eWxlLmxlbmd0aCArIDE7XG4gIHZhciBuZXdTdHlsZSA9IHN0eWxlLnN1YnN0cigwLCBzdGFydCAtIDEpICsgaW5zZXJ0ICsgc3R5bGUuc3Vic3RyKGVuZCAtIDEpO1xuICByZXR1cm4gbmV3U3R5bGU7XG59O1xuXG52YXIgZXhwcmVzc2lvbkdlbmVyYXRvciA9IGZ1bmN0aW9uKG5vZGUsIGJpbmRpbmdQcm92aWRlciwgZGVmVmFsKSB7XG4gIGZ1bmN0aW9uIG1hcE9wZXJhdG9yKG9wKSB7XG4gICAgc3dpdGNoIChvcCkge1xuICAgICAgY2FzZSAnb3InOlxuICAgICAgICByZXR1cm4gJ3x8JztcbiAgICAgIGNhc2UgJ2FuZCc6XG4gICAgICAgIHJldHVybiAnJiYnO1xuICAgICAgY2FzZSAnbHQnOlxuICAgICAgICByZXR1cm4gJzwnO1xuICAgICAgY2FzZSAnbHRlJzpcbiAgICAgICAgcmV0dXJuICc8PSc7XG4gICAgICBjYXNlICdndCc6XG4gICAgICAgIHJldHVybiAnPic7XG4gICAgICBjYXNlICdndGUnOlxuICAgICAgICByZXR1cm4gJz49JztcbiAgICAgIGNhc2UgJ2VxJzpcbiAgICAgICAgcmV0dXJuICc9PSc7XG4gICAgICBjYXNlICduZXEnOlxuICAgICAgICByZXR1cm4gJyE9JztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBvcDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZW4obm9kZSwgYmluZGluZ1Byb3ZpZGVyLCBsb29rdXBtZW1iZXIsIGRlZlZhbCkge1xuICAgIGlmICh0eXBlb2YgbG9va3VwbWVtYmVyID09ICd1bmRlZmluZWQnKSBsb29rdXBtZW1iZXIgPSB0cnVlO1xuXG4gICAgaWYgKHR5cGVvZiBkZWZWYWwgIT09ICd1bmRlZmluZWQnICYmIG5vZGUudHlwZSAhPT0gXCJJZGVudGlmaWVyXCIgJiYgbm9kZS50eXBlICE9PSBcIk1lbWJlckV4cHJlc3Npb25cIikgY29uc29sZS5sb2coXCJDYW5ub3QgYXBwbHkgZGVmYXVsdCB2YWx1ZSB0byB2YXJpYWJsZSB3aGVuIHVzaW5nIGV4cHJlc3Npb25zXCIpO1xuXG4gICAgaWYgKG5vZGUudHlwZSA9PT0gXCJCaW5hcnlFeHByZXNzaW9uXCIgfHwgbm9kZS50eXBlID09PSBcIkxvZ2ljYWxFeHByZXNzaW9uXCIpIHtcbiAgICAgIHJldHVybiAnKCcgKyBnZW4obm9kZS5sZWZ0LCBiaW5kaW5nUHJvdmlkZXIsIGxvb2t1cG1lbWJlcikgKyAnICcgKyBtYXBPcGVyYXRvcihub2RlLm9wZXJhdG9yKSArICcgJyArIGdlbihub2RlLnJpZ2h0LCBiaW5kaW5nUHJvdmlkZXIsIGxvb2t1cG1lbWJlcikgKyAnKSc7XG4gICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09ICdDYWxsRXhwcmVzc2lvbicpIHtcbiAgICAgIHZhciBhcmdzID0gbm9kZS5hcmd1bWVudHMubWFwKGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgcmV0dXJuIGdlbihuLCBiaW5kaW5nUHJvdmlkZXIsIGxvb2t1cG1lbWJlcik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBnZW4obm9kZS5jYWxsZWUsIGJpbmRpbmdQcm92aWRlciwgbG9va3VwbWVtYmVyKSArICcoJyArIGFyZ3Muam9pbignLCAnKSArICcpJztcbiAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gXCJVbmFyeUV4cHJlc3Npb25cIikge1xuICAgICAgcmV0dXJuIG5vZGUub3BlcmF0b3IgKyBnZW4obm9kZS5hcmd1bWVudCwgYmluZGluZ1Byb3ZpZGVyLCBsb29rdXBtZW1iZXIpO1xuICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09ICdNZW1iZXJFeHByZXNzaW9uJyAmJiBub2RlLmNvbXB1dGVkKSB7XG4gICAgICB0aHJvdyBcIlVuZXhwZWN0ZWQgY29tcHV0ZWQgbWVtYmVyIGV4cHJlc3Npb25cIjtcbiAgICAgIC8vIHJldHVybiBnZW4obm9kZS5vYmplY3QpICsgJ1snICsgZ2VuKG5vZGUucHJvcGVydHkpICsgJ10nO1xuICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09ICdNZW1iZXJFeHByZXNzaW9uJyAmJiAhbm9kZS5jb21wdXRlZCkge1xuICAgICAgdmFyIG1lID0gZ2VuKG5vZGUub2JqZWN0LCBiaW5kaW5nUHJvdmlkZXIsIGZhbHNlKSArICcuJyArIGdlbihub2RlLnByb3BlcnR5LCBiaW5kaW5nUHJvdmlkZXIsIGZhbHNlKTtcbiAgICAgIGlmIChsb29rdXBtZW1iZXIgJiYgbm9kZS5vYmplY3QubmFtZSAhPT0gJ01hdGgnICYmIG5vZGUub2JqZWN0Lm5hbWUgIT09ICdDb2xvcicgJiYgbm9kZS5vYmplY3QubmFtZSAhPT0gJ1V0aWwnKSByZXR1cm4gYmluZGluZ1Byb3ZpZGVyKG1lLCBkZWZWYWwpICsgJygpJztcbiAgICAgIHJldHVybiBtZTtcbiAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gXCJMaXRlcmFsXCIpIHtcbiAgICAgIHJldHVybiBub2RlLnJhdztcbiAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gJ0lkZW50aWZpZXInKSB7XG4gICAgICB2YXIgaWQgPSBub2RlLm5hbWU7XG4gICAgICBpZiAobG9va3VwbWVtYmVyKSByZXR1cm4gYmluZGluZ1Byb3ZpZGVyKGlkLCBkZWZWYWwpICsgJygpJztcbiAgICAgIGVsc2UgcmV0dXJuIGlkO1xuICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSAnQ29uZGl0aW9uYWxFeHByZXNzaW9uJykge1xuICAgICAgcmV0dXJuICcoJyArIGdlbihub2RlLnRlc3QsIGJpbmRpbmdQcm92aWRlciwgbG9va3VwbWVtYmVyKSArICcgPyAnICsgZ2VuKG5vZGUuY29uc2VxdWVudCwgYmluZGluZ1Byb3ZpZGVyLCBsb29rdXBtZW1iZXIpICsgJyA6ICcgKyBnZW4obm9kZS5hbHRlcm5hdGUsIGJpbmRpbmdQcm92aWRlciwgbG9va3VwbWVtYmVyKSArICcpJztcbiAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gJ0NvbXBvdW5kJykge1xuICAgICAgdGhyb3cgXCJTeW50YXggZXJyb3IgaW4gZXhwcmVzc2lvbjogb3BlcmF0b3IgZXhwZWN0ZWQgYWZ0ZXIgXCIgKyBnZW4obm9kZS5ib2R5WzBdLCBiaW5kaW5nUHJvdmlkZXIsIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgXCJGb3VuZCBhbiB1bnN1cHBvcnRlZCBleHByZXNzaW9uIHR5cGU6IFwiICsgbm9kZS50eXBlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBnZW4obm9kZSwgYmluZGluZ1Byb3ZpZGVyLCB1bmRlZmluZWQsIGRlZlZhbCk7XG59O1xuXG52YXIgZXhwcmVzc2lvbkJpbmRpbmcgPSBmdW5jdGlvbihleHByZXNzaW9uLCBiaW5kaW5nUHJvdmlkZXIsIGRlZmF1bHRWYWx1ZSkge1xuICB2YXIgbWF0Y2hlcztcbiAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09ICd1bmRlZmluZWQnICYmIGRlZmF1bHRWYWx1ZSAhPT0gbnVsbCkge1xuICAgIHZhciBjaGVjayA9IGV4cHJlc3Npb24udHJpbSgpLnJlcGxhY2UoL0BcXFsoW15cXF1dKylcXF18QChbYS16QS1aMC05XFwuX10rKVxcYi9nLCAnIyMjdmFyIyMjJyk7XG4gICAgY2hlY2sgPSBjaGVjay5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgXCJcXFxcJCZcIik7XG4gICAgaWYgKGNoZWNrID09ICcjIyN2YXIjIyMnKSBtYXRjaGVzID0gW251bGwsIGRlZmF1bHRWYWx1ZV07XG4gICAgZWxzZSB7XG4gICAgICBjaGVjayA9ICdeJyArIGNoZWNrLnJlcGxhY2UoLyMjI3ZhciMjIy9nLCAnKC4rKScpICsgJyQnO1xuICAgICAgbWF0Y2hlcyA9IGRlZmF1bHRWYWx1ZS50cmltKCkubWF0Y2gobmV3IFJlZ0V4cChjaGVjaykpO1xuICAgICAgaWYgKCFtYXRjaGVzKSB7XG4gICAgICAgIC8vIFRPRE8gdGhyb3cgZXJyb3I/XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ2Fubm90IGZpbmQgbWF0Y2hlc1wiLCBtYXRjaGVzLCBcImZvclwiLCBkZWZhdWx0VmFsdWUsIGV4cHJlc3Npb24sIGNoZWNrLCBleHByZXNzaW9uKTtcbiAgICAgICAgdGhyb3cgXCJDYW5ub3QgZmluZCBkZWZhdWx0IHZhbHVlIGZvciBcIiArIGV4cHJlc3Npb24gKyBcIiBpbiBcIiArIGRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdHJ5IHtcbiAgICB2YXIgdmFycyA9IDA7XG4gICAgdmFyIHJlc3VsdCA9IFwiJ1wiICsgZXhwcmVzc2lvbi5yZXBsYWNlKC9AXFxbKFteXFxdXSspXFxdfEAoW2EtekEtWjAtOVxcLl9dKylcXGJ8KCcpL2csIGZ1bmN0aW9uKG1hdGNoLCBwMSwgcDIsIHAzKSB7XG4gICAgICAvLyBlc2NhcGluZy4uXG4gICAgICBpZiAocDMpIHJldHVybiBcIlxcXFxcIiArIHAzO1xuICAgICAgdmFycysrO1xuICAgICAgdmFyIHZhck5hbWUgPSBwMSB8fCBwMjtcbiAgICAgIHZhciBkZWZWYWw7XG4gICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICBpZiAodHlwZW9mIG1hdGNoZXNbdmFyc10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgZGVmVmFsID0gbWF0Y2hlc1t2YXJzXS50cmltKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJBQlpaWiBDYW5ub3QgZmluZCBkZWZhdWx0IHZhbHVlIGZvclwiLCB2YXJOYW1lLCBcImluXCIsIG1hdGNoZXMsIFwiYXNcIiwgdmFycyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGluIGNhc2Ugd2UgZm91bmQgcDEgd2UgYXJlIGluIGEgQFtzZXF1ZW5jZV0gc28gd2Ugc3RhcnQgYW4gZXhwcmVzc2lvbiBwYXJzZXJcbiAgICAgIGlmIChwMSkge1xuICAgICAgICB2YXIgcGFyc2V0cmVlID0ganNlcChwMSk7XG4gICAgICAgIHZhciBnZW50cmVlID0gZXhwcmVzc2lvbkdlbmVyYXRvcihwYXJzZXRyZWUsIGJpbmRpbmdQcm92aWRlciwgZGVmVmFsKTtcbiAgICAgICAgcmV0dXJuIFwiJytcIiArIGdlbnRyZWUgKyBcIisnXCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gXCInK1wiICsgYmluZGluZ1Byb3ZpZGVyKHZhck5hbWUsIGRlZlZhbCkgKyBcIigpKydcIjtcbiAgICB9KSArIFwiJ1wiO1xuICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC8oXnxbXlxcXFxdKScnXFwrL2csICckMScpLnJlcGxhY2UoL1xcKycnL2csICcnKTtcblxuICAgIGlmICh2YXJzID09PSAwICYmIHJlc3VsdCAhPT0gJ2ZhbHNlJyAmJiByZXN1bHQgIT09ICd0cnVlJykge1xuICAgICAgY29uc29sZS5lcnJvcihcIlVuZXhwZWN0ZWQgZXhwcmVzc2lvbiB3aXRoIG5vIHZhbGlkIEB2YXJpYWJsZSByZWZlcmVuY2VzXCIsIGV4cHJlc3Npb24pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgXCJFeGNlcHRpb24gcGFyc2luZyBleHByZXNzaW9uIFwiICsgZXhwcmVzc2lvbiArIFwiIFwiICsgZTtcbiAgfVxufTtcblxudmFyIGNvbmRpdGlvbkJpbmRpbmcgPSBmdW5jdGlvbihjb25kaXRpb24sIGJpbmRpbmdQcm92aWRlcikge1xuICB2YXIgcGFyc2V0cmVlID0ganNlcChjb25kaXRpb24pO1xuICB2YXIgZ2VudHJlZSA9IGV4cHJlc3Npb25HZW5lcmF0b3IocGFyc2V0cmVlLCBiaW5kaW5nUHJvdmlkZXIpO1xuICByZXR1cm4gZ2VudHJlZTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGRTbGFzaGVzOiBhZGRTbGFzaGVzLFxuICByZW1vdmVTdHlsZTogcmVtb3ZlU3R5bGUsXG4gIGNvbmRpdGlvbkJpbmRpbmc6IGNvbmRpdGlvbkJpbmRpbmcsXG4gIGV4cHJlc3Npb25CaW5kaW5nOiBleHByZXNzaW9uQmluZGluZ1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gVGhpcyBpcyBjb21wbGV4IGNvZGUgdG8gaGFuZGxlIFwibGl2ZVwiIG1vZGVsIGluc3RydW1lbnRhdGlvbiBhbmQgZGVwZW5kZW5jeSB0cmFja2luZy5cbi8vIFRoaXMgYWRkcyBfd3JhcCBhbmQgX3Vud3JhcCBtZXRob2RzIHRvIHRoZSBtb2RlbCBhbmQgYWxzbyBpbnN0cnVtZW50IHRoZSBibG9jayBsaXN0IHNvIHRvIGF1dG9tYXRpY2FsbHlcbi8vIHdyYXAvdXB3cmFwIG9iamVjdHMgb24gc2ltcGxlIGFycmF5IG1ldGhvZHMgKHB1c2gsIHNwbGljZSlcblxudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xudmFyIGtvd3JhcCA9IHJlcXVpcmUoXCJrbm9ja291dC53cmFwXCIpO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcblxudmFyIF9nZXRPcHRpb25zT2JqZWN0ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICB2YXIgb3B0aW9uc0NvdXBsZXMgPSBvcHRpb25zLnNwbGl0KCd8Jyk7XG4gIHZhciBvcHRzID0ge307XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9uc0NvdXBsZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgb3B0ID0gb3B0aW9uc0NvdXBsZXNbaV0uc3BsaXQoJz0nKTtcbiAgICBvcHRzW29wdFswXV0gPSBvcHQubGVuZ3RoID4gMSA/IG9wdFsxXSA6IG9wdFswXTtcbiAgfVxuICByZXR1cm4gb3B0cztcbn07XG5cbi8vIGdlbmVyYXRlIGEgY29tcHV0ZWQgdmFyaWFibGUgaGFuZGxpbmcgdGhlIGZhbGxiYWNrIHRvIHRoZW1lIHZhcmlhYmxlXG52YXIgX21ha2VDb21wdXRlZCA9IGZ1bmN0aW9uKHRhcmdldCwgZGVmLCBudWxsSWZFcXVhbCwgc2NoZW1lU2VsZWN0b3IsIHRoZW1lUGF0aCwgdGhlbWVzKSB7XG4gIHZhciByZXMgPSBrby5jb21wdXRlZCh7XG4gICAgJ3JlYWQnOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB2YWwgPSB0YXJnZXQoKTtcbiAgICAgIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICAgICAgdmFyIHNjaGVtZSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoc2NoZW1lU2VsZWN0b3IpO1xuICAgICAgICBpZiAodHlwZW9mIHNjaGVtZSA9PSAndW5kZWZpbmVkJyB8fCBzY2hlbWUgPT0gJ2N1c3RvbScpIHtcbiAgICAgICAgICByZXR1cm4ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShkZWYpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGVtZXNbc2NoZW1lXVt0aGVtZVBhdGhdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgIH0sXG4gICAgJ3dyaXRlJzogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBzY2hlbWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHNjaGVtZVNlbGVjdG9yKTtcbiAgICAgIHZhciBkZWZWYWw7XG4gICAgICBpZiAodHlwZW9mIHNjaGVtZSA9PSAndW5kZWZpbmVkJyB8fCBzY2hlbWUgPT0gJ2N1c3RvbScpIHtcbiAgICAgICAgZGVmVmFsID0ga28udXRpbHMucGVla09ic2VydmFibGUoZGVmKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZlZhbCA9IHRoZW1lc1tzY2hlbWVdW3RoZW1lUGF0aF07XG4gICAgICB9XG5cbiAgICAgIGlmICghIW51bGxJZkVxdWFsKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBkZWZWYWwpIHRhcmdldChudWxsKTtcbiAgICAgICAgZWxzZSB0YXJnZXQodmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBrby51dGlscy5wZWVrT2JzZXJ2YWJsZSh0YXJnZXQpO1xuICAgICAgICBpZiAodmFsdWUgIT0gZGVmVmFsIHx8IGN1cnJlbnQgIT09IG51bGwpIHRhcmdldCh2YWx1ZSk7XG4gICAgICB9XG5cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzO1xufTtcblxudmFyIF9uZXh0VmFyaWFudEZ1bmN0aW9uID0gZnVuY3Rpb24oa28sIHByb3AsIHZhcmlhbnRzKSB7XG4gIHZhciBjdXJyZW50VmFsdWUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHByb3ApO1xuICB2YXIgdmFyaWFudFZhbHVlO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmFyaWFudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXJpYW50VmFsdWUgPSBrby51dGlscy5wZWVrT2JzZXJ2YWJsZSh2YXJpYW50c1tpXSk7XG4gICAgaWYgKHZhcmlhbnRWYWx1ZSA9PSBjdXJyZW50VmFsdWUpIGJyZWFrO1xuICB9XG5cbiAgaWYgKGkgPT0gdmFyaWFudHMubGVuZ3RoKSB7XG4gICAgY29uc29sZS53YXJuKFwiRGlkbid0IGZpbmQgYSB2YXJpYW50IVwiLCBwcm9wLCBjdXJyZW50VmFsdWUsIHZhcmlhbnRzKTtcbiAgICBpID0gdmFyaWFudHMubGVuZ3RoIC0gMTtcbiAgfVxuXG4gIHZhciBuZXh0VmFyaWFudCA9IGkgKyAxO1xuICBpZiAobmV4dFZhcmlhbnQgPT0gdmFyaWFudHMubGVuZ3RoKSBuZXh0VmFyaWFudCA9IDA7XG4gIHZhciBuZXh0VmFsdWUgPSBrby51dGlscy5wZWVrT2JzZXJ2YWJsZSh2YXJpYW50c1tuZXh0VmFyaWFudF0pO1xuXG4gIHByb3AobmV4dFZhbHVlKTtcbn07XG5cbnZhciBfZ2V0VmFyaWFudHMgPSBmdW5jdGlvbihkZWYpIHtcbiAgdmFyIHZhcmlhbnRQcm9wID0gZGVmLl92YXJpYW50O1xuICB2YXIgdmFyaWFudE9wdGlvbnM7XG4gIGlmICh0eXBlb2YgZGVmW3ZhcmlhbnRQcm9wXSAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIGRlZlt2YXJpYW50UHJvcF0uX3dpZGdldCA9PT0gJ3VuZGVmaW5lZCcgfHwgKHR5cGVvZiBkZWZbdmFyaWFudFByb3BdLl9vcHRpb25zICE9PSAnc3RyaW5nJyAmJiBkZWZbdmFyaWFudFByb3BdLl93aWRnZXQgIT09ICdib29sZWFuJykpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiVW5leHBlY3RlZCB2YXJpYW50IGRlY2xhcmF0aW9uXCIsIHZhcmlhbnRQcm9wLCBkZWZbdmFyaWFudFByb3BdKTtcbiAgICB0aHJvdyBcIlVuZXhwZWN0ZWQgdmFyaWFudCBkZWNsYXJhdGlvbjogY2Fubm90IGZpbmQgcHJvcGVydHkgXCIgKyB2YXJpYW50UHJvcCArIFwiIG9yIGl0cyBfb3B0aW9ucyBzdHJpbmcgYW5kIGl0IGlzIG5vdCBhIGJvb2xlYW5cIjtcbiAgfVxuICAvLyBUT0RPIEkgcmVhZCB0aGUgXCJrZXlzXCIgYnV0IHRoaXMgaXMgbm90IDEwMCUgY29ycmVjdCBiZWNhdXNlIHRoZXkgYXJlIG5vdCBnYXJhbnRlZWQgdG8gYmUgc29ydGVkIGFzIGluIGRlY2xhcmF0aW9uXG4gIGlmICh0eXBlb2YgZGVmW3ZhcmlhbnRQcm9wXS5fb3B0aW9ucyA9PSAnc3RyaW5nJykge1xuICAgIHZhcmlhbnRPcHRpb25zID0gT2JqZWN0LmtleXMoX2dldE9wdGlvbnNPYmplY3QoZGVmW3ZhcmlhbnRQcm9wXS5fb3B0aW9ucykpO1xuICB9IGVsc2Uge1xuICAgIHZhcmlhbnRPcHRpb25zID0gW3RydWUsIGZhbHNlXTtcbiAgfVxuICByZXR1cm4gdmFyaWFudE9wdGlvbnM7XG59O1xuXG52YXIgX21ha2VDb21wdXRlZEZ1bmN0aW9uID0gZnVuY3Rpb24oZGVmLCBkZWZzLCB0aG1zLCBrbywgY29udGVudE1vZGVsLCBpc0NvbnRlbnQsIHQpIHtcbiAgaWYgKHR5cGVvZiBkZWYgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodCkudHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiVE9ETyBFUlJPUiBGb3VuZCBhIG5vbi10eXBlZCBkZWYgXCIsIGRlZiwgdCk7XG4gICAgICB0aHJvdyBcIkZvdW5kIGEgbm9uLXR5cGVkIGRlZiBcIiArIGRlZjtcbiAgICB9XG4gICAgdmFyIHR5cGUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodCkudHlwZSk7XG4gICAgZGVmID0gZGVmc1t0eXBlXTtcbiAgICBpZiAodHlwZW9mIGRlZiAhPT0gJ29iamVjdCcpIGNvbnNvbGUubG9nKFwiVE9ETyBFUlJPUiBGb3VuZCBhIG5vbi1vYmplY3QgZGVmIFwiLCBkZWYsIFwiZm9yXCIsIHR5cGUpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBjb250ZW50TW9kZWwgPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGlzQ29udGVudCAhPSAndW5kZWZpbmVkJyAmJiBpc0NvbnRlbnQpIHtcbiAgICBjb250ZW50TW9kZWwgPSB0O1xuICB9XG5cbiAgdmFyIHNlbGZQYXRoID0gJyRyb290LmNvbnRlbnQoKS4nO1xuXG4gIHZhciBwcCA9IGRlZi5fZ2xvYmFsU3R5bGVzO1xuICBpZiAodHlwZW9mIHBwICE9ICd1bmRlZmluZWQnKVxuICAgIGZvciAodmFyIHAgaW4gcHApXG4gICAgICBpZiAocHAuaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgdmFyIHNjaGVtZVBhdGhPcmlnID0gJyRyb290LmNvbnRlbnQoKS50aGVtZSgpLnNjaGVtZSc7XG4gICAgICAgIHZhciBzY2hlbWVQYXRoLCB2bSwgcGF0aDtcblxuICAgICAgICBpZiAocHBbcF0uc3Vic3RyKDAsIHNlbGZQYXRoLmxlbmd0aCkgPT0gc2VsZlBhdGgpIHtcbiAgICAgICAgICBwYXRoID0gcHBbcF0uc3Vic3RyKHNlbGZQYXRoLmxlbmd0aCk7XG4gICAgICAgICAgdm0gPSBjb250ZW50TW9kZWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgXCJVTkVYUEVDVEVEIGdsb2JhbFN0eWxlIHBhdGggKFwiICsgcHBbcF0gKyBcIikgb3V0c2lkZSBzZWxmUGF0aCAoXCIgKyBzZWxmUGF0aCArIFwiKVwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWVQYXRoT3JpZy5zdWJzdHIoMCwgc2VsZlBhdGgubGVuZ3RoKSA9PSBzZWxmUGF0aCkge1xuICAgICAgICAgIHNjaGVtZVBhdGggPSBzY2hlbWVQYXRoT3JpZy5zdWJzdHIoc2VsZlBhdGgubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIklTIFRISVMgQ09SUkVDVD9cIiwgc2NoZW1lUGF0aE9yaWcsIHNlbGZQYXRoKTtcbiAgICAgICAgICBzY2hlbWVQYXRoID0gc2NoZW1lUGF0aE9yaWc7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2NoZW1lU2VsZWN0b3IgPSB2bTtcblxuICAgICAgICB2YXIgcGF0aFBhcnRzID0gcGF0aC5zcGxpdCgnKCkuJyk7XG4gICAgICAgIHZhciB0aGVtZVBhdGggPSAnJztcbiAgICAgICAgdmFyIHNraXAgPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhQYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZtID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2bSlbcGF0aFBhcnRzW2ldXTtcbiAgICAgICAgICAvLyB1Z2x5IHRoaW5nIHRvIGZpbmQgdGhlIHBhdGggdG8gdGhlIHNjaGVtYSBjb2xvciBwcm9wZXJ0eSAoc29tZXRpbWVzIHdlIGhhdmUgdGhlbWUuYm9keVRoZW1lLCBzb21lIG90aGVyIHdlIGhhdmUgY29udGVudC50aGVtZS5ib2R5VGhlbWUuLi4pXG4gICAgICAgICAgaWYgKHNraXApIHtcbiAgICAgICAgICAgIGlmIChwYXRoUGFydHNbaV0gPT0gJ3RoZW1lJykgc2tpcCA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhlbWVQYXRoLmxlbmd0aCA+IDApIHRoZW1lUGF0aCArPSAnLic7XG4gICAgICAgICAgICB0aGVtZVBhdGggKz0gcGF0aFBhcnRzW2ldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzY2hlbWVQYXJ0cyA9IHNjaGVtZVBhdGguc3BsaXQoJygpLicpO1xuICAgICAgICBmb3IgKHZhciBpMyA9IDA7IGkzIDwgc2NoZW1lUGFydHMubGVuZ3RoOyBpMysrKSB7XG4gICAgICAgICAgc2NoZW1lU2VsZWN0b3IgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHNjaGVtZVNlbGVjdG9yKVtzY2hlbWVQYXJ0c1tpM11dO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG51bGxJZkVxdWFsID0gdHJ1ZTtcbiAgICAgICAgdmFyIHRQYXJ0cyA9IHAuc3BsaXQoJy4nKTtcbiAgICAgICAgdmFyIHRhcmdldCA9IHQ7XG4gICAgICAgIGZvciAodmFyIGkyID0gMDsgaTIgPCB0UGFydHMubGVuZ3RoOyBpMisrKSB7XG4gICAgICAgICAgdGFyZ2V0ID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh0YXJnZXQpW3RQYXJ0c1tpMl1dO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFrby5pc09ic2VydmFibGUodGFyZ2V0KSkgdGhyb3cgXCJVbmV4cGVjdGVkIG5vbiBvYnNlcnZhYmxlIHRhcmdldCBcIiArIHAgKyBcIi9cIiArIHRoZW1lUGF0aDtcblxuICAgICAgICB0YXJnZXQuX2RlZmF1bHRDb21wdXRlZCA9IF9tYWtlQ29tcHV0ZWQodGFyZ2V0LCB2bSwgbnVsbElmRXF1YWwsIHNjaGVtZVNlbGVjdG9yLCB0aGVtZVBhdGgsIHRobXMpO1xuICAgICAgfVxuXG4gIGlmICh0eXBlb2YgZGVmLl92YXJpYW50ICE9ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHBQYXJ0cyA9IGRlZi5fdmFyaWFudC5zcGxpdCgnLicpO1xuICAgIC8vIGxvb2tzIGluIHQgYW5kIG5vdCBjb250ZW50TW9kZWwgYmVjYXVzZSB2YXJpYW50cyBhcmUgZGVjbGFyZWQgb24gc2luZ2xlIGJsb2Nrcy5cbiAgICB2YXIgcFRhcmdldCA9IHQ7XG4gICAgdmFyIHBQYXJlbnQgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHQpO1xuICAgIGZvciAodmFyIGk0ID0gMDsgaTQgPCBwUGFydHMubGVuZ3RoOyBpNCsrKSB7XG4gICAgICBwVGFyZ2V0ID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShwVGFyZ2V0KVtwUGFydHNbaTRdXTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwVGFyZ2V0Ll9kZWZhdWx0Q29tcHV0ZWQgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRm91bmQgdmFyaWFudCBvbiBhIHN0eWxlIHByb3BlcnR5OiBiZXdhcmUgdmFyaWFudHMgc2hvdWxkIGJlIG9ubHkgdXNlZCBvbiBjb250ZW50IHByb3BlcnRpZXMgYmVjYXVzZSB0aGV5IGRvbid0IG1hdGNoIHRoZSB0aGVtZSBmYWxsYmFjayBiZWhhdmlvdXJcIiwgZGVmLl92YXJpYW50KTtcbiAgICAgIHBUYXJnZXQgPSBwVGFyZ2V0Ll9kZWZhdWx0Q29tcHV0ZWQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcFRhcmdldCA9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc29sZS5sb2coXCJFUlJPUiBsb29raW5nIGZvciB2YXJpYW50IHRhcmdldFwiLCBkZWYuX3ZhcmlhbnQsIHQpO1xuICAgICAgdGhyb3cgXCJFUlJPUiBsb29raW5nIGZvciB2YXJpYW50IHRhcmdldCBcIiArIGRlZi5fdmFyaWFudDtcbiAgICB9XG4gICAgcFBhcmVudC5fbmV4dFZhcmlhbnQgPSBfbmV4dFZhcmlhbnRGdW5jdGlvbi5iaW5kKHBUYXJnZXQsIGtvLCBwVGFyZ2V0LCBfZ2V0VmFyaWFudHMoZGVmKSk7XG4gIH1cblxuICBmb3IgKHZhciBwcm9wMiBpbiBkZWYpXG4gICAgaWYgKGRlZi5oYXNPd25Qcm9wZXJ0eShwcm9wMikpIHtcbiAgICAgIHZhciB2YWwgPSBkZWZbcHJvcDJdO1xuICAgICAgaWYgKHR5cGVvZiB2YWwgPT0gJ29iamVjdCcgJiYgdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwuX2NvbnRleHQgIT0gJ3VuZGVmaW5lZCcgJiYgdmFsLl9jb250ZXh0ID09ICdibG9jaycpIHtcbiAgICAgICAgdmFyIHByb3BWbSA9IGNvbnRlbnRNb2RlbFtwcm9wMl0oKTtcbiAgICAgICAgdmFyIG5ld1ZtID0gX21ha2VDb21wdXRlZEZ1bmN0aW9uKGRlZnNbcHJvcDJdLCBkZWZzLCB0aG1zLCBrbywgY29udGVudE1vZGVsLCBpc0NvbnRlbnQsIHByb3BWbSk7XG4gICAgICAgIHRbcHJvcDJdKG5ld1ZtKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PSAnb2JqZWN0JyAmJiB2YWwgIT09IG51bGwgJiYgdmFsLnR5cGUgPT0gJ2Jsb2NrcycpIHtcbiAgICAgICAgdmFyIG1haW5WbSA9IGNvbnRlbnRNb2RlbFtwcm9wMl0oKTtcbiAgICAgICAgdmFyIGJsb2Nrc1ZtID0gbWFpblZtLmJsb2NrcygpO1xuICAgICAgICB2YXIgb2xkQmxvY2ssIGJsb2NrVHlwZSwgbmV3QmxvY2s7XG4gICAgICAgIGZvciAodmFyIGliID0gMDsgaWIgPCBibG9ja3NWbS5sZW5ndGg7IGliKyspIHtcbiAgICAgICAgICBvbGRCbG9jayA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoYmxvY2tzVm1baWJdKTtcbiAgICAgICAgICBibG9ja1R5cGUgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKG9sZEJsb2NrLnR5cGUpO1xuICAgICAgICAgIG5ld0Jsb2NrID0gX21ha2VDb21wdXRlZEZ1bmN0aW9uKGRlZnNbYmxvY2tUeXBlXSwgZGVmcywgdGhtcywga28sIGNvbnRlbnRNb2RlbCwgaXNDb250ZW50LCBvbGRCbG9jayk7XG4gICAgICAgICAgYmxvY2tzVm1baWJdKG5ld0Jsb2NrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBibG9ja3NPYnMgPSBtYWluVm0uYmxvY2tzO1xuXG4gICAgICAgIF9hdWdtZW50QmxvY2tzT2JzZXJ2YWJsZShibG9ja3NPYnMsIF9ibG9ja0luc3RydW1lbnRGdW5jdGlvbi5iaW5kKG1haW5WbSwgdW5kZWZpbmVkLCBkZWZzLCB0aG1zLCBrbywgdW5kZWZpbmVkLCBjb250ZW50TW9kZWwsIGlzQ29udGVudCkpO1xuXG4gICAgICAgIGNvbnRlbnRNb2RlbFtwcm9wMl0uX3dyYXAgPSBfbWFrZUJsb2Nrc1dyYXAuYmluZChjb250ZW50TW9kZWxbcHJvcDJdLCBibG9ja3NPYnMuX2luc3RydW1lbnRCbG9jayk7XG4gICAgICAgIGNvbnRlbnRNb2RlbFtwcm9wMl0uX3Vud3JhcCA9IF91bndyYXAuYmluZChjb250ZW50TW9kZWxbcHJvcDJdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgcmV0dXJuIHQ7XG59O1xuXG52YXIgX2F1Z21lbnRCbG9ja3NPYnNlcnZhYmxlID0gZnVuY3Rpb24oYmxvY2tzT2JzLCBpbnN0cnVtZW50KSB7XG4gIGJsb2Nrc09icy5faW5zdHJ1bWVudEJsb2NrID0gaW5zdHJ1bWVudDtcbiAgaWYgKHR5cGVvZiBibG9ja3NPYnMub3JpZ1B1c2ggPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBibG9ja3NPYnMub3JpZ1B1c2ggPSBibG9ja3NPYnMucHVzaDtcbiAgICBibG9ja3NPYnMucHVzaCA9IF9tYWtlUHVzaC5iaW5kKGJsb2Nrc09icyk7XG4gICAgYmxvY2tzT2JzLm9yaWdTcGxpY2UgPSBibG9ja3NPYnMuc3BsaWNlO1xuICAgIGJsb2Nrc09icy5zcGxpY2UgPSBfbWFrZVNwbGljZS5iaW5kKGJsb2Nrc09icyk7XG4gIH1cbn07XG5cbnZhciBfbWFrZUJsb2Nrc1dyYXAgPSBmdW5jdGlvbihpbnN0cnVtZW50LCBpbnB1dE1vZGVsKSB7XG4gIHZhciBtb2RlbCA9IGtvLnRvSlMoaW5wdXRNb2RlbCk7XG4gIHZhciBpbnB1dCA9IG1vZGVsLmJsb2NrcztcbiAgbW9kZWwuYmxvY2tzID0gW107XG4gIHZhciByZXMgPSBrb3dyYXAuZnJvbUpTKG1vZGVsLCB1bmRlZmluZWQsIHRydWUpKCk7XG4gIF9hdWdtZW50QmxvY2tzT2JzZXJ2YWJsZShyZXMuYmxvY2tzLCBpbnN0cnVtZW50KTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBvYmogPSBrby50b0pTKGlucHV0W2ldKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcIl9tYWtlQmxvY2tzV3JhcCBzZXQgYmxvY2tJZFwiLCBvYmouaWQsICdibG9ja18nK2kpO1xuICAgIG9iai5pZCA9ICdibG9ja18nICsgaTtcbiAgICByZXMuYmxvY2tzLnB1c2gob2JqKTtcbiAgfVxuICB0aGlzKHJlcyk7XG59O1xuXG52YXIgX21ha2VQdXNoID0gZnVuY3Rpb24oKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgdGhyb3cgXCJBcnJheSBwdXNoIHdpdGggbXVsdGlwbGUgYXJndW1lbnRzIG5vdCBpbXBsZW1lbnRlZFwiO1xuICAvLyB1bndyYXAgb2JzZXJ2YWJsZSBibG9ja3MsIG90aGVyd2lzZSB2aXNpYmlsaXR5IChkZXBlbmRlbmN5KSBoYW5kbGluZyBicmVha3NcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGtvLmlzT2JzZXJ2YWJsZShhcmd1bWVudHNbMF0pKSB7XG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0uX3Vud3JhcCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhcmd1bWVudHNbMF0gPSBhcmd1bWVudHNbMF0uX3Vud3JhcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIldBUk46IHB1c2hpbmcgb2JzZXJ2YWJsZSB3aXRoIG5vIF91bndyYXAgZnVuY3Rpb24gKFRPRE8gcmVtb3ZlIG1lLCBleHBlY3RlZCBjb25kaXRpb24pXCIpO1xuICAgIH1cbiAgfVxuICBpZiAoIWtvLmlzT2JzZXJ2YWJsZShhcmd1bWVudHNbMF0pKSB7XG4gICAgdmFyIGluc3RydW1lbnRlZCA9IHRoaXMuX2luc3RydW1lbnRCbG9jayhhcmd1bWVudHNbMF0pO1xuICAgIHJldHVybiB0aGlzLm9yaWdQdXNoLmFwcGx5KHRoaXMsIFtpbnN0cnVtZW50ZWRdKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5vcmlnUHVzaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG59O1xuXG52YXIgX21ha2VTcGxpY2UgPSBmdW5jdGlvbigpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAzKSB0aHJvdyBcIkFycmF5IHNwbGljZSB3aXRoIG11bHRpcGxlIG9iamVjdHMgbm90IGltcGxlbWVudGVkXCI7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBrby5pc09ic2VydmFibGUoYXJndW1lbnRzWzJdKSkge1xuICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzJdLl91bndyYXAgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYXJndW1lbnRzWzJdID0gYXJndW1lbnRzWzJdLl91bndyYXAoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJXQVJOOiBzcGxpY2luZyBvYnNlcnZhYmxlIHdpdGggbm8gX3Vud3JhcCBmdW5jdGlvbiAoVE9ETyByZW1vdmUgbWUsIGV4cGVjdGVkIGNvbmRpdGlvbilcIik7XG4gICAgfVxuICB9XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMiAmJiAha28uaXNPYnNlcnZhYmxlKGFyZ3VtZW50c1syXSkpIHtcbiAgICB2YXIgaW5zdHJ1bWVudGVkID0gdGhpcy5faW5zdHJ1bWVudEJsb2NrKGFyZ3VtZW50c1syXSk7XG4gICAgcmV0dXJuIHRoaXMub3JpZ1NwbGljZS5hcHBseSh0aGlzLCBbYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0sIGluc3RydW1lbnRlZF0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0aGlzLm9yaWdTcGxpY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxufTtcblxuLy8gZGVmLCBkZWZzIGFuZCB0aGVtZXMgYXJlIGJvdW5kIGluIFwiX21vZGVsSW5zdHJ1bWVudFwiIHdoaWxlIHRoZSBuZXh0IHBhcmFtZXRlcnMgYXJlIGV4cG9zZWQgYnkgdGhpcyBtb2R1bGVcbnZhciBfYmxvY2tJbnN0cnVtZW50RnVuY3Rpb24gPSBmdW5jdGlvbihkZWYsIGRlZnMsIHRoZW1lcywga25vY2tvdXQsIHNlbGYsIG1vZGVsQ29udGVudCwgaXNDb250ZW50LCBzZWxmMikge1xuICAvLyB1Z2x5OiBzb21ldGltZXMgd2UgaGF2ZSB0byBiaW5kIGNvbnRlbnQgYnV0IG5vdCBzZWxmLCBzbyB3ZSByZXBlYXQgc2VsZiBhdCB0aGUgZW5kIGFzIFwic2VsZjJcIlxuICBpZiAodHlwZW9mIHNlbGYgPT0gJ3VuZGVmaW5lZCcpIHNlbGYgPSBzZWxmMjtcblxuICB2YXIgY29tcHV0ZWRGdW5jdGlvbnM7XG4gIGNvbXB1dGVkRnVuY3Rpb25zID0ge1xuICAgICcnOiBfbWFrZUNvbXB1dGVkRnVuY3Rpb24uYmluZChzZWxmLCBkZWYsIGRlZnMsIHRoZW1lcywga25vY2tvdXQsIG1vZGVsQ29udGVudCwgaXNDb250ZW50KVxuICB9O1xuXG4gIHZhciByZXMgPSBrb3dyYXAuZnJvbUpTKHNlbGYsIGNvbXB1dGVkRnVuY3Rpb25zLCB0cnVlKTtcbiAgcmVzLl91bndyYXAgPSBfdW53cmFwLmJpbmQocmVzKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbnZhciBfd3JhcCA9IGZ1bmN0aW9uKGluc3RydW1lbnQsIHVud3JhcHBlZCkge1xuICB2YXIgbmV3Q29udGVudCA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoaW5zdHJ1bWVudChrbywgdW53cmFwcGVkLCB1bmRlZmluZWQsIHRydWUpKTtcbiAgdGhpcyhuZXdDb250ZW50KTtcbn07XG5cbnZhciBfdW53cmFwID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBrby50b0pTKHRoaXMpO1xufTtcblxudmFyIF9tb2RlbEluc3RydW1lbnQgPSBmdW5jdGlvbihtb2RlbCwgbW9kZWxEZWYsIGRlZnMpIHtcbiAgdmFyIF9pbnN0cnVtZW50ID0gX2Jsb2NrSW5zdHJ1bWVudEZ1bmN0aW9uLmJpbmQodW5kZWZpbmVkLCBtb2RlbERlZiwgZGVmcywgZGVmc1sndGhlbWVzJ10pO1xuICB2YXIgcmVzID0gX2luc3RydW1lbnQoa28sIG1vZGVsLCB1bmRlZmluZWQsIHRydWUpO1xuICAvLyByZXMuX2luc3RydW1lbnQgPSBfaW5zdHJ1bWVudDtcbiAgcmVzLl93cmFwID0gX3dyYXAuYmluZChyZXMsIF9pbnN0cnVtZW50KTtcbiAgcmVzLl91bndyYXAgPSBfdW53cmFwLmJpbmQocmVzKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gX21vZGVsSW5zdHJ1bWVudDsiLCIvLyBTd2l0Y2ggdG8gbW9iaWxlL2Rlc2t0b3Agdmlld1xuZnVuY3Rpb24gcmVuZGVyVmlldygpe1xuXHR2YXIgc2lkZWJhclRvZ2dsZSA9ICc8ZGl2IGNsYXNzPVwici1zaWRlYmFyLXRvZ2dsZVwiPjxpIGNsYXNzPVwiZmEgZmEtc3BpbiBmYS1nZWFyXCI+PC9pPjwvZGl2Pic7XG5cdGlmKCQod2luZG93KS53aWR0aCgpIDwgOTgwKXtcblx0XHQkKCcuY29sbGFwc2Utc2lkZWJhcicpLnByZXBlbmRUbygnYm9keScpO1xuXHRcdCQoJy5sLXNpZGViYXInKS5jc3MoJ3dpZHRoJywgJzAnKTtcblx0XHQkKCdib2R5JykuYWRkQ2xhc3MoJ21vYmlsZS12aWV3Jyk7XG5cdFx0JCgnLnItc2lkZWJhcicpLm5vdCgnLnItc2lkZWJhci1wbGFjZWhvbGRlcicpLnByZXBlbmQoc2lkZWJhclRvZ2dsZSk7XG5cdH0gZWxzZSB7XG5cdFx0JCgnLmNvbGxhcHNlLXNpZGViYXInKS5wcmVwZW5kVG8oJy5oZWFkZXIgPiAuY29sOmZpcnN0LWNoaWxkJyk7XG5cdFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKCdtb2JpbGUtdmlldycpO1xuXHRcdCQoJy5yLXNpZGViYXInKS5maW5kKCcuci1zaWRlYmFyLXRvZ2dsZScpLnJlbW92ZSgpO1xuXHR9XG59XG5cbi8vIFRvZ2dsZSBkZWxldGUgYWxsIGJ1dHRvblxuZnVuY3Rpb24gZGVsZXRlQ2hlY2tlZEJ1dHRvbigpe1xuXHRpZigkKCcucmVtb3ZlLWNoZWNrYm94ZXMgLnJlbW92ZS1jaGVja2JveC1wbGFjZWhvbGRlcicpLmlzKCc6Y2hlY2tlZCcpKXtcbiAgICAkKCcuZGVsZXRlLWNoZWNrZWQnKS5zaG93KCk7XG4gIH0gZWxzZSB7XG4gICAgJCgnLmRlbGV0ZS1jaGVja2VkJykuaGlkZSgpO1xuICB9XG59XG5cbi8vIFRvZ2dsZSBhbGwgY2hlY2tib3hlcyBzdGF0dXNcbmZ1bmN0aW9uIHRvZ2dsZUFsbENoZWNrYm94ZXNTdGF0dXMoKXtcblx0dmFyIGFsbCA9ICQoJy5yZW1vdmUtY2hlY2tib3hlcyAucmVtb3ZlLWNoZWNrYm94LXBsYWNlaG9sZGVyJykubGVuZ3RoO1xuXHR2YXIgY2hlY2tlZCA9ICQoJy5yZW1vdmUtY2hlY2tib3hlcyAucmVtb3ZlLWNoZWNrYm94LXBsYWNlaG9sZGVyOmNoZWNrZWQnKS5sZW5ndGg7XG5cdHZhciB0YXJnZXRDaGVja2JveCA9ICQoJy5hbGwtcmVtb3ZlLWNoZWNrYm94ZXMnKTtcblx0IGlmIChjaGVja2VkID09IDApIHtcblx0XHR0YXJnZXRDaGVja2JveC5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuXHRcdHRhcmdldENoZWNrYm94LmNzcygnb3BhY2l0eScsICcxJyk7XG5cdH0gZWxzZSBpZiAoY2hlY2tlZCA+IDAgJiYgY2hlY2tlZCA8IGFsbCl7XG5cdFx0dGFyZ2V0Q2hlY2tib3gucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuXHRcdHRhcmdldENoZWNrYm94LmNzcygnb3BhY2l0eScsICcwLjUnKTtcblx0fSBlbHNlIGlmIChhbGwgPD0gY2hlY2tlZCkge1xuXHRcdHRhcmdldENoZWNrYm94LnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcblx0XHR0YXJnZXRDaGVja2JveC5jc3MoJ29wYWNpdHknLCAnMScpO1xuXHR9XG59XG5cbi8vIFJlc2l6ZSB0ZW1wbGF0ZSBwcmV2aWV3c1xuZnVuY3Rpb24gcmVzaXplVGVtcGxhdGVzKCl7XG5cdHZhciBjb250ZW50V2lkdGggPSAkKFwiLm0tY29udGVudFwiKS53aWR0aCgpO1xuXG5cdGlmIChjb250ZW50V2lkdGggPCA3MTUpIHtcblx0XHQkKFwiLnRlbXBsYXRlLCAudGVtcGxhdGUtcGxhY2Vob2xkZXJcIikuY3NzKHtcIndpZHRoXCI6IFwiMTAwJVwiLCBcIm1pbi13aWR0aFwiOiBcIjBcIn0pO1xuXHR9XG5cdGVsc2UgaWYgKGNvbnRlbnRXaWR0aCA8IDkwMCkge1xuXHRcdCQoXCIudGVtcGxhdGUsIC50ZW1wbGF0ZS1wbGFjZWhvbGRlclwiKS5jc3Moe1wid2lkdGhcIjogXCJjYWxjKDMzLjMlIC0gMTVweClcIiwgXCJtaW4td2lkdGhcIjogXCIyMzBweFwifSk7XG5cdH1cblx0ZWxzZSBpZiAoY29udGVudFdpZHRoIDwgMTE4MCkge1xuXHRcdCQoXCIudGVtcGxhdGUsIC50ZW1wbGF0ZS1wbGFjZWhvbGRlclwiKS5jc3MoXCJ3aWR0aFwiLCBcImNhbGMoMjUlIC0gMTVweClcIik7XG5cdH0gXG5cdGVsc2UgaWYgKGNvbnRlbnRXaWR0aCA8IDE0MTQpIHtcblx0XHQkKFwiLnRlbXBsYXRlLCAudGVtcGxhdGUtcGxhY2Vob2xkZXJcIikuY3NzKFwid2lkdGhcIiwgXCJjYWxjKDIwJSAtIDE1cHgpXCIpO1xuXHR9XG5cdGVsc2UgaWYoIGNvbnRlbnRXaWR0aCA+IDE0MTQpIHtcblx0XHQkKFwiLnRlbXBsYXRlLCAudGVtcGxhdGUtcGxhY2Vob2xkZXJcIikuY3NzKFwid2lkdGhcIiwgXCJjYWxjKDE2LjYlIC0gMTVweClcIik7XHRcblx0fVxufVxuXG4vLyBDaGFuZ2UgdGFibGUgdG8gaG9yaXpvbnRhbGx5IHNjcm9sbGFibGUgd2hlbiBpdCBnZXRzIHRvbyB3aWRlXG5mdW5jdGlvbiB0YWJsZVNjcm9sbGFibGUoKXtcblx0JCgnLnRhYmxlLXJlc3BvbnNpdmUnKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0aWYoJCh0aGlzKS53aWR0aCgpID4gJCgnLm0tY29udGVudCAuY29udGVudCcpLndpZHRoKCkpe1xuXHRcdFx0JCh0aGlzKS5hZGRDbGFzcygndGFibGUtc2Nyb2xsYWJsZScpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCd0YWJsZS1zY3JvbGxhYmxlJyk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLy8gR3JheSBvdXQgdGFibGUgY29sdW1ucyAoZm9yIGFkbWlucy91c2VycylcbmZ1bmN0aW9uIGdyYXlvdXRDb2x1bW4oKXtcblx0JC5lYWNoKCQoJ3RhYmxlIHRoZWFkIC5ncmF5ZWQtb3V0JyksIGZ1bmN0aW9uKCl7XG5cdFx0dmFyIGNvbHVtbiA9ICQodGhpcyk7XG5cdFx0dmFyIGNvbHVtbkluZGV4ID0gJCh0aGlzKS5pbmRleCgpO1xuXHRcdHZhciBjb2x1bW5UYWJsZSA9IGNvbHVtbi5jbG9zZXN0KCd0YWJsZScpO1xuXHRcdGNvbHVtblRhYmxlLmZpbmQoJ3Rib2R5IHRyJykuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0JCh0aGlzKS5jaGlsZHJlbignOmVxKCcrY29sdW1uSW5kZXgrJyknKS5hZGRDbGFzcygnZ3JheWVkLW91dC1jb250ZW50Jyk7XG5cdFx0fSk7XG5cdH0pO1xufVxuXG4vLyBWYWxpZGF0ZSByZWd1bGFyIGFuZCBlbWFpbCBpbnB1dHMsIGZvcm1zXG52YXIgdmVyaWZ5RW1haWwgPSAkKFwiPGg1IGNsYXNzPSdmb3JtLXRleHQgd2FybmluZy1mZWVkYmFjayc+U2luY2UgcmVwbGllcyB0byB5b3VyIGNhbXBhaWduIHdpbGwgZ28gdG8gdGhpcyBlbWFpbCBhZGRyZXNzLCBsZXQncyB2ZXJpZnkgPGEgaWQ9J3ZlcmlmeS1lbWFpbCc+PHU+dGhpcyBlbWFpbDwvdT48L2E+PC9oNT5cIik7XG52YXIgdmVyaWZ5U3VjY2VzcyA9ICQoXCI8aDUgY2xhc3M9J2Zvcm0tdGV4dCB2YWxpZC1mZWVkYmFjayc+QW4gZW1haWwgaGFzIGJlZW4gc2VudCB0byB0aGlzIGVtYWlsIGFkZHJlc3MuPGJyPiBQbGVhc2UgY2hlY2sgeW91ciBpbmJveCBhbmQgY29uZmlybSB0aGUgJ0Zyb20gRW1haWwnIG9mIHlvdXIgY2FtcGFpZ24uPC9oNT5cIik7XG52YXIgZW1haWxFcnJvciA9ICQoXCI8aDUgY2xhc3M9J2Zvcm0tdGV4dCBpbnZhbGlkLWZlZWRiYWNrJz5QbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzPC9hPjwvaDU+XCIpO1xudmFyIGVtYWlsX3JlZ2V4ID0gL15bYS16QS1aMC05Ll8tXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLDR9JC9pO1xudmFyIGlzSW52YWxpZCA9ICQodGhpcykuc2libGluZ3MoJy5pbnZhbGlkLWZlZWRiYWNrJykubGVuZ3RoO1xudmFyIGlzVmFsaWQgPSAkKHRoaXMpLnNpYmxpbmdzKCcudmFsaWQtZmVlZGJhY2snKS5sZW5ndGg7XG52YXIgaXNXYXJuaW5nID0gJCh0aGlzKS5zaWJsaW5ncygnLndhcm5pbmctZmVlZGJhY2snKS5sZW5ndGg7XG52YXIgRE1BUkMgPSBmYWxzZTtcblxuZnVuY3Rpb24gZW1haWxWYWxpZGF0aW9uKGlkKXtcblx0JCgnIycraWQpLmFkZENsYXNzKCdpcy1pbnZhbGlkJyk7XG5cdGlmKCFpc0ludmFsaWQubGVuZ3RoKXtcblx0XHQkKCcjJytpZCkuc2libGluZ3MoJ2g1LmZvcm0tdGV4dCcpLnJlbW92ZSgpO1xuXHRcdGVtYWlsRXJyb3IuaW5zZXJ0QWZ0ZXIoJCgnIycraWQpKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZWd1bGFyVmFsaWRhdGlvbihpZCl7XG5cdGlmKCQoJyMnK2lkKycucmVxdWlyZWQnKS52YWwoKSA9PSAnJyl7XG5cdFx0JCgnIycraWQpLmFkZENsYXNzKCdpcy1pbnZhbGlkJyk7XG5cdH0gZWxzZSB7XG5cdFx0JCgnIycraWQpLnJlbW92ZUNsYXNzKCdpcy1pbnZhbGlkJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGZvcm0sIHZhbGlkYXRlQnV0dG9uKXtcblx0XHR2YXIgaGFzX2VtcHR5ID0gZmFsc2U7XG4gIFx0Zm9ybS5maW5kKCcucmVxdWlyZWQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghJCh0aGlzKS52YWwoKSB8fCAkKHRoaXMpLmhhc0NsYXNzKCdpcy1pbnZhbGlkJykpIHtcbiAgICAgICBcdHZhbGlkYXRlQnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIGhhc19lbXB0eSA9IHRydWU7IFxuICAgICAgICByZXR1cm4gZmFsc2U7IFxuXHQgICAgfSBcblx0ICB9KTtcblxuICAgaWYgKGhhc19lbXB0eSl7IFxuICAgXHQgIHZhbGlkYXRlQnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICBcdCAgcmV0dXJuIGZhbHNlOyBcbiAgIH0gZWxzZSB7XG4gICBcdFx0dmFsaWRhdGVCdXR0b24ucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlQ2FtcGFpZ25Gb3JtKCl7XG5cdGlmKCQoJyNjYW1wYWlnbk5hbWUnKS5oYXNDbGFzcygnaXMtaW52YWxpZCcpIHx8ICQoJyNjYW1wYWlnblN1YmplY3QnKS5oYXNDbGFzcygnaXMtaW52YWxpZCcpIHx8IFxuXHRcdCEkKCcjZnJvbUVtYWlsJykuaGFzQ2xhc3MoJ2lzLXZhbGlkJykgfHwgXG5cdFx0JCgnI2Zyb21OYW1lJykuaGFzQ2xhc3MoJ2lzLWludmFsaWQnKSB8fCBcblx0XHQhJCgnI3JlcGx5VG9FbWFpbCcpLmhhc0NsYXNzKCdpcy12YWxpZCcpKXtcblx0XHQkKCcjc2VuZC1jYW1wYWlnbicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9IGVsc2Uge1xuXHRcdCQoJyNzZW5kLWNhbXBhaWduJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVTaW1wbGVDYW1wYWlnbkZvcm0oKXtcblx0aWYoJCgnI2Zyb21OYW1lJykuaGFzQ2xhc3MoJ2lzLWludmFsaWQnKSB8fCAkKCcjY2FtcGFpZ25TdWJqZWN0JykuaGFzQ2xhc3MoJ2lzLWludmFsaWQnKSB8fCBcblx0XHQhJCgnI2Zyb21FbWFpbCcpLmhhc0NsYXNzKCdpcy12YWxpZCcpKXtcblx0XHQkKCcjc2VuZC1zaW1wbGUtY2FtcGFpZ24nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXHR9IGVsc2Uge1xuXHRcdCQoJyNzZW5kLXNpbXBsZS1jYW1wYWlnbicpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlVGVtcGxhdGVGb3JtKCl7XG5cdGlmKCQoJyN0ZW1wbGF0ZU5hbWUnKS5oYXNDbGFzcygnaXMtaW52YWxpZCcpIHx8ICQoJyN0ZW1wbGF0ZURlc2MnKS5oYXNDbGFzcygnaXMtaW52YWxpZCcpIHx8ICQoJyN0ZW1wbGF0ZU5hbWUnKS52YWwoKSA9PSAnJyB8fCAkKCcjdGVtcGxhdGVEZXNjJykudmFsKCkgPT0gJycpe1xuXHRcdCQoJyNzYXZlLXRlbXBsYXRlLWNvbmZpcm0nKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSBlbHNlIHtcblx0XHQkKCcjc2F2ZS10ZW1wbGF0ZS1jb25maXJtJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY2xlYXJJbnB1dHMocGF0aCl7XG5cdCQoJ2Zvcm0jJytwYXRoKycgaW5wdXQnKS52YWwoJycpO1xuXHQkKCdmb3JtIycrcGF0aCsnIGlucHV0JykucmVtb3ZlQ2xhc3MoJ2lzLXZhbGlkJyk7XG5cdCQoJ2Zvcm0jJytwYXRoKycgaW5wdXQnKS5yZW1vdmVDbGFzcygnaXMtaW52YWxpZCcpO1xuXHQkKCdmb3JtIycrcGF0aCsnIGlucHV0JykucHJvcCgncmVhZG9ubHknLCBmYWxzZSk7XG5cdCQoJ2Zvcm0jJytwYXRoKycgaW5wdXQnKS5zaWJsaW5ncygnaDUuZm9ybS10ZXh0JykucmVtb3ZlKCk7XG59XG5cblxuLy8gT24gcmVzaXplXG4kKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCl7XG5cdHJlbmRlclZpZXcoKTtcblx0c2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdHRhYmxlU2Nyb2xsYWJsZSgpO1xuXHRcdHJlc2l6ZVRlbXBsYXRlcygpO1xuXHR9LDMwMCk7XG59KTtcblxuLy8gT24gcmVhZHlcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG5cblx0JCgnLm0tY29udGVudCcpLnNjcm9sbChmdW5jdGlvbigpIHtcblx0XHR2YXIgc2Nyb2xsID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcblxuXHQgIGlmICgkKCcjbWFpbi10b29sYm94JykubGVuZ3RoICYmIHNjcm9sbCA+PSA3NSkge1xuXHQgIFx0JCgnI2VkaXQtYXJlYScpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oKXtcblx0ICBcdFx0JCh0aGlzKS5hZGRDbGFzcygnaG92ZXJlZCcpO1xuXHRcdFx0XHQkKCcjbWFpbi10b29sYm94JykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblx0XHRcdH0pO1xuXHQgIH1cblx0fSk7XG5cblx0Z3JheW91dENvbHVtbigpO1xuXHRyZW5kZXJWaWV3KCk7XG5cdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHR0YWJsZVNjcm9sbGFibGUoKTtcblx0XHRyZXNpemVUZW1wbGF0ZXMoKTtcblx0fSwzMDApO1xuXG5cdC8vIENoZWNrIGlmIHNpZGViYXIgc2hvdWxkIGJlIGNvbGxhcHNlZCBvciBub3RcbiAgaWYgKGRvY3VtZW50LmNvb2tpZS5yZXBsYWNlKC8oPzooPzpefC4qO1xccyopc2lkZWJhckNvbGxhcHNlZFxccypcXD1cXHMqKFteO10qKS4qJCl8Xi4qJC8sIFwiJDFcIikgIT09IFwidHJ1ZVwiKSB7XG4gICAgJChcIi5sLXNpZGViYXJcIikuYWRkQ2xhc3MoXCJjb2xsYXBzZWRcIik7XG4gIH1cblxuXHRzZXRUaW1lb3V0KHJlc2l6ZVRlbXBsYXRlcywgMTgwKTtcblxuXHRpZigkKCdib2R5JykuaGFzQ2xhc3MoJ21vYmlsZS12aWV3Jykpe1xuXHRcdCQoJy5sLXNpZGViYXIgLm5hdi1pdGVtID4gLm5hdi1saW5rOm5vdChbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXSksIC5sLXNpZGViYXIgLm5hdi1saW5rLWlubmVyID4gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHQkKCcubC1zaWRlYmFyJykuYWRkQ2xhc3MoJ2NvbGxhcHNlZCcpO1xuXHRcdFx0ZG9jdW1lbnQuY29va2llID0gXCJzaWRlYmFyQ29sbGFwc2VkPWZhbHNlOyBleHBpcmVzPUZyaSwgMzEgRGVjIDk5OTkgMjM6NTk6NTkgR01UXCI7XG5cdFx0fSk7XG5cdH1cblxuXHQkKFwiLmNvbGxhcHNlLXNpZGViYXJcIikub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRpZigkKCcubC1zaWRlYmFyJykuaGFzQ2xhc3MoJ2NvbGxhcHNlZCcpKXtcblx0XHRcdGRvY3VtZW50LmNvb2tpZSA9IFwic2lkZWJhckNvbGxhcHNlZD10cnVlOyBleHBpcmVzPUZyaSwgMzEgRGVjIDk5OTkgMjM6NTk6NTkgR01UXCI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRvY3VtZW50LmNvb2tpZSA9IFwic2lkZWJhckNvbGxhcHNlZD1mYWxzZTsgZXhwaXJlcz1GcmksIDMxIERlYyA5OTk5IDIzOjU5OjU5IEdNVFwiO1xuXHRcdH1cblx0XHQkKFwiLmwtc2lkZWJhclwiKS50b2dnbGVDbGFzcygnY29sbGFwc2VkJyk7XG5cdFx0c2V0VGltZW91dChyZXNpemVUZW1wbGF0ZXMsIDIxMCk7XG5cdH0pO1xuXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuci1zaWRlYmFyLXRvZ2dsZScsIGZ1bmN0aW9uKCl7XG5cdFx0JChcIi5yLXNpZGViYXJcIikudG9nZ2xlQ2xhc3MoJ3Zpc2libGUnKTtcblx0fSk7XG5cblx0Ly8gS2VlcCBuYXYgbGkgZXhwYW5kZWQgYW5kIGFjdGl2ZSBpZiBjaGlsZCBpcyBhY3RpdmU7XG4gIGlmICgkKCcubmF2LWxpbmstaW5uZXInKS5oYXNDbGFzcygnYWN0aXZlJykpeyBcbiAgXHQkKCcubmF2LWxpbmstaW5uZXIuYWN0aXZlJykucGFyZW50cygnLmNvbGxhcHNlJykuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgfVxuXG4gIGlmICgkKCcubmF2LWxpbmsnKS5oYXNDbGFzcygnYWN0aXZlJykpe1xuICBcdCQoJy5uYXYtbGluay5hY3RpdmUnKS5wYXJlbnRzKCcuY29sbGFwc2UnKS5hZGRDbGFzcygnc2hvdycpO1xuICB9XG5cbiAgLy8gU2V0dGluZ3MgbW9kYWwgb3B0XG4gICQoJy5uYXYtdXNlci1zZXR0aW5ncycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0JCgnI3NldHRpbmdzLW1vZGFsJykubW9kYWwoJ3RvZ2dsZScpO1xuXHRcdCQoJyNzZXR0aW5ncy1tb2RhbCAubmF2LWl0ZW0gYScpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdH0pO1xuXG5cdCQoJyNhZGQtc3ViLXVzZXInKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdCQoJyNhZGQtc3ViLXVzZXItdGFibGUnKS5zaG93KCk7XG5cdFx0JCgnI3N1Yi11c2Vycy10YWJsZScpLmhpZGUoKTtcblx0fSk7XG5cblx0JCgnI2FkZC1zdWItdXNlci10YWJsZSBidXR0b25bdHlwZT1cInJlc2V0XCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHQkKCcjYWRkLXN1Yi11c2VyLXRhYmxlJykuaGlkZSgpO1xuXHRcdCQoJyNzdWItdXNlcnMtdGFibGUnKS5zaG93KCk7XG5cdH0pO1xuXG5cdC8vU2hvdyBtYWluLXRvb2xib3ggb25seSB3aGVuIHN0YXJ0ZWQgZWRpdGluZyBcblx0JChcIiNlZGl0LWFyZWFcIikub24oJ2NsaWNrJywgJyonLCBmdW5jdGlvbigpe1xuXHRcdCQoJyNtYWluLXRvb2xib3gnKS5hZGRDbGFzcygndmlzaWJsZScpO1xuXHR9KTtcblxuXHQvL1NpZGViYXIgY2hlY2tib3ggZGVwZW5jeSBmb3IgZHJvcGRvd25zICYgY2FyZXQgcm90YXRlXG5cdCQoXCIuci1zaWRlYmFyIC5jaGVja2JveC1kZXBlbmRlbmN5XCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCl7XG5cdFx0aWYoZXZ0LnRhcmdldC50YWdOYW1lID09ICdJTlBVVCcpe1xuXHRcdFx0aWYoJCh0aGlzKS5jaGlsZHJlbihcIi5mb3JtLWNoZWNrLWlucHV0XCIpLnByb3AoJ2NoZWNrZWQnKSA9PSB0cnVlKSB7XG5cdFx0XHRcdCQodGhpcykuY2xvc2VzdChcIi5jaGVja2JveC1kZXBlbmRlbmN5LWNvbnRhaW5lclwiKS5maW5kKFwiLmNvbGxhcHNlXCIpLmFkZENsYXNzKFwic2hvd1wiKTtcblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KFwiLmNoZWNrYm94LWRlcGVuZGVuY3ktY29udGFpbmVyXCIpLmZpbmQoXCIuY2FyZXQtZHJvcGRvd25cIikuYWRkQ2xhc3MoXCJzaG93LWRyb3Bkb3duXCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KFwiLmNoZWNrYm94LWRlcGVuZGVuY3ktY29udGFpbmVyXCIpLmZpbmQoXCIuY29sbGFwc2VcIikucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoXCIuY2hlY2tib3gtZGVwZW5kZW5jeS1jb250YWluZXJcIikuZmluZChcIi5jYXJldC1kcm9wZG93blwiKS5yZW1vdmVDbGFzcyhcInNob3ctZHJvcGRvd25cIik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblxuXHQkKFwiLnItc2lkZWJhciAuY2hlY2tib3gtZGVwZW5kZW5jeS1jb250YWluZXIgLmNhcmV0LWRyb3Bkb3duXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KFwiLmNoZWNrYm94LWRlcGVuZGVuY3ktY29udGFpbmVyXCIpLmZpbmQoXCIuY29sbGFwc2VcIikudG9nZ2xlQ2xhc3MoXCJzaG93XCIpO1xuXHRcdGlmKCQodGhpcykuaGFzQ2xhc3MoXCJzaG93LWRyb3Bkb3duXCIpKXtcblx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoXCJzaG93LWRyb3Bkb3duXCIpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoXCJzaG93LWRyb3Bkb3duXCIpO1xuXHRcdH1cblx0fSk7XG5cblx0Ly8gQWRqdXN0IHByZXZpZXcgaGVpZ2h0IGZvciBpRnJhbWVcblx0JChcIiNwcmV2aWV3RnJhbWVUb2dnbGVcIikub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRpZighJCh0aGlzKS5oYXNDbGFzcyhcImFjdGl2ZVwiKSl7XG5cdFx0XHQkKFwiI3ByZXZpZXctZnJhbWVcIikuY29udGVudHMoKS5maW5kKCdodG1sJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJyNmZmYnKTtcblx0XHRcdCQoXCIjcHJldmlldy1mcmFtZVwiKS5oZWlnaHQoMTAwMCk7XG5cdFx0XHQkKFwiI3ByZXZpZXctZnJhbWVcIikuY3NzKCdtYXgtaGVpZ2h0JywgJzYzNXB4Jyk7XG5cblx0XHRcdCQoXCIjcHJldmlldy10b29sYmFyXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGlmKCQoJyNmcmFtZS1jb250YWluZXInKS5oYXNDbGFzcygnZGVza3RvcCcpKXtcblx0XHRcdFx0XHQkKFwiI3ByZXZpZXctZnJhbWVcIikuY3NzKCdtYXgtaGVpZ2h0JywgJzYzNXB4Jyk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoJCgnI2ZyYW1lLWNvbnRhaW5lcicpLmhhc0NsYXNzKCd0YWJsZXQnKSl7XG5cdFx0XHRcdFx0JChcIiNwcmV2aWV3LWZyYW1lXCIpLmNzcygnbWF4LWhlaWdodCcsICc1NTVweCcpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCQoJyNmcmFtZS1jb250YWluZXInKS5oYXNDbGFzcygnbW9iaWxlJykpe1xuXHRcdFx0XHRcdCQoXCIjcHJldmlldy1mcmFtZVwiKS5jc3MoJ21heC1oZWlnaHQnLCAnNDY1cHgnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBGaWxlIEV4cGxvcmVyIGNoZWNrIGNoZWNrYm94ZXNcdFxuXHQkKCcjZmlsZS1leHBsb3JlcicpLm9uKCdjbGljaycsICcucmVtb3ZlLWNoZWNrYm94JywgZnVuY3Rpb24oKXtcblx0XHQkKHRoaXMpLm5leHQoKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdHRvZ2dsZUFsbENoZWNrYm94ZXNTdGF0dXMoKTtcblx0XHRkZWxldGVDaGVja2VkQnV0dG9uKCk7XG5cdH0pO1xuXG5cdC8vIFByZXZlbnQgZm9jdXNpbmcgY2hlY2tib3hlc1xuXHQkKCcjZmlsZS1leHBsb3JlcicpLm9uKCdmb2N1cycsICdpbnB1dDpjaGVja2JveCcsIGZ1bmN0aW9uKCl7XG5cdFx0JCh0aGlzKS5ibHVyKCk7XG5cdH0pO1xuXG5cdC8vIFRvZ2dsZSBhbGwgY2hlY2tib3hlc1xuXHQkKCcuYWxsLXJlbW92ZS1jaGVja2JveGVzJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRpZigkKCcucmVtb3ZlLWNoZWNrYm94ZXMgLnJlbW92ZS1jaGVja2JveC1wbGFjZWhvbGRlcicpLmlzKCc6Y2hlY2tlZCcpKXtcblx0XHRcdCQoJy5yZW1vdmUtY2hlY2tib3hlcyAucmVtb3ZlLWNoZWNrYm94LXBsYWNlaG9sZGVyJykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuXHRcdFx0JCgnLnJlbW92ZS1jaGVja2JveGVzIC5yZW1vdmUtY2hlY2tib3gnKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0dG9nZ2xlQWxsQ2hlY2tib3hlc1N0YXR1cygpO1xuXHRcdFx0ZGVsZXRlQ2hlY2tlZEJ1dHRvbigpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCcucmVtb3ZlLWNoZWNrYm94ZXMgLnJlbW92ZS1jaGVja2JveC1wbGFjZWhvbGRlcicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG5cdFx0XHQkKCcucmVtb3ZlLWNoZWNrYm94ZXMgLnJlbW92ZS1jaGVja2JveCcpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHR0b2dnbGVBbGxDaGVja2JveGVzU3RhdHVzKCk7XG5cdFx0XHRkZWxldGVDaGVja2VkQnV0dG9uKCk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBGb3JtcyB2YWxpZGF0aW9uXG5cdCQoJ2J1dHRvblt0eXBlPVwicmVzZXRcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdGNsZWFySW5wdXRzKCQodGhpcykuY2xvc2VzdCgnZm9ybScpLnByb3AoJ2lkJykpO1xuXHR9KTtcblxuXHQkKCdmb3JtI2FkdmFuY2VkLWNhbXBhaWduLWZvcm0gaW5wdXQnKS5vbigna2V5dXAgYmx1cicsIGZ1bmN0aW9uKCl7XG5cdFx0cmVndWxhclZhbGlkYXRpb24oJCh0aGlzKS5wcm9wKCdpZCcpKTtcblx0XHR2YWxpZGF0ZUNhbXBhaWduRm9ybSgpO1xuXHR9KTtcblxuXHQkKCdmb3JtI3NpbXBsZS1jYW1wYWlnbi1mb3JtIGlucHV0Jykub24oJ2tleXVwIGJsdXInLCBmdW5jdGlvbigpe1xuXHRcdHJlZ3VsYXJWYWxpZGF0aW9uKCQodGhpcykucHJvcCgnaWQnKSk7XG5cdFx0dmFsaWRhdGVTaW1wbGVDYW1wYWlnbkZvcm0oKTtcblx0fSk7XG5cblx0JCgnZm9ybSNzYXZlLXRlbXBsYXRlLWZvcm0gaW5wdXQnKS5vbigna2V5dXAgYmx1cicsIGZ1bmN0aW9uKCl7XG5cdFx0cmVndWxhclZhbGlkYXRpb24oJCh0aGlzKS5wcm9wKCdpZCcpKTtcblx0XHR2YWxpZGF0ZVRlbXBsYXRlRm9ybSgpO1xuXHR9KTtcblxuXHQkKCdmb3JtI3NldHRpbmdzLWZvcm0gaW5wdXQnKS5vbigna2V5dXAgYmx1cicsIGZ1bmN0aW9uKCl7XG5cdFx0cmVndWxhclZhbGlkYXRpb24oJCh0aGlzKS5wcm9wKCdpZCcpKTtcblx0XHR2YWxpZGF0ZUZvcm0oJCgnZm9ybSNzZXR0aW5ncy1mb3JtJyksICQoJyNzZXR0aW5ncy1mb3JtLXNhdmUnKSk7XG5cdH0pO1xuXG5cdCQoJ2Zvcm0jZmlyc3QtbG9naW4tYWRkcmVzcy1mb3JtIGlucHV0Jykub24oJ2tleXVwIGJsdXInLCBmdW5jdGlvbigpe1xuXHRcdHJlZ3VsYXJWYWxpZGF0aW9uKCQodGhpcykucHJvcCgnaWQnKSk7XG5cdFx0dmFsaWRhdGVGb3JtKCQoJ2Zvcm0jZmlyc3QtbG9naW4tYWRkcmVzcy1mb3JtJyksICQoJyNmaXJzdC1sb2dpbi1hZGRyZXNzLWZvcm0tc2F2ZScpKTtcblx0fSk7XG5cblx0JCgnI3NhdmUtdGVtcGxhdGUtY2FuY2VsJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRjbGVhcklucHV0cygnc2F2ZS10ZW1wbGF0ZS1mb3JtJyk7XG5cdH0pO1xuXG5cdC8vIENsZWFyIGlucHV0cyBhbmQgc2Nyb2xsIHRvIHRvcFxuXHQkKCcjY2xlYXItaW5wdXRzJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRjbGVhcklucHV0cygnYWR2YW5jZWQtY2FtcGFpZ24tZm9ybScpO1xuXHRcdHZhbGlkYXRlQ2FtcGFpZ25Gb3JtKCk7XG5cdFx0JCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogMCB9LCAnc2xvdycpO1xuXHR9KTtcblxuXHQvLyBWYWxpZGF0ZSBcInJlcGx5IHRvXCIgZW1haWwgYWRkcmVzcyBcblx0JChcIiNyZXBseVRvRW1haWxcIikub24oJ2tleXVwIGJsdXIgY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdGlmKCFlbWFpbF9yZWdleC50ZXN0KCQodGhpcykudmFsKCkpKXtcblx0XHRcdGVtYWlsVmFsaWRhdGlvbigkKHRoaXMpLnByb3AoJ2lkJykpO1xuXHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnaXMtdmFsaWQnKTtcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ2lzLWludmFsaWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnaXMtaW52YWxpZCcpO1xuXHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnaXMtdmFsaWQnKTtcblx0XHRcdCQodGhpcykuc2libGluZ3MoJ2g1LmZvcm0tdGV4dCcpLnJlbW92ZSgpO1xuXHRcdH1cblx0fSk7XG5cblx0Ly8gVmFsaWRhdGUgXCJmcm9tXCIgZW1haWxcblx0JChcIiNmcm9tRW1haWxcIikub24oJ2tleXVwIGJsdXIgY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdGlmKCFlbWFpbF9yZWdleC50ZXN0KCQodGhpcykudmFsKCkpKXtcblx0XHRcdGVtYWlsVmFsaWRhdGlvbigkKHRoaXMpLnByb3AoJ2lkJykpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdpcy1pbnZhbGlkJyk7XG5cdFx0XHRpZiAoIWlzV2FybmluZyAmJiBpc1ZhbGlkKXtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIGlmKCFpc1dhcm5pbmcpIHtcblx0XHRcdFx0JCh0aGlzKS5zaWJsaW5ncygnaDUuZm9ybS10ZXh0JykucmVtb3ZlKCk7XG5cdFx0XHRcdHZlcmlmeUVtYWlsLmluc2VydEFmdGVyKHRoaXMpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQkKCcjdmVyaWZ5LWVtYWlsJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnI2Zyb21FbWFpbCcpLnByb3AoJ3JlYWRvbmx5JywgdHJ1ZSk7XG5cdFx0XHRcdCQodGhpcykucGFyZW50KCkuc2libGluZ3MoJyNmcm9tRW1haWwnKS5hZGRDbGFzcygnaXMtdmFsaWQnKTtcblx0XHRcdFx0JCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygnc21hbGwuZm9ybS10ZXh0JykucmVtb3ZlKCk7XG5cdFx0XHRcdHZlcmlmeUVtYWlsLnJlcGxhY2VXaXRoKHZlcmlmeVN1Y2Nlc3MpO1xuXHRcdFx0XHRpZigkKCdmb3JtI3NpbXBsZS1jYW1wYWlnbi1mb3JtJykubGVuZ3RoKXtcblx0XHRcdFx0XHR2YWxpZGF0ZVNpbXBsZUNhbXBhaWduRm9ybSgpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCQoJ2Zvcm0jYWR2YW5jZWQtY2FtcGFpZ24tZm9ybScpLmxlbmd0aCl7XG5cdFx0XHRcdFx0dmFsaWRhdGVDYW1wYWlnbkZvcm0oKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBETUFSQyBFbWFpbCAoZWRpdCBhY2NvcmRpbmdseSB0byBmaWx0ZXIgcmVxdWlyZWQgZW1haWxzKVxuXHQkKCcjZnJvbUVtYWlsJykub24oJ2JsdXInLCBmdW5jdGlvbigpe1xuXHRcdGlmKERNQVJDID09IGZhbHNlKXtcblx0XHRcdGlmKCQodGhpcykudmFsKCkuaW5kZXhPZignLmNvbScpID4gLTEpe1xuXHRcdFx0XHQkKCcjRE1BUkMtbW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuXHRcdFx0XHRETUFSQyA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn0pO1xuXG4vLyBGaWxlIGV4cGxvcmVyIGtleSBjb250cm9sbFxuJChkb2N1bWVudCkua2V5ZG93bihmdW5jdGlvbihlKXtcbiAgdmFyIGN1cnJlbnRTZWxlY3RlZCA9ICQoJy5leHAtaXRlbS5rZXktc2VsZWN0ZWQnKTtcbiAgaWYoISQoZS50YXJnZXQpLmlzKCdpbnB1dCwgdGV4dGFyZWEsIC5tb2RhbCcpKXtcbiAgICAvLyBLZXl1cFxuICAgIGlmIChlLmtleUNvZGUgPT0gNDAgJiYgIWN1cnJlbnRTZWxlY3RlZC5pcygnOmxhc3QtY2hpbGQnKSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY3VycmVudFNlbGVjdGVkLnJlbW92ZUNsYXNzKCdrZXktc2VsZWN0ZWQnKTtcbiAgICAgIGN1cnJlbnRTZWxlY3RlZC5uZXh0KCkuYWRkQ2xhc3MoJ2tleS1zZWxlY3RlZCcpO1xuICAgICAgaWYoIWN1cnJlbnRTZWxlY3RlZC5sZW5ndGgpe1xuICAgICAgICAkKCcuZXhwLWl0ZW0tY29udGFpbmVyJykuZmluZCgnLmV4cC1pdGVtOmZpcnN0LWNoaWxkJykuYWRkQ2xhc3MoJ2tleS1zZWxlY3RlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBLZXlkb3duXG4gICAgZWxzZSBpZiAoZS5rZXlDb2RlID09IDM4ICYmICFjdXJyZW50U2VsZWN0ZWQuaXMoJzpmaXJzdC1jaGlsZCcpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZighY3VycmVudFNlbGVjdGVkLmxlbmd0aCl7XG4gICAgICAgICQoJy5leHAtaXRlbS1jb250YWluZXInKS5maW5kKCcuZXhwLWl0ZW06Zmlyc3QtY2hpbGQnKS5hZGRDbGFzcygna2V5LXNlbGVjdGVkJyk7XG4gICAgICB9XG4gICAgICBjdXJyZW50U2VsZWN0ZWQucmVtb3ZlQ2xhc3MoJ2tleS1zZWxlY3RlZCcpO1xuICAgICAgY3VycmVudFNlbGVjdGVkLnByZXYoKS5hZGRDbGFzcygna2V5LXNlbGVjdGVkJyk7XG4gICAgfVxuICAgIC8vIEVudGVyXG4gICAgZWxzZSBpZiAoZS5rZXlDb2RlID09IDEzKXtcbiAgICAgIGN1cnJlbnRTZWxlY3RlZC5maW5kKCcubWVkaWEtaXRlbXMtYmxvY2sgZGl2OmZpcnN0LWNoaWxkJykudHJpZ2dlcignY2xpY2snKTtcbiAgICB9XG4gICAgLy8gQmFja1xuICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PSA4KXtcbiAgICAgICQoJy5wYXJlbnQtZm9sZGVyJykudHJpZ2dlcignY2xpY2snKTtcbiAgICB9XG4gICAgLy8gRGVsZXRlXG4gICAgZWxzZSBpZiAoZS5rZXlDb2RlID09IDQ2KXtcbiAgICAgIGN1cnJlbnRTZWxlY3RlZC5maW5kKCcuZGVsZXRlLWl0ZW0nKS50cmlnZ2VyKCdjbGljaycpO1xuICAgIH1cbiAgICAvLyBTcGFjZSAoY2hlY2tib3gpXG4gICAgZWxzZSBpZiAoZS5rZXlDb2RlID09IDMyKXtcbiAgICAgIGN1cnJlbnRTZWxlY3RlZC5maW5kKCcucmVtb3ZlLWNoZWNrYm94JykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgIGlmKGN1cnJlbnRTZWxlY3RlZC5maW5kKCcucmVtb3ZlLWNoZWNrYm94JykubmV4dCgpLnByb3AoJ2NoZWNrZWQnKSA9PSB0cnVlKXtcbiAgICAgICAgY3VycmVudFNlbGVjdGVkLmZpbmQoJy5yZW1vdmUtY2hlY2tib3gnKS5uZXh0KCkucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFNlbGVjdGVkLmZpbmQoJy5yZW1vdmUtY2hlY2tib3gnKS5uZXh0KCkucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIHRvZ2dsZUFsbENoZWNrYm94ZXNTdGF0dXMoKTtcbiAgICAgIGRlbGV0ZUNoZWNrZWRCdXR0b24oKTtcbiAgICB9XG4gICB9XG59KTtcbiIsIi8qanNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5cbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciBjb25zb2xlID0gcmVxdWlyZShcImNvbnNvbGVcIik7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG4vLyAtLS0tLS0tLSBFeHRlbnNpb25zXG4vKipcbiogQ3VzdG9tIEtub2NrT3V0IGhhbmRsZXI6IGhhbmRsZXMga2V5IHByZXNzIGV2ZW50LCB3aGVuIHVzZXIgcHJlc3NlcyBFbnRlciBrZXlcbiovXG5rby5iaW5kaW5nSGFuZGxlcnMuYW55S2V5UHJlc3MgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCkge1xuICAgICAgICB2YXIgYWxsQmluZGluZ3MgPSBhbGxCaW5kaW5nc0FjY2Vzc29yKCk7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGFsbEJpbmRpbmdzLmFueUtleVByZXNzLmNhbGwodmlld01vZGVsKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuLyoqXG4qIEN1c3RvbSBLbm9ja091dCBoYW5kbGVyOiBoYW5kbGVzIGtleSBwcmVzcyBldmVudCwgd2hlbiB1c2VyIHByZXNzZXMgRW50ZXIga2V5XG4qL1xua28uYmluZGluZ0hhbmRsZXJzLmVudGVyUHJlc3MgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCkge1xuICAgICAgICB2YXIgYWxsQmluZGluZ3MgPSBhbGxCaW5kaW5nc0FjY2Vzc29yKCk7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGtleUNvZGUgPSAoZXZlbnQud2hpY2ggPyBldmVudC53aGljaCA6IGV2ZW50LmtleUNvZGUpO1xuICAgICAgICAgICAgaWYgKGtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgICAgICAgICAgYWxsQmluZGluZ3MuZW50ZXJQcmVzcy5jYWxsKHZpZXdNb2RlbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbi8qKlxuKiBDdXN0b20gS25vY2tPdXQgaGFuZGxlcjogaGFuZGxlcyBrZXkgcHJlc3MgZXZlbnQsIHdoZW4gdXNlciBwcmVzc2VzIEVzY2FwZSBrZXlcbiovXG5rby5iaW5kaW5nSGFuZGxlcnMuZXNjUHJlc3MgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKGVsZW1lbnQsIHZhbHVlQWNjZXNzb3IsIGFsbEJpbmRpbmdzQWNjZXNzb3IsIHZpZXdNb2RlbCkge1xuICAgICAgICB2YXIgYWxsQmluZGluZ3MgPSBhbGxCaW5kaW5nc0FjY2Vzc29yKCk7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGtleUNvZGUgPSAoZXZlbnQud2hpY2ggPyBldmVudC53aGljaCA6IGV2ZW50LmtleUNvZGUpO1xuICAgICAgICAgICAgaWYgKGtleUNvZGUgPT09IDI3KSB7XG4gICAgICAgICAgICAgICAgYWxsQmluZGluZ3MuZXNjUHJlc3MuY2FsbCh2aWV3TW9kZWwpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG4vKipcbiogQ3VzdG9tIGtub2Nrb3V0IGV4dGVuZGVyOiByZXF1aXJlZCBmaWVsZCB2YWxpZGF0aW9uXG4qL1xua28uZXh0ZW5kZXJzLnJlcXVpcmVkID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIC8vIGFkZCBzb21lIHN1Yi1vYnNlcnZhYmxlcyB0byBvdXIgb2JzZXJ2YWJsZVxuICAgIHRhcmdldC5oYXNFcnJvciA9IGtvLm9ic2VydmFibGUoKTtcblxuICAgIC8vIGRlZmluZSBhIGZ1bmN0aW9uIHRvIGRvIHZhbGlkYXRpb25cbiAgICBmdW5jdGlvbiB2YWxpZGF0ZShuZXdWYWx1ZSkge1xuICAgICAgICB0YXJnZXQuaGFzRXJyb3IobmV3VmFsdWUgPyBmYWxzZSA6IHRydWUpO1xuICAgIH1cblxuICAgIC8vIGluaXRpYWwgdmFsaWRhdGlvblxuICAgIHZhbGlkYXRlKHRhcmdldCgpKTtcblxuICAgIC8vIHZhbGlkYXRlIHdoZW5ldmVyIHRoZSB2YWx1ZSBjaGFuZ2VzXG4gICAgdGFyZ2V0LnN1YnNjcmliZSh2YWxpZGF0ZSk7XG5cbiAgICAvLyByZXR1cm4gdGhlIG9yaWdpbmFsIG9ic2VydmFibGVcbiAgICByZXR1cm4gdGFyZ2V0O1xufTtcblxuXG4vLyAtLS0tLS0tLSBMaXN0Vmlld01vZGVsXG4vLyBFbnVtZXJhdG9yc1xudmFyIGRpcmVjdGlvbnMgPSB7XG4gICAgYXNjZW5kaW5nOiAxLFxuICAgIGRlc2NlbmRpbmc6IDJcbn0sXG4gICAgZGVmYXVsdERpcmVjdGlvbiA9IGRpcmVjdGlvbnMuYXNjZW5kaW5nLFxuICAgIGRlZmF1bHRTb3J0Q29sdW1uID0gJ1RpdGxlJztcblxuLyoqXG4qIEl0ZW1zIGxpc3QgdmlldyBtb2RlbFxuKi9cbmZ1bmN0aW9uIExpc3RWaWV3TW9kZWwoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gQ3JlYXRlIG9ic2VydmFibGUgYXJyYXkgZm9yIGl0ZW1zXG4gICAgc2VsZi5hbGxJdGVtcyA9IGtvLm9ic2VydmFibGVBcnJheSgpO1xuICAgIHNlbGYuaXRlbXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoKTtcbiAgICBzZWxmLnBhdGggPSBrby5vYnNlcnZhYmxlQXJyYXkoKTtcblxuICAgIC8vIFNlYXJjaCBhbmQgc29ydCBwYXJhbWV0ZXJzXG4gICAgc2VsZi5zZWFyY2hRdWVyeSA9IGtvLm9ic2VydmFibGUoJycpOyAvLyBFbXB0eSBzZWFyY2ggcXVlcnkgYnkgZGVmYXVsdFxuICAgIHNlbGYuc29ydENvbHVtbiA9IGtvLm9ic2VydmFibGUoZGVmYXVsdFNvcnRDb2x1bW4pOyAvLyBCeSBkZWZhdWx0LCBzb3J0aW5nIGJ5IHRpdGxlXG4gICAgc2VsZi5zb3J0RGlyZWN0aW9uID0ga28ub2JzZXJ2YWJsZShkZWZhdWx0RGlyZWN0aW9uKTsgLy8gQnkgZGVmYXVsdCwgc29ydGluZyBpbiBhc2NlbmRpbmcgZGlyZWN0aW9uXG5cbiAgICAvLyBTZWxlY3RlZCBmb2xkZXJcbiAgICBzZWxmLmZvbGRlcklkID0ga28ub2JzZXJ2YWJsZSgnJyk7IC8vIFJvb3QgZm9sZGVyIGJ5IGRlZmF1bHRcblxuICAgIC8vIERhdGVcbiAgICBzZWxmLmRhdGUgPSBrby5vYnNlcnZhYmxlKCcnKTsgXG5cbiAgICAvKipcbiAgICAqIFNldCBjdXJyZW50IGRhdGVcbiAgICAqL1xuICAgIHZhciBkID0gbmV3IERhdGUoKTtcblxuICAgIHZhciBtb250aCA9IGQuZ2V0TW9udGgoKSsxO1xuICAgIHZhciBkYXkgPSBkLmdldERhdGUoKTtcblxuICAgIHZhciBjdXJyZW50RGF0ZSA9IGQuZ2V0RnVsbFllYXIoKSArICcvJyArXG4gICAgKCgnJyttb250aCkubGVuZ3RoPDIgPyAnMCcgOiAnJykgKyBtb250aCArICcvJyArXG4gICAgKCgnJytkYXkpLmxlbmd0aDwyID8gJzAnIDogJycpICsgZGF5O1xuXG5cbiAgICAvKipcbiAgICAqIEFkZHMgbmV3IGZvbGRlciB0byB0aGUgbGlzdFxuICAgICovXG4gICAgc2VsZi5hZGROZXdGb2xkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFkZE5ld0l0ZW0odHJ1ZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICogQWRkcyBuZXcgZmlsZVxuICAgICovXG4gICAgc2VsZi5hZGROZXdGaWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBhZGROZXdJdGVtKGZhbHNlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgKiBTZWFyY2hlcyBhIGZvbGRlciBmb3IgZ2l2ZW4gc2VhcmNoIHF1ZXJ5XG4gICAgKi9cbiAgICBzZWxmLnNlYXJjaEl0ZW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBTYXZlcyBvciBjYW5jZWxzIGFsbCBlZGl0c1xuICAgICAgICBzZWxmLnNhdmVPckNhbmNlbEFsbEVkaXRzKCk7XG5cbiAgICAgICAgc2V0SXRlbXMoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgKiBTb3J0cyBmb2xkZXIgYnkgZ2l2ZW4gY29sdW1uXG4gICAgKi9cbiAgICBzZWxmLnNvcnRJdGVtcyA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgLy8gU2F2ZXMgb3IgY2FuY2VscyBhbGwgZWRpdHNcbiAgICAgICAgc2VsZi5zYXZlT3JDYW5jZWxBbGxFZGl0cygpO1xuXG4gICAgICAgIHZhciBjb2x1bW5CZWZvcmUgPSBzZWxmLnNvcnRDb2x1bW4oKSxcbiAgICAgICAgICAgIHdhc0Rlc2NlbmRpbmcgPSBzZWxmLnNvcnREaXJlY3Rpb24oKSA9PSBkaXJlY3Rpb25zLmRlc2NlbmRpbmc7XG4gICAgICAgIGlmIChjb2x1bW5CZWZvcmUgPT0gY29sdW1uKSB7XG4gICAgICAgICAgICBzZWxmLnNvcnREaXJlY3Rpb24od2FzRGVzY2VuZGluZyA/IGRpcmVjdGlvbnMuYXNjZW5kaW5nIDogZGlyZWN0aW9ucy5kZXNjZW5kaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuc29ydERpcmVjdGlvbihkaXJlY3Rpb25zLmFzY2VuZGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5zb3J0Q29sdW1uKGNvbHVtbik7XG5cbiAgICAgICAgc2V0SXRlbXMoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgKiBTZWxlY3RzIGZvbGRlciwgYnkgZ2l2ZW4gaWRcbiAgICAqL1xuICAgIHNlbGYuY2hhbmdlRm9sZGVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIC8vIFNhdmVzIG9yIGNhbmNlbHMgYWxsIGVkaXRzXG4gICAgICAgIHNlbGYuc2F2ZU9yQ2FuY2VsQWxsRWRpdHMoKTtcblxuICAgICAgICBzZWxmLmZvbGRlcklkKGlkKTtcblxuICAgICAgICAvLyBBZGQgZm9sZGVyIHRvIHBhdGhcbiAgICAgICAgdmFyIGksIGZvbGRlcjtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHNlbGYuYWxsSXRlbXMoKS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHNlbGYuYWxsSXRlbXMoKVtpXS5pZCgpID09IGlkKSB7XG4gICAgICAgICAgICAgICAgZm9sZGVyID0gc2VsZi5hbGxJdGVtcygpW2ldO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldFBhdGhGb2xkZXIoZm9sZGVyIHx8IHNlbGYucGF0aCgpWzBdKTtcblxuICAgICAgICAvLyBDbGVhciBzb3J0IGFuZCBzZWFyY2ggcXVlcnlcbiAgICAgICAgc2VsZi5zb3J0RGlyZWN0aW9uKGRlZmF1bHREaXJlY3Rpb24pO1xuICAgICAgICBzZWxmLnNvcnRDb2x1bW4oZGVmYXVsdFNvcnRDb2x1bW4pO1xuICAgICAgICBzZWxmLnNlYXJjaFF1ZXJ5KCcnKTtcblxuICAgICAgICBzZXRJdGVtcygpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAqIE9wZW5zIGZvbGRlcidzIHBhcmVudCBmb2xkZXJcbiAgICAqL1xuICAgIHNlbGYub3BlblBhcmVudEZvbGRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gU2F2ZXMgb3IgY2FuY2VscyBhbGwgZWRpdHNcbiAgICAgICAgc2VsZi5zYXZlT3JDYW5jZWxBbGxFZGl0cygpO1xuXG4gICAgICAgIHZhciBwYXJlbnRJZCA9ICcnLFxuICAgICAgICAgICAgY3VycmVudElkID0gc2VsZi5mb2xkZXJJZCgpO1xuXG4gICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgc2VsZi5hbGxJdGVtcygpLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5hbGxJdGVtcygpW2xdLmlkKCkgPT0gY3VycmVudElkKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50SWQgPSBzZWxmLmFsbEl0ZW1zKClbbF0uZm9sZGVySWQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmNoYW5nZUZvbGRlcihwYXJlbnRJZCk7XG4gICAgfTtcblxuICAgIC8qKiBcbiAgICAqIEhlbHBlciBtZXRob2QuIFJldHVybiB0cnVlIGlmIGRhdGEgaXMgc29ydGVkIGJ5IHNwZWNpZmllZCBjb2x1bW4gYXNjZW5kaW5nLlxuICAgICovXG4gICAgc2VsZi5pc1NvcnRlZEFzY2VuZGluZyA9IGZ1bmN0aW9uIChjb2x1bW4pIHtcbiAgICAgICAgcmV0dXJuIGNvbHVtbiA9PSBzZWxmLnNvcnRDb2x1bW4oKSAmJiBzZWxmLnNvcnREaXJlY3Rpb24oKSA9PSBkaXJlY3Rpb25zLmFzY2VuZGluZztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgKiBIZWxwZXIgbWV0aG9kIFJldHVybiB0cnVlIGlmIGRhdGEgaXMgc29ydGVkIGJ5IHNwZWNpZmllZCBjb2x1bW4gZGVzY2VuZGluZy5cbiAgICAqL1xuICAgIHNlbGYuaXNTb3J0ZWREZXNjZW5kaW5nID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICByZXR1cm4gY29sdW1uID09IHNlbGYuc29ydENvbHVtbigpICYmIHNlbGYuc29ydERpcmVjdGlvbigpID09IGRpcmVjdGlvbnMuZGVzY2VuZGluZztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgKiBDb21wdXRlZCBLbm9ja091dCBmdW5jdGlvbiwgcmV0dXJucyB0cnVlLCBpZiBjdXJyZW50IGZvbGRlciBpcyByb290IGZvbGRlclxuICAgICovXG4gICAgc2VsZi5pc1Jvb3RGb2xkZXIgPSBrby5jb21wdXRlZChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhc2VsZi5mb2xkZXJJZCgpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgKiBHZXRzIG5leHQgaXRlbXMgaWRcbiAgICAqL1xuICAgIHNlbGYuZ2V0TmV3SWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlkID0gMDtcblxuICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IHNlbGYuYWxsSXRlbXMoKS5sZW5ndGg7IG0rKykge1xuICAgICAgICAgICAgaWYgKHNlbGYuYWxsSXRlbXMoKVttXS5pZCgpID4gaWQpIHtcbiAgICAgICAgICAgICAgICBpZCA9IHNlbGYuYWxsSXRlbXMoKVttXS5pZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlkICsgMTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgKiBTYXZlcyBvciBjYW5jZWxzIGFsbCBjdXJyZW50IGVkaXRzXG4gICAgKi9cbiAgICBzZWxmLnNhdmVPckNhbmNlbEFsbEVkaXRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFN0b3AgZWRpdGluZywgaWYgc29tZSBpdGVtIGlzIGluIGVkaXQgbW9kZVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuaXRlbXMoKS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBzZWxmLml0ZW1zKClbaV07XG4gICAgICAgICAgICBpZiAoaXRlbS5pc0FjdGl2ZSgpKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5zYXZlT3JDYW5jZWxFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgKiBQcml2YXRlIG1ldGhvZCwgYWRkcyBuZXcgaXRlbSB0byBncmlkXG4gICAgKi9cbiAgICBmdW5jdGlvbiBhZGROZXdJdGVtKGlzRm9sZGVyKSB7XG4gICAgICAgIC8vIFNhdmVzIG9yIGNhbmNlbHMgYWxsIGVkaXRzXG4gICAgICAgIHNlbGYuc2F2ZU9yQ2FuY2VsQWxsRWRpdHMoKTtcblxuICAgICAgICB2YXIgbmV3SXRlbSA9IG5ldyBJdGVtVmlld01vZGVsKHNlbGYsIGlzRm9sZGVyKTtcbiAgICAgICAgbmV3SXRlbS5mb2xkZXJJZCA9IHNlbGYuZm9sZGVySWQoKTtcbiAgICAgICAgbmV3SXRlbS5kYXRlKGN1cnJlbnREYXRlKTtcbiAgICAgICAgbmV3SXRlbS52YWx1ZSgwKTtcblxuICAgICAgICAvLyBTZXQgaXRlbSBhcyBhY3RpdmUgKGVkaXRhYmxlKVxuICAgICAgICBuZXdJdGVtLmlzQWN0aXZlKHRydWUpO1xuXG4gICAgICAgIC8vIEFkZCBuZXcgaXRlbSB0byB0aGUgdG9wIG9mIHNob3dpbmcgaXRlbXNcbiAgICAgICAgc2VsZi5pdGVtcy51bnNoaWZ0KG5ld0l0ZW0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICogUHJpdmF0ZSBtZXRob2QsIGFkZHMgZm9sZGVyIHRvIHBhdGgsIG9yIHJlbW92ZXMgZm9sZGVycyBmcm9tIHBhdGhcbiAgICAqL1xuICAgIGZ1bmN0aW9uIHNldFBhdGhGb2xkZXIoZm9sZGVyKSB7XG4gICAgICAgIHZhciBpLFxuICAgICAgICAgICAgcmVtb3ZlO1xuXG4gICAgICAgIC8vIElmIHJvb3QgZm9sZGVyLCByZW1vdmUgYWxsIGZyb20gdGhlIHJvb3RcbiAgICAgICAgaWYgKCFmb2xkZXIuaWQoKSkge1xuICAgICAgICAgICAgcmVtb3ZlID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEdldCBmb2xkZXJzIHRvIHBvcCBvdXQgZnJvbSB0aGUgcGF0aFxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNlbGYucGF0aCgpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYucGF0aCgpW2ldLmlkKCkgPT0gZm9sZGVyLmlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlID0gaSArIDE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGZvbGRlciBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgbGlzdCwgcmVtb3ZlIGFsbCBjaGlsZHMgZnJvbSBwYXRoXG4gICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IHJlbW92ZTsgaSA8IHNlbGYucGF0aCgpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5wYXRoLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQWRkIGZvbGRlciB0byBwYXRoIFxuICAgICAgICAgICAgc2VsZi5wYXRoLnB1c2goZm9sZGVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICogUHJpdmF0ZSBtZXRob2QsIGZpbGxzIGl0ZW1zIG9ic2VydmFibGUgYXJyYXkgd2l0aCBpdGVtcywgZmlsdGVyZWQgYnkgZm9sZGVyLFxuICAgICogc2VhcmNoIHF1ZXJ5LCBhbmQgc29ydGVkIGJ5IGdpdmVuIHBhcmFtZXRlcnNcbiAgICAqL1xuICAgIGZ1bmN0aW9uIHNldEl0ZW1zKCkge1xuICAgICAgICB2YXIgcXVlcnkgPSAoc2VsZi5zZWFyY2hRdWVyeSgpIHx8ICcnKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgY3VycmVudEZvbGRlcklkID0gc2VsZi5mb2xkZXJJZCgpIHx8ICcnO1xuXG4gICAgICAgIHNlbGYuaXRlbXMucmVtb3ZlQWxsKCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmFsbEl0ZW1zKCkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gc2VsZi5hbGxJdGVtcygpW2ldLFxuICAgICAgICAgICAgICAgIGZvbGRlcklkID0gaXRlbS5mb2xkZXJJZCB8fCAnJztcblxuICAgICAgICAgICAgLy8gRmlsdGVyIGl0ZW1zIG91dCBieSBmb2xkZXIgaWRcbiAgICAgICAgICAgIGlmIChjdXJyZW50Rm9sZGVySWQgIT0gZm9sZGVySWQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRmlsdGVyIGl0ZW1zIG91dCBieSBzZWFyY2ggcXVlcnlcbiAgICAgICAgICAgIGlmIChxdWVyeSAmJiBpdGVtLnRpdGxlKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHF1ZXJ5KSA8IDApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5pdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU29ydCBpdGVtc1xuICAgICAgICBpZiAoc2VsZi5pdGVtcygpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNlbGYuaXRlbXMuc29ydChzb3J0SXRlbXNMaXN0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICogUHJpdmF0ZSBtZXRob2QsIHNvcnRzIGFuIGl0ZW1zIGFycmF5XG4gICAgKi9cbiAgICBmdW5jdGlvbiBzb3J0SXRlbXNMaXN0KGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHZhciBjb2x1bW4gPSBzZWxmLnNvcnRDb2x1bW4oKSxcbiAgICAgICAgICAgIGlzQXNjZW5kaW5nID0gc2VsZi5zb3J0RGlyZWN0aW9uKCkgPT0gZGlyZWN0aW9ucy5hc2NlbmRpbmcsXG4gICAgICAgICAgICBsZWZ0VmFsdWUgPSBjb2x1bW4gPT0gJ1RpdGxlJyB8fCBsZWZ0LmlzRm9sZGVyID09IGxlZnQudGl0bGUoKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgcmlnaHRWYWx1ZSA9IGNvbHVtbiA9PSAnVGl0bGUnIHx8IHJpZ2h0LmlzRm9sZGVyID09IHJpZ2h0LnRpdGxlKCkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAvLyBGb2xkZXIgYWx3YXlzIHdpbnMgaW4gYXNjZW5kaW5nIG1vZGVcbiAgICAgICAgaWYgKGxlZnQuaXNGb2xkZXIgIT0gcmlnaHQuaXNGb2xkZXIpIHtcbiAgICAgICAgICAgIGlmIChsZWZ0LmlzRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzQXNjZW5kaW5nID09IC0xO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNBc2NlbmRpbmcgPT0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNvcnQgYnkgbmFtZSwgZGVwZW5naW5nIG9uIHNvcnQgZGlyZWN0aW9uXG4gICAgICAgIHJldHVybiBsZWZ0VmFsdWUgPT0gcmlnaHRWYWx1ZSA/IDAgOiAobGVmdFZhbHVlIDwgcmlnaHRWYWx1ZSA/IChpc0FzY2VuZGluZyA9PSAtMSkgOiAoaXNBc2NlbmRpbmcgPT0gMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICogRnVudGlvbiBpbml0aWFsaXplcyBsaXN0IHZpZXcgbW9kZWxzXG4gICAgKi9cbiAgICBzZWxmLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gQ2xlYXIgcGF0aFxuICAgICAgICBzZWxmLnBhdGgucmVtb3ZlQWxsKCk7XG5cbiAgICAgICAgLy8gQWRkIHJvb3QgZm9sZGVyIHRvIHBhdGhcbiAgICAgICAgdmFyIHJvb3RGb2xkZXIgPSBuZXcgSXRlbVZpZXdNb2RlbChzZWxmLCB0cnVlKTtcbiAgICAgICAgcm9vdEZvbGRlci50aXRsZSgnJyk7XG4gICAgICAgIHNlbGYucGF0aC5wdXNoKHJvb3RGb2xkZXIpO1xuXG4gICAgICAgIC8vIFNldCBjdXJyZW50IGZvbGRlciB0byByb290XG4gICAgICAgIHNlbGYuZm9sZGVySWQoJycpO1xuXG4gICAgICAgIC8vIEZpbGwgb2JzZXJ2YWJsZSBpdGVtcyBhcnJheSB3aXRoIGN1cnJlbnQgZm9sZGVyIGl0ZW1zXG4gICAgICAgIHNldEl0ZW1zKCk7XG4gICAgfTtcbn1cblxuXG4vLyAtLS0tLS0tLSBJdGVtVmlld01vZGVsXG4vKipcbiogSXRlbSB2aWV3IG1vZGVsXG4qL1xudmFyIHRvRGVsZXRlID0gW107XG5cbmZ1bmN0aW9uIEl0ZW1WaWV3TW9kZWwocGFyZW50LCBpc0ZvbGRlciwgaWQsIHRpdGxlLCBkYXRlLCB2YWx1ZSwgZm9sZGVySWQpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIC8vIE9ic2VydmFibGUgcHJvcGVydGllc1xuICBzZWxmLmlkID0ga28ub2JzZXJ2YWJsZSgpO1xuICBzZWxmLmV4dGVuc2lvbiA9IGtvLm9ic2VydmFibGUoKTtcbiAgc2VsZi5pc0FjdGl2ZSA9IGtvLm9ic2VydmFibGUoZmFsc2UpO1xuXG4gIC8vIENyZWF0ZSB0aXRsZVxuICBzZWxmLnRpdGxlID0ga28ub2JzZXJ2YWJsZSgpLmV4dGVuZCh7IHJlcXVpcmVkOiB0cnVlIH0pO1xuXG4gIC8vIENyZWFldCBkYXRlXG4gIHNlbGYuZGF0ZSA9IGtvLm9ic2VydmFibGUoKS5leHRlbmQoeyByZXF1aXJlZDogdHJ1ZSB9KTtcblxuICAvLyBDcmVhZXQgdmFsdWVcbiAgc2VsZi52YWx1ZSA9IGtvLm9ic2VydmFibGUoKS5leHRlbmQoeyByZXF1aXJlZDogZmFsc2UgfSk7XG5cbiAgLy8gUHJvcGVydGllcywgdGhhdCBuZXZlciBjaGFuZ2VzIGRpbmFtaWNhbGx5LCBjYW4gYmUgY3JlYXRlZCBub24tb2JzZXJ2YWJsZVxuICBzZWxmLnBhcmVudCA9IHBhcmVudDtcbiAgc2VsZi5mb2xkZXJJZCA9ICcnO1xuICBzZWxmLmlzRm9sZGVyID0gaXNGb2xkZXI7XG5cbiAgLy8gVGVtcG9yYXJ5IHByb3BlcnRpZXMgZm9yIGtlZXBpbmcgb2xkIHZhbHVlcywgd2hlbiBlZGl0aW5nIHJvd1xuICBzZWxmLm9sZFRpdGxlID0gbnVsbDtcblxuICAvLyBTdWJzY3JpYmUgdG8gdGl0bGUgdmFsdWUgY2hhbmdlIGV2ZW50c1xuICBzZWxmLnRpdGxlLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXNlbGYuaXNBY3RpdmUoKSkge1xuICAgICAgICAgIHNlbGYub2xkVGl0bGUgPSBzZWxmLnRpdGxlKCk7XG4gICAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAqIFNldCBjdXJyZW50IGRhdGVcbiAgKi9cbiAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuXG4gIHZhciBtb250aCA9IGQuZ2V0TW9udGgoKSsxO1xuICB2YXIgZGF5ID0gZC5nZXREYXRlKCk7XG5cbiAgdmFyIGN1cnJlbnREYXRlID0gZC5nZXRGdWxsWWVhcigpICsgJy8nICtcbiAgKCgnJyttb250aCkubGVuZ3RoPDIgPyAnMCcgOiAnJykgKyBtb250aCArICcvJyArXG4gICgoJycrZGF5KS5sZW5ndGg8MiA/ICcwJyA6ICcnKSArIGRheTtcblxuICAvKipcbiAgKiBDb21wdXRlZCBLbm9ja091dCBmdW5jdGlvbiwgcmV0dXJucyBjbGFzcyBuYW1lIGZvciByb3csIGRlcGVuZGluZyBvbiBpdGVtIHR5cGUgYW5kIGFjdGl2ZSBzdGF0dXNcbiAgKi9cbiAgc2VsZi5yb3dDbGFzc05hbWVzID0ga28uY29tcHV0ZWQoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNsYXNzZXM7XG4gICAgICBpZiAoc2VsZi5pc0ZvbGRlcikge1xuICAgICAgICAgIGNsYXNzZXMgPSAnZXhwLWl0ZW0gZm9sZGVyLWJveCc7XG4gICAgICAgICAgaWYgKHNlbGYuaXNBY3RpdmUoKSkge1xuICAgICAgICAgICAgICBjbGFzc2VzICs9ICcgZm9sZGVyLWJveC1hY3RpdmUnO1xuICAgICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2xhc3NlcyA9ICdleHAtaXRlbSBmaWxlLWJveCc7XG4gICAgICAgICAgaWYgKHNlbGYuaXNBY3RpdmUoKSkge1xuICAgICAgICAgICAgICBjbGFzc2VzICs9ICcgZmlsZS1ib3gtYWN0aXZlJztcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjbGFzc2VzO1xuICB9KTtcblxuICAvKipcbiAgKiBDb21wdXRlZCBLbm9ja091dCBmdW5jdGlvbiwgcmV0dXJucyBjbGFzcyBuYW1lIGZvciBkaXYsIHdoaWNoIGRpc3BsYXlzIGZpbGUncyBvciBmb2xkZXJzIGljb25cbiAgKi9cbiAgc2VsZi5pY29uQ2xhc3NOYW1lcyA9IGtvLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjbGFzc2VzO1xuXG4gICAgICBpZiAoc2VsZi5pc0ZvbGRlcikge1xuICAgICAgICAgIGNsYXNzZXMgPSAnc3lzdGVtLWZvbGRlcic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsYXNzZXMgPSAnc3lzdGVtLWZpbGUnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2xhc3NlcztcbiAgfSk7XG5cbiAgLyoqIFxuICAqIFNhdmVzIGFuIGl0ZW1cbiAgKi9cbiAgc2VsZi5zYXZlSXRlbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZWxmLnRpdGxlLmhhc0Vycm9yKCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBpdGVtIHRvIGFsbCBpdGVtcyBsaXN0IGFuZCBzZXQgbmV3IGlkXG4gICAgICBpZiAoIXNlbGYuaWQoKSkge1xuICAgICAgICAgIHNlbGYucGFyZW50LmFsbEl0ZW1zLnB1c2goc2VsZik7XG4gICAgICAgICAgc2VsZi5pZChzZWxmLnBhcmVudC5nZXROZXdJZCgpKTtcbiAgICAgIH1cblxuICAgICAgXG5cbiAgICAgIHNlbGYuaXNBY3RpdmUoZmFsc2UpO1xuXG4gICAgICAvLyBTZXR0aW5nIG9sZCB2YWx1ZXNcbiAgICAgIHNlbGYuZGF0ZShjdXJyZW50RGF0ZSk7XG4gICAgICBzZWxmLm9sZFRpdGxlID0gc2VsZi50aXRsZSgpO1xuICB9O1xuXG4gIC8qKlxuICAqIERlbGV0ZXMgYW4gaXRlbVxuICAqL1xuICBzZWxmLmRlbGV0ZUl0ZW0gPSBmdW5jdGlvbiAocGFyZW50Vmlld01vZGVsKSB7XG4gICAgICAvLyBTYXZlcyBvciBjYW5jZWxzIGFsbCBlZGl0c1xuICAgICAgc2VsZi5wYXJlbnQuc2F2ZU9yQ2FuY2VsQWxsRWRpdHMoKTtcbiAgICAgIHZhciBkZWxldGluZ0l0ZW0gPSB0aGlzO1xuICAgICAgXG4gICAgICAkKCcjZGVsZXRlLWV4cC1tb2RhbCcpLm1vZGFsKCdzaG93JykuZm9jdXMoKTtcbiAgICAgICQoJyNkZWxldGUtZXhwLW1vZGFsJykub24oJ2tleXVwJywgZnVuY3Rpb24oZSl7XG4gICAgICAgIGlmKGUua2V5Q29kZSA9PSAxMykge1xuICAgICAgICAgICQoJy5kZWxldGUtZXhwLWl0ZW1zJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgICQoJyNkZWxldGUtZXhwLW1vZGFsIC5kZWxldGUtZXhwLWl0ZW1zJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICBwYXJlbnRWaWV3TW9kZWwuaXRlbXMucmVtb3ZlKGRlbGV0aW5nSXRlbSk7XG4gICAgICAgICAgcGFyZW50Vmlld01vZGVsLmFsbEl0ZW1zLnJlbW92ZShkZWxldGluZ0l0ZW0pO1xuICAgICAgICAgICQoJyNkZWxldGUtZXhwLW1vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAqIENoZWNrIGl0ZW1zIHRvIGRlbGV0ZVxuICAqL1xuICBcblxuICBzZWxmLmNoZWNrSXRlbSA9IGZ1bmN0aW9uIChwYXJlbnRWaWV3TW9kZWwsIGV2ZW50KSB7XG4gICAgICB2YXIgaW5kZXggPSBwYXJlbnRWaWV3TW9kZWwuYWxsSXRlbXMoKS5pbmRleE9mKHRoaXMpO1xuICAgICAgdmFyIGluZGV4SUQgPSBwYXJlbnRWaWV3TW9kZWwuYWxsSXRlbXMoKVtpbmRleF0uaWQoKTtcbiAgICAgIHZhciBuZXdUb0RlbGV0ZSA9IHRvRGVsZXRlLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZSAhPT0gaW5kZXhJRDt9KTtcbiAgICAgIFxuXG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcGFyZW50Vmlld01vZGVsLmFsbEl0ZW1zKCkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZihwYXJlbnRWaWV3TW9kZWwuYWxsSXRlbXMoKVtpXS5pZCgpID09IGluZGV4SUQpIHtcbiAgICAgICAgICAgICAgaWYodG9EZWxldGUuaW5kZXhPZihpbmRleElEKSA8IDApe1xuICAgICAgICAgICAgICAgICAgdG9EZWxldGUucHVzaChpbmRleElEKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRvRGVsZXRlID0gbmV3VG9EZWxldGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gIH07XG5cbiAgLyoqXG4gICogRGVsZXRlIGNoZWNrZWQgaXRlbXNcbiAgKi9cbiAgZGVsZXRlQ2hlY2tlZCA9IGZ1bmN0aW9uIChwYXJlbnRWaWV3TW9kZWwpIHtcbiAgICAkKCcjZGVsZXRlLWV4cC1tb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG5cbiAgICAkKCcjZGVsZXRlLWV4cC1tb2RhbCAuZGVsZXRlLWV4cC1pdGVtcycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdG9EZWxldGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBwYXJlbnRWaWV3TW9kZWwuYWxsSXRlbXMoKS5sZW5ndGg7IGorKyl7XG4gICAgICAgICAgICAgICAgaWYocGFyZW50Vmlld01vZGVsLmFsbEl0ZW1zKClbal0uaWQoKSA9PSB0b0RlbGV0ZVtpXSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWxldGluZ0l0ZW0gPSBwYXJlbnRWaWV3TW9kZWwuYWxsSXRlbXMoKVtqXTtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Vmlld01vZGVsLml0ZW1zLnJlbW92ZShkZWxldGluZ0l0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRWaWV3TW9kZWwuYWxsSXRlbXMucmVtb3ZlKGRlbGV0aW5nSXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAkKCcjZGVsZXRlLWV4cC1tb2RhbCcpLm1vZGFsKCd0b2dnbGUnKTtcbiAgICB9KTsgIFxuICB9O1xuXG4gIC8qKlxuICAqIFN0YXJ0cyBpbmxpbmUgZWRpdGluZyBvZiBhbiBpdGVtXG4gICovXG4gIHNlbGYuZWRpdEl0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBTYXZlcyBvciBjYW5jZWxzIGFsbCBlZGl0c1xuICAgICAgc2VsZi5wYXJlbnQuc2F2ZU9yQ2FuY2VsQWxsRWRpdHMoKTtcblxuICAgICAgc2VsZi5pc0FjdGl2ZSh0cnVlKTtcbiAgfTtcblxuICAvKlxuICAqIE9wZW5zIGl0ZW0sIGRlcGVuZGluZyBvbiBpdCdzIHR5cGVcbiAgKi9cbiAgc2VsZi5vcGVuSXRlbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZWxmLmlzRm9sZGVyKSB7XG4gICAgICAgICAgc2VsZi5wYXJlbnQuY2hhbmdlRm9sZGVyKHNlbGYuaWQoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vc2VsZi5lZGl0SXRlbSgpO1xuICAgICAgfVxuICB9O1xuXG4gIC8qKlxuICAqIENhbmNlbHMgaW5saW5lIGVkaXRpbmcgb2YgYW4gaXRlbVxuICAqL1xuICBzZWxmLmNhbmNlbEVkaXRJdGVtID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFzZWxmLmlkKCkpIHtcbiAgICAgICAgICAvLyBJZiBpdGVtIHdhcyBuZXcsIHJlbW92ZSBpdCBmcm9tIGdyaWRcbiAgICAgICAgICBzZWxmLnBhcmVudC5pdGVtcy5yZW1vdmUoc2VsZik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJlc3RvcmUgb2xkIHZhbHVlc1xuICAgICAgICAgIHNlbGYudGl0bGUoc2VsZi5vbGRUaXRsZSk7XG5cbiAgICAgICAgICBzZWxmLmlzQWN0aXZlKGZhbHNlKTtcbiAgICAgIH1cbiAgfTtcblxuICAvKipcbiAgKiBTYXZlcyBhbiBpdGVtIG9yIGNhbmNlbHMgZWRpdCBtb2RlLCBkZXBlbmRpbmcgb24gdGl0bGUuaGFzRXJyb3IoKVxuICAqL1xuICBzZWxmLnNhdmVPckNhbmNlbEVkaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChzZWxmLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgICBpZiAoc2VsZi50aXRsZS5oYXNFcnJvcigpKSB7XG4gICAgICAgICAgICAgIHNlbGYuY2FuY2VsRWRpdEl0ZW0oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZWxmLnNhdmVJdGVtKCk7XG4gICAgICAgICAgfVxuICAgICAgfVxuICB9O1xuXG4gIC8vIFNldCBwcm9wZXJ0aWVzIHdpdGggY2hhaW4gc3ludGF4XG4gIHNlbGYuaWQoaWQpLnRpdGxlKHRpdGxlKS5kYXRlKGRhdGUpLnZhbHVlKHZhbHVlKTtcbiAgc2VsZi5mb2xkZXJJZCA9IGZvbGRlcklkO31cblxuLy8gLS0tLS0tLS0gSW5pdGlhbGl6ZVxuLyoqXG4qIEluaXRpYWxpemVzIHZpZXcgbW9kZWwgYW5kIGFwcGx5IGJpbmRpbmdzXG4qL1xuZnVuY3Rpb24gaW5pdGlhbGl6ZWV4cERhdGEoZXhwRGF0YSkge1xuICAgICAgLy8gR2V0IGNvbnRhaW5lciBmb3IgYmluZGluZyB2aWV3IG1vZGVsXG4gIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS1leHBsb3Jlci1jb250ZW50Jyk7XG5cblxuICAgICAgLy8gQ3JlYXRlIGxpc3QgdmlldyBtb2RlbFxuICB2YXIgbGlzdFZpZXdNb2RlbCA9IG5ldyBMaXN0Vmlld01vZGVsKCk7XG4gIFxuXG4gICAgLy8gQWRkIGZvbGRlcnMgdG8gbGlzdFxuICBpZiAoZXhwRGF0YS5Gb2xkZXJzKSB7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGV4cERhdGEuRm9sZGVycy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIHZhciBmb2xkZXIgPSBleHBEYXRhLkZvbGRlcnNbal0sXG4gICAgICAgICAgICAgICAgICBmb2xkZXJWaWV3TW9kZWwgPSBuZXcgSXRlbVZpZXdNb2RlbChsaXN0Vmlld01vZGVsLCB0cnVlLCBmb2xkZXIuSWQsIGZvbGRlci5UaXRsZSwgZm9sZGVyLkRhdGUsIGZvbGRlci5WYWx1ZSwgZm9sZGVyLlBhcmVudElkKTtcblxuICAgICAgICAgIGxpc3RWaWV3TW9kZWwuYWxsSXRlbXMucHVzaChmb2xkZXJWaWV3TW9kZWwpO1xuICAgICAgfVxuICB9XG5cbiAgICAvLyBBZGQgZmlsZXMgdG8gbGlzdFxuICBpZiAoZXhwRGF0YS5GaWxlcykge1xuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBleHBEYXRhLkZpbGVzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgdmFyIGZpbGUgPSBleHBEYXRhLkZpbGVzW2tdLFxuICAgICAgICAgICAgICAgICAgZmlsZVZpZXdNb2RlbCA9IG5ldyBJdGVtVmlld01vZGVsKGxpc3RWaWV3TW9kZWwsIGZhbHNlLCBmaWxlLklkLCBmaWxlLlRpdGxlLCBmaWxlLkRhdGUsIGZpbGUuVmFsdWUsIGZpbGUuRm9sZGVySWQpO1xuXG4gICAgICAgICAgbGlzdFZpZXdNb2RlbC5hbGxJdGVtcy5wdXNoKGZpbGVWaWV3TW9kZWwpO1xuICAgICAgfVxuICB9XG5cbiAgICAvLyBTZXQgZ3JpZCBvcHRpb25zXG4gIGlmIChleHBEYXRhLkdyaWRPcHRpb25zKSB7XG4gICAgICBsaXN0Vmlld01vZGVsLnNlYXJjaFF1ZXJ5KGV4cERhdGEuR3JpZE9wdGlvbnMuU2VhcmNoUXVlcnkpO1xuICAgICAgbGlzdFZpZXdNb2RlbC5zb3J0Q29sdW1uKGV4cERhdGEuR3JpZE9wdGlvbnMuQ29sdW1uKTtcbiAgICAgIGxpc3RWaWV3TW9kZWwuc29ydERpcmVjdGlvbihleHBEYXRhLkdyaWRPcHRpb25zLkRpcmVjdGlvbik7XG4gIH1cblxuICAgIC8vIEluaXRpYWxpemUgbGlzdCB2aWV3IG1vZGVsXG4gIGxpc3RWaWV3TW9kZWwuaW5pdGlhbGl6ZSgpO1xuXG4gIC8vIEJpbmQgdmlldyBtb2RlbCB0byB2aWV3XG4gIGtvLmFwcGx5QmluZGluZ3MobGlzdFZpZXdNb2RlbCwgY29udGFpbmVyKTtcbiAgfVxuICBcbiBpZih0eXBlb2YgZXhwRGF0YSA9PSAnb2JqZWN0Jyl7XG4gIGluaXRpYWxpemVleHBEYXRhKGV4cERhdGEpO1xuIH1cblxufSk7XG4iLCJ2YXIgdGlueWNvbG9yID0gcmVxdWlyZSgndGlueWNvbG9yJyk7XG5cbmZ1bmN0aW9uIENvbG9yKHRpbnljb2xvcikge1xuICB0aGlzLmdldEJyaWdodG5lc3MgPSBmdW5jdGlvbihjb2xvcikge1xuICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IpLmdldEJyaWdodG5lc3MoKTtcbiAgfTtcbiAgdGhpcy5pc0xpZ2h0ID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5pc0xpZ2h0KCk7XG4gIH07XG4gIHRoaXMuaXNEYXJrID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5pc0RhcmsoKTtcbiAgfTtcbiAgdGhpcy5nZXRMdW1pbmFuY2UgPSBmdW5jdGlvbihjb2xvcikge1xuICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IpLmdldEx1bWluYW5jZSgpO1xuICB9O1xuXG5cbiAgdGhpcy5saWdodGVuID0gZnVuY3Rpb24oY29sb3IsIGFtb3VudCkge1xuICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IpLmxpZ2h0ZW4oYW1vdW50KS50b0hleFN0cmluZygpO1xuICB9O1xuICB0aGlzLmJyaWdodGVuID0gZnVuY3Rpb24oY29sb3IsIGFtb3VudCkge1xuICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IpLmJyaWdodGVuKGFtb3VudCkudG9IZXhTdHJpbmcoKTtcbiAgfTtcbiAgdGhpcy5kYXJrZW4gPSBmdW5jdGlvbihjb2xvciwgYW1vdW50KSB7XG4gICAgcmV0dXJuIHRpbnljb2xvcihjb2xvcikuZGFya2VuKGFtb3VudCkudG9IZXhTdHJpbmcoKTtcbiAgfTtcbiAgdGhpcy5kZXNhdHVyYXRlID0gZnVuY3Rpb24oY29sb3IsIGFtb3VudCkge1xuICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IpLmRlc2F0dXJhdGUoYW1vdW50KS50b0hleFN0cmluZygpO1xuICB9O1xuICB0aGlzLnNhdHVyYXRlID0gZnVuY3Rpb24oY29sb3IsIGFtb3VudCkge1xuICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IpLnNhdHVyYXRlKGFtb3VudCkudG9IZXhTdHJpbmcoKTtcbiAgfTtcbiAgdGhpcy5ncmV5c2NhbGUgPSBmdW5jdGlvbihjb2xvcikge1xuICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IpLmdyZXlzY2FsZSgpLnRvSGV4U3RyaW5nKCk7XG4gIH07XG4gIHRoaXMuc3BpbiA9IGZ1bmN0aW9uKGNvbG9yLCBhbW91bnQpIHtcbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5zcGluKGFtb3VudCkudG9IZXhTdHJpbmcoKTtcbiAgfTtcbiAgdGhpcy5jb21wbGVtZW50ID0gZnVuY3Rpb24oY29sb3IpIHtcbiAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yKS5jb21wbGVtZW50KCkudG9IZXhTdHJpbmcoKTtcbiAgfTtcblxuICB0aGlzLm1peCA9IHRpbnljb2xvci5taXg7XG4gIHRoaXMucmVhZGFiaWxpdHkgPSB0aW55Y29sb3IucmVhZGFiaWxpdHk7XG4gIHRoaXMuaXNSZWFkYWJsZSA9IHRpbnljb2xvci5pc1JlYWRhYmxlO1xuICB0aGlzLm1vc3RSZWFkYWJsZSA9IHRpbnljb2xvci5tb3N0UmVhZGFibGU7XG59XG5cbnZhciBjb2xvclBsdWdpbiA9IGZ1bmN0aW9uKHZtKSB7XG4gIGdsb2JhbC5Db2xvciA9IG5ldyBDb2xvcih0aW55Y29sb3IpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjb2xvclBsdWdpbjsiLCJcInVzZSBzdHJpY3RcIjtcbi8qIGdsb2JhbCBnbG9iYWw6IGZhbHNlICovXG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGlubGluZURvY3VtZW50ID0gcmVxdWlyZShcImp1aWNlL2xpYi9pbmxpbmVcIikoe30pLmlubGluZURvY3VtZW50O1xuXG52YXIgaW5saW5lclBsdWdpbiA9IGZ1bmN0aW9uKHZtKSB7XG4gIHZtLmlubGluZSA9IGZ1bmN0aW9uKGRvYykge1xuICAgIC8vIHRpbnltY2UgbWF5IGhhdmUgYWRkZWQgc3R5bGUgYXR0cmlidXRlcyB0byBlbGVtZW50cyB0aGF0IHdpbGwgYWxzbyBoYXZlIGdsb2JhbCBzdHlsZXMgdG8gYmUgaW5saW5lZFxuICAgICQoJ1tzdHlsZV06bm90KFtyZXBsYWNlZHN0eWxlXSknLCBkb2MpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsKSB7XG4gICAgICB2YXIgJGVsID0gJChlbCk7XG4gICAgICAkZWwuYXR0cigncmVwbGFjZWRzdHlsZScsICRlbC5hdHRyKCdzdHlsZScpKTtcbiAgICB9KTtcblxuICAgIHZhciBzdHlsZSA9IFtdO1xuICAgICQoJ3N0eWxlW2RhdGEtaW5saW5lPVwidHJ1ZVwiXScsIGRvYykuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgICAgdmFyIGNvbnRlbnQgPSAkKGVsZW1lbnQpLmh0bWwoKTtcbiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLzwhLS0ga28gKCg/IS0tKS4pKj8gLS0+L2csICcnKTsgLy8gdGhpcyByZXBsYWNlcyB0aGUgYWJvdmUgd2l0aCBhIG1vcmUgZm9ybWFsIChidXQgc2xvd2VyKSBzb2x1dGlvblxuICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvPCEtLSBcXC9rbyAtLT4vZywgJycpO1xuICAgICAgc3R5bGUucHVzaChjb250ZW50KTtcbiAgICAgICQoZWxlbWVudCkucmVtb3ZlQXR0cignZGF0YS1pbmxpbmUnKTtcbiAgICB9KTtcbiAgICB2YXIgc3R5bGVUZXh0ID0gc3R5bGUuam9pbihcIlxcblwiKTtcbiAgICB2YXIgJGNvbnRleHQgPSBmdW5jdGlvbihzZWxlY3RvciwgY29udGV4dCkge1xuICAgICAgaWYgKHR5cGVvZiBjb250ZXh0ID09ICd1bmRlZmluZWQnKSBjb250ZXh0ID0gZG9jO1xuICAgICAgcmV0dXJuICQoc2VsZWN0b3IsIGNvbnRleHQpO1xuICAgIH07XG4gICAgJGNvbnRleHQucm9vdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICQoJzpyb290JywgZG9jKTtcbiAgICB9O1xuICAgIGlubGluZURvY3VtZW50KCRjb250ZXh0LCBzdHlsZVRleHQsIHsgc3R5bGVBdHRyaWJ1dGVOYW1lOiAncmVwbGFjZWRzdHlsZScgfSk7XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlubGluZXJQbHVnaW47IiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWwgZ2xvYmFsOiBmYWxzZSAqL1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuLy8gU2V0IGN1cnJlbnQgZGF0ZVxudmFyIGQgPSBuZXcgRGF0ZSgpO1xuXG52YXIgbW9udGggPSBkLmdldE1vbnRoKCkrMTtcbnZhciBkYXkgPSBkLmdldERhdGUoKTtcblxudmFyIGN1cnJlbnREYXRlID0gZC5nZXRGdWxsWWVhcigpICsgJy8nICtcbigoJycrbW9udGgpLmxlbmd0aDwyID8gJzAnIDogJycpICsgbW9udGggKyAnLycgK1xuKCgnJytkYXkpLmxlbmd0aDwyID8gJzAnIDogJycpICsgZGF5O1xuXG52YXIgbHNMb2FkZXIgPSBmdW5jdGlvbihoYXNoX2tleSwgZW1haWxQcm9jZXNzb3JCYWNrZW5kKSB7XG4gIHZhciBtZFN0ciA9IGdsb2JhbC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm1ldGFkYXRhLVwiICsgaGFzaF9rZXkpO1xuICBpZiAobWRTdHIgIT09IG51bGwpIHtcbiAgICB2YXIgbW9kZWw7XG4gICAgdmFyIHRkID0gZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGVtcGxhdGUtXCIgKyBoYXNoX2tleSk7XG4gICAgaWYgKHRkICE9PSBudWxsKSBtb2RlbCA9IEpTT04ucGFyc2UodGQpO1xuICAgIHZhciBtZCA9IEpTT04ucGFyc2UobWRTdHIpO1xuICAgIHJldHVybiB7XG4gICAgICBtZXRhZGF0YTogbWQsXG4gICAgICBtb2RlbDogbW9kZWwsXG4gICAgICBleHRlbnNpb246IGxzQ29tbWFuZFBsdWdpbkZhY3RvcnkobWQsIGVtYWlsUHJvY2Vzc29yQmFja2VuZClcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHRocm93IFwiQ2Fubm90IGZpbmQgc3RvcmVkIGRhdGEgZm9yIFwiK2hhc2hfa2V5O1xuICB9XG59O1xuXG52YXIgbHNDb21tYW5kUGx1Z2luRmFjdG9yeSA9IGZ1bmN0aW9uKG1kLCBlbWFpbFByb2Nlc3NvckJhY2tlbmQpIHtcbiAgdmFyIGNvbW1hbmRzUGx1Z2luID0gZnVuY3Rpb24obWRrZXksIG1kbmFtZSwgdmlld01vZGVsKSB7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhcImxvYWRpbmcgZnJvbSBtZXRhZGF0YVwiLCBtZCwgbW9kZWwpO1xuICAgIHZhciBzYXZlQ21kID0ge1xuICAgICAgbmFtZTogJ1NhdmUnLCAvLyBsMTBuIGhhcHBlbnMgaW4gdGhlIHRlbXBsYXRlXG4gICAgICBlbmFibGVkOiBrby5vYnNlcnZhYmxlKHRydWUpXG4gICAgfTtcbiAgICBzYXZlQ21kLmV4ZWN1dGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNhdmVDbWQuZW5hYmxlZChmYWxzZSk7XG4gICAgICB2aWV3TW9kZWwubWV0YWRhdGEuY2hhbmdlZCA9IERhdGUubm93KCk7XG4gICAgICBpZiAodHlwZW9mIHZpZXdNb2RlbC5tZXRhZGF0YS5rZXkgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiVW5hYmxlIHRvIGZpbmQga2V5IGluIG1ldGFkYXRhIG9iamVjdC4uLlwiLCB2aWV3TW9kZWwubWV0YWRhdGEpO1xuICAgICAgICB2aWV3TW9kZWwubWV0YWRhdGEua2V5ID0gbWRrZXk7XG4gICAgICB9XG4gICAgICB2YXIgZWRpdHMgPSBKU09OLnBhcnNlKGdsb2JhbC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWRpdHMnKSk7XG4gICAgICB2YXIgdGVtcGxhdGVzID0gZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0ZW1wbGF0ZXMnKTtcblxuICAgICAgaWYgKGVkaXRzLmluZGV4T2YobWRrZXkpIDwgMCB8fCB0eXBlb2YgZWRpdHMgIT09ICdvYmplY3QnIHx8IHRlbXBsYXRlcy5pbmRleE9mKG1ka2V5KSA+IDApe1xuXG4gICAgICAgIHZhciBuZXdLZXkgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNyk7XG5cbiAgICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlZGl0cycsIEpTT04uc3RyaW5naWZ5KGVkaXRzKSk7XG4gICAgICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm1ldGFkYXRhLVwiICsgbmV3S2V5LCB2aWV3TW9kZWwuZXhwb3J0TWV0YWRhdGEoKSk7XG4gICAgICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRlbXBsYXRlLVwiICsgbmV3S2V5LCB2aWV3TW9kZWwuZXhwb3J0SlNPTigpKTtcbiAgICAgIFxuICAgICAgICBpZigkKCcjbWFpbi13eXNpd3lnLWFyZWEnKS5odG1sKCkubGVuZ3RoICYmICQoJy5jb2RlLWVkaXRvcicpLmxlbmd0aCl7XG4gICAgICAgICAgXG4gICAgICAgICAgdmFyIHNhdmVkRWRpdCA9IEpTT04ucGFyc2UoZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibWV0YWRhdGEtXCIgKyBuZXdLZXksIHZpZXdNb2RlbC5leHBvcnRNZXRhZGF0YSgpKSk7XG4gICAgICAgICAgc2F2ZWRFZGl0LmRlc2MgPSAnQ29kZSB5b3VyIG93bic7XG4gICAgICAgICAgc2F2ZWRFZGl0LmtleSA9IG5ld0tleTtcbiAgICAgICAgICB2aWV3TW9kZWwuZWRpdHMucHVzaCh7IGNyZWF0ZWQ6IGN1cnJlbnREYXRlLCB0aXRsZTogJ1VudGl0bGVkIGRyYWZ0Jywga2V5OiBuZXdLZXksIG5hbWU6ICd2ZXJzYWZpeC0xJywgdGVtcGxhdGU6ICd0ZW1wbGF0ZXMvdmVyc2FmaXgtMS90ZW1wbGF0ZS12ZXJzYWZpeC0xLmh0bWwnLCBkZXNjOiAnQ29kZSB5b3VyIG93bicgfSk7XG5cbiAgICAgICAgICBnbG9iYWwuZG9jdW1lbnQubG9jYXRpb24gPSAnY29kZS1jYW1wYWlnbi5odG1sIycrbmV3S2V5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdsb2JhbC5kb2N1bWVudC5sb2NhdGlvbiA9ICdhZHZhbmNlZC1jYW1wYWlnbi5odG1sIycrbmV3S2V5O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnbG9iYWwubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtZXRhZGF0YS1cIiArIG1ka2V5LCB2aWV3TW9kZWwuZXhwb3J0TWV0YWRhdGEoKSk7XG4gICAgICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGVtcGxhdGUtXCIgKyBtZGtleSwgdmlld01vZGVsLmV4cG9ydEpTT04oKSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHNhdmVDbWQuZW5hYmxlZCh0cnVlKTtcbiAgICB9O1xuICAgIHZhciB0ZXN0Q21kID0ge1xuICAgICAgbmFtZTogJ1Rlc3QnLCAvLyBsMTBuIGhhcHBlbnMgaW4gdGhlIHRlbXBsYXRlXG4gICAgICBlbmFibGVkOiBrby5vYnNlcnZhYmxlKHRydWUpXG4gICAgfTtcbiAgICB2YXIgZG93bmxvYWRDbWQgPSB7XG4gICAgICBuYW1lOiAnRG93bmxvYWQnLCAvLyBsMTBuIGhhcHBlbnMgaW4gdGhlIHRlbXBsYXRlXG4gICAgICBlbmFibGVkOiBrby5vYnNlcnZhYmxlKHRydWUpXG4gICAgfTtcbiAgICB0ZXN0Q21kLmV4ZWN1dGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRlc3RDbWQuZW5hYmxlZChmYWxzZSk7XG4gICAgICB2YXIgZW1haWwgPSBnbG9iYWwubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0ZXN0ZW1haWxcIik7XG4gICAgICBpZiAoZW1haWwgPT09IG51bGwgfHwgZW1haWwgPT0gJ251bGwnKSBlbWFpbCA9IHZpZXdNb2RlbC50KCdJbnNlcnQgaGVyZSB0aGUgcmVjaXBpZW50IGVtYWlsIGFkZHJlc3MnKTtcbiAgICAgIGVtYWlsID0gZ2xvYmFsLnByb21wdCh2aWV3TW9kZWwudChcIlRlc3QgZW1haWwgYWRkcmVzc1wiKSwgZW1haWwpO1xuICAgICAgaWYgKGVtYWlsLm1hdGNoKC9ALykpIHtcbiAgICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGVzdGVtYWlsXCIsIGVtYWlsKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJUT0RPIHRlc3RpbmcuLi5cIiwgZW1haWwpO1xuICAgICAgICB2YXIgcG9zdFVybCA9IGVtYWlsUHJvY2Vzc29yQmFja2VuZCA/IGVtYWlsUHJvY2Vzc29yQmFja2VuZCA6ICcvZGwvJztcbiAgICAgICAgdmFyIHBvc3QgPSAkLnBvc3QocG9zdFVybCwge1xuICAgICAgICAgIGFjdGlvbjogJ2VtYWlsJyxcbiAgICAgICAgICByY3B0OiBlbWFpbCxcbiAgICAgICAgICBzdWJqZWN0OiBcIlt0ZXN0XSBcIiArIG1ka2V5ICsgXCIgLSBcIiArIG1kbmFtZSxcbiAgICAgICAgICBodG1sOiB2aWV3TW9kZWwuZXhwb3J0SFRNTCgpXG4gICAgICAgIH0sIG51bGwsICdodG1sJyk7XG4gICAgICAgIHBvc3QuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImZhaWxcIiwgYXJndW1lbnRzKTtcbiAgICAgICAgICB2aWV3TW9kZWwubm90aWZpZXIuZXJyb3Iodmlld01vZGVsLnQoJ1VuZXhwZWN0ZWQgZXJyb3IgdGFsa2luZyB0byBzZXJ2ZXI6IGNvbnRhY3QgdXMhJykpO1xuICAgICAgICB9KTtcbiAgICAgICAgcG9zdC5zdWNjZXNzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwic3VjY2Vzc1wiLCBhcmd1bWVudHMpO1xuICAgICAgICAgIHZpZXdNb2RlbC5ub3RpZmllci5zdWNjZXNzKHZpZXdNb2RlbC50KFwiVGVzdCBlbWFpbCBzZW50Li4uXCIpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHBvc3QuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHRlc3RDbWQuZW5hYmxlZCh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnbG9iYWwuYWxlcnQodmlld01vZGVsLnQoJ0ludmFsaWQgZW1haWwgYWRkcmVzcycpKTtcbiAgICAgICAgdGVzdENtZC5lbmFibGVkKHRydWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgZG93bmxvYWRDbWQuZXhlY3V0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgZG93bmxvYWRDbWQuZW5hYmxlZChmYWxzZSk7XG4gICAgICB2aWV3TW9kZWwubm90aWZpZXIuaW5mbyh2aWV3TW9kZWwudChcIkRvd25sb2FkaW5nLi4uXCIpKTtcbiAgICAgIHZpZXdNb2RlbC5leHBvcnRIVE1MdG9UZXh0YXJlYSgnI2Rvd25sb2FkSHRtbFRleHRhcmVhJyk7XG4gICAgICB2YXIgcG9zdFVybCA9IGVtYWlsUHJvY2Vzc29yQmFja2VuZCA/IGVtYWlsUHJvY2Vzc29yQmFja2VuZCA6ICcvZGwvJztcbiAgICAgIGdsb2JhbC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWRGb3JtJykuc2V0QXR0cmlidXRlKFwiYWN0aW9uXCIsIHBvc3RVcmwpO1xuICAgICAgZ2xvYmFsLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3dubG9hZEZvcm0nKS5zdWJtaXQoKTtcbiAgICAgIGRvd25sb2FkQ21kLmVuYWJsZWQodHJ1ZSk7XG4gICAgfTtcblxuICAgIHZpZXdNb2RlbC5zYXZlID0gc2F2ZUNtZDtcbiAgICB2aWV3TW9kZWwudGVzdCA9IHRlc3RDbWQ7XG4gICAgdmlld01vZGVsLmRvd25sb2FkID0gZG93bmxvYWRDbWQ7XG4gIH0uYmluZCh1bmRlZmluZWQsIG1kLmtleSwgbWQubmFtZSk7XG5cbiAgcmV0dXJuIGNvbW1hbmRzUGx1Z2luO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBsc0xvYWRlcjtcbiIsInZhciB1dGlsUGx1Z2luID0gZnVuY3Rpb24odm0pIHtcbiAgZ2xvYmFsLlV0aWwgPSB7XG4gICAgJ2RlY29kZVVSSSc6IGRlY29kZVVSSSxcbiAgICAnZW5jb2RlVVJJJzogZW5jb2RlVVJJLFxuICAgICdkZWNvZGVVUklDb21wb25lbnQnOiBkZWNvZGVVUklDb21wb25lbnQsXG4gICAgJ2VuY29kZVVSSUNvbXBvbmVudCc6IGVuY29kZVVSSUNvbXBvbmVudCxcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdXRpbFBsdWdpbjsiLCJcInVzZSBzdHJpY3RcIjtcblxucmVxdWlyZShcImtub2Nrb3V0LXNvcnRhYmxlXCIpO1xuXG5yZXF1aXJlKFwiLi9iaW5kaW5ncy9qcXVlcnl1aS1zcGlubmVyLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3MvanF1ZXJ5dWktdGFicy5qc1wiKTtcbnJlcXVpcmUoXCIuL2JpbmRpbmdzL2NvbG9ycGlja2VyLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3MvYmxvY2tzLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3MvY3NzdGV4dC5qc1wiKTtcbnJlcXVpcmUoXCIuL2JpbmRpbmdzL2JpbmQtaWZyYW1lLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3MvZHJvcHBhYmxlLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3MvZmlsZXVwbG9hZC5qc1wiKTtcbnJlcXVpcmUoXCIuL2JpbmRpbmdzL3ZpcnR1YWxzLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3Mvd3lzaXd5Z3MuanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy9zY3JvbGxmaXguanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy9pZi1zdWJzLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3MvZXh0c29ydGFibGVzLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3MvZXZlbnRhYmxlLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3MvdG9vbHRpcHMuanNcIik7XG5yZXF1aXJlKFwiLi9iaW5kaW5ncy9leHRlbmRlci1wYWdpbmF0aW9uLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3MvdmFsaWRhdGVkLXZhbHVlLmpzXCIpO1xucmVxdWlyZShcIi4vYmluZGluZ3Mvc2Nyb2xsaW50b3ZpZXcuanNcIik7IiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWwgZ2xvYmFsOiBmYWxzZSAqL1xuXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIga28gPSByZXF1aXJlKFwia25vY2tvdXRcIik7XG52YXIga29qcXVpID0gcmVxdWlyZShcImtub2Nrb3V0LWpxdWVyeXVpXCIpOyAvLyBqdXN0IGZvciB0aGUgd2lkZ2V0IHBsdWdpbnNcbnZhciB0ZW1wbGF0ZUNvbnZlcnRlciA9IHJlcXVpcmUoXCIuL2NvbnZlcnRlci9tYWluLmpzXCIpO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcbnZhciBpbml0aWFsaXplVmlld21vZGVsID0gcmVxdWlyZShcIi4vdmlld21vZGVsLmpzXCIpO1xudmFyIHRlbXBsYXRlU3lzdGVtID0gcmVxdWlyZSgnLi9iaW5kaW5ncy9jaG9vc2UtdGVtcGxhdGUuanMnKTtcblxuLy8gY2FsbCBhIGdpdmVuIG1ldGhvZCBvbiBldmVyeSBwbHVnaW4gaW1wbGVtZW50aW5nIGl0LlxuLy8gc3VwcG9ydHMgYSBcInJldmVyc2VcIiBwYXJhbWV0ZXIgdG8gY2FsbCB0aGUgbWV0aG9kcyBmcm9tIHRoZSBsYXN0IG9uZSB0byB0aGUgZmlyc3Qgb25lLlxudmFyIHBsdWdpbnNDYWxsID0gZnVuY3Rpb24ocGx1Z2lucywgbWV0aG9kTmFtZSwgYXJncywgcmV2ZXJzZSkge1xuICB2YXIgc3RhcnQsIGVuZCwgZGlmZiwgcmVzLCByZXN1bHRzO1xuICByZXN1bHRzID0gW107XG4gIGlmICh0eXBlb2YgcmV2ZXJzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgcmV2ZXJzZSkge1xuICAgIHN0YXJ0ID0gcGx1Z2lucy5sZW5ndGggLSAxO1xuICAgIGVuZCA9IDA7XG4gICAgZGlmZiA9IC0xO1xuICB9IGVsc2Uge1xuICAgIHN0YXJ0ID0gMDtcbiAgICBlbmQgPSBwbHVnaW5zLmxlbmd0aCAtIDE7XG4gICAgZGlmZiA9IDE7XG4gIH1cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpICE9IGVuZCArIGRpZmY7IGkgKz0gZGlmZikge1xuICAgIGlmICh0eXBlb2YgcGx1Z2luc1tpXVttZXRob2ROYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJlcyA9IHBsdWdpbnNbaV1bbWV0aG9kTmFtZV0uYXBwbHkocGx1Z2luc1tpXSwgYXJncyk7XG4gICAgICBpZiAodHlwZW9mIHJlcyAhPT0gJ3VuZGVmaW5lZCcpIHJlc3VsdHMucHVzaChyZXMpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0cztcbn07XG5cbi8vIHdvcmthcm91bmQgZm9yIGtub2Nrb3V0LWpxdWVyeXVpJ3MgYnV0dG9uc2V0L2J1dHRvbiBkaXNwb3NhbDpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ndmFzL2tub2Nrb3V0LWpxdWVyeXVpL2lzc3Vlcy8yNVxudmFyIG9yaWdEaXNwb3NlQ2FsbGJhY2sgPSBrby51dGlscy5kb21Ob2RlRGlzcG9zYWwuYWRkRGlzcG9zZUNhbGxiYWNrO1xua28udXRpbHMuZG9tTm9kZURpc3Bvc2FsLmFkZERpc3Bvc2VDYWxsYmFjayA9IGZ1bmN0aW9uKG5vZGUsIGNhbGxiYWNrKSB7XG4gIHZhciBuZXdDYWxsYmFjayA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICB0cnkge1xuICAgICAgY2FsbGJhY2sobm9kZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiQ2F1Z2h0IHVuZXhwZWN0ZWQgZGlzcG9zZSBjYWxsYmFjayBleGNlcHRpb25cIiwgZSk7XG4gICAgfVxuICB9O1xuICBvcmlnRGlzcG9zZUNhbGxiYWNrKG5vZGUsIG5ld0NhbGxiYWNrKTtcbn07XG5cbnZhciBiaW5kaW5nUGx1Z2luTWFrZXIgPSBmdW5jdGlvbihwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyKSB7XG4gIHJldHVybiB7XG4gICAgdmlld01vZGVsOiBmdW5jdGlvbih2aWV3TW9kZWwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIoJ2FwcGx5QmluZGluZ3MnLCBrby5hcHBseUJpbmRpbmdzLmJpbmQodW5kZWZpbmVkLCB2aWV3TW9kZWwpKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLCBlcnIuc3RhY2spO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfSxcbiAgICBkaXNwb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIoJ3VuYXBwbHlCaW5kaW5ncycsIGtvLmNsZWFuTm9kZS5iaW5kKHRoaXMsIGdsb2JhbC5kb2N1bWVudC5ib2R5KSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGVyciwgZXJyLnN0YWNrKTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cbnZhciB0ZW1wbGF0ZUNyZWF0b3IgPSBmdW5jdGlvbih0ZW1wbGF0ZVBsdWdpbiwgaHRtbE9yRWxlbWVudCwgb3B0aW9uYWxOYW1lLCB0ZW1wbGF0ZU1vZGUpIHtcbiAgdmFyIHRtcE5hbWUgPSBvcHRpb25hbE5hbWU7XG4gIGlmICh0eXBlb2Ygb3B0aW9uYWxOYW1lICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiB0ZW1wbGF0ZU1vZGUgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIGh0bWxPckVsZW1lbnQgIT0gJ29iamVjdCcgfHwgaHRtbE9yRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT0gJ3JlcGxhY2VkaHRtbCcpIHRtcE5hbWUgKz0gJy0nICsgdGVtcGxhdGVNb2RlO1xuICB9XG5cbiAgd2hpbGUgKHR5cGVvZiB0bXBOYW1lID09ICd1bmRlZmluZWQnIHx8IHRtcE5hbWUgPT09IG51bGwgfHwgdGVtcGxhdGVQbHVnaW4uZXhpc3RzKHRtcE5hbWUpKSB7XG4gICAgdG1wTmFtZSA9ICdhbm9ueW1vdXMtJyArIE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMDAwMDApICsgMSk7XG4gIH1cblxuICBpZiAodHlwZW9mIGh0bWxPckVsZW1lbnQgPT0gJ29iamVjdCcgJiYgaHRtbE9yRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gJ3JlcGxhY2VkaHRtbCcpIHtcbiAgICB2YXIgJGVsID0gJChodG1sT3JFbGVtZW50KTtcbiAgICB2YXIgJGhlYWQgPSAkKCdyZXBsYWNlZGhlYWQnLCAkZWwpO1xuICAgIHZhciAkYm9keSA9ICQoJ3JlcGxhY2VkYm9keScsICRlbCk7XG4gICAgdGVtcGxhdGVQbHVnaW4uYWRkZXIodG1wTmFtZSArICctaGVhZCcsICRoZWFkLmh0bWwoKSB8fCAnJyk7XG4gICAgdGVtcGxhdGVQbHVnaW4uYWRkZXIodG1wTmFtZSArICctc2hvdycsICRib2R5Lmh0bWwoKSB8fCAnJyk7XG4gICAgdGVtcGxhdGVQbHVnaW4uYWRkZXIodG1wTmFtZSArICctcHJldmlldycsICRlbC5odG1sKCkpO1xuICAgIHRlbXBsYXRlUGx1Z2luLmFkZGVyKHRtcE5hbWUgKyAnLXd5c2l3eWcnLCAkZWwuaHRtbCgpKTtcblxuICAgIC8vICRoZWFkLmF0dHIoJ2RhdGEtYmluZCcsICdibG9jazogY29udGVudCcpO1xuICAgICRoZWFkLmNoaWxkcmVuKCkuZGV0YWNoKCk7XG4gICAgJGhlYWQuaHRtbChcIjwhLS0ga28gYmxvY2s6IGNvbnRlbnQgLS0+PCEtLSAva28gLS0+XCIpO1xuICAgICRoZWFkLmJlZm9yZSgnPCEtLSBrbyB3aXRoUHJvcGVydGllczogeyB0ZW1wbGF0ZU1vZGU6IFxcJ2hlYWRcXCcgfSAtLT4nKTtcbiAgICAkaGVhZC5hZnRlcignPCEtLSAva28gLS0+Jyk7XG4gICAgJGJvZHkuaHRtbChcIjwhLS0ga28gYmxvY2s6IGNvbnRlbnQgLS0+PCEtLSAva28gLS0+XCIpO1xuXG4gICAgdGVtcGxhdGVQbHVnaW4uYWRkZXIodG1wTmFtZSArICctaWZyYW1lJywgJGVsWzBdLm91dGVySFRNTCk7XG5cbiAgfSBlbHNlIGlmICh0eXBlb2YgaHRtbE9yRWxlbWVudCA9PSAnb2JqZWN0Jykge1xuICAgIHRlbXBsYXRlUGx1Z2luLmFkZGVyKHRtcE5hbWUsIGh0bWxPckVsZW1lbnQub3V0ZXJIVE1MKTtcbiAgfSBlbHNlIHtcbiAgICB0ZW1wbGF0ZVBsdWdpbi5hZGRlcih0bXBOYW1lLCBodG1sT3JFbGVtZW50KTtcbiAgfVxuXG4gIHJldHVybiB0bXBOYW1lO1xufTtcblxuLy8gQWRhcHRlciB0byB0cmFuc2Zvcm0gXCJ2aWV3TW9kZWwgcGx1Z2luc1wiIGludG8gbW9yZSBnZW5lcmljIHBsdWdpbnMuXG5mdW5jdGlvbiBfdmlld01vZGVsUGx1Z2luSW5zdGFuY2UocGx1Z2luRnVuY3Rpb24pIHtcbiAgdmFyIGluc3RhbmNlO1xuICByZXR1cm4ge1xuICAgIHZpZXdNb2RlbDogZnVuY3Rpb24odmlld01vZGVsKSB7XG4gICAgICBpbnN0YW5jZSA9IHBsdWdpbkZ1bmN0aW9uKHZpZXdNb2RlbCk7XG4gICAgfSxcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0eXBlb2YgaW5zdGFuY2UgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbnN0YW5jZS5pbml0ICE9PSAndW5kZWZpbmVkJykgaW5zdGFuY2UuaW5pdCgpO1xuICAgIH0sXG4gICAgZGlzcG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodHlwZW9mIGluc3RhbmNlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW5zdGFuY2UuZGlzcG9zZSAhPT0gJ3VuZGVmaW5lZCcpIGluc3RhbmNlLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH07XG59XG5cbnZhciBfdGVtcGxhdGVVcmxDb252ZXJ0ZXIgPSBmdW5jdGlvbihiYXNlUGF0aCwgdXJsKSB7XG4gIGlmICghdXJsLm1hdGNoKC9eW15cXC9dKjovKSAmJiAhdXJsLm1hdGNoKC9eXFwvLykgJiYgIXVybC5tYXRjaCgvXlxcWy8pICYmICF1cmwubWF0Y2goL14jPyQvKSkge1xuICAgIC8vIFRPRE8gdGhpcyBjb3VsZCBiZSBzbWFydGVyIGpvaW5pbmcgdGhlIHVybHMuLi5cbiAgICByZXR1cm4gYmFzZVBhdGggKyB1cmw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbnZhciB0ZW1wbGF0ZUxvYWRlciA9IGZ1bmN0aW9uKHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIsIHRlbXBsYXRlRmlsZU5hbWUsIHRlbXBsYXRlTWV0YWRhdGEsIGpzb3Jqc29uLCBleHRlbnNpb25zLCBnYWxsZXJ5VXJsKSB7XG4gIHZhciB0ZW1wbGF0ZUZpbGUgPSB0eXBlb2YgdGVtcGxhdGVGaWxlTmFtZSA9PSAnc3RyaW5nJyA/IHRlbXBsYXRlRmlsZU5hbWUgOiB0ZW1wbGF0ZU1ldGFkYXRhLnRlbXBsYXRlO1xuICB2YXIgdGVtcGxhdGVQYXRoID0gXCIuL1wiO1xuICB2YXIgcCA9IHRlbXBsYXRlRmlsZS5sYXN0SW5kZXhPZignLycpO1xuICBpZiAocCAhPSAtMSkge1xuICAgIHRlbXBsYXRlUGF0aCA9IHRlbXBsYXRlRmlsZS5zdWJzdHIoMCwgcCArIDEpO1xuICB9XG5cbiAgdmFyIHRlbXBsYXRlVXJsQ29udmVydGVyID0gX3RlbXBsYXRlVXJsQ29udmVydGVyLmJpbmQodW5kZWZpbmVkLCB0ZW1wbGF0ZVBhdGgpO1xuXG4gIHZhciBtZXRhZGF0YTtcbiAgaWYgKHR5cGVvZiB0ZW1wbGF0ZU1ldGFkYXRhID09ICd1bmRlZmluZWQnKSB7XG4gICAgbWV0YWRhdGEgPSB7XG4gICAgICB0ZW1wbGF0ZTogdGVtcGxhdGVGaWxlLFxuICAgICAgLy8gVE9ETyBsMTBuP1xuICAgICAgbmFtZTogJ05vIG5hbWUnLFxuICAgICAgY3JlYXRlZDogRGF0ZS5ub3coKVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgbWV0YWRhdGEgPSB0ZW1wbGF0ZU1ldGFkYXRhO1xuICB9XG5cbiAgJC5nZXQodGVtcGxhdGVGaWxlLCBmdW5jdGlvbih0ZW1wbGF0ZWNvZGUpIHtcbiAgICB2YXIgcmVzID0gdGVtcGxhdGVDb21waWxlcihwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgXCJ0ZW1wbGF0ZVwiLCB0ZW1wbGF0ZWNvZGUsIGpzb3Jqc29uLCBtZXRhZGF0YSwgZXh0ZW5zaW9ucywgZ2FsbGVyeVVybCk7XG4gICAgcmVzLmluaXQoKTtcbiAgfSk7XG59O1xuXG52YXIgdGVtcGxhdGVDb21waWxlciA9IGZ1bmN0aW9uKHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIsIHRlbXBsYXRlVXJsQ29udmVydGVyLCB0ZW1wbGF0ZU5hbWUsIHRlbXBsYXRlY29kZSwganNvcmpzb24sIG1ldGFkYXRhLCBleHRlbnNpb25zLCBnYWxsZXJ5VXJsKSB7XG4gIC8vIHdlIHN0cmlwIGNvbnRlbnQgYmVmb3JlIDxodG1sPiB0YWcgYW5kIGFmdGVyIDwvaHRtbD4gYmVjYXVzZSBqcXVlcnkgZG9lc24ndCBwYXJzZSBpdC5cbiAgLy8gd2UnbGwga2VlcCBpdCBcInJhd1wiIGFuZCB1c2UgaXQgaW4gdGhlIHByZXZpZXcvb3V0cHV0IG1ldGhvZHMuXG4gIHZhciByZXMgPSB0ZW1wbGF0ZWNvZGUubWF0Y2goL14oW1xcU1xcc10qKShbPF1odG1sW14+XSo+W1xcU1xcc10qPFxcL2h0bWw+KShbXFxTXFxzXSopJC9pKTtcbiAgaWYgKHJlcyA9PT0gbnVsbCkgdGhyb3cgXCJVbmFibGUgdG8gZmluZCA8aHRtbD4gb3BlbmluZyBhbmQgY2xvc2luZyB0YWdzIGluIHRoZSB0ZW1wbGF0ZVwiO1xuICB2YXIgcHJlZml4ID0gcmVzWzFdO1xuICAvLyB3ZSBwYXJzZSB0aGUgaHRtbCBjb250ZW50IGFmdGVyIHJlcGxhY2luZyB0aGUgdGFnIG5hbWUgZm9yIGh0bWwvaGVhZC9ib2R5IHNvIHRvIGF2b2lkIGpxdWVyeSBpc3N1ZXMgaW4gcGFyc2luZy5cbiAgdmFyIGJhc2ljU3RydWN0dXJlID0geyAnPGh0bWwnOiAwLCAnPGhlYWQnOiAwLCAnPGJvZHknOiAwLCAnPC9odG1sJzogMCwgJzwvYm9keSc6IDAsICc8L2hlYWQnOiAwIH07XG4gIHZhciBodG1sID0gcmVzWzJdLnJlcGxhY2UoLyg8XFwvPykoaHRtbHxoZWFkfGJvZHkpKFtePl0qPikvZ2ksIGZ1bmN0aW9uKG1hdGNoLCBwMSwgcDIsIHAzKSB7XG4gICAgYmFzaWNTdHJ1Y3R1cmVbKHAxK3AyKS50b0xvd2VyQ2FzZSgpXSArPSAxO1xuICAgIHJldHVybiBwMSArICdyZXBsYWNlZCcgKyBwMiArIHAzO1xuICB9KTtcbiAgZm9yICh2YXIgZWxlIGluIGJhc2ljU3RydWN0dXJlKSBpZiAoYmFzaWNTdHJ1Y3R1cmUuaGFzT3duUHJvcGVydHkoZWxlKSkgaWYgKGJhc2ljU3RydWN0dXJlW2VsZV0gIT0gMSkge1xuICAgIGlmIChiYXNpY1N0cnVjdHVyZVtlbGVdID09PSAwKSB0aHJvdyBcIkVSUk9SOiBtaXNzaW5nIG1hbmRhdG9yeSBlbGVtZW50IFwiK2VsZStcIj5cIjtcbiAgICBpZiAoYmFzaWNTdHJ1Y3R1cmVbZWxlXSA+IDEpIHRocm93IFwiRVJST1I6IG11bHRpcGxlIGVsZW1lbnQgXCIrZWxlK1wiPiBvY2NvdXJlbmNlcyBhcmUgbm90IHN1cHBvcnRlZCAoZm91bmQgXCIrYmFzaWNTdHJ1Y3R1cmVbZWxlXStcIiBvY2NvdXJlbmNlcylcIjtcbiAgfVxuICB2YXIgcG9zdGZpeCA9IHJlc1szXTtcbiAgdmFyIGJsb2NrRGVmcyA9IFtdO1xuICB2YXIgZW5hYmxlVW5kbyA9IHRydWU7XG4gIHZhciBlbmFibGVSZWNvcmRlciA9IHRydWU7XG4gIHZhciBiYXNlVGhyZXNob2xkID0gJyskcm9vdC5jb250ZW50TGlzdGVuZXJzKCknO1xuXG4gIHZhciBwbHVnaW5zID0gW107XG5cbiAgaWYgKHR5cGVvZiBleHRlbnNpb25zICE9PSAndW5kZWZpbmVkJykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXh0ZW5zaW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHR5cGVvZiBleHRlbnNpb25zW2ldID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcGx1Z2lucy5wdXNoKF92aWV3TW9kZWxQbHVnaW5JbnN0YW5jZShleHRlbnNpb25zW2ldKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwbHVnaW5zLnB1c2goZXh0ZW5zaW9uc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIGNyZWF0ZWRUZW1wbGF0ZXMgPSBbXTtcbiAgdmFyIHRlbXBsYXRlc1BsdWdpbiA9IHtcbiAgICBhZGRlcjogZnVuY3Rpb24oaWQsIGh0bWwpIHtcbiAgICAgIGlmICh0eXBlb2YgaHRtbCAhPT0gJ3N0cmluZycpIHRocm93IFwiVGVtcGxhdGUgc3lzdGVtOiBjYW5ub3QgY3JlYXRlIG5ldyB0ZW1wbGF0ZSBcIiArIGlkO1xuICAgICAgdmFyIHRyYXNoID0gaHRtbC5tYXRjaCgvKGRhdGEpPy1rby1bXiA9Ol0qL2cpO1xuICAgICAgaWYgKHRyYXNoKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFUlJPUjogZm91bmQgdW5leHBlY3RlZCAta28tIGF0dHJpYnV0ZSBpbiBjb21waWxlZCB0ZW1wbGF0ZVwiLCBpZCwgXCIsIHlvdSBwcm9iYWJseSBtaXNwZWxsZWQgaXQ6XCIsIHRyYXNoKTtcbiAgICAgIH1cbiAgICAgIHRlbXBsYXRlU3lzdGVtLmFkZFRlbXBsYXRlKGlkLCBodG1sKTtcbiAgICAgIGNyZWF0ZWRUZW1wbGF0ZXMucHVzaChpZCk7XG4gICAgfSxcbiAgICBleGlzdHM6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgZWwgPSB0ZW1wbGF0ZVN5c3RlbS5nZXRUZW1wbGF0ZUNvbnRlbnQoaWQpO1xuICAgICAgaWYgKHR5cGVvZiBlbCAhPT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0cnVlO1xuICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBkaXNwb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGkgPSBjcmVhdGVkVGVtcGxhdGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHRlbXBsYXRlU3lzdGVtLnJlbW92ZVRlbXBsYXRlKGNyZWF0ZWRUZW1wbGF0ZXNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBrby5iaW5kaW5nSGFuZGxlcnNbJ2Jsb2NrJ10udGVtcGxhdGVFeGlzdHMgPSB0ZW1wbGF0ZXNQbHVnaW4uZXhpc3RzO1xuXG4gIC8vIHRlbXBsYXRlY3JlYXRvciB0cmFja3MgY3JlYXRlZCB0ZW1wbGF0ZSAodmlhIHRlbXBsYXRlQWRkZXIpIHNvIHRvIGJlIGFibGUgdG8gZGlzcG9zZSB0aGVtIGxhdGVyXG4gIHZhciBteVRlbXBsYXRlQ3JlYXRvciA9IHRlbXBsYXRlQ3JlYXRvci5iaW5kKHVuZGVmaW5lZCwgdGVtcGxhdGVzUGx1Z2luKTtcblxuICAvLyBmaXJzdCBwYXNzOiB3ZSBcImNvbXBpbGVcIiB0aGUgdGVtcGxhdGUgaW50byBhIHRlcm1wbGF0ZURlZiBvYmplY3RcbiAgdmFyIHRlbXBsYXRlRGVmID0gcGVyZm9ybWFuY2VBd2FyZUNhbGxlcigndHJhbnNsYXRlVGVtcGxhdGUnLCB0ZW1wbGF0ZUNvbnZlcnRlci50cmFuc2xhdGVUZW1wbGF0ZS5iaW5kKHVuZGVmaW5lZCwgdGVtcGxhdGVOYW1lLCBodG1sLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgbXlUZW1wbGF0ZUNyZWF0b3IpKTtcblxuICAvLyBzZWNvbmQgcGFzczogZ2l2ZW4gdGhlIHRlbXBsYXRlRGVmIHdlIGNyZWF0ZSBhIGJhc2UgY29udGVudCBtb2RlbCBvYmplY3QgZm9yIHRoaXMgdGVtcGxhdGUuXG4gIHZhciBjb250ZW50ID0gcGVyZm9ybWFuY2VBd2FyZUNhbGxlcignZ2VuZXJhdGVNb2RlbCcsIHRlbXBsYXRlQ29udmVydGVyLndyYXBwZWRSZXN1bHRNb2RlbC5iaW5kKHVuZGVmaW5lZCwgdGVtcGxhdGVEZWYpKTtcblxuICAvLyB0aGlyZCBwYXNzOiB3ZSBjcmVhdGUgXCJzdHlsZS9jb250ZW50IGVkaXRvcnNcIiBmb3IgZXZlcnkgYmxvY2tcbiAgdmFyIHdpZGdldHMgPSB7fTtcbiAgdmFyIHdpZGdldFBsdWdpbnMgPSBwbHVnaW5zQ2FsbChwbHVnaW5zLCAnd2lkZ2V0JywgWyQsIGtvLCBrb2pxdWldKTtcbiAgZm9yICh2YXIgd2kgPSAwOyB3aSA8IHdpZGdldFBsdWdpbnMubGVuZ3RoOyB3aSsrKSB7XG4gICAgd2lkZ2V0c1t3aWRnZXRQbHVnaW5zW3dpXS53aWRnZXRdID0gd2lkZ2V0UGx1Z2luc1t3aV07XG4gIH1cbiAgYmxvY2tEZWZzLnB1c2guYXBwbHkoYmxvY2tEZWZzLCBwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyKCdnZW5lcmF0ZUVkaXRvcnMnLCB0ZW1wbGF0ZUNvbnZlcnRlci5nZW5lcmF0ZUVkaXRvcnMuYmluZCh1bmRlZmluZWQsIHRlbXBsYXRlRGVmLCB3aWRnZXRzLCB0ZW1wbGF0ZVVybENvbnZlcnRlciwgbXlUZW1wbGF0ZUNyZWF0b3IsIGJhc2VUaHJlc2hvbGQpKSk7XG5cbiAgdmFyIGluY29tcGF0aWJsZVRlbXBsYXRlID0gZmFsc2U7XG4gIGlmICh0eXBlb2YganNvcmpzb24gIT09ICd1bmRlZmluZWQnICYmIGpzb3Jqc29uICE9PSBudWxsKSB7XG4gICAgdmFyIHVud3JhcHBlZDtcbiAgICBpZiAodHlwZW9mIGpzb3Jqc29uID09ICdzdHJpbmcnKSB7XG4gICAgICB1bndyYXBwZWQgPSBrby51dGlscy5wYXJzZUpzb24oanNvcmpzb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB1bndyYXBwZWQgPSBqc29yanNvbjtcbiAgICB9XG5cbiAgICAvLyB3ZSBydW4gYSBiYXNpYyBjb21wYXRpYmlsaXR5IGNoZWNrIGJldHdlZW4gdGhlIGNvbnRlbnQtbW9kZWwgd2UgZXhwZWN0IGFuZCB0aGUgaW5pdGlhbGl6YXRpb24gbW9kZWxcbiAgICB2YXIgY2hlY2tNb2RlbFJlcyA9IHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIoJ2NoZWNrTW9kZWwnLCB0ZW1wbGF0ZUNvbnZlcnRlci5jaGVja01vZGVsLmJpbmQodW5kZWZpbmVkLCBjb250ZW50Ll91bndyYXAoKSwgYmxvY2tEZWZzLCB1bndyYXBwZWQpKTtcbiAgICAvLyBpZiBjaGVja01vZGVsUmVzIGlzIDEgdGhlbiB0aGUgbW9kZWwgaXMgbm90IGZ1bGx5IGNvbXBhdGlibGUgYnV0IHdlIGZpeGVkIGl0XG4gICAgaWYgKGNoZWNrTW9kZWxSZXMgPT0gMikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlRyeWluZyB0byBjb21waWxlIGFuIGluY29tcGF0aWJsZSB0ZW1wbGF0ZSB2ZXJzaW9uIVwiLCBjb250ZW50Ll91bndyYXAoKSwgYmxvY2tEZWZzLCB1bndyYXBwZWQpO1xuICAgICAgaW5jb21wYXRpYmxlVGVtcGxhdGUgPSB0cnVlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb250ZW50Ll93cmFwKHVud3JhcHBlZCk7XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gaW5qZWN0IG1vZGVsIGNvbnRlbnQhXCIsIGV4KTtcbiAgICAgIGluY29tcGF0aWJsZVRlbXBsYXRlID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBUaGlzIGJ1aWxkIHRoZSB0ZW1wbGF0ZSBmb3IgdGhlIHByZXZpZXcvb3V0cHV0LCBidXQgY29uY2F0ZW5hdGluZyBwcmVmaXgsIHRlbXBsYXRlIGFuZCBjb250ZW50IGFuZCBzdHJpcHBpbmcgdGhlIFwicmVwbGFjZWRcIiBwcmVmaXggYWRkZWQgdG8gXCJwcm9ibGVtYXRpY1wiIHRhZyAoaHRtbC9oZWFkL2JvZHkpXG4gIHZhciBpZnJhbWVUcGwgPSBwcmVmaXggKyB0ZW1wbGF0ZVN5c3RlbS5nZXRUZW1wbGF0ZUNvbnRlbnQodGVtcGxhdGVOYW1lICsgJy1pZnJhbWUnKS5yZXBsYWNlKC8oPFxcLz8pcmVwbGFjZWQoaHRtbHxoZWFkfGJvZHkpKFtePl0qPikvZ2ksIGZ1bmN0aW9uKG1hdGNoLCBwMSwgcDIsIHAzKSB7XG4gICAgcmV0dXJuIHAxICsgcDIgKyBwMztcbiAgfSkgKyBwb3N0Zml4O1xuXG4gIC8vIHN0b3JlIHRoaXMgc28gdG8gcmVzdG9yZSBpdCBvbiBkaXNwb3NhbGVcbiAgdmFyIG9yaWdpRnJhbWVUcGwgPSBrby5iaW5kaW5nSGFuZGxlcnMuYmluZElmcmFtZS50cGw7XG4gIGtvLmJpbmRpbmdIYW5kbGVycy5iaW5kSWZyYW1lLnRwbCA9IGlmcmFtZVRwbDtcbiAgdmFyIGlGcmFtZVBsdWdpbiA9IHtcbiAgICBkaXNwb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgIGtvLmJpbmRpbmdIYW5kbGVycy5iaW5kSWZyYW1lLnRwbCA9IG9yaWdpRnJhbWVUcGw7XG4gICAgfVxuICB9O1xuXG4gIHBsdWdpbnMucHVzaChpRnJhbWVQbHVnaW4pO1xuICBwbHVnaW5zLnB1c2godGVtcGxhdGVzUGx1Z2luKTtcblxuICAvLyBpbml0aWFsaXplIHRoZSB2aWV3TW9kZWwgb2JqZWN0IGJhc2VkIG9uIHRoZSBjb250ZW50IG1vZGVsLlxuICB2YXIgdmlld01vZGVsID0gcGVyZm9ybWFuY2VBd2FyZUNhbGxlcignaW5pdGlhbGl6ZVZpZXdtb2RlbCcsIGluaXRpYWxpemVWaWV3bW9kZWwuYmluZCh0aGlzLCBjb250ZW50LCBibG9ja0RlZnMsIHRlbXBsYXRlVXJsQ29udmVydGVyLCBnYWxsZXJ5VXJsKSk7XG5cbiAgdmlld01vZGVsLm1ldGFkYXRhID0gbWV0YWRhdGE7XG4gIC8vIGxldCdzIHJ1biBzb21lIHZlcnNpb24gY2hlY2sgb24gdGVtcGxhdGUgYW5kIGVkaXRvciB1c2VkIHRvIGJ1aWxkIHRoZSBtb2RlbCBiZWluZyBsb2FkZWQuXG4gIHZhciBlZGl0dmVyID0gJzAuMTYuMCc7XG4gIGlmICh0eXBlb2Ygdmlld01vZGVsLm1ldGFkYXRhLmVkaXRvcnZlcnNpb24gIT09ICd1bmRlZmluZWQnICYmIHZpZXdNb2RlbC5tZXRhZGF0YS5lZGl0b3J2ZXJzaW9uICE9PSBlZGl0dmVyKSB7XG4gICAgY29uc29sZS53YXJuKFwiVGhlIG1vZGVsIGJlaW5nIGxvYWRlZCBoYXMgYmVlbiBjcmVhdGVkIHdpdGggYW4gb2xkZXIgZWRpdG9yIHZlcnNpb25cIiwgdmlld01vZGVsLm1ldGFkYXRhLmVkaXRvcnZlcnNpb24sIFwidnNcIiwgZWRpdHZlcik7XG4gIH1cbiAgdmlld01vZGVsLm1ldGFkYXRhLmVkaXRvcnZlcnNpb24gPSBlZGl0dmVyO1xuXG4gIGlmICh0eXBlb2YgdGVtcGxhdGVEZWYudmVyc2lvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIHZpZXdNb2RlbC5tZXRhZGF0YS50ZW1wbGF0ZXZlcnNpb24gIT09ICd1bmRlZmluZWQnICYmIHZpZXdNb2RlbC5tZXRhZGF0YS50ZW1wbGF0ZXZlcnNpb24gIT09IHRlbXBsYXRlRGVmLnZlcnNpb24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJUaGUgbW9kZWwgYmVpbmcgbG9hZGVkIGhhcyBiZWVuIGNyZWF0ZWQgd2l0aCBhIGRpZmZlcmVudCB0ZW1wbGF0ZSB2ZXJzaW9uXCIsIHRlbXBsYXRlRGVmLnZlcnNpb24sIFwidnNcIiwgdmlld01vZGVsLm1ldGFkYXRhLnRlbXBsYXRldmVyc2lvbik7XG4gICAgfVxuICAgIHZpZXdNb2RlbC5tZXRhZGF0YS50ZW1wbGF0ZXZlcnNpb24gPSB0ZW1wbGF0ZURlZi52ZXJzaW9uO1xuICB9XG5cbiAgdGVtcGxhdGVTeXN0ZW0uaW5pdCgpO1xuXG4gIC8vIGV2ZXJ5dGhpbmcncyByZWFkeSwgc3RhcnQga25vY2tvdXQgYmluZGluZ3MuXG4gIHBsdWdpbnMucHVzaChiaW5kaW5nUGx1Z2luTWFrZXIocGVyZm9ybWFuY2VBd2FyZUNhbGxlcikpO1xuXG4gIHBsdWdpbnNDYWxsKHBsdWdpbnMsICd2aWV3TW9kZWwnLCBbdmlld01vZGVsXSk7XG5cbiAgaWYgKGluY29tcGF0aWJsZVRlbXBsYXRlKSB7XG4gICAgJCgnI2luY29tcGF0aWJsZS10ZW1wbGF0ZScpLmRpYWxvZyh7XG4gICAgICBtb2RhbDogdHJ1ZSxcbiAgICAgIGFwcGVuZFRvOiAnI21vLWJvZHknLFxuICAgICAgYnV0dG9uczoge1xuICAgICAgICBPazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJCh0aGlzKS5kaWFsb2coXCJjbG9zZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtb2RlbDogdmlld01vZGVsLFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcGx1Z2luc0NhbGwocGx1Z2lucywgJ2luaXQnLCB1bmRlZmluZWQsIHRydWUpO1xuICAgIH0sXG4gICAgZGlzcG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICBwbHVnaW5zQ2FsbChwbHVnaW5zLCAnZGlzcG9zZScsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgfVxuICB9O1xuXG59O1xuXG5cbnZhciBjaGVja0ZlYXR1cmUgPSBmdW5jdGlvbihmZWF0dXJlLCBmdW5jKSB7XG4gIGlmICghZnVuYygpKSB7XG4gICAgY29uc29sZS53YXJuKFwiTWlzc2luZyBmZWF0dXJlXCIsIGZlYXR1cmUpO1xuICAgIHRocm93IFwiTWlzc2luZyBmZWF0dXJlIFwiICsgZmVhdHVyZTtcbiAgfVxufTtcblxudmFyIGlzQ29tcGF0aWJsZSA9IGZ1bmN0aW9uKCkge1xuICB0cnkge1xuICAgIC8vIHdpbmRvdy5tc01hdGNoTWVkaWEgd291bGQgbWF0Y2ggYWxzbyBJRTlcbiAgICAvLyBJRTkgd291bGRuJ3QgYmUgc28gaGFyZCB0byBzdXBwb3J0LCBidXQgaXQgZG9lc24ndCB3b3J0aCBpdC4gKHByZXZpZXcgaWZyYW1lIGFuZCBhdXRvbWF0aWMgc2Nyb2xsIGFyZSAyIHRoaW5ncyBub3Qgd29ya2luZyBpbiBJRTkpXG4gICAgY2hlY2tGZWF0dXJlKCdtYXRjaE1lZGlhJywgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGdsb2JhbC5tYXRjaE1lZGlhICE9ICd1bmRlZmluZWQnO1xuICAgIH0pO1xuICAgIGNoZWNrRmVhdHVyZSgnWE1MSHR0cFJlcXVlc3QgMicsIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICdYTUxIdHRwUmVxdWVzdCcgaW4gZ2xvYmFsICYmICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyBnbG9iYWwuWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB9KTtcbiAgICBjaGVja0ZlYXR1cmUoJ0VTNSBzdHJpY3QnLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHsgLyogXCJ1c2Ugc3RyaWN0XCI7Ki9cbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzID09ICd1bmRlZmluZWQnO1xuICAgICAgfSgpO1xuICAgIH0pO1xuICAgIGNoZWNrRmVhdHVyZSgnQ1NTIGJvcmRlclJhZGl1cycsIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBnbG9iYWwuZG9jdW1lbnQuYm9keS5zdHlsZVsnYm9yZGVyUmFkaXVzJ10gIT0gJ3VuZGVmaW5lZCc7XG4gICAgfSk7XG4gICAgY2hlY2tGZWF0dXJlKCdDU1MgYm94U2hhZG93JywgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGdsb2JhbC5kb2N1bWVudC5ib2R5LnN0eWxlWydib3hTaGFkb3cnXSAhPSAndW5kZWZpbmVkJztcbiAgICB9KTtcbiAgICBjaGVja0ZlYXR1cmUoJ0NTUyBib3hTaXppbmcnLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZ2xvYmFsLmRvY3VtZW50LmJvZHkuc3R5bGVbJ2JveFNpemluZyddICE9ICd1bmRlZmluZWQnO1xuICAgIH0pO1xuICAgIGNoZWNrRmVhdHVyZSgnQ1NTIGJhY2tncm91bmRTaXplJywgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGdsb2JhbC5kb2N1bWVudC5ib2R5LnN0eWxlWydiYWNrZ3JvdW5kU2l6ZSddICE9ICd1bmRlZmluZWQnO1xuICAgIH0pO1xuICAgIGNoZWNrRmVhdHVyZSgnQ1NTIGJhY2tncm91bmRPcmlnaW4nLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZ2xvYmFsLmRvY3VtZW50LmJvZHkuc3R5bGVbJ2JhY2tncm91bmRPcmlnaW4nXSAhPSAndW5kZWZpbmVkJztcbiAgICB9KTtcbiAgICBjaGVja0JhZEJyb3dzZXJFeHRlbnNpb25zKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxudmFyIGNoZWNrQmFkQnJvd3NlckV4dGVuc2lvbnMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGlkID0gJ2NoZWNrYmFkYnJvd3NlcnNmcmFtZSc7XG4gIHZhciBvcmlnVHBsID0ga28uYmluZGluZ0hhbmRsZXJzLmJpbmRJZnJhbWUudHBsO1xuICBrby5iaW5kaW5nSGFuZGxlcnMuYmluZElmcmFtZS50cGwgPSBcIjwhRE9DVFlQRSBodG1sPlxcclxcbjxodG1sPlxcclxcbjxoZWFkPjx0aXRsZT5BPC90aXRsZT5cXHJcXG48L2hlYWQ+XFxyXFxuPGJvZHk+PHAgc3R5bGU9XFxcImNvbG9yOiBibHVlXFxcIiBhbGlnbj1cXFwicmlnaHRcXFwiIGRhdGEtYmluZD1cXFwic3R5bGU6IHsgY29sb3I6ICdyZWQnIH1cXFwiPkI8L3A+PGRpdiBkYXRhLWJpbmQ9XFxcInRleHQ6IGNvbnRlbnRcXFwiPjwvZGl2PjwvYm9keT5cXHJcXG48L2h0bWw+XFxyXFxuXCI7XG4gICQoJ2JvZHknKS5hcHBlbmQoJzxpZnJhbWUgaWQ9XCInICsgaWQgKyAnXCIgZGF0YS1iaW5kPVwiYmluZElmcmFtZTogJGRhdGFcIj48L2lmcmFtZT4nKTtcbiAgdmFyIGZyYW1lRWwgPSBnbG9iYWwuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICBrby5hcHBseUJpbmRpbmdzKHsgY29udGVudDogXCJkdW1teSBjb250ZW50XCIgfSwgZnJhbWVFbCk7XG4gIC8vIE9ic29sZXRlIG1ldGhvZCBkaWRuJ3Qgd29yayBvbiBJRTExIHdoZW4gdXNpbmcgXCJIVE1MNSBkb2N0eXBlXCI6XG4gIC8vIHZhciBkb2NUeXBlID0gbmV3IFhNTFNlcmlhbGl6ZXIoKS5zZXJpYWxpemVUb1N0cmluZyhnbG9iYWwuZG9jdW1lbnQuZG9jdHlwZSk7XG4gIHZhciBub2RlID0gZnJhbWVFbC5jb250ZW50V2luZG93LmRvY3VtZW50LmRvY3R5cGU7XG4gIHZhciBkb2NUeXBlID0gXCI8IURPQ1RZUEUgXCIgKyBub2RlLm5hbWUgK1xuICAgIChub2RlLnB1YmxpY0lkID8gJyBQVUJMSUMgXCInICsgbm9kZS5wdWJsaWNJZCArICdcIicgOiAnJykgK1xuICAgICghbm9kZS5wdWJsaWNJZCAmJiBub2RlLnN5c3RlbUlkID8gJyBTWVNURU0nIDogJycpICtcbiAgICAobm9kZS5zeXN0ZW1JZCA/ICcgXCInICsgbm9kZS5zeXN0ZW1JZCArICdcIicgOiAnJykgKyAnPic7XG4gIHZhciBjb250ZW50ID0gZG9jVHlwZSArIFwiXFxuXCIgKyBmcmFtZUVsLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTDtcbiAga28uY2xlYW5Ob2RlKGZyYW1lRWwpO1xuICBrby5yZW1vdmVOb2RlKGZyYW1lRWwpO1xuICBrby5iaW5kaW5nSGFuZGxlcnMuYmluZElmcmFtZS50cGwgPSBvcmlnVHBsO1xuXG4gIHZhciBleHBlY3RlZCA9IFwiPCFET0NUWVBFIGh0bWw+XFxuPGh0bWw+PGhlYWQ+PHRpdGxlPkE8L3RpdGxlPlxcbjwvaGVhZD5cXG48Ym9keT48cCBhbGlnbj1cXFwicmlnaHRcXFwiIHN0eWxlPVxcXCJjb2xvcjogcmVkO1xcXCIgZGF0YS1iaW5kPVxcXCJzdHlsZTogeyBjb2xvcjogJ3JlZCcgfVxcXCI+QjwvcD48ZGl2IGRhdGEtYmluZD1cXFwidGV4dDogY29udGVudFxcXCI+ZHVtbXkgY29udGVudDwvZGl2PlxcblxcbjwvYm9keT48L2h0bWw+XCI7XG4gIHZhciBleHBlY3RlZDIgPSBcIjwhRE9DVFlQRSBodG1sPlxcbjxodG1sPjxoZWFkPjx0aXRsZT5BPC90aXRsZT5cXG48L2hlYWQ+XFxuPGJvZHk+PHAgc3R5bGU9XFxcImNvbG9yOiByZWQ7XFxcIiBkYXRhLWJpbmQ9XFxcInN0eWxlOiB7IGNvbG9yOiAncmVkJyB9XFxcIiBhbGlnbj1cXFwicmlnaHRcXFwiPkI8L3A+PGRpdiBkYXRhLWJpbmQ9XFxcInRleHQ6IGNvbnRlbnRcXFwiPmR1bW15IGNvbnRlbnQ8L2Rpdj5cXG5cXG48L2JvZHk+PC9odG1sPlwiO1xuICB2YXIgZXhwZWN0ZWQzID0gXCI8IURPQ1RZUEUgaHRtbD5cXG48aHRtbD48aGVhZD48dGl0bGU+QTwvdGl0bGU+XFxuPC9oZWFkPlxcbjxib2R5PjxwIHN0eWxlPVxcXCJjb2xvcjogcmVkO1xcXCIgYWxpZ249XFxcInJpZ2h0XFxcIiBkYXRhLWJpbmQ9XFxcInN0eWxlOiB7IGNvbG9yOiAncmVkJyB9XFxcIj5CPC9wPjxkaXYgZGF0YS1iaW5kPVxcXCJ0ZXh0OiBjb250ZW50XFxcIj5kdW1teSBjb250ZW50PC9kaXY+XFxuXFxuPC9ib2R5PjwvaHRtbD5cIjtcbiAgaWYgKGV4cGVjdGVkICE9PSBjb250ZW50ICYmIGV4cGVjdGVkMiAhPT0gY29udGVudCAmJiBleHBlY3RlZDMgIT09IGNvbnRlbnQpIHtcbiAgICBjb25zb2xlLmluZm8oXCJCYWRCcm93c2VyLkZyYW1lQ29udGVudENoZWNrXCIsIGNvbnRlbnQubGVuZ3RoLCBleHBlY3RlZC5sZW5ndGgsIGV4cGVjdGVkMi5sZW5ndGgsIGV4cGVjdGVkMy5sZW5ndGgsIGNvbnRlbnQgPT0gZXhwZWN0ZWQsIGNvbnRlbnQgPT0gZXhwZWN0ZWQyLCBjb250ZW50ID09IGV4cGVjdGVkMyk7XG4gICAgY29uc29sZS5pbmZvKGNvbnRlbnQpO1xuICAgIHRocm93IFwiVW5leHBlY3RlZCBmcmFtZSBjb250ZW50LiBNaXNiZWhhdmluZyBicm93c2VyOiBcIitjb250ZW50Lmxlbmd0aCtcIi9cIitleHBlY3RlZC5sZW5ndGgrXCIvXCIrZXhwZWN0ZWQyLmxlbmd0aCtcIi9cIitleHBlY3RlZDMubGVuZ3RoO1xuICB9XG59O1xuXG52YXIgZml4UGFnZUV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAvLyBUaGlzIGlzIGdsb2JhbCBjb2RlIHRvIHByZXZlbnQgZHJhZ2dpbmcvZHJvcHBpbmcgaW4gdGhlIHBhZ2Ugd2hlcmUgd2UgZG9uJ3QgZGVhbCB3aXRoIGl0LlxuICAvLyBJRTggZG9lc24ndCBoYXZlIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyLCBidXQgZG9lc24ndCBzdXBwb3J0IGRyYWcmZHJvcCB0b28uXG4gIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgIC8vIHByZXZlbnQgZ2VuZXJpYyBmaWxlIGRyb3BwcGluZyBpbiB0aGUgcGFnZVxuICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcImJyb3dzZXIgaXMgdXNpbmcgZHJhZyBsaXN0ZW5lciBvbiB3aW5kb3dcIik7XG4gICAgICBlID0gZSB8fCBnbG9iYWwuZXZlbnQ7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiYnJvd3NlciBpcyB1c2luZyBkcmFnc3RhcnQgbGlzdGVuZXIgb24gd2luZG93XCIpO1xuICAgICAgZSA9IGUgfHwgZ2xvYmFsLmV2ZW50O1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vIHRoaXMgaXMgY2FsbGVkIG9uIG1vdXNlIG1vdmUgb24gZXZlcnkgc3VwcG9ydGVkIGJyb3dzZXIuXG4gICAgICAvLyBjb25zb2xlLmxvZyhcImJyb3dzZXIgaXMgdXNpbmcgZHJhZ292ZXIgbGlzdGVuZXIgb24gd2luZG93XCIpO1xuICAgICAgZSA9IGUgfHwgZ2xvYmFsLmV2ZW50O1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gY29uc29sZS5sb2coXCJicm93c2VyIGlzIHVzaW5nIGRyb3AgbGlzdGVuZXIgb24gd2luZG93XCIpO1xuICAgICAgZSA9IGUgfHwgZ2xvYmFsLmV2ZW50O1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBnbG9iYWwuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gSSBicm93c2VyIHN1cHBvcnRhdGkgZW50cmF0byB0dXR0aSBxdWkgcXVhbmRvIHNpIGRyb3BwYSBxdWFsY29zYSBzdWwgYm9keVxuICAgICAgLy8gY29uc29sZS5sb2coXCJicm93c2VyIGlzIHVzaW5nIGRyb3AgbGlzdGVuZXIgb24gYm9keSB0YWdcIik7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSwgZmFsc2UpO1xuICB9XG4gIGlmIChnbG9iYWwuZG9jdW1lbnQub25kcmFnc3RhcnQpIHtcbiAgICBnbG9iYWwuZG9jdW1lbnQub25kcmFnc3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiYnJvd3NlciBjYWxsZWQgb25kcmFnc3RhcnQuIHJldHVybiBmYWxzZSFcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbXBpbGU6IHRlbXBsYXRlQ29tcGlsZXIsXG4gIGxvYWQ6IHRlbXBsYXRlTG9hZGVyLFxuICBpc0NvbXBhdGlibGU6IGlzQ29tcGF0aWJsZSxcbiAgZml4UGFnZUV2ZW50czogZml4UGFnZUV2ZW50c1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcblxudmFyIF9jYWxsID0gZnVuY3Rpb24od2hhdFRvQ2FsbCkge1xuICByZXR1cm4gd2hhdFRvQ2FsbCgpO1xufTtcblxudmFyIGxvZ3MgPSBbXTtcblxudmFyIF90aW1lZENhbGwgPSBmdW5jdGlvbihuYW1lLCB3aGF0VG9DYWxsKSB7XG4gIHZhciByZXM7XG4gIHZhciBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICBpZiAodHlwZW9mIGNvbnNvbGUgPT0gJ29iamVjdCcgJiYgY29uc29sZS50aW1lKSBjb25zb2xlLnRpbWUobmFtZSk7XG4gIHJlcyA9IF9jYWxsKHdoYXRUb0NhbGwpO1xuICBpZiAodHlwZW9mIGNvbnNvbGUgPT0gJ29iamVjdCcgJiYgY29uc29sZS50aW1lKSBjb25zb2xlLnRpbWVFbmQobmFtZSk7XG4gIHZhciBkaWZmID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydDtcbiAgaWYgKHR5cGVvZiBjb25zb2xlID09ICdvYmplY3QnICYmICFjb25zb2xlLnRpbWUpIGNvbnNvbGUubG9nKG5hbWUsIFwidG9va1wiLCBkaWZmLCBcIm1zXCIpO1xuICBsb2dzLnB1c2goe1xuICAgIG5hbWU6IG5hbWUsXG4gICAgdGltZTogZGlmZlxuICB9KTtcbiAgLy8gbWF4IGxvZ3NcbiAgaWYgKGxvZ3MubGVuZ3RoID4gMTAwKSBsb2dzLnVuc2hpZnQoKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICB0aW1lZENhbGw6IF90aW1lZENhbGwsXG4gIGxvZ3M6IGxvZ3Ncbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBrbyA9IHJlcXVpcmUoXCJrbm9ja291dFwiKTtcbnZhciB1bmRvTWFuYWdlciA9IHJlcXVpcmUoJ2tub2Nrb3V0LXVuZG9tYW5hZ2VyJyk7XG52YXIgdW5kb3NlcmlhbGl6ZXIgPSByZXF1aXJlKFwiLi91bmRvc2VyaWFsaXplci5qc1wiKTtcblxudmFyIGFkZFVuZG9TdGFja0V4dGVuc2lvbk1ha2VyID0gZnVuY3Rpb24ocGVyZm9ybWFuY2VBd2FyZUNhbGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24odmlld01vZGVsKSB7XG5cbiAgICB2aWV3TW9kZWwuY29udGVudExpc3RlbmVycyh2aWV3TW9kZWwuY29udGVudExpc3RlbmVycygpICsgMik7XG5cbiAgICAvLyBUT0RPIHRoZSBsYWJlbHMgc2hvdWxkIGJlIGNvbXB1dGVkIG9ic2VydmFibGVzIChuZWVkcyBjaGFuZ2VzIGluIHVuZG9tYW5hZ2VyIHByb2plY3RzKVxuICAgIHZhciB1bmRvUmVkb1N0YWNrID0gdW5kb01hbmFnZXIodmlld01vZGVsLmNvbnRlbnQsIHtcbiAgICAgIGxldmVsczogMTAwLFxuICAgICAgdW5kb0xhYmVsOiBrby5jb21wdXRlZChmdW5jdGlvbigpIHsgcmV0dXJuIHZpZXdNb2RlbC50KFwiVW5kbyAoI0NPVU5UIylcIik7IH0pLFxuICAgICAgcmVkb0xhYmVsOiBrby5jb21wdXRlZChmdW5jdGlvbigpIHsgcmV0dXJuIHZpZXdNb2RlbC50KFwiUmVkb1wiKTsgfSlcbiAgICB9KTtcbiAgICB2aWV3TW9kZWwudW5kbyA9IHVuZG9SZWRvU3RhY2sudW5kb0NvbW1hbmQ7XG4gICAgdmlld01vZGVsLnVuZG8uZXhlY3V0ZSA9IHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIuYmluZCh2aWV3TW9kZWwsICd1bmRvJywgdmlld01vZGVsLnVuZG8uZXhlY3V0ZSk7XG4gICAgdmlld01vZGVsLnJlZG8gPSB1bmRvUmVkb1N0YWNrLnJlZG9Db21tYW5kO1xuICAgIHZpZXdNb2RlbC5yZWRvLmV4ZWN1dGUgPSBwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyLmJpbmQodmlld01vZGVsLCAncmVkbycsIHZpZXdNb2RlbC5yZWRvLmV4ZWN1dGUpO1xuICAgIHZpZXdNb2RlbC51bmRvUmVzZXQgPSBwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyLmJpbmQodmlld01vZGVsLCAndW5kb1Jlc2V0JywgdW5kb1JlZG9TdGFjay5yZXNldCk7XG4gICAgdmlld01vZGVsLnNldFVuZG9Nb2RlTWVyZ2UgPSB1bmRvUmVkb1N0YWNrLnNldE1vZGVNZXJnZTtcbiAgICB2aWV3TW9kZWwuc2V0VW5kb01vZGVPbmNlID0gdW5kb1JlZG9TdGFjay5zZXRNb2RlT25jZTtcbiAgICB1bmRvUmVkb1N0YWNrLnNldE1vZGVJZ25vcmUoKTtcbiAgICB1bmRvUmVkb1N0YWNrLnNldFVuZG9BY3Rpb25NYWtlcih1bmRvc2VyaWFsaXplci5tYWtlVW5kb0FjdGlvbi5iaW5kKHVuZGVmaW5lZCwgdmlld01vZGVsLmNvbnRlbnQpKTtcbiAgICB1bmRvc2VyaWFsaXplci53YXRjaEVuYWJsZWQodHJ1ZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGF1c2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICB1bmRvUmVkb1N0YWNrLnNldE1vZGVJZ25vcmUoKTtcbiAgICAgIH0sXG4gICAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgICB1bmRvUmVkb1N0YWNrLnNldE1vZGVPbmNlKCk7XG4gICAgICB9LFxuICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHVuZG9SZWRvU3RhY2suc2V0TW9kZU9uY2UoKTtcbiAgICAgIH0sXG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmlld01vZGVsLmNvbnRlbnRMaXN0ZW5lcnModmlld01vZGVsLmNvbnRlbnRMaXN0ZW5lcnMoKSAtIDIpO1xuICAgICAgICB1bmRvc2VyaWFsaXplci53YXRjaEVuYWJsZWQoZmFsc2UpO1xuICAgICAgICB1bmRvUmVkb1N0YWNrLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFkZFVuZG9TdGFja0V4dGVuc2lvbk1ha2VyOyIsIlwidXNlIHN0cmljdFwiO1xudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xudmFyIGNvbnNvbGUgPSByZXF1aXJlKFwiY29uc29sZVwiKTtcbi8vIFRoaXMgbW9kdWxlIGRlYWxzIHdpdGggc2VyaWFsaXphdGlvbi9kZXNlcmlhbGl6YXRpb24gb2YgYSBcInRyZWUtcGF0aFwiIHJlcHJlc2VudGluZyB0aGUgcGF0aCB0byByZWFjaCB0aGUgZ2l2ZW4gbGVhZi5cbi8vIEluIG9yZGVyIHRvIGJlIGNvcnJlY3RseSBzZXJpYWxpemVkIHdlIGhhdmUgdG8gbW92ZSBmcm9tIFwicmVmZXJlbmNlXCIgdG8gXCJzdHJpbmdcIiBhbmQgdmljZXZlcnNhLlxuXG52YXIgX3JlZmVyZW5jZSA9IGZ1bmN0aW9uKG1vZGVsLCBwYXRoKSB7XG4gIHZhciBwID0gMDtcbiAgdmFyIHAxLCBwMjtcbiAgdmFyIG0gPSBtb2RlbDtcbiAgd2hpbGUgKHAgPCBwYXRoLmxlbmd0aCkge1xuICAgIHN3aXRjaCAocGF0aC5jaGFyQXQocCkpIHtcbiAgICAgIGNhc2UgJygnOlxuICAgICAgICBpZiAocGF0aC5jaGFyQXQocCArIDEpID09ICcpJykge1xuICAgICAgICAgIG0gPSBtKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVE9ETyBlcnJvclxuICAgICAgICB9XG4gICAgICAgIHAgKz0gMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdbJzpcbiAgICAgICAgcDIgPSBwYXRoLmluZGV4T2YoJ10nLCBwKTtcbiAgICAgICAgbSA9IG1bcGF0aC5zdWJzdHJpbmcocCArIDEsIHAyKV07XG4gICAgICAgIHAgPSBwMiArIDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnLic6XG4gICAgICAgIHAxID0gcGF0aC5pbmRleE9mKCcoJywgcCk7XG4gICAgICAgIGlmIChwMSA9PSAtMSkgcDEgPSBwYXRoLmxlbmd0aDtcbiAgICAgICAgcDIgPSBwYXRoLmluZGV4T2YoJ1snLCBwKTtcbiAgICAgICAgaWYgKHAyID09IC0xKSBwMiA9IHBhdGgubGVuZ3RoO1xuICAgICAgICBwMiA9IE1hdGgubWluKHAxLCBwMik7XG4gICAgICAgIG0gPSBtW3BhdGguc3Vic3RyaW5nKHAgKyAxLCBwMildO1xuICAgICAgICBwID0gcDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gVE9ETyBlcnJvclxuICAgIH1cbiAgfVxuICByZXR1cm4gbTtcbn07XG5cbnZhciBfZ2V0UGF0aCA9IGZ1bmN0aW9uKHBhcmVudHMsIGNoaWxkKSB7XG4gIHZhciBwYXRoID0gXCJcIjtcbiAgdmFyIHA7XG4gIGZvciAodmFyIGsgPSAwOyBrIDw9IHBhcmVudHMubGVuZ3RoOyBrKyspIHtcbiAgICBwID0gayA8IHBhcmVudHMubGVuZ3RoID8gcGFyZW50c1trXSA6IGNoaWxkO1xuICAgIGlmIChrby5pc09ic2VydmFibGUocCkpIHBhdGggKz0gJygpJztcbiAgICBpZiAodHlwZW9mIHAuX2ZpZWxkTmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHBhdGggKz0gXCIuXCIgKyBwLl9maWVsZE5hbWU7XG4gICAgfSBlbHNlIGlmIChrID4gMCAmJiB0eXBlb2YgcGFyZW50c1trIC0gMV0ucG9wID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZhciBwYXJlbnRBcnJheSA9IGtvLmlzT2JzZXJ2YWJsZShwYXJlbnRzW2sgLSAxXSkgPyBrby51dGlscy5wZWVrT2JzZXJ2YWJsZShwYXJlbnRzW2sgLSAxXSkgOiBwYXJlbnRzW2sgLSAxXTtcbiAgICAgIHZhciBwb3MgPSBrby51dGlscy5hcnJheUluZGV4T2YocGFyZW50QXJyYXksIHApO1xuICAgICAgaWYgKHBvcyAhPSAtMSkge1xuICAgICAgICBwYXRoICs9IFwiW1wiICsgcG9zICsgXCJdXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOT1RFIHRoaXMgaGFwcGVuLCBzb21ldGltZXMgd2hlbiBUaW55TUNFIHNlbmRzIHVwZGF0ZXMgZm9yIG9iamVjdHMgYWxyZWFkeSByZW1vdmVkLlxuICAgICAgICAvLyBjb25zb2xlLmVycm9yKFwiVW5leHBlY3RlZCBvYmplY3Qgbm90IGZvdW5kIGluIHBhcmVudCBhcnJheVwiLCBwYXJlbnRBcnJheSwgcCwgaywgcGFyZW50cy5sZW5ndGgsIGtvLnRvSlMocGFyZW50QXJyYXkpLCBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHApKTtcbiAgICAgICAgdGhyb3cgXCJVbmV4cGVjdGVkIG9iamVjdCBub3QgZm91bmQgaW4gcGFyZW50IGFycmF5XCI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmV4cGVjdGVkIHBhcmVudCB3aXRoIG5vIF9maWVsZE5hbWUgYW5kIG5vIHBhcmVudCBhcnJheVwiLCBrLCBwYXJlbnRzKTtcbiAgICAgIHRocm93IFwiVW5leHBlY3RlZCBwYXJlbnQgd2l0aCBubyBfZmllbGROYW1lIGFuZCBubyBwYXJlbnQgYXJyYXlcIjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBhdGg7XG59O1xuXG52YXIgbWFrZURlcmVmZXJlbmNlZFVuZG9BY3Rpb24gPSBmdW5jdGlvbih1bmRvRnVuYywgbW9kZWwsIHBhdGgsIHZhbHVlLCBpdGVtKSB7XG4gIHZhciBjaGlsZCA9IF9yZWZlcmVuY2UobW9kZWwsIHBhdGgpO1xuICB1bmRvRnVuYyhjaGlsZCwgdmFsdWUsIGl0ZW0pO1xufTtcblxudmFyIGxpc3RlbmVyO1xuXG52YXIgX3NldExpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZnVuYykge1xuICBsaXN0ZW5lciA9IGxpc3RlbmZ1bmM7XG59O1xuXG4vKiBkZXJlZmVyZW5jaW5nIHBhdGggYW5kIGNoYW5naW5nIHZhbHVlIHdpdGggXCJ0b0pTXCIgKi9cbnZhciBtYWtlVW5kb0FjdGlvbkRlcmVmZXJlbmNlZCA9IGZ1bmN0aW9uKG1vZGVsLCB1bmRvRnVuYywgcGFyZW50cywgY2hpbGQsIG9sZFZhbCwgaXRlbSkge1xuICB0cnkge1xuICAgIHZhciBwYXRoID0gX2dldFBhdGgocGFyZW50cywgY2hpbGQpO1xuXG4gICAgLy8gVHJhbnNmb3JtIGFjdGlvbnMgaW4gc2ltcGxlIEpTIG9iamVjdHMuXG4gICAgaWYgKHR5cGVvZiBvbGRWYWwgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBvbGRWYWwgPT09ICdmdW5jdGlvbicpIG9sZFZhbCA9IGtvLnRvSlMob2xkVmFsKTtcbiAgICBpZiAodHlwZW9mIGl0ZW0gIT09ICd1bmRlZmluZWQnICYmICh0eXBlb2YgaXRlbS52YWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIGl0ZW0udmFsdWUgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICB2YXIgbmV3SXRlbSA9IGtvLnRvSlMoaXRlbSk7XG4gICAgICBpdGVtID0gbmV3SXRlbTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGlzdGVuZXIocGF0aCwgY2hpbGQsIG9sZFZhbCwgaXRlbSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVW5kb3NlcmlhbGl6ZXIgaWdub3JpbmcgZXhjZXB0aW9uIGluIGxpc3RlbmVyIGNhbGxiYWNrXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtYWtlRGVyZWZlcmVuY2VkVW5kb0FjdGlvbi5iaW5kKHVuZGVmaW5lZCwgdW5kb0Z1bmMsIG1vZGVsLCBwYXRoLCBvbGRWYWwsIGl0ZW0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gTk9URSB0aGlzIGhhcHBlbnMsIGZyb20gdGltZSB0byB0aW1lLCB3aGVuIFRpbnlNQ0Ugc2VuZHMgdXBkYXRlcyBmb3IgZGVsZXRlZCBjb250ZW50LlxuICAgIGNvbnNvbGUuZXJyb3IoXCJFeGNlcHRpb24gcHJvY2Vzc2luZyB1bmRvXCIsIGUsIHBhcmVudHMsIGNoaWxkLCBpdGVtKTtcbiAgfVxufTtcblxudmFyIHdhdGNoRW5hYmxlZDtcbnZhciBfd2F0Y2hFbmFibGVkID0gZnVuY3Rpb24obmV3VmFsKSB7XG4gIGlmICh0eXBlb2YgbmV3VmFsICE9PSAndW5kZWZpbmVkJylcbiAgICB3YXRjaEVuYWJsZWQgPSBuZXdWYWw7XG4gIGVsc2VcbiAgICByZXR1cm4gd2F0Y2hFbmFibGVkO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGRlcmVmZXJlbmNlOiBfZ2V0UGF0aCxcbiAgcmVmZXJlbmNlOiBfcmVmZXJlbmNlLFxuICBtYWtlVW5kb0FjdGlvbjogbWFrZVVuZG9BY3Rpb25EZXJlZmVyZW5jZWQsXG4gIHNldExpc3RlbmVyOiBfc2V0TGlzdGVuZXIsXG4gIHdhdGNoRW5hYmxlZDogX3dhdGNoRW5hYmxlZFxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogZ2xvYmFsIGdsb2JhbDogZmFsc2UgKi9cblxudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGtvID0gcmVxdWlyZShcImtub2Nrb3V0XCIpO1xudmFyIHRpbnltY2UgPSByZXF1aXJlKCd0aW55bWNlJyk7XG52YXIgY29uc29sZSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xudmFyIHBlcmZvcm1hbmNlQXdhcmVDYWxsZXIgPSByZXF1aXJlKFwiLi90aW1lZC1jYWxsLmpzXCIpLnRpbWVkQ2FsbDtcblxudmFyIHRvYXN0ciA9IHJlcXVpcmUoXCJ0b2FzdHJcIik7XG50b2FzdHIub3B0aW9ucyA9IHtcbiAgXCJjbG9zZUJ1dHRvblwiOiBmYWxzZSxcbiAgXCJkZWJ1Z1wiOiBmYWxzZSxcbiAgXCJwb3NpdGlvbkNsYXNzXCI6IFwidG9hc3QtYm90dG9tLWZ1bGwtd2lkdGhcIixcbiAgXCJ0YXJnZXRcIjogXCIjbW8tYm9keVwiLFxuICBcIm9uY2xpY2tcIjogbnVsbCxcbiAgXCJzaG93RHVyYXRpb25cIjogXCIzMDBcIixcbiAgXCJoaWRlRHVyYXRpb25cIjogXCIxMDAwXCIsXG4gIFwidGltZU91dFwiOiBcIjUwMDBcIixcbiAgXCJleHRlbmRlZFRpbWVPdXRcIjogXCIxMDAwXCIsXG4gIFwic2hvd0Vhc2luZ1wiOiBcInN3aW5nXCIsXG4gIFwiaGlkZUVhc2luZ1wiOiBcImxpbmVhclwiLFxuICBcInNob3dNZXRob2RcIjogXCJmYWRlSW5cIixcbiAgXCJoaWRlTWV0aG9kXCI6IFwiZmFkZU91dFwiXG59O1xuXG5cbi8qIE5PVEU6IHRyYW5zbGF0aW9ucyBtb3ZlZCB0byBcInBsdWdpblwiXG52YXIgc3RyaW5ncyA9IHtcbiAgJ3Nob3cgcHJldmlldyBhbmQgc2VuZCB0ZXN0JzogJ1Zpc3VhbGl6emEgdW5hIGFudGVwcmltYSBlIGZhaSB1biBpbnZpbyBkaSB0ZXN0JyxcbiAgLy8gU3RyaW5ncyBmb3IgYXBwLmpzXG4gICdEb3dubG9hZCc6ICdEb3dubG9hZCcsXG4gICdUZXN0JzogJ1Rlc3QnLFxuICAnU2F2ZSc6ICdTYWx2YScsXG4gICdEb3dubG9hZGluZy4uLic6IFwiRG93bmxvYWQgaW4gY29yc28uLi5cIixcbiAgJ0ludmFsaWQgZW1haWwgYWRkcmVzcyc6IFwiSW5kaXJpenpvIGVtYWlsIGludmFsaWRvXCIsXG4gIFwiVGVzdCBlbWFpbCBzZW50Li4uXCI6IFwiRW1haWwgZGkgdGVzdCBpbnZpYXRhLi4uXCIsXG4gICdVbmV4cGVjdGVkIGVycm9yIHRhbGtpbmcgdG8gc2VydmVyOiBjb250YWN0IHVzISc6ICdFcnJvcmUgZGkgY29tdW5pY2F6aW9uZSBjb24gaWwgc2VydmVyOiBjb250YXR0YWNpIScsXG4gICdJbnNlcnQgaGVyZSB0aGUgcmVjaXBpZW50IGVtYWlsIGFkZHJlc3MnOiAnSW5zZXJpc2NpIHF1aSBsXFwnaW5kaXJpenpvIGVtYWlsIGEgY3VpIHNwZWRpcmUnLFxuICBcIlRlc3QgZW1haWwgYWRkcmVzc1wiOiBcIkluZGlyaXp6byBlbWFpbCBkaSB0ZXN0XCIsXG4gIC8vIHZpZXdNb2RlbFxuICAnQmxvY2sgcmVtb3ZlZDogdXNlIHVuZG8gYnV0dG9uIHRvIHJlc3RvcmUgaXQuLi4nOiAnQmxvY2NvIGVsaW1pbmF0bzogdXNhIGlsIHB1bHNhbnRlIGFubnVsbGEgcGVyIHJlY3VwZXJhcmxvLi4uJyxcbiAgJ05ldyBibG9jayBhZGRlZCBhZnRlciB0aGUgc2VsZWN0ZWQgb25lIChfX3Bvc19fKSc6ICdOdW92byBibG9jY28gYWdnaXVudG8gc290dG8gYSBxdWVsbG8gc2VsZXppb25hdG8gKF9fcG9zX18pJyxcbiAgJ05ldyBibG9jayBhZGRlZCBhdCB0aGUgbW9kZWwgYm90dG9tIChfX3Bvc19fKSc6ICdOdW92byBibG9jY28gYWdnaXVudG8gaW4gZm9uZG8gYWwgbW9kZWxsbyAoX19wb3NfXyknLFxuICAvLyB1bmRvbWFpbi5qc1xuICAnVW5kbyAoI0NPVU5UIyknOiAnQW5udWxsYSAoI0NPVU5UIyknLFxuICAnUmVkbyc6ICdSaXByaXN0aW5hJyxcbiAgLy8gZWRpdG9yLmpzXG4gICdTZWxlY3RlZCBlbGVtZW50IGhhcyBubyBlZGl0YWJsZSBwcm9wZXJ0aWVzJzogJ0xcXCdlbGVtZW50byBzZWxlemlvbmF0byBub24gZm9ybmlzY2UgcHJvcHJpZXTDoCBlZGl0YWJpbGknLFxuICAnVGhpcyBzdHlsZSBpcyBzcGVjaWZpYyBmb3IgdGhpcyBibG9jazogY2xpY2sgaGVyZSB0byByZW1vdmUgdGhlIGN1c3RvbSBzdHlsZSBhbmQgcmV2ZXJ0IHRvIHRoZSB0aGVtZSB2YWx1ZSc6ICdRdWVzdG8gc3RpbGUgw6ggc3BlY2lmaWNvIGRpIHF1ZXN0byBibG9jY286IGNsaWNjYSBxdWkgcGVyIGFubnVsbGFyZSBsbyBzdGlsZSBwZXJzb25hbGl6emF0bycsXG4gICdTd2l0Y2ggYmV0d2VlbiBnbG9iYWwgYW5kIGJsb2NrIGxldmVsIHN0eWxlcyBlZGl0aW5nJzogJ1Blcm1ldHRlIGRpIHNwZWNpZmljYXJlIHNlIHNpIHZ1b2xlIG1vZGlmaWNhcmUgbG8gc3RpbGUgZ2VuZXJhbGUgbyBzb2xhbWVudGUgcXVlbGxvIHNwZWNpZmljbyBkZWwgYmxvY2NvIHNlbGV6aW9uYXRvJyxcbiAgLy8gbWFpbi50cGwuaHRtbFxuICAnVW5kbyBsYXN0IG9wZXJhdGlvbic6ICdBbm51bGxhIHVsdGltYSBvcGVyYXppb25lJyxcbiAgJ1JlZG8gbGFzdCBvcGVyYXRpb24nOiAnUmlwZXRpIG9wZXJhemlvbmUgYW5udWxsYXRhJyxcbiAgJ1Nob3cgaW1hZ2UgZ2FsbGVyeSc6ICdWaXN1YWxpenphIGdhbGxlcmlhIGltbWFnaW5pJyxcbiAgJ0dhbGxlcnknOiAnR2FsbGVyaWEnLFxuICAnUHJldmlldyc6ICdBbnRlcHJpbWEnLFxuICAnU2hvdyBsaXZlIHByZXZpZXcnOiAnTW9zdHJhIGFudGVwcmltYSBsaXZlJyxcbiAgJ0xhcmdlIHNjcmVlbic6ICdTY2hlcm1vIGdyYW5kZScsXG4gICdUYWJsZXQnOiAnVGFibGV0JyxcbiAgJ1NtYXJ0cGhvbmUnOiAnU21hcnRwaG9uZScsXG4gICdTaG93IHByZXZpZXcgYW5kIHNlbmQgdGVzdCc6ICdWaXN1YWxpenphIHVuYSBhbnRlcHJpbWEgZSBmYWkgdW4gaW52aW8gZGkgdGVzdCcsXG4gICdEb3dubG9hZCB0ZW1wbGF0ZSc6ICdTY2FyaWNhIGlsIHRlbXBsYXRlJyxcbiAgJ1NhdmUgdGVtcGxhdGUnOiAnU2FsdmEgaWwgdGVtcGxhdGUnLFxuICAnU2F2ZWQgbW9kZWwgaXMgb2Jzb2xldGUnOiAnTW9kZWxsbyBzYWx2YXRvIG9ic29sZXRvJyxcbiAgJzxwPlRoZSBzYXZlZCBtb2RlbCBoYXMgYmVlbiBjcmVhdGVkIHdpdGggYSBwcmV2aW91cywgbm9uIGNvbXBsZXRlbHkgY29tcGF0aWJsZSB2ZXJzaW9uLCBvZiB0aGUgdGVtcGxhdGU8L3A+PHA+U29tZSBjb250ZW50IG9yIHN0eWxlIGluIHRoZSBtb2RlbCA8Yj5DT1VMRCBCRSBMT1NUPC9iPiBpZiB5b3Ugd2lsbCA8Yj5zYXZlPC9iPjwvcD48cD5Db250YWN0IHVzIGZvciBtb3JlIGluZm9ybWF0aW9ucyE8L3A+JzogJzxwPklsIG1vZGVsbG8gc2FsdmF0byDDqCBzdGF0byBjcmVhdG8gY29uIHVuYSB2ZXJzaW9uZSBwcmVjZWRlbnRlIGRlbCB0ZW1wbGF0ZSBub24gZGVsIHR1dHRvIGNvbXBhdGliaWxlPC9wPjxwPkFsY3VuaSBjb250ZW51dGkgbyBzdGlsaSBkZWwgbW9kZWxsbyA8Yj5QT1RSRUJCRVJPIEVTU0VSRSBQRVJTSTwvYj4gc2UgcHJvY2VkZXJhaSBlIGRlY2lkZXJhaSBkaSA8Yj5zYWx2YXJlPC9iPjwvcD48cD5Db250YXR0YWNpIHNlIGhhaSBkZWkgZHViYmkhPC9wPicsXG5cbiAgLy8gdG9vbGJveFxuICAnQmxvY2tzJzogJ0Jsb2NjaGknLFxuICAnQmxvY2tzIHJlYWR5IHRvIGJlIGFkZGVkIHRvIHRoZSB0ZW1wbGF0ZSc6ICdFbGVuY28gY29udGVudXRpIGFnZ2l1bmdpYmlsaSBhbCBtZXNzYWdnaW8nLFxuICAnQ29udGVudCc6ICdDb250ZW51dG8nLFxuICAnRWRpdCBjb250ZW50IG9wdGlvbnMnOiAnTW9kaWZpY2Egb3B6aW9uaSBjb250ZW51dGknLFxuICAnU3R5bGUnOiAnU3RpbGUnLFxuICAnRWRpdCBzdHlsZSBvcHRpb25zJzogJ01vZGlmaWNhIG9wemlvbmkgZ3JhZmljaGUnLFxuICAnQmxvY2sgX19uYW1lX18nOiAnQmxvY2NvIF9fbmFtZV9fJyxcbiAgJ0NsaWNrIG9yIGRyYWcgdG8gYWRkIHRoaXMgYmxvY2sgdG8gdGhlIHRlbXBsYXRlJzogJ0NsaWNjYSBvIHRyYXNjaW5hIHBlciBhZ2dpdW5nZXJlIGFsIG1lc3NhZ2dpbycsXG4gICdBZGQnOiAnQWdnaXVuZ2knLFxuICAnQnkgY2xpY2tpbmcgb24gbWVzc2FnZSBwYXJ0cyB5b3Ugd2lsbCBzZWxlY3QgYSBibG9jayBhbmQgY29udGVudCBvcHRpb25zLCBpZiBhbnksIHdpbGwgc2hvdyBoZXJlJzogJ0NsaWNjYW5kbyBzdSBhbGN1bmUgcGFydGkgZGVsIG1lc3NhZ2dpbyBzZWxlemlvbmVyYWkgdW4gYmxvY2NvIGUgbGUgb3B6aW9uaSBjb250ZW51dGlzdGljaGUsIHNlIGRpc3BvbmliaWxpLCBjb21wYXJpcmFubm8gcXVpJyxcbiAgJ0J5IGNsaWNraW5nIG9uIG1lc3NhZ2UgcGFydHMgeW91IHdpbGwgc2VsZWN0IGEgYmxvY2sgYW5kIHN0eWxlIG9wdGlvbnMsIGlmIGF2YWlsYWJsZSwgd2lsbCBzaG93IGhlcmUnOiAnQ2xpY2NhbmRvIHN1IGFsY3VuZSBwYXJ0aSBkZWwgbWVzc2FnZ2lvIHNlbGV6aW9uZXJhaSB1biBibG9jY28gZSBsZSBvcHppb25pIGRpIHN0aWxlLCBzZSBkaXNwb25pYmlsaSwgY29tcGFyaXJhbm5vIHF1aScsXG4gICdDbGljayBvciBkcmFnIGZpbGVzIGhlcmUnOiAnQ2xpY2NhIG8gdHJhc2NpbmEgaSBmaWxlIHF1aSEnLFxuICAnTm8gaW1hZ2VzIHVwbG9hZGVkLCB5ZXQnOiAnTm9uIGhhaSBhbmNvcmEgY2FyaWNhdG8gaW1tYWdpbmknLFxuICAnU2hvdyBpbWFnZXMgZnJvbSB0aGUgZ2FsbGVyeSc6ICdWaXN1YWxpenphIGxlIGltbWFnaW5pIGNhcmljYXRlIG5lbGxhIHR1YSBhcmVhJyxcbiAgJ0xvYWRpbmcuLi4nOiAnQ2FyaWNhbWVudG8uLi4nLFxuICAnTG9hZCBnYWxsZXJ5JzogJ0NhcmljYSBnYWxsZXJpYScsXG4gICdMb2FkaW5nIGdhbGxlcnkuLi4nOiAnQ2FyaWNhbWVudG8gaW4gY29yc28uLi4nLFxuICAnVGhlIGdhbGxlcnkgaXMgZW1wdHknOiAnTmVzc3VuYSBpbW1hZ2luZSBuZWxsYSBnYWxsZXJpYScsXG4gIC8vIGltZy13eXNpd3lnLnRtbHBcbiAgJ1JlbW92ZSBpbWFnZSc6ICdSaW11b3ZpIGltbWFnaW5lJyxcbiAgJ09wZW4gdGhlIGltYWdlIGVkaXRpbmcgdG9vbCc6ICdBdnZpYSBzdHJ1bWVudG8gbW9kaWZpY2EgaW1tYWdpbmUnLFxuICAnVXBsb2FkIGEgbmV3IGltYWdlJzogJ0NhcmljYSB1bmEgbnVvdmEgaW1tYWdpbmUnLFxuICAnRHJvcCBhbiBpbWFnZSBoZXJlJzogJ1RyYXNjaW5hIHVuYSBpbW1hZ2luZSBxdWknLFxuICAnRHJvcCBhbiBpbWFnZSBoZXJlIG9yIGNsaWNrIHRoZSB1cGxvYWQgYnV0dG9uJzogJ1RyYXNjaW5hIHVuYSBpbW1hZ2luZSBxdWkgbyBjbGljY2Egc3VsIHB1bHNhbnRlIGRpIGNhcmljYW1lbnRvJyxcbiAgLy8gZ2FsbGVyeVxuICAnRHJhZyB0aGlzIGltYWdlIGFuZCBkcm9wIGl0IG9uIGFueSB0ZW1wbGF0ZSBpbWFnZSBwbGFjZWhvbGRlcic6ICdUcmFzY2luYSBxdWVzdGEgaW1tYWdpbmUgc3VsbGEgcG9zaXppb25lIGluIGN1aSB2dW9pIGluc2VyaXJsYScsXG4gICdHYWxsZXJ5Oic6ICdHYWxsZXJpYTonLFxuICAnU2Vzc2lvbiBpbWFnZXMnOiAnSW1tYWdpbmkgZGkgc2Vzc2lvbmUnLFxuICAnUmVjZW50cyc6ICdSZWNlbnRpJyxcbiAgJ1JlbW90ZSBnYWxsZXJ5JzogJ0dhbGxlcmlhIHJlbW90YScsXG5cbiAgLy8gY3VzdG9tc3R5bGVcbiAgJ0N1c3RvbWl6ZWQgYmxvY2suPHVsPjxsaT5JbiB0aGlzIHN0YXR1cyBjaGFuZ2VzIHRvIHByb3BlcnRpZXMgd2lsbCBiZSBzcGVjaWZpYyB0byB0aGUgY3VycmVudCBibG9jayAoaW5zdGVhZCBvZiBiZWluZyBnbG9iYWwgdG8gYWxsIGJsb2NrcyBpbiB0aGUgc2FtZSBzZWN0aW9uKTwvbGk+PGxpPkEgPHNwYW4gY2xhc3M9XCJjdXN0b21TdHlsZWRcIj48c3Bhbj5cInNtYWxsIGN1YmVcIiA8L3NwYW4+PC9zcGFuPiBpY29uIGJlc2lkZSB0aGUgcHJvcGVydHkgd2lsbCBtYXJrIHRoZSBjdXN0b21pemF0aW9uLiBCeSBjbGlja2luZyB0aGlzIGljb24gdGhlIHByb3BlcnR5IHZhbHVlIHdpbGwgYmUgcmV2ZXJ0ZWQgdG8gdGhlIHZhbHVlIGRlZmluZWQgZm9yIHRoZSBzZWN0aW9uLjwvbGk+PC91bD4nOiAnQmxvY2NvIHBlcnNvbmFsaXp6YXRvLjx1bD48bGk+SW4gcXVlc3RhIG1vZGFsaXTDoCBzZSBjYW1iaSB1bmEgcHJvcHJpZXTDoCB2ZXJyw6AgbW9kaWZpY2F0YSBzb2xhbWVudGUgcGVyIHF1ZXN0byBzcGVjaWZpY28gYmxvY2NvIChpbnZlY2UgY2hlIHBlciB0dXR0aSBpIGJsb2NjaGkgZGVsbGEgc3Rlc3NhIHNlemlvbmUpLjwvbGk+PGxpPlBlciBzZWduYWxhcmUgbGEgcGVyc29uYWxpenphemlvbmUgYXBwYXJpcsOgIGxcXCdpY29uYSA8c3BhbiBjbGFzcz1cImN1c3RvbVN0eWxlZFwiPjxzcGFuPiBkZWwgXCJjdWJldHRvXCI8L3NwYW4+PC9zcGFuPiBhIGZpYW5jbyBkZWxsZSBwcm9wcmlldMOgLiBDbGljY2FuZG8gcXVlc3RhIGljb25hIHRvcm5lcmFpIGFsIHZhbG9yZSBjb211bmUuPC9saT48L3VsPicsXG4gIC8vIGJsb2Nrcy13eXNpd3lnXG4gICdEcm9wIGhlcmUgYmxvY2tzIGZyb20gdGhlIFwiQmxvY2tzXCIgdGFiJzogJ1RyYXNjaW5hIHF1aSBpIGJsb2NjaGkgZGFsbGEgc2NoZWRhIFxcJ0Jsb2NjaGlcXCcnLFxuICAvLyBibG9jay13eXNpd3lnXG4gICdEcmFnIHRoaXMgaGFuZGxlIHRvIG1vdmUgdGhlIGJsb2NrJzogJ1RyYXNjaW5hIHBlciBzcG9zdGFyZSBpbCBibG9jY28gYWx0cm92ZScsXG4gICdNb3ZlIHRoaXMgYmxvY2sgdXBzaWRlJzogJ1Nwb3N0YSBpbCBibG9jY28gaW4gc3UnLFxuICAnTW92ZSB0aGlzIGJsb2NrIGRvd25zaWRlJzogJ1Nwb3N0YSBpbCBibG9jY28gaW4gZ2l1JyxcbiAgJ0RlbGV0ZSBibG9jayc6ICdFbGltaW5hIGJsb2NjbycsXG4gICdEdXBsaWNhdGUgYmxvY2snOiAnRHVwbGljYSBibG9jY28nLFxuICAnU3dpdGNoIGJsb2NrIHZhcmlhbnQnOiAnQ2FtYmlhIHZhcmlhbnRlIGJsb2NjbycsXG4gIC8vIGNvbG9ycGlja2VyXG4gICdUaGVtZSBDb2xvcnMsU3RhbmRhcmQgQ29sb3JzLFdlYiBDb2xvcnMsVGhlbWUgQ29sb3JzLEJhY2sgdG8gUGFsZXR0ZSxIaXN0b3J5LE5vIGhpc3RvcnkgeWV0Lic6ICdDb2xvcmkgVGVtYSxDb2xvcmkgU3RhbmRhcmQsQ29sb3JpIFdlYixDb2xvcmkgVGVtYSxUb3JuYSBhbGxhIHRhdm9sb3p6YSxTdG9yaWNvLHN0b3JpY28gY29sb3JpIHZ1b3RvJyxcblxuICAnRHJvcCBoZXJlJzogJ1JpbGFzY2lhIHF1aScsXG5cbn07XG4qL1xuXG4gIGZ1bmN0aW9uIGluaXRpYWxpemVFZGl0b3IoY29udGVudCwgYmxvY2tEZWZzLCB0aHVtYlBhdGhDb252ZXJ0ZXIsIGdhbGxlcnlVcmwpIHtcblxuICB2YXIgaW5pdGlhbENhbXBhaWducyA9IFtdO1xuICB2YXIgaW5pdGlhbFRlbXBsYXRlcyA9IFtdO1xuICB2YXIgaW5pdGlhbEVkaXRzID0gW107XG4gIHZhciBkZWZhdWx0VGVtcGxhdGVzID0gW3tcbiAgICAgIGNyZWF0ZWQ6ICdEZWZhdWx0Jywga2V5OiAnMDAwMDAwMScsIHRpdGxlOiAnU1RFZGIgZGVmYXVsdCcsIG5hbWU6ICd2ZXJzYWZpeC0xJywgdGVtcGxhdGU6ICd0ZW1wbGF0ZXMvdmVyc2FmaXgtMS90ZW1wbGF0ZS12ZXJzYWZpeC0xLmh0bWwnLCBkZXNjOiAnVGhlIHZlcnNhdGlsZSB0ZW1wbGF0ZSdcbiAgICB9LHtcbiAgICAgIGNyZWF0ZWQ6ICdEZWZhdWx0Jywga2V5OiAnMDAwMDAwMicsIHRpdGxlOiAnVEVEQzE1JywgbmFtZTogJ3RlZGMxNScsIHRlbXBsYXRlOiAndGVtcGxhdGVzL3RlZGMxNS90ZW1wbGF0ZS10ZWRjMTUuaHRtbCcsIGRlc2M6ICdUaGUgdGVkYzE1IHRlbXBsYXRlJ1xuICAgIH0se1xuICAgICAgY3JlYXRlZDogJ0RlZmF1bHQnLCBrZXk6ICcwMDAwMDAzJywgdGl0bGU6ICdFYXN5IHR1dG9yaWFsJywgbmFtZTogJ3R1dG9yaWFsJywgdGVtcGxhdGU6ICd0ZW1wbGF0ZXMvdHV0b3JpYWwvdGVtcGxhdGUtdHV0b3JpYWwuaHRtbCcsIGRlc2M6ICdUaGUgdHV0b3JpYWwgdGVtcGxhdGUnXG4gICAgfV07XG5cbiAgdmFyIHZpZXdNb2RlbCA9IHtcbiAgICBnYWxsZXJ5UmVjZW50OiBrby5vYnNlcnZhYmxlQXJyYXkoW10pLmV4dGVuZCh7XG4gICAgICBwYWdpbmc6IDE2XG4gICAgfSksXG4gICAgZ2FsbGVyeVJlbW90ZToga28ub2JzZXJ2YWJsZUFycmF5KFtdKS5leHRlbmQoe1xuICAgICAgcGFnaW5nOiAxNlxuICAgIH0pLFxuICAgIGdhbGxlcnlIb2xpZGF5UmVtb3RlOiBrby5vYnNlcnZhYmxlQXJyYXkoW10pLmV4dGVuZCh7XG4gICAgICBwYWdpbmc6IDE2XG4gICAgfSksXG4gICAgZ2FsbGVyeU5hdHVyZVJlbW90ZToga28ub2JzZXJ2YWJsZUFycmF5KFtdKS5leHRlbmQoe1xuICAgICAgcGFnaW5nOiAxNlxuICAgIH0pLFxuICAgIGdhbGxlcnlQcm9tb3Rpb25SZW1vdGU6IGtvLm9ic2VydmFibGVBcnJheShbXSkuZXh0ZW5kKHtcbiAgICAgIHBhZ2luZzogMTZcbiAgICB9KSxcbiAgICBzZWxlY3RlZEJsb2NrOiBrby5vYnNlcnZhYmxlKG51bGwpLFxuICAgIHNlbGVjdGVkSXRlbToga28ub2JzZXJ2YWJsZShudWxsKSxcbiAgICBzZWxlY3RlZFRvb2w6IGtvLm9ic2VydmFibGUoMCksXG4gICAgc2VsZWN0ZWRJbWFnZVRhYjoga28ub2JzZXJ2YWJsZSgwKSxcbiAgICBkcmFnZ2luZzoga28ub2JzZXJ2YWJsZShmYWxzZSksXG4gICAgZHJhZ2dpbmdJbWFnZToga28ub2JzZXJ2YWJsZShmYWxzZSksXG4gICAgZ2FsbGVyeUxvYWRlZDoga28ub2JzZXJ2YWJsZShmYWxzZSksXG4gICAgZ2FsbGVyeUhvbGlkYXlMb2FkZWQ6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxuICAgIGdhbGxlcnlOYXR1cmVMb2FkZWQ6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxuICAgIGdhbGxlcnlQcm9tb3Rpb25Mb2FkZWQ6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxuICAgIHNob3dQcmV2aWV3RnJhbWU6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxuICAgIHByZXZpZXdNb2RlOiBrby5vYnNlcnZhYmxlKCdkZXNrdG9wJyksXG4gICAgc2hvd1Rvb2xib3g6IGtvLm9ic2VydmFibGUodHJ1ZSksXG4gICAgc2hvd1RoZW1lOiBrby5vYnNlcnZhYmxlKGZhbHNlKSxcbiAgICBzaG93R2FsbGVyeToga28ub2JzZXJ2YWJsZShmYWxzZSksXG4gICAgZGVidWc6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxuICAgIGNvbnRlbnRMaXN0ZW5lcnM6IGtvLm9ic2VydmFibGUoMCksXG4gICAgc2hvd1NhdmVkOiBrby5vYnNlcnZhYmxlKGZhbHNlKSxcbiAgICBlZGl0czoga28ub2JzZXJ2YWJsZUFycmF5KGluaXRpYWxFZGl0cyksXG4gICAgdGVtcGxhdGVzOiBrby5vYnNlcnZhYmxlQXJyYXkoaW5pdGlhbFRlbXBsYXRlcyksXG4gICAgY2FtcGFpZ25zOiBrby5vYnNlcnZhYmxlQXJyYXkoaW5pdGlhbENhbXBhaWducyksXG4gICAgXG4gICAgbG9nb1BhdGg6ICdkaXN0L2ltZy9zdGVkYi5wbmcnLFxuICAgIGxvZ29Vcmw6ICcuJyxcbiAgICBsb2dvQWx0OiAnc3RlZGInXG4gIH07XG5cbiAgLy8gdmlld01vZGVsLmNvbnRlbnQgPSBjb250ZW50Ll9pbnN0cnVtZW50KGtvLCBjb250ZW50LCB1bmRlZmluZWQsIHRydWUpO1xuICB2aWV3TW9kZWwuY29udGVudCA9IGNvbnRlbnQ7XG4gIHZpZXdNb2RlbC5ibG9ja0RlZnMgPSBibG9ja0RlZnM7XG5cbiAgdmlld01vZGVsLm5vdGlmaWVyID0gdG9hc3RyO1xuXG4gIC8vIERvZXMgdG9rZW4gc3Vic3RpdHV0aW9uIGluIGkxOG5leHQgc3R5bGVcbiAgdmlld01vZGVsLnR0ID0gZnVuY3Rpb24oa2V5LCBwYXJhbU9iaikge1xuICAgIGlmICh0eXBlb2YgcGFyYW1PYmogIT09ICd1bmRlZmluZWQnKVxuICAgICAgZm9yICh2YXIgcHJvcCBpbiBwYXJhbU9iailcbiAgICAgICAgaWYgKHBhcmFtT2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgICAga2V5ID0ga2V5LnJlcGxhY2UobmV3IFJlZ0V4cCgnX18nICsgcHJvcCArICdfXycsICdnJyksIHBhcmFtT2JqW3Byb3BdKTtcbiAgICAgICAgfVxuICAgIHJldHVybiBrZXk7XG4gIH07XG5cbiAgLy8gU2ltcGx5IG1hcHMgdG8gdHQ6IGxhbmd1YWdlIHBsdWdpbnMgY2FuIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGRlZmluZSB0aGVpciBvd24gbGFuZ3VhZ2VcbiAgLy8gaGFuZGxpbmcuXG4gIC8vIElmIHRoaXMgbWV0aG9kIGludm9rZXMgYW4gb2JzZXJ2YWJsZSAoZS5nOiB2aWV3TW9kZWwubGFuZygpKSB0aGVuIHRoZSBVSSBsYW5ndWFnZSB3aWxsIGF1dG9tYXRpY2FsbHlcbiAgLy8gdXBkYXRlIHdoZW4gdGhlIFwibGFuZ1wiIG9ic2VydmFibGUgY2hhbmdlcy5cbiAgdmlld01vZGVsLnQgPSB2aWV3TW9kZWwudHQ7XG5cbiAgLy8gY3VycmVudGx5IGNhbGxlZCBieSBlZGl0b3IuaHRtbCB0byB0cmFuc2xhdGUgdGVtcGxhdGUtZGVmaW5lZCBrZXlzIChsYWJlbCwgaGVscCwgZGVzY3JpcHRpb25zKVxuICAvLyB0aGUgZWRpdG9yIGFsd2F5cyB1c2VzIHRoZSBcInRlbXBsYXRlXCIgY2F0ZWdvcnkgZm9yIHRoYXQgc3RyaW5ncy5cbiAgLy8geW91IGNhbiBvdmVycmlkZSB0aGlzIG1ldGhvZCBhcyB5b3UgbGlrZSBpbiBvcmRlciB0byBwcm92aWRlIHRyYW5zbGF0aW9uIG9yIGNoYW5nZSB0aGUgc3RyaW5ncyBpbiBhbnkgd2F5LlxuICB2aWV3TW9kZWwudXQgPSBmdW5jdGlvbihjYXRlZ29yeSwga2V5KSB7XG4gICAgcmV0dXJuIGtleTtcbiAgfTtcblxuICB2aWV3TW9kZWwudGVtcGxhdGVQYXRoID0gdGh1bWJQYXRoQ29udmVydGVyO1xuXG4gIHZpZXdNb2RlbC5yZW1vdGVVcmxQcm9jZXNzb3IgPSBmdW5jdGlvbih1cmwpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9O1xuXG4gIHZpZXdNb2RlbC5yZW1vdGVGaWxlUHJvY2Vzc29yID0gZnVuY3Rpb24oZmlsZU9iaikge1xuICAgIGlmICh0eXBlb2YgZmlsZU9iai51cmwgIT09ICd1bmRlZmluZWQnKSBmaWxlT2JqLnVybCA9IHZpZXdNb2RlbC5yZW1vdGVVcmxQcm9jZXNzb3IoZmlsZU9iai51cmwpO1xuICAgIGlmICh0eXBlb2YgZmlsZU9iai50aHVtYm5haWxVcmwgIT09ICd1bmRlZmluZWQnKSBmaWxlT2JqLnRodW1ibmFpbFVybCA9IHZpZXdNb2RlbC5yZW1vdGVVcmxQcm9jZXNzb3IoZmlsZU9iai50aHVtYm5haWxVcmwpO1xuICAgIC8vIGRlbGV0ZVVybD9cbiAgICByZXR1cm4gZmlsZU9iajtcbiAgfTtcblxuICAvLyB0b29sYm94LnRtcGwuaHRtbFxuICB2aWV3TW9kZWwubG9hZEdhbGxlcnkgPSBmdW5jdGlvbigpIHtcbiAgICB2aWV3TW9kZWwuZ2FsbGVyeUxvYWRlZCgnbG9hZGluZycpO1xuICAgIHZhciB1cmwgPSBnYWxsZXJ5VXJsID8gZ2FsbGVyeVVybCA6ICcvdXBsb2FkLyc7XG4gICAgLy8gcmV0cmlldmUgdGhlIGZ1bGwgbGlzdCBvZiByZW1vdGUgZmlsZXNcbiAgICAkLmdldEpTT04odXJsLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZmlsZXMubGVuZ3RoOyBpKyspIGRhdGEuZmlsZXNbaV0gPSB2aWV3TW9kZWwucmVtb3RlRmlsZVByb2Nlc3NvcihkYXRhLmZpbGVzW2ldKTtcbiAgICAgIHZpZXdNb2RlbC5nYWxsZXJ5TG9hZGVkKGRhdGEuZmlsZXMubGVuZ3RoKTtcbiAgICAgIC8vIFRPRE8gZG8gSSB3YW50IHRoaXMgY2FsbCB0byByZXR1cm4gcmVsYXRpdmUgcGF0aHM/IE9yIGp1c3QgYWJzb2x1dGUgcGF0aHM/XG4gICAgICB2aWV3TW9kZWwuZ2FsbGVyeVJlbW90ZShkYXRhLmZpbGVzLnJldmVyc2UoKSk7XG4gICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgIHZpZXdNb2RlbC5nYWxsZXJ5TG9hZGVkKGZhbHNlKTtcbiAgICAgIHZpZXdNb2RlbC5ub3RpZmllci5lcnJvcih2aWV3TW9kZWwudCgnVW5leHBlY3RlZCBlcnJvciBsaXN0aW5nIGZpbGVzJykpO1xuICAgIH0pO1xuICB9O1xuXG4gIHZpZXdNb2RlbC5sb2FkSG9saWRheUdhbGxlcnkgPSBmdW5jdGlvbigpIHtcbiAgICB2aWV3TW9kZWwuZ2FsbGVyeUhvbGlkYXlMb2FkZWQoJ2xvYWRpbmcnKTtcbiAgICB2YXIgdXJsID0gJy9ob2xpZGF5Lyc7XG4gICAgLy8gcmV0cmlldmUgdGhlIGZ1bGwgbGlzdCBvZiByZW1vdGUgZmlsZXNcbiAgICAkLmdldEpTT04odXJsLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5maWxlcy5sZW5ndGg7IGkrKykgZGF0YS5maWxlc1tpXSA9IHZpZXdNb2RlbC5yZW1vdGVGaWxlUHJvY2Vzc29yKGRhdGEuZmlsZXNbaV0pO1xuICAgICAgdmlld01vZGVsLmdhbGxlcnlIb2xpZGF5TG9hZGVkKGRhdGEuZmlsZXMubGVuZ3RoKTtcbiAgICAgIC8vIFRPRE8gZG8gSSB3YW50IHRoaXMgY2FsbCB0byByZXR1cm4gcmVsYXRpdmUgcGF0aHM/IE9yIGp1c3QgYWJzb2x1dGUgcGF0aHM/XG4gICAgICB2aWV3TW9kZWwuZ2FsbGVyeUhvbGlkYXlSZW1vdGUoZGF0YS5maWxlcy5yZXZlcnNlKCkpO1xuICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICB2aWV3TW9kZWwuZ2FsbGVyeUhvbGlkYXlMb2FkZWQoZmFsc2UpO1xuICAgICAgdmlld01vZGVsLm5vdGlmaWVyLmVycm9yKHZpZXdNb2RlbC50KCdVbmV4cGVjdGVkIGVycm9yIGxpc3RpbmcgZmlsZXMnKSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmlld01vZGVsLmxvYWROYXR1cmVHYWxsZXJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmlld01vZGVsLmdhbGxlcnlOYXR1cmVMb2FkZWQoJ2xvYWRpbmcnKTtcbiAgICB2YXIgdXJsID0gJy9uYXR1cmUvJztcbiAgICAvLyByZXRyaWV2ZSB0aGUgZnVsbCBsaXN0IG9mIHJlbW90ZSBmaWxlc1xuICAgICQuZ2V0SlNPTih1cmwsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmZpbGVzLmxlbmd0aDsgaSsrKSBkYXRhLmZpbGVzW2ldID0gdmlld01vZGVsLnJlbW90ZUZpbGVQcm9jZXNzb3IoZGF0YS5maWxlc1tpXSk7XG4gICAgICB2aWV3TW9kZWwuZ2FsbGVyeU5hdHVyZUxvYWRlZChkYXRhLmZpbGVzLmxlbmd0aCk7XG4gICAgICAvLyBUT0RPIGRvIEkgd2FudCB0aGlzIGNhbGwgdG8gcmV0dXJuIHJlbGF0aXZlIHBhdGhzPyBPciBqdXN0IGFic29sdXRlIHBhdGhzP1xuICAgICAgdmlld01vZGVsLmdhbGxlcnlOYXR1cmVSZW1vdGUoZGF0YS5maWxlcy5yZXZlcnNlKCkpO1xuICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICB2aWV3TW9kZWwuZ2FsbGVyeU5hdHVyZUxvYWRlZChmYWxzZSk7XG4gICAgICB2aWV3TW9kZWwubm90aWZpZXIuZXJyb3Iodmlld01vZGVsLnQoJ1VuZXhwZWN0ZWQgZXJyb3IgbGlzdGluZyBmaWxlcycpKTtcbiAgICB9KTtcbiAgfTtcblxuICB2aWV3TW9kZWwubG9hZFByb21vdGlvbkdhbGxlcnkgPSBmdW5jdGlvbigpIHtcbiAgICB2aWV3TW9kZWwuZ2FsbGVyeVByb21vdGlvbkxvYWRlZCgnbG9hZGluZycpO1xuICAgIHZhciB1cmwgPSAnL3Byb21vdGlvbi8nO1xuICAgIC8vIHJldHJpZXZlIHRoZSBmdWxsIGxpc3Qgb2YgcmVtb3RlIGZpbGVzXG4gICAgJC5nZXRKU09OKHVybCwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZmlsZXMubGVuZ3RoOyBpKyspIGRhdGEuZmlsZXNbaV0gPSB2aWV3TW9kZWwucmVtb3RlRmlsZVByb2Nlc3NvcihkYXRhLmZpbGVzW2ldKTtcbiAgICAgIHZpZXdNb2RlbC5nYWxsZXJ5UHJvbW90aW9uTG9hZGVkKGRhdGEuZmlsZXMubGVuZ3RoKTtcbiAgICAgIC8vIFRPRE8gZG8gSSB3YW50IHRoaXMgY2FsbCB0byByZXR1cm4gcmVsYXRpdmUgcGF0aHM/IE9yIGp1c3QgYWJzb2x1dGUgcGF0aHM/XG4gICAgICB2aWV3TW9kZWwuZ2FsbGVyeVByb21vdGlvblJlbW90ZShkYXRhLmZpbGVzLnJldmVyc2UoKSk7XG4gICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgIHZpZXdNb2RlbC5nYWxsZXJ5UHJvbW90aW9uTG9hZGVkKGZhbHNlKTtcbiAgICAgIHZpZXdNb2RlbC5ub3RpZmllci5lcnJvcih2aWV3TW9kZWwudCgnVW5leHBlY3RlZCBlcnJvciBsaXN0aW5nIGZpbGVzJykpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIGltZy13eXNpd3lnLnRtcGwuaHRtbFxuICB2aWV3TW9kZWwuZmlsZVRvSW1hZ2UgPSBmdW5jdGlvbihvYmosIGV2ZW50LCB1aSkge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiZmlsZVRvSW1hZ2VcIiwgb2JqKTtcbiAgICByZXR1cm4gb2JqLnVybDtcbiAgfTtcblxuXG4gIHZpZXdNb2RlbC5lZGl0SW1hZ2UgPSBmdW5jdGlvbihzcmMsIGRvbmUpIHtcbiAgICB2YXIgaW1nU3JjID0gJCh0aGlzKS5wYXJlbnRzKCcudXBsb2Fkem9uZScpLmZpbmQoJ2ltZy5tb2JpbGUtZnVsbCcpLmF0dHIoJ3NyYycpO1xuICAgICQodGhpcykucGFyZW50cygnLnVwbG9hZHpvbmUnKS5maW5kKCdpbWcubW9iaWxlLWZ1bGwnKS5wcm9wKCdpZCcsIGltZ1NyYyk7XG4gICAgJCgnI3RyaWdnZXItZWRpdG9yJykuYXR0cignZGF0YS1zcmMnLCBpbWdTcmMpO1xuXG4gICAgJCgnI3RyaWdnZXItZWRpdG9yJykudHJpZ2dlcignY2xpY2snKTtcbiAgfTtcblxuICAvLyBibG9jay13eXNpd3lnLnRtcGwuaHRtbFxuICB2aWV3TW9kZWwucmVtb3ZlQmxvY2sgPSBmdW5jdGlvbihkYXRhLCBwYXJlbnQpIHtcbiAgICAvLyBsZXQncyB1bnNlbGVjdCB0aGUgYmxvY2tcbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGUgbGFzdCBibG9jayBpcyBiZWluZyBkZWxldGVkXG4gICAgdmFyIGlzTGFzdEJsb2NrID0gZmFsc2U7XG4gICAgaWYoJCgnI21haW4td3lzaXd5Zy1hcmVhIC5zb3J0YWJsZS1ibG9ja3MtZWRpdCAuZWRpdGFibGUuYmxvY2snKS5sZW5ndGggPD0gMSl7XG4gICAgICBpc0xhc3RCbG9jayA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUodmlld01vZGVsLnNlbGVjdGVkQmxvY2spID09IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUoZGF0YSkpIHtcbiAgICAgIHZpZXdNb2RlbC5zZWxlY3RCbG9jayhudWxsLCB0cnVlKTtcbiAgICB9XG4gICAgdmFyIHJlcyA9IHBhcmVudC5ibG9ja3MucmVtb3ZlKGRhdGEpO1xuICAgIC8vIFRPRE8gVGhpcyBtZXNzYWdlIHNob3VsZCBiZSBkaWZmZXJlbnQgZGVwZW5kaW5nIG9uIHVuZG8gcGx1Z2luIHByZXNlbmNlLlxuICAgIHZpZXdNb2RlbC5ub3RpZmllci5pbmZvKHZpZXdNb2RlbC50KCdCbG9jayByZW1vdmVkOiB1c2UgdW5kbyBidXR0b24gdG8gcmVzdG9yZSBpdC4uLicpKTtcbiAgICBcbiAgICAvLyBBZGQgZGVmYXVsdCB0ZXh0IGJsb2NrIGFmdGVyIHRoZSBsYXN0IGJsb2NrIGZyb20gZWRpdG9yIGlzIGRlbGV0ZWRcbiAgICBpZiAoaXNMYXN0QmxvY2sgPT0gdHJ1ZSl7XG4gICAgICAkKCcjbWFpbi10b29sYm94IC5ibG9jay1saXN0JykuZmluZCgnaW1nW2FsdD1cIkJsb2NrIHRleHRCbG9ja1wiXScpLnBhcmVudCgpLmNsaWNrKCk7XG4gICAgICB2YXIgdGltZW91dCA9IGdsb2JhbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIHRpbnltY2UuZWRpdG9yc1swXS5mb2N1cygpO1xuICAgICAgICB0aW55bWNlLmVkaXRvcnNbMF0uc2V0Q29udGVudCgnJywge2Zvcm1hdDogJ3Jhdyd9KTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9O1xuXG4gIC8vIGJsb2NrLXd5c2l3eWcudG1wbC5odG1sXG4gIHZpZXdNb2RlbC5kdXBsaWNhdGVCbG9jayA9IGZ1bmN0aW9uKGluZGV4LCBwYXJlbnQpIHtcbiAgICB2YXIgaWR4ID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShpbmRleCk7XG4gICAgLy8gRGVpbnN0cnVtZW50L2Rlb2JzZXJ2ZSB0aGUgb2JqZWN0XG4gICAgdmFyIHVud3JhcHBlZCA9IGtvLnRvSlMoa28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShwYXJlbnQuYmxvY2tzKVtpZHhdKTtcbiAgICAvLyBXZSBuZWVkIHRvIHJlbW92ZSB0aGUgaWQgc28gdGhhdCBhIG5ldyBvbmUgd2lsbCBiZSBhc3NpZ25lZCB0byB0aGUgY2xvbmVcbiAgICBpZiAodHlwZW9mIHVud3JhcHBlZC5pZCAhPT0gJ3VuZGVmaW5lZCcpIHVud3JhcHBlZC5pZCA9ICcnO1xuICAgIC8vIGluc2VydCB0aGUgY2xvbmVkIGJsb2NrXG4gICAgcGFyZW50LmJsb2Nrcy5zcGxpY2UoaWR4ICsgMSwgMCwgdW53cmFwcGVkKTtcbiAgfTtcblxuICAvLyBibG9jay13eXNpd3lnLnRtcGwuaHRtbFxuICB2aWV3TW9kZWwubW92ZUJsb2NrID0gZnVuY3Rpb24oaW5kZXgsIHBhcmVudCwgdXApIHtcbiAgICB2YXIgaWR4ID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShpbmRleCk7XG4gICAgdmFyIHBhcmVudEJsb2NrcyA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUocGFyZW50LmJsb2Nrcyk7XG4gICAgaWYgKCh1cCAmJiBpZHggPiAwKSB8fCAoIXVwICYmIGlkeCA8IHBhcmVudEJsb2Nrcy5sZW5ndGggLSAxKSkge1xuICAgICAgdmFyIGRlc3RJbmRleCA9IGlkeCArICh1cCA/IC0xIDogMSk7XG4gICAgICB2YXIgZGVzdEJsb2NrID0gcGFyZW50QmxvY2tzW2Rlc3RJbmRleF07XG4gICAgICB2aWV3TW9kZWwuc3RhcnRNdWx0aXBsZSgpO1xuICAgICAgcGFyZW50LmJsb2Nrcy5zcGxpY2UoZGVzdEluZGV4LCAxKTtcbiAgICAgIHBhcmVudC5ibG9ja3Muc3BsaWNlKGlkeCwgMCwgZGVzdEJsb2NrKTtcbiAgICAgIHZpZXdNb2RlbC5zdG9wTXVsdGlwbGUoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gdGVzdCBtZXRob2QsIGNvbW1hbmQgbGluZSB1c2Ugb25seVxuICB2aWV3TW9kZWwubG9hZERlZmF1bHRCbG9ja3MgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBjbG9uaW5nIHRoZSB3aG9sZSBcIm1haW5CbG9ja3NcIiBvYmplY3Qgc28gdGhhdCB1bmRvbWFuYWdlciB3aWxsXG4gICAgLy8gc2VlIGl0IGFzIGEgc2luZ2xlIG9wZXJhdGlvbiAobWF5YmUgSSBjb3VsZCB1c2UgXCJzdGFydE11bHRpcGxlXCIvXCJzdG9wTXVsdGlwbGVcIi5cbiAgICB2YXIgcmVzID0ga28udG9KUyh2aWV3TW9kZWwuY29udGVudCgpLm1haW5CbG9ja3MpO1xuICAgIHJlcy5ibG9ja3MgPSBbXTtcbiAgICB2YXIgaW5wdXQgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZpZXdNb2RlbC5ibG9ja0RlZnMpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBvYmogPSBrby50b0pTKGlucHV0W2ldKTtcbiAgICAgIC8vIGdlbmVyYXRpbmcgaWRzIGZvciBibG9ja3MsIG1heWJlIHRoaXMgd291bGQgd29yayBhbHNvIGxlYXZpbmcgaXQgZW1wdHkuXG4gICAgICBvYmouaWQgPSAnYmxvY2tfJyArIGk7XG4gICAgICByZXMuYmxvY2tzLnB1c2gob2JqKTtcbiAgICB9XG4gICAgcGVyZm9ybWFuY2VBd2FyZUNhbGxlcignc2V0TWFpbkJsb2NrcycsIHZpZXdNb2RlbC5jb250ZW50KCkubWFpbkJsb2Nrcy5fd3JhcC5iaW5kKHZpZXdNb2RlbC5jb250ZW50KCkubWFpbkJsb2NrcywgcmVzKSk7XG4gIH07XG5cbiAgLy8gZ2FsbGVyeS1pbWFnZXMudG1wbC5odG1sXG4gIHZpZXdNb2RlbC5hZGRJbWFnZSA9IGZ1bmN0aW9uKGltZykge1xuICAgIHZhciBzZWxlY3RlZEltZyA9ICQoJyNtYWluLXd5c2l3eWctYXJlYSAuc2VsZWN0YWJsZS1pbWcuc2VsZWN0ZWRpdGVtJyk7XG4gICAgaWYgKHNlbGVjdGVkSW1nLmxlbmd0aCA9PSAxICYmIHR5cGVvZiBpbWcgPT0gJ29iamVjdCcgJiYgdHlwZW9mIGltZy51cmwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBrby5jb250ZXh0Rm9yKHNlbGVjdGVkSW1nWzBdKS5fc3JjKGltZy51cmwpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgLy8gdG9vbGJveC50bXBsLmh0bWxcbiAgdmlld01vZGVsLmFkZEJsb2NrID0gZnVuY3Rpb24ob2JqLCBldmVudCkge1xuICAgIC8vIGlmIHRoZXJlIGlzIGEgc2VsZWN0ZWQgYmxvY2sgd2UgdHJ5IHRvIGFkZCB0aGUgYmxvY2sganVzdCBhZnRlciB0aGUgc2VsZWN0ZWQgb25lLlxuICAgIHZhciBzZWxlY3RlZCA9IHZpZXdNb2RlbC5zZWxlY3RlZEJsb2NrKCk7XG4gICAgLy8gc2VhcmNoIHRoZSBzZWxlY3RlZCBibG9jayBwb3NpdGlvbi5cbiAgICB2YXIgZm91bmQ7XG4gICAgaWYgKHNlbGVjdGVkICE9PSBudWxsKSB7XG4gICAgICAvLyBUT0RPIFwibWFpbkJsb2Nrc1wiIGlzIGFuIGhhcmRjb2RlZCB0aGluZy5cbiAgICAgIGZvciAodmFyIGkgPSB2aWV3TW9kZWwuY29udGVudCgpLm1haW5CbG9ja3MoKS5ibG9ja3MoKS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAodmlld01vZGVsLmNvbnRlbnQoKS5tYWluQmxvY2tzKCkuYmxvY2tzKClbaV0oKSA9PSBzZWxlY3RlZCkge1xuICAgICAgICAgIGZvdW5kID0gaTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB2YXIgcG9zO1xuICAgIGlmICh0eXBlb2YgZm91bmQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBwb3MgPSBmb3VuZCArIDE7XG4gICAgICB2aWV3TW9kZWwuY29udGVudCgpLm1haW5CbG9ja3MoKS5ibG9ja3Muc3BsaWNlKHBvcywgMCwgb2JqKTtcbiAgICAgIHZpZXdNb2RlbC5ub3RpZmllci5pbmZvKHZpZXdNb2RlbC50KCdOZXcgYmxvY2sgYWRkZWQgYWZ0ZXIgdGhlIHNlbGVjdGVkIG9uZSAoX19wb3NfXyknLCB7XG4gICAgICAgIHBvczogcG9zXG4gICAgICB9KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZXdNb2RlbC5jb250ZW50KCkubWFpbkJsb2NrcygpLmJsb2Nrcy5wdXNoKG9iaik7XG4gICAgICBwb3MgPSB2aWV3TW9kZWwuY29udGVudCgpLm1haW5CbG9ja3MoKS5ibG9ja3MoKS5sZW5ndGggLSAxO1xuICAgICAgdmlld01vZGVsLm5vdGlmaWVyLmluZm8odmlld01vZGVsLnQoJ05ldyBibG9jayBhZGRlZCBhdCB0aGUgbW9kZWwgYm90dG9tIChfX3Bvc19fKScsIHtcbiAgICAgICAgcG9zOiBwb3NcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgLy8gZmluZCB0aGUgbmV3bHkgYWRkZWQgYmxvY2sgYW5kIHNlbGVjdCBpdCFcbiAgICB2YXIgYWRkZWQgPSB2aWV3TW9kZWwuY29udGVudCgpLm1haW5CbG9ja3MoKS5ibG9ja3MoKVtwb3NdKCk7XG4gICAgdmlld01vZGVsLnNlbGVjdEJsb2NrKGFkZGVkLCB0cnVlKTtcbiAgICAvLyBwcmV2ZW50IGNsaWNrIHByb3BhZ2F0aW9uIChsb3NpbmcgdXJsIGhhc2ggLSBzZWUgIzQzKVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBVc2VkIGJ5IHN0eWxlc2hlZXQuanMgdG8gY3JlYXRlIG11bHRpcGxlIHN0eWxlc1xuICB2aWV3TW9kZWwuZmluZE9iamVjdHNPZlR5cGUgPSBmdW5jdGlvbihkYXRhLCB0eXBlKSB7XG4gICAgdmFyIHJlcyA9IFtdO1xuICAgIHZhciBvYmogPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGRhdGEpO1xuICAgIGZvciAodmFyIHByb3AgaW4gb2JqKVxuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICB2YXIgdmFsID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShvYmpbcHJvcF0pO1xuICAgICAgICAvLyBUT0RPIHRoaXMgaXMgbm90IHRoZSByaWdodCB3YXkgdG8gZGVhbCB3aXRoIFwiYmxvY2sgbGlzdFwiIG9iamVjdHMuXG4gICAgICAgIGlmIChwcm9wLm1hdGNoKC9CbG9ja3MkLykpIHtcbiAgICAgICAgICB2YXIgY29udGVudHMgPSBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKHZhbC5ibG9ja3MpO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShjb250ZW50c1tpXSk7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gbnVsbCB8fCBrby51dGlscy51bndyYXBPYnNlcnZhYmxlKGMudHlwZSkgPT0gdHlwZSkgcmVzLnB1c2goYyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFRPRE8gaW52ZXN0aWdhdGUgd2hpY2ggY29uZGl0aW9uIHByb3ZpZGUgYSBudWxsIHZhbHVlLlxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT0gJ29iamVjdCcgJiYgdmFsICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHR5cGUgPT09IG51bGwgfHwga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZSh2YWwudHlwZSkgPT0gdHlwZSkgcmVzLnB1c2godmFsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIHJldHVybiByZXM7XG4gIH07XG5cbiAgLypcbiAgdmlld01vZGVsLnBsYWNlaG9sZGVySGVscGVyID0gJ3NvcnRhYmxlLXBsYWNlaG9sZGVyJztcbiAgaWYgKGZhbHNlKSB7XG4gICAgdmlld01vZGVsLnBsYWNlaG9sZGVySGVscGVyID0ge1xuICAgICAgZWxlbWVudDogZnVuY3Rpb24oY3VycmVudEl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICQoJzxkaXYgLz4nKS5yZW1vdmVDbGFzcygndWktZHJhZ2dhYmxlJykuYWRkQ2xhc3MoJ3NvcnRhYmxlLXBsYWNlaG9sZGVyJykuY3NzKCdwb3NpdGlvbicsICdyZWxhdGl2ZScpLmNzcygnd2lkdGgnLCAnMTAwJScpLmNzcygnaGVpZ2h0JywgY3VycmVudEl0ZW0uY3NzKCdoZWlnaHQnKSkuY3NzKCdvcGFjaXR5JywgJy44JylbMF07XG4gICAgICB9LFxuICAgICAgdXBkYXRlOiBmdW5jdGlvbihjb250YWluZXIsIHApIHtcbiAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICAqL1xuXG4gIC8vIEF0dGVtcHQgdG8gaW5zZXJ0IHRoZSBibG9jayBpbiB0aGUgZGVzdGluYXRpb24gbGF5b3V0IGR1cmluZyBkcmFnZ2luZ1xuICB2aWV3TW9kZWwucGxhY2Vob2xkZXJIZWxwZXIgPSB7XG4gICAgZWxlbWVudDogZnVuY3Rpb24oY3VycmVudEl0ZW0pIHtcbiAgICAgIHJldHVybiAkKGN1cnJlbnRJdGVtWzBdLm91dGVySFRNTCkucmVtb3ZlQ2xhc3MoJ3VpLWRyYWdnYWJsZScpLmFkZENsYXNzKCdzb3J0YWJsZS1wbGFjZWhvbGRlcicpLmNzcygnZGlzcGxheScsICdibG9jaycpLmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKS5jc3MoJ3dpZHRoJywgJzEwMCUnKS5jc3MoJ2hlaWdodCcsICdhdXRvJykuY3NzKCdvcGFjaXR5JywgJy44JylbMF07XG4gICAgfSxcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKGNvbnRhaW5lciwgcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcblxuICAvLyBUT0RPIHRoZSB1bmR1bWFuYWdlciBzaG91bGQgYmUgcGx1Z2dhYmxlLlxuICAvLyBVc2VkIGJ5IFwibW92ZUJsb2NrXCIgYW5kIGJsb2Nrcy13eXNpd3lnLnRtcGwuaHRtbCB0byBcIm1lcmdlXCIgZHJhZy9kcm9wIG9wZXJhdGlvbnMgaW50byBhIHNpbmdsZSB1bmRvL3JlZG8gb3AuXG4gIHZpZXdNb2RlbC5zdGFydE11bHRpcGxlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHR5cGVvZiB2aWV3TW9kZWwuc2V0VW5kb01vZGVNZXJnZSAhPT0gJ3VuZGVmaW5lZCcpIHZpZXdNb2RlbC5zZXRVbmRvTW9kZU1lcmdlKCk7XG4gIH07XG4gIHZpZXdNb2RlbC5zdG9wTXVsdGlwbGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodHlwZW9mIHZpZXdNb2RlbC5zZXRVbmRvTW9kZU9uY2UgIT09ICd1bmRlZmluZWQnKSB2aWV3TW9kZWwuc2V0VW5kb01vZGVPbmNlKCk7XG4gIH07XG5cbiAgLy8gVXNlZCBieSBjb2RlIGdlbmVyYXRlZCBieSBlZGl0b3IuanMgXG4gIHZpZXdNb2RlbC5sb2NhbEdsb2JhbFN3aXRjaCA9IGZ1bmN0aW9uKHByb3AsIGdsb2JhbFByb3ApIHtcbiAgICB2YXIgY3VycmVudCA9IHByb3AoKTtcbiAgICBpZiAoY3VycmVudCA9PT0gbnVsbCkgcHJvcChnbG9iYWxQcm9wKCkpO1xuICAgIGVsc2UgcHJvcChudWxsKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLy8gVXNlZCBieSBlZGl0b3IgYW5kIG1haW4gXCJjb252ZXJ0ZXJcIiB0byBzdXBwb3J0IGl0ZW0gc2VsZWN0aW9uXG4gIHZpZXdNb2RlbC5zZWxlY3RJdGVtID0gZnVuY3Rpb24odmFsdWVBY2Nlc3NvciwgaXRlbSwgYmxvY2spIHtcbiAgICB2YXIgdmFsID0ga28udXRpbHMucGVla09ic2VydmFibGUodmFsdWVBY2Nlc3Nvcik7XG4gICAgaWYgKHR5cGVvZiBibG9jayAhPT0gJ3VuZGVmaW5lZCcpIHZpZXdNb2RlbC5zZWxlY3RCbG9jayhibG9jaywgZmFsc2UsIHRydWUpO1xuICAgIGlmICh2YWwgIT0gaXRlbSkge1xuICAgICAgdmFsdWVBY2Nlc3NvcihpdGVtKTtcbiAgICAgIC8vIE9uIHNlbGVjdEl0ZW0gaWYgd2Ugd2VyZSBvbiBcIkJsb2Nrc1wiIHRvb2xib3ggdGFiIHdlIG1vdmUgdG8gXCJDb250ZW50XCIgdG9vbGJveCB0YWIuXG4gICAgICBpZiAoaXRlbSAhPT0gbnVsbCAmJiB2aWV3TW9kZWwuc2VsZWN0ZWRUb29sKCkgPT09IDApIHZpZXdNb2RlbC5zZWxlY3RlZFRvb2woMSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfS5iaW5kKHZpZXdNb2RlbCwgdmlld01vZGVsLnNlbGVjdGVkSXRlbSk7XG5cbiAgdmlld01vZGVsLmlzU2VsZWN0ZWRJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xuICAgIHJldHVybiB2aWV3TW9kZWwuc2VsZWN0ZWRJdGVtKCkgPT0gaXRlbTtcbiAgfTtcblxuICB2aWV3TW9kZWwuc2VsZWN0QmxvY2sgPSBmdW5jdGlvbih2YWx1ZUFjY2Vzc29yLCBpdGVtLCBkb05vdFNlbGVjdCwgZG9Ob3RVbnNlbGVjdEl0ZW0pIHtcbiAgICB2YXIgdmFsID0ga28udXRpbHMucGVla09ic2VydmFibGUodmFsdWVBY2Nlc3Nvcik7XG4gICAgaWYgKCFkb05vdFVuc2VsZWN0SXRlbSkgdmlld01vZGVsLnNlbGVjdEl0ZW0obnVsbCk7XG4gICAgaWYgKHZhbCAhPSBpdGVtKSB7XG4gICAgICB2YWx1ZUFjY2Vzc29yKGl0ZW0pO1xuICAgICAgLy8gaGlkZSBnYWxsZXJ5IG9uIGJsb2NrIHNlbGVjdGlvblxuICAgICAgdmlld01vZGVsLnNob3dHYWxsZXJ5KGZhbHNlKTtcbiAgICAgIGlmIChpdGVtICE9PSBudWxsICYmICFkb05vdFNlbGVjdCAmJiB2aWV3TW9kZWwuc2VsZWN0ZWRUb29sKCkgPT09IDApIHZpZXdNb2RlbC5zZWxlY3RlZFRvb2woMSk7XG4gICAgfVxuICB9LmJpbmQodmlld01vZGVsLCB2aWV3TW9kZWwuc2VsZWN0ZWRCbG9jayk7XG5cbiAgLy8gREVCVUdcbiAgdmlld01vZGVsLmNvdW50U3Vic2NyaXB0aW9ucyA9IGZ1bmN0aW9uKG1vZGVsLCBkZWJ1Zykge1xuICAgIHZhciByZXMgPSAwO1xuICAgIGZvciAodmFyIHByb3AgaW4gbW9kZWwpXG4gICAgICBpZiAobW9kZWwuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgdmFyIHAgPSBtb2RlbFtwcm9wXTtcbiAgICAgICAgaWYgKGtvLmlzT2JzZXJ2YWJsZShwKSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgcC5fZGVmYXVsdENvbXB1dGVkICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRlYnVnICE9ICd1bmRlZmluZWQnKSBjb25zb2xlLmxvZyhkZWJ1ZyArIFwiL1wiICsgcHJvcCArIFwiL19cIiwgcC5fZGVmYXVsdENvbXB1dGVkLmdldFN1YnNjcmlwdGlvbnNDb3VudCgpKTtcbiAgICAgICAgICAgIHJlcyArPSBwLl9kZWZhdWx0Q29tcHV0ZWQuZ2V0U3Vic2NyaXB0aW9uc0NvdW50KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0eXBlb2YgZGVidWcgIT0gJ3VuZGVmaW5lZCcpIGNvbnNvbGUubG9nKGRlYnVnICsgXCIvXCIgKyBwcm9wICsgXCIvLVwiLCBwLmdldFN1YnNjcmlwdGlvbnNDb3VudCgpKTtcbiAgICAgICAgICByZXMgKz0gcC5nZXRTdWJzY3JpcHRpb25zQ291bnQoKTtcbiAgICAgICAgICBwID0ga28udXRpbHMudW53cmFwT2JzZXJ2YWJsZShwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHAgPT0gJ29iamVjdCcgJiYgcCAhPT0gbnVsbCkge1xuICAgICAgICAgIHZhciB0b3QgPSB2aWV3TW9kZWwuY291bnRTdWJzY3JpcHRpb25zKHAsIHR5cGVvZiBkZWJ1ZyAhPSAndW5kZWZpbmVkJyA/IGRlYnVnICsgJy8nICsgcHJvcCArIFwiQFwiIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICBpZiAodHlwZW9mIGRlYnVnICE9ICd1bmRlZmluZWQnKSBjb25zb2xlLmxvZyhkZWJ1ZyArIFwiL1wiICsgcHJvcCArIFwiQFwiLCB0b3QpO1xuICAgICAgICAgIHJlcyArPSB0b3Q7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9O1xuXG4gIC8vIERFQlVHXG4gIHZpZXdNb2RlbC5sb29wU3Vic2NyaXB0aW9uc0NvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvdW50ID0gdmlld01vZGVsLmNvdW50U3Vic2NyaXB0aW9ucyh2aWV3TW9kZWwuY29udGVudCgpKTtcbiAgICBnbG9iYWwuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1YnNjcmlwdGlvbnNDb3VudCcpLmlubmVySFRNTCA9IGNvdW50O1xuICAgIGdsb2JhbC5zZXRUaW1lb3V0KHZpZXdNb2RlbC5sb29wU3Vic2NyaXB0aW9uc0NvdW50LCAxMDAwKTtcbiAgfTtcblxuICB2aWV3TW9kZWwuZXhwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvbnRlbnQgPSBwZXJmb3JtYW5jZUF3YXJlQ2FsbGVyKFwiZXhwb3J0SFRNTFwiLCB2aWV3TW9kZWwuZXhwb3J0SFRNTCk7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH07XG5cbiAgZnVuY3Rpb24gY29uZGl0aW9uYWxfcmVzdG9yZShodG1sKSB7XG4gICAgcmV0dXJuIGh0bWwucmVwbGFjZSgvPHJlcGxhY2VkY2NbXj5dKiBjb25kaXRpb249XCIoW15cIl0qKVwiW14+XSo+KFtcXHNcXFNdKj8pPFxcL3JlcGxhY2VkY2M+L2csIGZ1bmN0aW9uKG1hdGNoLCBjb25kaXRpb24sIGJvZHkpIHtcbiAgICAgIHZhciBkZCA9ICc8IS0tW2lmICcrY29uZGl0aW9uLnJlcGxhY2UoLyZhbXA7LywgJyYnKSsnXT4nO1xuICAgICAgZGQgKz0gYm9keS5yZXBsYWNlKC88IS0tIGNjOmJjOihbQS1aYS16Ol0qKSAtLT4oPFxcL2NjPik/PCEtLSBjYzphYzpcXDEgLS0+L2csICc8LyQxPicpIC8vIHJlc3RvcmUgY2xvc2luZyB0YWdzIChpbmNsdWRpbmcgbG9zdCB0YWdzKVxuICAgICAgICAgICAgLnJlcGxhY2UoLz48XFwvY2M+PCEtLSBjYzpzYyAtLT4vZywgJy8+JykgLy8gcmVzdG9yZSBzZWxmY2xvc2luZyB0YWdzXG4gICAgICAgICAgICAucmVwbGFjZSgvPCEtLSBjYzpibzooW0EtWmEtejpdKikgLS0+PGNjL2csICc8JDEnKSAvLyByZXN0b3JlIG9wZW4gdGFnc1xuICAgICAgICAgICAgLnJlcGxhY2UoL14uKjwhLS0gY2M6c3RhcnQgLS0+LywnJykgLy8gcmVtb3ZlIGNvbnRlbnQgYmVmb3JlIHN0YXJ0XG4gICAgICAgICAgICAucmVwbGFjZSgvPCEtLSBjYzplbmQgLS0+LiokLywnJyk7IC8vIHJlbW92ZSBjb250ZW50IGFmdGVyIGVuZFxuICAgICAgZGQgKz0gJzwhW2VuZGlmXS0tPic7XG4gICAgICByZXR1cm4gZGQ7XG4gICAgfSk7XG4gIH1cblxuICB2aWV3TW9kZWwuZXhwb3J0SFRNTCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpZCA9ICdleHBvcnRmcmFtZSc7XG4gICAgJCgnYm9keScpLmFwcGVuZCgnPGlmcmFtZSBpZD1cIicgKyBpZCArICdcIiBkYXRhLWJpbmQ9XCJiaW5kSWZyYW1lOiAkZGF0YVwiPjwvaWZyYW1lPicpO1xuICAgIHZhciBmcmFtZUVsID0gZ2xvYmFsLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICBrby5hcHBseUJpbmRpbmdzKHZpZXdNb2RlbCwgZnJhbWVFbCk7XG5cbiAgICBrby5jbGVhbk5vZGUoZnJhbWVFbCk7XG5cbiAgICBpZiAodmlld01vZGVsLmlubGluZSkgdmlld01vZGVsLmlubGluZShmcmFtZUVsLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpO1xuXG4gICAgLy8gT2Jzb2xldGUgbWV0aG9kIGRpZG4ndCB3b3JrIG9uIElFMTEgd2hlbiB1c2luZyBcIkhUTUw1IGRvY3R5cGVcIjpcbiAgICAvLyB2YXIgZG9jVHlwZSA9IG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoZ2xvYmFsLmRvY3VtZW50LmRvY3R5cGUpO1xuICAgIHZhciBub2RlID0gZnJhbWVFbC5jb250ZW50V2luZG93LmRvY3VtZW50LmRvY3R5cGU7XG4gICAgdmFyIGRvY1R5cGUgPSBcIjwhRE9DVFlQRSBcIiArIG5vZGUubmFtZSArXG4gICAgICAobm9kZS5wdWJsaWNJZCA/ICcgUFVCTElDIFwiJyArIG5vZGUucHVibGljSWQgKyAnXCInIDogJycpICtcbiAgICAgICghbm9kZS5wdWJsaWNJZCAmJiBub2RlLnN5c3RlbUlkID8gJyBTWVNURU0nIDogJycpICtcbiAgICAgIChub2RlLnN5c3RlbUlkID8gJyBcIicgKyBub2RlLnN5c3RlbUlkICsgJ1wiJyA6ICcnKSArICc+JztcbiAgICB2YXIgY29udGVudCA9IGRvY1R5cGUgKyBcIlxcblwiICsgZnJhbWVFbC5jb250ZW50V2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vdXRlckhUTUw7XG4gICAga28ucmVtb3ZlTm9kZShmcmFtZUVsKTtcblxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLzxzY3JpcHQgKFtePl0qICk/dHlwZT1cInRleHRcXC9odG1sXCJbXj5dKj5bXFxzXFxTXSo/PFxcL3NjcmlwdD4vZ20sICcnKTtcbiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC88IS0tIGtvIC4qPyAtLT4vZywgJycpOyAvLyBzb21ldGltZXMgd2UgaGF2ZSBleHByZXNzaW9ucyBsaWtlICg8IS0tIGtvIHZhciA+IDIgLS0+KVxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLzwhLS0ga28gKCg/IS0tKS4pKj8gLS0+L2csICcnKTsgLy8gdGhpcyByZXBsYWNlcyB0aGUgYWJvdmUgd2l0aCBhIG1vcmUgZm9ybWFsIChidXQgc2xvd2VyKSBzb2x1dGlvblxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLzwhLS0gXFwva28gLS0+L2csICcnKTtcbiAgICAvLyBSZW1vdmUgZGF0YS1iaW5kL2RhdGEtYmxvY2sgYXR0cmlidXRlc1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyBkYXRhLWJpbmQ9XCJbXlwiXSpcIi9nbSwgJycpO1xuICAgIC8vIFJlbW92ZSB0cmFzaCBsZWZ0b3ZlciBieSBUaW55TUNFXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvIGRhdGEtbWNlLShocmVmfHNyY3xzdHlsZSk9XCJbXlwiXSpcIi9nbSwgJycpO1xuXG4gICAgLy8gUmVwbGFjZSBcInJlcGxhY2Vkc3R5bGVcIiB0byBcInN0eWxlXCIgYXR0cmlidXRlcyAoY2hyb21lIHB1dHMgcmVwbGFjZWRzdHlsZSBhZnRlciBzdHlsZSlcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC8gc3R5bGU9XCJbXlwiXSpcIihbXj5dKikgcmVwbGFjZWQoc3R5bGU9XCJbXlwiXSpcIikvZ20sICckMSAkMicpO1xuICAgIC8vIFJlcGxhY2UgXCJyZXBsYWNlZHN0eWxlXCIgdG8gXCJzdHlsZVwiIGF0dHJpYnV0ZXMgKGllL2ZmIGhhdmUgcmV2ZXJzZSBvcmRlcilcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC8gcmVwbGFjZWQoc3R5bGU9XCJbXlwiXSpcIikoW14+XSopIHN0eWxlPVwiW15cIl0qXCIvZ20sICcgJDEkMicpO1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyByZXBsYWNlZChzdHlsZT1cIlteXCJdKlwiKS9nbSwgJyAkMScpO1xuXG4gICAgLy8gc2FtZSBhcyBzdHlsZSwgYnV0IGZvciBodHRwLWVxdWl2IChzb21lIGJyb3dzZXIgYnJlYWsgaXQgaWYgd2UgZG9uJ3QgcmVwbGFjZSwgYnV0IHRoZW4gd2UgZmluZCBpdCBkdXBsaWNhdGVkKVxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyBodHRwLWVxdWl2PVwiW15cIl0qXCIoW14+XSopIHJlcGxhY2VkKGh0dHAtZXF1aXY9XCJbXlwiXSpcIikvZ20sICckMSAkMicpO1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyByZXBsYWNlZChodHRwLWVxdWl2PVwiW15cIl0qXCIpKFtePl0qKSBodHRwLWVxdWl2PVwiW15cIl0qXCIvZ20sICcgJDEkMicpO1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyByZXBsYWNlZChodHRwLWVxdWl2PVwiW15cIl0qXCIpL2dtLCAnICQxJyk7XG5cbiAgICAvLyBXZSBhbHJlYWR5IHJlcGxhY2Ugc3R5bGUgYW5kIGh0dHAtZXF1aXYgYW5kIHdlIGRvbid0IG5lZWQgdGhpcy5cbiAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC8gcmVwbGFjZWQoW149IF0qPSkvZ20sICcgJDEnKTtcbiAgICAvLyBSZXN0b3JlIGNvbmRpdGlvbmFsIGNvbW1lbnRzXG4gICAgY29udGVudCA9IGNvbmRpdGlvbmFsX3Jlc3RvcmUoY29udGVudCk7XG4gICAgdmFyIHRyYXNoID0gY29udGVudC5tYXRjaCgvIGRhdGEtW14gPV0rKD1cIlteXCJdK1wiKT8gLykgfHwgY29udGVudC5tYXRjaCgvIHJlcGxhY2VkKFtePSBdKj0pLyk7XG4gICAgaWYgKHRyYXNoKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJPdXRwdXQgSFRNTCBjb250YWlucyB1bmV4cGVjdGVkIGRhdGEtIGF0dHJpYnV0ZXMgb3IgcmVwbGFjZWQgYXR0cmlidXRlc1wiLCB0cmFzaCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH07XG5cbiAgdmlld01vZGVsLmV4cG9ydEhUTUx0b1RleHRhcmVhID0gZnVuY3Rpb24odGV4dGFyZWFpZCkge1xuICAgICQodGV4dGFyZWFpZCkudmFsKHZpZXdNb2RlbC5leHBvcnRIVE1MKCkpO1xuICB9O1xuXG4gIHZpZXdNb2RlbC5leHBvcnRKU09OdG9UZXh0YXJlYSA9IGZ1bmN0aW9uKHRleHRhcmVhaWQpIHtcbiAgICAkKHRleHRhcmVhaWQpLnZhbCh2aWV3TW9kZWwuZXhwb3J0SlNPTigpKTtcbiAgfTtcblxuICB2aWV3TW9kZWwuaW1wb3J0SlNPTmZyb21UZXh0YXJlYSA9IGZ1bmN0aW9uKHRleHRhcmVhaWQpIHtcbiAgICB2aWV3TW9kZWwuaW1wb3J0SlNPTigkKHRleHRhcmVhaWQpLnZhbCgpKTtcbiAgfTtcblxuICB2aWV3TW9kZWwuZXhwb3J0TWV0YWRhdGEgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIganNvbiA9IGtvLnRvSlNPTih2aWV3TW9kZWwubWV0YWRhdGEpO1xuICAgIHJldHVybiBqc29uO1xuICB9O1xuXG4gIHZpZXdNb2RlbC5leHBvcnRKU09OID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGpzb24gPSBrby50b0pTT04odmlld01vZGVsLmNvbnRlbnQpO1xuICAgIHJldHVybiBqc29uO1xuICB9O1xuXG4gIHZpZXdNb2RlbC5leHBvcnRKUyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBrby50b0pTKHZpZXdNb2RlbC5jb250ZW50KTtcbiAgfTtcblxuICB2aWV3TW9kZWwuaW1wb3J0SlNPTiA9IGZ1bmN0aW9uKGpzb24pIHtcbiAgICB2YXIgdW53cmFwcGVkID0ga28udXRpbHMucGFyc2VKc29uKGpzb24pO1xuICAgIHZpZXdNb2RlbC5jb250ZW50Ll93cmFwKHVud3JhcHBlZCk7XG4gIH07XG5cbiAgdmlld01vZGVsLmV4cG9ydFRoZW1lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZsYXQgPSB7fTtcbiAgICB2YXIgbW9kID0gdmlld01vZGVsLmNvbnRlbnQoKS50aGVtZSgpO1xuXG4gICAgdmFyIF9leHBvcnQgPSBmdW5jdGlvbihwcmVmaXgsIGZsYXQsIG1vZCkge1xuICAgICAgZm9yICh2YXIgcHJvcCBpbiBtb2QpXG4gICAgICAgIGlmIChtb2QuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICB2YXIgYSA9IGtvLnV0aWxzLnVud3JhcE9ic2VydmFibGUobW9kW3Byb3BdKTtcbiAgICAgICAgICBpZiAoYSAhPT0gbnVsbCAmJiB0eXBlb2YgYSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgX2V4cG9ydChwcm9wICsgJy4nLCBmbGF0LCBhKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmxhdFtwcmVmaXggKyBwcm9wXSA9IGE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIF9leHBvcnQoJycsIGZsYXQsIG1vZCk7XG5cbiAgICB2YXIgb3V0cHV0ID0gJyc7XG4gICAgZm9yICh2YXIgcHJvcCBpbiBmbGF0KVxuICAgICAgaWYgKGZsYXQuaGFzT3duUHJvcGVydHkocHJvcCkgJiYgcHJvcCAhPSAndHlwZScpIHtcbiAgICAgICAgb3V0cHV0ICs9IHByb3AgKyBcIjogXCIgKyBmbGF0W3Byb3BdICsgXCI7XCIgKyBcIlxcblwiO1xuICAgICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcblxuICAvLyBtb3hpZW1hbmFnZXIgKG9yIGZpbGUgYnJvd3Nlci9pbWFnZWVkaXRvcikgZXh0ZW5zaW9uIHBvaW50cy5cbiAgLy8gSnVzdCBpbXBsZW1lbnQgZWRpdEltYWdlIG9yIGxpbmtEaWFsb2cgbWV0aG9kc1xuICAvLyB2aWV3TW9kZWwuZWRpdEltYWdlID0gZnVuY3Rpb24oc3JjLCBkb25lKSB7fSA6IGltcGxlbWVudCB0aGlzIG1ldGhvZCB0byBlbmFibGUgaW1hZ2UgZWRpdGluZyAoc3JjIGlzIGEgd2lydGFibGVPYnNlcnZhYmxlKS5cbiAgLy8gdmlld01vZGVsLmxpbmtEaWFsb2cgPSBmdW5jdGlvbigpIHt9OiBpbXBsZW1lbnQgdGhpcyBtZXRob2QgdXNpbmcgXCJ0aGlzXCIgdG8gZmluZCB0aGUgaW5wdXQgZWxlbWVudCAkKHRoaXMpLnZhbCBpcyBhIHdyaXRhYmxlT2JzZXJ2YWJsZS5cblxuICB2aWV3TW9kZWwubG9hZEltYWdlID0gZnVuY3Rpb24oaW1nKSB7XG4gICAgLy8gcHVzaCBpbWFnZSBhdCB0b3Agb2YgXCJyZWNlbnRcIiBnYWxsZXJ5XG4gICAgdmlld01vZGVsLmdhbGxlcnlSZWNlbnQudW5zaGlmdChpbWcpO1xuICAgIC8vIHNlbGVjdCByZWNlbnQgZ2FsbGVyeSB0YWJcbiAgICB2aWV3TW9kZWwuc2VsZWN0ZWRJbWFnZVRhYigwKTtcbiAgfTtcblxuICB2aWV3TW9kZWwuZGlhbG9nID0gZnVuY3Rpb24oc2VsZWN0b3IsIG9wdGlvbnMpIHtcbiAgICAkKHNlbGVjdG9yKS5kaWFsb2cob3B0aW9ucyk7XG4gIH07XG5cbiAgLy8gRHVtbXkgbG9nIG1ldGhvZCBvdmVycmlkZGVuIGJ5IGV4dGVuc2lvbnNcbiAgdmlld01vZGVsLmxvZyA9IGZ1bmN0aW9uKGNhdGVnb3J5LCBtc2cpIHtcbiAgICAvLyBjb25zb2xlLmxvZyhcInZpZXdNb2RlbC5sb2dcIiwgY2F0ZWdvcnksIG1zZyk7XG4gIH07XG5cbiAgLy8gYXV0b21hdGljYWxseSBsb2FkIHRoZSBnYWxsZXJ5IHdoZW4gdGhlIGdhbGxlcnkgdGFiIGlzIHNlbGVjdGVkXG4gIHZpZXdNb2RlbC5zZWxlY3RlZEltYWdlVGFiLnN1YnNjcmliZShmdW5jdGlvbihuZXdWYWx1ZSkge1xuICAgIGlmIChuZXdWYWx1ZSA9PSAxICYmIHZpZXdNb2RlbC5nYWxsZXJ5TG9hZGVkKCkgPT09IGZhbHNlKSB7XG4gICAgICB2aWV3TW9kZWwubG9hZEdhbGxlcnkoKTtcbiAgICB9XG4gIH0sIHZpZXdNb2RlbCwgJ2NoYW5nZScpO1xuXG4gIHZpZXdNb2RlbC5zZWxlY3RlZEltYWdlVGFiLnN1YnNjcmliZShmdW5jdGlvbihuZXdWYWx1ZSkge1xuICAgIGlmIChuZXdWYWx1ZSA9PSAyICYmIHZpZXdNb2RlbC5nYWxsZXJ5SG9saWRheUxvYWRlZCgpID09PSBmYWxzZSkge1xuICAgICAgdmlld01vZGVsLmxvYWRIb2xpZGF5R2FsbGVyeSgpO1xuICAgIH1cbiAgfSwgdmlld01vZGVsLCAnY2hhbmdlJyk7XG5cbiAgdmlld01vZGVsLnNlbGVjdGVkSW1hZ2VUYWIuc3Vic2NyaWJlKGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XG4gICAgaWYgKG5ld1ZhbHVlID09IDMgJiYgdmlld01vZGVsLmdhbGxlcnlOYXR1cmVMb2FkZWQoKSA9PT0gZmFsc2UpIHtcbiAgICAgIHZpZXdNb2RlbC5sb2FkTmF0dXJlR2FsbGVyeSgpO1xuICAgIH1cbiAgfSwgdmlld01vZGVsLCAnY2hhbmdlJyk7XG5cbiAgdmlld01vZGVsLnNlbGVjdGVkSW1hZ2VUYWIuc3Vic2NyaWJlKGZ1bmN0aW9uKG5ld1ZhbHVlKSB7XG4gICAgaWYgKG5ld1ZhbHVlID09IDQgJiYgdmlld01vZGVsLmdhbGxlcnlQcm9tb3Rpb25Mb2FkZWQoKSA9PT0gZmFsc2UpIHtcbiAgICAgIHZpZXdNb2RlbC5sb2FkUHJvbW90aW9uR2FsbGVyeSgpO1xuICAgIH1cbiAgfSwgdmlld01vZGVsLCAnY2hhbmdlJyk7XG5cblxuICAvLyBTYXZlIHRlbXBsYXRlIChhbG1vc3Qgc2FtZSBhcyBzYXZlIGRyYWZ0KVxuICB2YXIga2V5ID0gZ2xvYmFsLndpbmRvdy5sb2NhdGlvbi5ocmVmLnN1YnN0cihnbG9iYWwud2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihcIiNcIikgKyAxKTtcblxuICAvLyBTZXQgY3VycmVudCBkYXRlXG4gIHZhciBkID0gbmV3IERhdGUoKTtcblxuICB2YXIgbW9udGggPSBkLmdldE1vbnRoKCkrMTtcbiAgdmFyIGRheSA9IGQuZ2V0RGF0ZSgpO1xuXG4gIHZhciBjdXJyZW50RGF0ZSA9IGQuZ2V0RnVsbFllYXIoKSArICcvJyArXG4gICgoJycrbW9udGgpLmxlbmd0aDwyID8gJzAnIDogJycpICsgbW9udGggKyAnLycgK1xuICAoKCcnK2RheSkubGVuZ3RoPDIgPyAnMCcgOiAnJykgKyBkYXk7XG5cbiAgLy8gR2V0IHRlbXBsYXRlc1xuICBpZiAoZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0ZW1wbGF0ZXMnKSA9PT0gbnVsbCAmJiBpbml0aWFsVGVtcGxhdGVzLmxlbmd0aCA9PSAwKXtcbiAgICBmb3IgKGk9MDtpPGRlZmF1bHRUZW1wbGF0ZXMubGVuZ3RoO2krKyl7XG4gICAgICBpbml0aWFsVGVtcGxhdGVzLnB1c2goZGVmYXVsdFRlbXBsYXRlc1tpXSk7XG4gICAgfVxuICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGVtcGxhdGVzJywgSlNPTi5zdHJpbmdpZnkoaW5pdGlhbFRlbXBsYXRlcykpO1xuICB9XG5cbiAgdmFyIHRlbXBsYXRlT2JqID0gSlNPTi5wYXJzZShnbG9iYWwubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RlbXBsYXRlcycpKTtcbiAgdmFyIG1kO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXBsYXRlT2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHRlbXBsYXRlS2V5cyA9IHRlbXBsYXRlT2JqW2ldLmtleTtcbiAgICBtZCA9IGdsb2JhbC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbWV0YWRhdGEtJyt0ZW1wbGF0ZUtleXMpO1xuICAgIGlmICh0eXBlb2YgbWQgPT0gJ3N0cmluZycpIHtcbiAgICAgIGluaXRpYWxUZW1wbGF0ZXMucHVzaChKU09OLnBhcnNlKG1kKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiSWdub3Jpbmcgc2F2ZWQga2V5XCIsIHRlbXBsYXRlT2JqW2ldLCBcInR5cGVcIiwgdHlwZW9mIG1kLCBtZCk7XG4gICAgfVxuICB9XG5cbiAgLy8gU3Vic2NyaWJ0aW9uc1xuICB2aWV3TW9kZWwuZWRpdHMuc3Vic2NyaWJlKGZ1bmN0aW9uKG5ld0VkaXRzKSB7XG4gICAgdmFyIGV4aXN0aW5nRWRpdHMgPSBKU09OLnBhcnNlKGdsb2JhbC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWRpdHMnKSk7XG4gICAgaWYoZXhpc3RpbmdFZGl0cyA9PSBudWxsKXtcbiAgICAgIGV4aXN0aW5nRWRpdHMgPSBbXTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdFZGl0cy5sZW5ndGg7IGkrKykge1xuICAgICAgZXhpc3RpbmdFZGl0cy5wdXNoKG5ld0VkaXRzW2ldLmtleSk7XG4gICAgICBnbG9iYWwubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ21ldGFkYXRhLScrbmV3RWRpdHNbaV0ua2V5LCBrby50b0pTT04obmV3RWRpdHNbaV0pKTtcbiAgICB9XG4gICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlZGl0cycsIGtvLnRvSlNPTihleGlzdGluZ0VkaXRzKSk7XG4gIH0pO1xuXG4gIHZpZXdNb2RlbC5jYW1wYWlnbnMuc3Vic2NyaWJlKGZ1bmN0aW9uKG5ld0NhbXBhaWducykge1xuICAgIHZhciBleGlzdGluZ0NhbXBhaWducyA9IEpTT04ucGFyc2UoZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYW1wYWlnbnMnKSk7XG4gICAgaWYoZXhpc3RpbmdDYW1wYWlnbnMgPT0gbnVsbCl7XG4gICAgICBleGlzdGluZ0NhbXBhaWducyA9IFtdO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld0NhbXBhaWducy5sZW5ndGg7IGkrKykge1xuICAgICAgZXhpc3RpbmdDYW1wYWlnbnMucHVzaChuZXdDYW1wYWlnbnNbaV0ua2V5KTtcbiAgICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbWV0YWRhdGEtJytuZXdDYW1wYWlnbnNbaV0ua2V5LCBrby50b0pTT04obmV3Q2FtcGFpZ25zW2ldKSk7XG4gICAgfVxuICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FtcGFpZ25zJywga28udG9KU09OKGV4aXN0aW5nQ2FtcGFpZ25zKSk7XG4gIH0pO1xuXG4gIHZpZXdNb2RlbC50ZW1wbGF0ZXMuc3Vic2NyaWJlKGZ1bmN0aW9uKG5ld1RlbXBsYXRlcykge1xuICAgIHZhciBleGlzdGluZ1RlbXBsYXRlcyA9IEpTT04ucGFyc2UoZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0ZW1wbGF0ZXMnKSk7XG4gICAgdmFyIHRlbXBsYXRlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3VGVtcGxhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0ZW1wbGF0ZXMucHVzaChuZXdUZW1wbGF0ZXNbaV0pO1xuICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdtZXRhZGF0YS0nK25ld1RlbXBsYXRlc1tpXS5rZXksIGtvLnRvSlNPTihuZXdUZW1wbGF0ZXNbaV0pKTtcbiAgICB9XG4gICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0ZW1wbGF0ZXMnLCBrby50b0pTT04odGVtcGxhdGVzKSk7XG4gIH0pO1xuXG5cbiAgLy8gRnVuY3Rpb25zXG5cbiAgLy8gU2F2ZSB1c2VyIHRlbXBhbHRlXG4gIHZpZXdNb2RlbC5uZXdUZW1wbGF0ZSA9IGZ1bmN0aW9uKHNob3J0dG1wbG5hbWUpIHtcbiAgICB2YXIgdGhpc1RlbXBsYXRlID0gSlNPTi5wYXJzZShnbG9iYWwubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21ldGFkYXRhLScra2V5KSk7XG4gICAgdmFyIHRoaXNLZXkgPSB0aGlzVGVtcGxhdGUua2V5O1xuICAgIHZhciB0aGlzTmFtZSA9IHRoaXNUZW1wbGF0ZS5uYW1lO1xuICAgIHZhciB0aGlzVGVtcGxhdGVTcmMgPSB0aGlzVGVtcGxhdGUudGVtcGxhdGU7XG4gICAgdmFyIHJuZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA3KTtcbiAgICB2YXIgdGVtcGxhdGUgPSAndGVtcGxhdGVzLycrdGhpc05hbWUrJy90ZW1wbGF0ZS0nK3RoaXNOYW1lKycuaHRtbCc7XG5cbiAgICAvLyBDaGVjayBpZiBcImNvZGUgeW91ciBvd25cIiBvciBcInJlZ3VsYXIgdGVtcGxhdGVcIlxuICAgIHZhciBuZXdFbnRyeTtcbiAgICBpZigkKCcjbWFpbi13eXNpd3lnLWFyZWEnKS5odG1sKCkubGVuZ3RoICYmICQoJy5jb2RlLWVkaXRvcicpLmxlbmd0aCl7XG4gICAgICBuZXdFbnRyeSA9IHsgY3JlYXRlZDogY3VycmVudERhdGUsIGtleTogcm5kLCB0aXRsZTogJCgnI3RlbXBsYXRlTmFtZScpLnZhbCgpLCBuYW1lOiB0aGlzTmFtZSwgdGVtcGxhdGU6IHRoaXNUZW1wbGF0ZVNyYywgZGVzYzogJ0NvZGUgeW91ciBvd24nIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld0VudHJ5ID0geyBjcmVhdGVkOiBjdXJyZW50RGF0ZSwga2V5OiBybmQsIHRpdGxlOiAkKCcjdGVtcGxhdGVOYW1lJykudmFsKCksIG5hbWU6IHRoaXNOYW1lLCB0ZW1wbGF0ZTogdGhpc1RlbXBsYXRlU3JjLCBkZXNjOiAkKCcjdGVtcGxhdGVEZXNjJykudmFsKCkgfTtcbiAgICB9XG5cbiAgICB2YXIgc2F2ZWRDb250ZW50ID0gZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGVtcGxhdGUtXCIgKyB0aGlzS2V5KTtcbiAgICB2YXIgbmV3Q29udGVudCA9IHZpZXdNb2RlbC5leHBvcnRKU09OKCk7XG5cbiAgICAvLyBDaGVjayBpZiB0ZW1wbGF0ZSBoYXMgYmVlbiBtb2RpZmllZCBvciBub3RcbiAgICBpZiAoc2F2ZWRDb250ZW50ICE9IG5ld0NvbnRlbnQpe1xuICAgICAgLy8gRGVsZXRlIGRyYWZ0IHdpdGggc2FtZSBrZXkgKHRvIGF2b2lkIGR1cGxpY2F0ZXMpXG4gICAgICB2YXIgZWRpdHM7XG4gICAgICB2YXIgbG9hZEVkaXRzO1xuXG4gICAgICBpZihKU09OLnBhcnNlKGdsb2JhbC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWRpdHMnKSkgPT0gbnVsbCl7XG4gICAgICAgIGVkaXRzID0gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2FkRWRpdHMgPSBKU09OLnBhcnNlKGdsb2JhbC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWRpdHMnKSk7XG4gICAgICAgIGlmKGxvYWRFZGl0cy5pbmRleE9mKHRoaXNLZXkpID4gLTEpe1xuICAgICAgICBlZGl0cyA9IGxvYWRFZGl0cy5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEgIT09IHRoaXNLZXk7fSk7XG5cbiAgICAgICAgdmlld01vZGVsLmVkaXRzLnNwbGljZSh0aGlzS2V5LCAxKTtcbiAgICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZWRpdHNcIiwgSlNPTi5zdHJpbmdpZnkoZWRpdHMpKTtcbiAgICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwibWV0YWRhdGEtXCIgKyB0aGlzS2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiBvbmUgb2YgdGhlIGRlZmF1bHQgdGVtcGxhdGVzIChtYXkgbmVlZCB0byBhZGQgbW9yZSBrZXlzKVxuICAgICAgaWYodGhpc0tleSA9PSAnMDAwMDAwMScgfHwgdGhpc0tleSA9PSAnMDAwMDAwMicgfHwgdGhpc0tleSA9PSAnMDAwMDAwMycpe1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzS2V5KTtcbiAgICAgICAgdGhpc0tleSA9IHJuZDtcbiAgICAgICAgY29uc29sZS5sb2codGhpc0tleSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzS2V5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ251Jyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIHRlbXBsYXRlXG4gICAgICB2aWV3TW9kZWwudGVtcGxhdGVzLnB1c2gobmV3RW50cnkpO1xuICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGVtcGxhdGUtXCIgKyB0aGlzS2V5LCB2aWV3TW9kZWwuZXhwb3J0SlNPTigpKTtcbiAgICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm1ldGFkYXRhLVwiICsgdGhpc0tleSwgSlNPTi5zdHJpbmdpZnkobmV3RW50cnkpKTtcbiAgICAgICQoJyNzYXZlLXRlbXBsYXRlLW1vZGFsJykubW9kYWwoJ3RvZ2dsZScpO1xuICAgICAgJCgnI3RlbXBsYXRlLXNhdmVkLW1vZGFsJykubW9kYWwoJ3RvZ2dsZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCcjc2F2ZS10ZW1wbGF0ZS1tb2RhbCcpLm1vZGFsKCd0b2dnbGUnKTtcbiAgICAgICQoJyN0ZW1wbGF0ZS1ub3RjaGFuZ2VkLW1vZGFsJykubW9kYWwoJ3Nob3cnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgLy8gTG9hZCBuZXcgdGVtcGxhdGVcbiAgdmlld01vZGVsLm5ld0VkaXQgPSBmdW5jdGlvbihzaG9ydHRtcGxuYW1lLCBpbmRleCkge1xuICAgIHZhciB0aGlzVGVtcGxhdGUgPSBKU09OLnBhcnNlKGdsb2JhbC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbWV0YWRhdGEtJytrZXkpKTtcbiAgICB2YXIgdGhpc0tleSA9IHRoaXNUZW1wbGF0ZS5rZXk7XG4gICAgdmFyIHRoaXNOYW1lID0gdGhpc1RlbXBsYXRlLm5hbWU7XG4gICAgdmFyIHRoaXNUZW1wbGF0ZVNyYyA9IHRoaXNUZW1wbGF0ZS50ZW1wbGF0ZTtcbiAgICB2YXIgcm5kID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDcpO1xuICAgIHZhciB0ZW1wbGF0ZSA9ICd0ZW1wbGF0ZXMvJytzaG9ydHRtcGxuYW1lKycvdGVtcGxhdGUtJytzaG9ydHRtcGxuYW1lKycuaHRtbCc7XG5cbiAgICAvLyBEZWxldGUgZHJhZnQgd2l0aCBzYW1lIGtleSAodG8gYXZvaWQgZHVwbGljYXRlcylcbiAgICB2YXIgZWRpdHM7XG4gICAgdmFyIGxvYWRFZGl0cztcblxuICAgIGlmKEpTT04ucGFyc2UoZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlZGl0cycpKSA9PSBudWxsKXtcbiAgICAgIGVkaXRzID0gW107XG4gICAgICB2aWV3TW9kZWwuZWRpdHMucHVzaCh7IGNyZWF0ZWQ6IGN1cnJlbnREYXRlLCB0aXRsZTogaW5kZXgudGl0bGUsIGtleTogcm5kLCBuYW1lOiBzaG9ydHRtcGxuYW1lLCB0ZW1wbGF0ZTogdGVtcGxhdGUsIGRlc2M6ICdEcmFmdCcgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvYWRFZGl0cyA9IEpTT04ucGFyc2UoZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlZGl0cycpKTtcbiAgICAgIGlmKGxvYWRFZGl0cy5pbmRleE9mKHRoaXNLZXkpID4gLTEpe1xuICAgICAgZWRpdHMgPSBsb2FkRWRpdHMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhICE9PSB0aGlzS2V5O30pO1xuXG4gICAgICB2aWV3TW9kZWwuZWRpdHMuc3BsaWNlKHRoaXNLZXksIDEpO1xuICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZWRpdHNcIiwgSlNPTi5zdHJpbmdpZnkoZWRpdHMpKTtcbiAgICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcIm1ldGFkYXRhLVwiICsgdGhpc0tleSk7XG4gICAgICB9XG4gICAgICB2aWV3TW9kZWwuZWRpdHMucHVzaCh7IGNyZWF0ZWQ6IGN1cnJlbnREYXRlLCB0aXRsZTogaW5kZXgudGl0bGUsIGtleToga2V5LCBuYW1lOiBzaG9ydHRtcGxuYW1lLCB0ZW1wbGF0ZTogdGVtcGxhdGUsIGRlc2M6ICdEcmFmdCcgfSk7XG4gICAgfSAgICBcblxuICAgIGdsb2JhbC5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgfTtcblxuICAvLyBTYXZlIHNlbnQgY2FtcGFpZ25cbiAgdmlld01vZGVsLnNlbmRDYW1wYWlnbiA9IGZ1bmN0aW9uKHNob3J0dG1wbG5hbWUpIHtcbiAgICB2YXIgdGhpc1RlbXBsYXRlID0gSlNPTi5wYXJzZShnbG9iYWwubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21ldGFkYXRhLScra2V5KSk7XG4gICAgdmFyIHRoaXNLZXkgPSB0aGlzVGVtcGxhdGUua2V5O1xuICAgIHZhciB0aGlzTmFtZSA9IHRoaXNUZW1wbGF0ZS5uYW1lO1xuICAgIHZhciB0aGlzVGVtcGxhdGVTcmMgPSB0aGlzVGVtcGxhdGUudGVtcGxhdGU7XG4gICAgdmFyIHJuZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA3KTtcbiAgICB2YXIgdGVtcGxhdGUgPSAndGVtcGxhdGVzLycrdGhpc05hbWUrJy90ZW1wbGF0ZS0nK3RoaXNOYW1lKycuaHRtbCc7XG4gICAgdmFyIGNhbXBhaWduVGl0bGU7XG4gICAgY29uc29sZS5sb2codGhpc0tleSk7XG5cbiAgICBpZigkKCcjY2FtcGFpZ25OYW1lJykubGVuZ3RoKXtcbiAgICAgIGNhbXBhaWduVGl0bGUgPSAkKCcjY2FtcGFpZ25OYW1lJykudmFsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbXBhaWduVGl0bGUgPSQoJyNmcm9tTmFtZScpLnZhbCgpO1xuICAgIH1cbiAgICBcbiAgICB2YXIgc2F2ZWRDb250ZW50ID0gZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGVtcGxhdGUtXCIgKyB0aGlzS2V5KTtcbiAgICB2YXIgbmV3Q29udGVudCA9IHZpZXdNb2RlbC5leHBvcnRKU09OKCk7XG5cbiAgICAvLyBEZWxldGUgZHJhZnQgd2l0aCBzYW1lIGtleSAodG8gYXZvaWQgZHVwbGljYXRlcylcbiAgICB2YXIgZWRpdHM7XG4gICAgdmFyIGxvYWRFZGl0cztcblxuICAgIGlmKEpTT04ucGFyc2UoZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlZGl0cycpKSA9PSBudWxsKXtcbiAgICAgIGVkaXRzID0gW107XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvYWRFZGl0cyA9IEpTT04ucGFyc2UoZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlZGl0cycpKTtcbiAgICAgIGlmKGxvYWRFZGl0cy5pbmRleE9mKHRoaXNLZXkpID4gLTEpe1xuICAgICAgZWRpdHMgPSBsb2FkRWRpdHMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhICE9PSB0aGlzS2V5O30pO1xuXG4gICAgICB2aWV3TW9kZWwuZWRpdHMuc3BsaWNlKHRoaXNLZXksIDEpO1xuICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZWRpdHNcIiwgSlNPTi5zdHJpbmdpZnkoZWRpdHMpKTtcbiAgICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcIm1ldGFkYXRhLVwiICsgdGhpc0tleSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgY2FtcGFpZ24gb3IgdGVtcGxhdGUgd2l0aCBzYW1lIGtleSBleGlzdHMgKHRvIGF2b2lkIGR1cGxpY2F0ZXMpXG4gICAgdmFyIGNhbXBhaWducztcbiAgICB2YXIgbG9hZENhbXBhaWducztcbiAgICB2YXIgbG9hZFRlbXBsYXRlcyA9IEpTT04ucGFyc2UoZ2xvYmFsLmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0ZW1wbGF0ZXMnKSk7XG4gICAgaWYgKGdsb2JhbC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FtcGFpZ25zJykgPT0gbnVsbCl7XG4gICAgICBjYW1wYWlnbnMgPSBbXTtcbiAgXG4gICAgICBmb3IgKGk9MDtpPGxvYWRUZW1wbGF0ZXMubGVuZ3RoO2krKyl7XG4gICAgICAgIGlmKGxvYWRUZW1wbGF0ZXNbaV0ua2V5LmluZGV4T2YodGhpc0tleSkgPiAtMSl7XG4gICAgICAgICAgdGhpc0tleSA9IHJuZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2FkQ2FtcGFpZ25zID0gSlNPTi5wYXJzZShnbG9iYWwubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhbXBhaWducycpKTtcbiAgICAgIFxuICAgICAgaWYobG9hZENhbXBhaWducy5pbmRleE9mKHRoaXNLZXkpID4gLTEpe1xuICAgICAgICB0aGlzS2V5ID0gcm5kO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGk9MDtpPGxvYWRUZW1wbGF0ZXMubGVuZ3RoO2krKyl7XG4gICAgICAgIGlmKGxvYWRUZW1wbGF0ZXNbaV0ua2V5LmluZGV4T2YodGhpc0tleSkgPiAtMSl7XG4gICAgICAgICAgdGhpc0tleSA9IHJuZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2FtcGFpZ25zID0gbG9hZENhbXBhaWducztcbiAgICB9XG5cblxuICAgIGNvbnNvbGUubG9nKHRoaXNLZXkpO1xuXG4gICAgLy8gQ2hlY2sgaWYgXCJjb2RlIHlvdXIgb3duXCIgb3IgXCJyZWd1bGFyIHRlbXBsYXRlXCJcbiAgICB2YXIgbmV3RW50cnk7XG4gICAgaWYoJCgnI21haW4td3lzaXd5Zy1hcmVhJykuaHRtbCgpLmxlbmd0aCAmJiAkKCcuY29kZS1lZGl0b3InKS5sZW5ndGgpe1xuICAgICAgbmV3RW50cnkgPSB7IGNyZWF0ZWQ6IGN1cnJlbnREYXRlLCBrZXk6IHRoaXNLZXksIHRpdGxlOiBjYW1wYWlnblRpdGxlLCBuYW1lOiB0aGlzTmFtZSwgdGVtcGxhdGU6IHRoaXNUZW1wbGF0ZVNyYywgZGVzYzogJ0NvZGUgeW91ciBvd24nIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld0VudHJ5ID0geyBjcmVhdGVkOiBjdXJyZW50RGF0ZSwga2V5OiB0aGlzS2V5LCB0aXRsZTogY2FtcGFpZ25UaXRsZSwgbmFtZTogdGhpc05hbWUsIHRlbXBsYXRlOiB0aGlzVGVtcGxhdGVTcmMsIGRlc2M6ICQoJyNjYW1wYWlnblN1YmplY3QnKS52YWwoKSB9O1xuICAgIH1cbiAgICBcbiAgICBnbG9iYWwubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjYW1wYWlnbnNcIiwgSlNPTi5zdHJpbmdpZnkoY2FtcGFpZ25zKSk7XG5cbiAgICAvLyBTdG9yZSBjYW1wYWlnblxuICAgIHZpZXdNb2RlbC5jYW1wYWlnbnMucHVzaChuZXdFbnRyeSk7XG4gICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGVtcGxhdGUtXCIgKyB0aGlzS2V5LCB2aWV3TW9kZWwuZXhwb3J0SlNPTigpKTtcbiAgICBnbG9iYWwubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtZXRhZGF0YS1cIiArIHRoaXNLZXksIEpTT04uc3RyaW5naWZ5KG5ld0VudHJ5KSk7XG4gIH07XG5cbiAgcmV0dXJuIHZpZXdNb2RlbDtcblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluaXRpYWxpemVFZGl0b3I7XG4iXX0=
